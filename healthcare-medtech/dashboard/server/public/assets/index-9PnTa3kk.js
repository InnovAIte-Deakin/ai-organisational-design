var Mo=Object.defineProperty;var po=o=>{throw TypeError(o)};var Ro=(o,s,i)=>s in o?Mo(o,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[s]=i;var Ut=(o,s,i)=>Ro(o,typeof s!="symbol"?s+"":s,i),Ns=(o,s,i)=>s.has(o)||po("Cannot "+i);var Ct=(o,s,i)=>(Ns(o,s,"read from private field"),i?i.call(o):s.get(o)),tn=(o,s,i)=>s.has(o)?po("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(o):s.set(o,i),qt=(o,s,i,a)=>(Ns(o,s,"write to private field"),a?a.call(o,i):s.set(o,i),i),mn=(o,s,i)=>(Ns(o,s,"access private method"),i);var As=(o,s,i,a)=>({set _(d){qt(o,s,d,i)},get _(){return Ct(o,s,a)}});function _mergeNamespaces(o,s){for(var i=0;i<s.length;i++){const a=s[i];if(typeof a!="string"&&!Array.isArray(a)){for(const d in a)if(d!=="default"&&!(d in o)){const _=Object.getOwnPropertyDescriptor(a,d);_&&Object.defineProperty(o,d,_.get?_:{enumerable:!0,get:()=>a[d]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const _ of d)if(_.type==="childList")for(const b of _.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&a(b)}).observe(document,{childList:!0,subtree:!0});function i(d){const _={};return d.integrity&&(_.integrity=d.integrity),d.referrerPolicy&&(_.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?_.credentials="include":d.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function a(d){if(d.ep)return;d.ep=!0;const _=i(d);fetch(d.href,_)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var s=o.default;if(typeof s=="function"){var i=function a(){return this instanceof a?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var d=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(i,a,d.get?d:{enumerable:!0,get:function(){return o[a]}})}),i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(o){return o===null||typeof o!="object"?null:(o=z$1&&o[z$1]||o["@@iterator"],typeof o=="function"?o:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(o,s,i){this.props=o,this.context=s,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(o,s){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,s,"setState")};E$1.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(o,s,i){this.props=o,this.context=s,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(o,s,i){var a,d={},_=null,b=null;if(s!=null)for(a in s.ref!==void 0&&(b=s.ref),s.key!==void 0&&(_=""+s.key),s)J.call(s,a)&&!L$1.hasOwnProperty(a)&&(d[a]=s[a]);var $=arguments.length-2;if($===1)d.children=i;else if(1<$){for(var nt=Array($),tt=0;tt<$;tt++)nt[tt]=arguments[tt+2];d.children=nt}if(o&&o.defaultProps)for(a in $=o.defaultProps,$)d[a]===void 0&&(d[a]=$[a]);return{$$typeof:l$2,type:o,key:_,ref:b,props:d,_owner:K$1.current}}function N$1(o,s){return{$$typeof:l$2,type:o.type,key:s,ref:o.ref,props:o.props,_owner:o._owner}}function O$1(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$2}function escape(o){var s={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(i){return s[i]})}var P$1=/\/+/g;function Q$1(o,s){return typeof o=="object"&&o!==null&&o.key!=null?escape(""+o.key):s.toString(36)}function R$1(o,s,i,a,d){var _=typeof o;(_==="undefined"||_==="boolean")&&(o=null);var b=!1;if(o===null)b=!0;else switch(_){case"string":case"number":b=!0;break;case"object":switch(o.$$typeof){case l$2:case n$2:b=!0}}if(b)return b=o,d=d(b),o=a===""?"."+Q$1(b,0):a,I$1(d)?(i="",o!=null&&(i=o.replace(P$1,"$&/")+"/"),R$1(d,s,i,"",function(tt){return tt})):d!=null&&(O$1(d)&&(d=N$1(d,i+(!d.key||b&&b.key===d.key?"":(""+d.key).replace(P$1,"$&/")+"/")+o)),s.push(d)),1;if(b=0,a=a===""?".":a+":",I$1(o))for(var $=0;$<o.length;$++){_=o[$];var nt=a+Q$1(_,$);b+=R$1(_,s,i,nt,d)}else if(nt=A$1(o),typeof nt=="function")for(o=nt.call(o),$=0;!(_=o.next()).done;)_=_.value,nt=a+Q$1(_,$++),b+=R$1(_,s,i,nt,d);else if(_==="object")throw s=String(o),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return b}function S$1(o,s,i){if(o==null)return o;var a=[],d=0;return R$1(o,a,"","",function(_){return s.call(i,_,d++)}),a}function T$1(o){if(o._status===-1){var s=o._result;s=s(),s.then(function(i){(o._status===0||o._status===-1)&&(o._status=1,o._result=i)},function(i){(o._status===0||o._status===-1)&&(o._status=2,o._result=i)}),o._status===-1&&(o._status=0,o._result=s)}if(o._status===1)return o._result.default;throw o._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(o,s,i){S$1(o,function(){s.apply(this,arguments)},i)},count:function(o){var s=0;return S$1(o,function(){s++}),s},toArray:function(o){return S$1(o,function(s){return s})||[]},only:function(o){if(!O$1(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(o,s,i){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var a=C$1({},o.props),d=o.key,_=o.ref,b=o._owner;if(s!=null){if(s.ref!==void 0&&(_=s.ref,b=K$1.current),s.key!==void 0&&(d=""+s.key),o.type&&o.type.defaultProps)var $=o.type.defaultProps;for(nt in s)J.call(s,nt)&&!L$1.hasOwnProperty(nt)&&(a[nt]=s[nt]===void 0&&$!==void 0?$[nt]:s[nt])}var nt=arguments.length-2;if(nt===1)a.children=i;else if(1<nt){$=Array(nt);for(var tt=0;tt<nt;tt++)$[tt]=arguments[tt+2];a.children=$}return{$$typeof:l$2,type:o.type,key:d,ref:_,props:a,_owner:b}};react_production_min.createContext=function(o){return o={$$typeof:u$1,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t$1,_context:o},o.Consumer=o};react_production_min.createElement=M$1;react_production_min.createFactory=function(o){var s=M$1.bind(null,o);return s.type=o,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$1,render:o}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(o){return{$$typeof:y,_payload:{_status:-1,_result:o},_init:T$1}};react_production_min.memo=function(o,s){return{$$typeof:x,type:o,compare:s===void 0?null:s}};react_production_min.startTransition=function(o){var s=V$1.transition;V$1.transition={};try{o()}finally{V$1.transition=s}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(o,s){return U$1.current.useCallback(o,s)};react_production_min.useContext=function(o){return U$1.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$1.current.useDeferredValue(o)};react_production_min.useEffect=function(o,s){return U$1.current.useEffect(o,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(o,s,i){return U$1.current.useImperativeHandle(o,s,i)};react_production_min.useInsertionEffect=function(o,s){return U$1.current.useInsertionEffect(o,s)};react_production_min.useLayoutEffect=function(o,s){return U$1.current.useLayoutEffect(o,s)};react_production_min.useMemo=function(o,s){return U$1.current.useMemo(o,s)};react_production_min.useReducer=function(o,s,i){return U$1.current.useReducer(o,s,i)};react_production_min.useRef=function(o){return U$1.current.useRef(o)};react_production_min.useState=function(o){return U$1.current.useState(o)};react_production_min.useSyncExternalStore=function(o,s,i){return U$1.current.useSyncExternalStore(o,s,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(o,s,i){var a,d={},_=null,b=null;i!==void 0&&(_=""+i),s.key!==void 0&&(_=""+s.key),s.ref!==void 0&&(b=s.ref);for(a in s)m$2.call(s,a)&&!p$2.hasOwnProperty(a)&&(d[a]=s[a]);if(o&&o.defaultProps)for(a in s=o.defaultProps,s)d[a]===void 0&&(d[a]=s[a]);return{$$typeof:k$1,type:o,key:_,ref:b,props:d,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function s(Ot,At){var Ft=Ot.length;Ot.push(At);e:for(;0<Ft;){var Bt=Ft-1>>>1,Wt=Ot[Bt];if(0<d(Wt,At))Ot[Bt]=At,Ot[Ft]=Wt,Ft=Bt;else break e}}function i(Ot){return Ot.length===0?null:Ot[0]}function a(Ot){if(Ot.length===0)return null;var At=Ot[0],Ft=Ot.pop();if(Ft!==At){Ot[0]=Ft;e:for(var Bt=0,Wt=Ot.length,sn=Wt>>>1;Bt<sn;){var Jt=2*(Bt+1)-1,Kt=Ot[Jt],rn=Jt+1,zt=Ot[rn];if(0>d(Kt,Ft))rn<Wt&&0>d(zt,Kt)?(Ot[Bt]=zt,Ot[rn]=Ft,Bt=rn):(Ot[Bt]=Kt,Ot[Jt]=Ft,Bt=Jt);else if(rn<Wt&&0>d(zt,Ft))Ot[Bt]=zt,Ot[rn]=Ft,Bt=rn;else break e}}return At}function d(Ot,At){var Ft=Ot.sortIndex-At.sortIndex;return Ft!==0?Ft:Ot.id-At.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;o.unstable_now=function(){return _.now()}}else{var b=Date,$=b.now();o.unstable_now=function(){return b.now()-$}}var nt=[],tt=[],et=1,g=null,c=3,j=!1,_e=!1,rt=!1,st=typeof setTimeout=="function"?setTimeout:null,ot=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function at(Ot){for(var At=i(tt);At!==null;){if(At.callback===null)a(tt);else if(At.startTime<=Ot)a(tt),At.sortIndex=At.expirationTime,s(nt,At);else break;At=i(tt)}}function lt(Ot){if(rt=!1,at(Ot),!_e)if(i(nt)!==null)_e=!0,gt(ut);else{var At=i(tt);At!==null&&vt(lt,At.startTime-Ot)}}function ut(Ot,At){_e=!1,rt&&(rt=!1,ot(ft),ft=-1),j=!0;var Ft=c;try{for(at(At),g=i(nt);g!==null&&(!(g.expirationTime>At)||Ot&&!yt());){var Bt=g.callback;if(typeof Bt=="function"){g.callback=null,c=g.priorityLevel;var Wt=Bt(g.expirationTime<=At);At=o.unstable_now(),typeof Wt=="function"?g.callback=Wt:g===i(nt)&&a(nt),at(At)}else a(nt);g=i(nt)}if(g!==null)var sn=!0;else{var Jt=i(tt);Jt!==null&&vt(lt,Jt.startTime-At),sn=!1}return sn}finally{g=null,c=Ft,j=!1}}var ct=!1,dt=null,ft=-1,ht=5,mt=-1;function yt(){return!(o.unstable_now()-mt<ht)}function Tt(){if(dt!==null){var Ot=o.unstable_now();mt=Ot;var At=!0;try{At=dt(!0,Ot)}finally{At?St():(ct=!1,dt=null)}}else ct=!1}var St;if(typeof it=="function")St=function(){it(Tt)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,wt=xt.port2;xt.port1.onmessage=Tt,St=function(){wt.postMessage(null)}}else St=function(){st(Tt,0)};function gt(Ot){dt=Ot,ct||(ct=!0,St())}function vt(Ot,At){ft=st(function(){Ot(o.unstable_now())},At)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Ot){Ot.callback=null},o.unstable_continueExecution=function(){_e||j||(_e=!0,gt(ut))},o.unstable_forceFrameRate=function(Ot){0>Ot||125<Ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ht=0<Ot?Math.floor(1e3/Ot):5},o.unstable_getCurrentPriorityLevel=function(){return c},o.unstable_getFirstCallbackNode=function(){return i(nt)},o.unstable_next=function(Ot){switch(c){case 1:case 2:case 3:var At=3;break;default:At=c}var Ft=c;c=At;try{return Ot()}finally{c=Ft}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Ot,At){switch(Ot){case 1:case 2:case 3:case 4:case 5:break;default:Ot=3}var Ft=c;c=Ot;try{return At()}finally{c=Ft}},o.unstable_scheduleCallback=function(Ot,At,Ft){var Bt=o.unstable_now();switch(typeof Ft=="object"&&Ft!==null?(Ft=Ft.delay,Ft=typeof Ft=="number"&&0<Ft?Bt+Ft:Bt):Ft=Bt,Ot){case 1:var Wt=-1;break;case 2:Wt=250;break;case 5:Wt=1073741823;break;case 4:Wt=1e4;break;default:Wt=5e3}return Wt=Ft+Wt,Ot={id:et++,callback:At,priorityLevel:Ot,startTime:Ft,expirationTime:Wt,sortIndex:-1},Ft>Bt?(Ot.sortIndex=Ft,s(tt,Ot),i(nt)===null&&Ot===i(tt)&&(rt?(ot(ft),ft=-1):rt=!0,vt(lt,Ft-Bt))):(Ot.sortIndex=Wt,s(nt,Ot),_e||j||(_e=!0,gt(ut))),Ot},o.unstable_shouldYield=yt,o.unstable_wrapCallback=function(Ot){var At=c;return function(){var Ft=c;c=At;try{return Ot.apply(this,arguments)}finally{c=Ft}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(o,s){ha(o,s),ha(o+"Capture",s)}function ha(o,s){for(ea[o]=s,o=0;o<s.length;o++)da.add(s[o])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(o){return ja.call(ma,o)?!0:ja.call(la,o)?!1:ka.test(o)?ma[o]=!0:(la[o]=!0,!1)}function pa(o,s,i,a){if(i!==null&&i.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa(o,s,i,a){if(s===null||typeof s>"u"||pa(o,s,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(o,s,i,a,d,_,b){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=d,this.mustUseProperty=i,this.propertyName=o,this.type=s,this.sanitizeURL=_,this.removeEmptyString=b}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z[o]=new v(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];z[s]=new v(s,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z[o]=new v(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z[o]=new v(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z[o]=new v(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z[o]=new v(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(ra,sa);z[s]=new v(s,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(ra,sa);z[s]=new v(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(ra,sa);z[s]=new v(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta(o,s,i,a){var d=z.hasOwnProperty(s)?z[s]:null;(d!==null?d.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,i,d,a)&&(i=null),a||d===null?oa(s)&&(i===null?o.removeAttribute(s):o.setAttribute(s,""+i)):d.mustUseProperty?o[d.propertyName]=i===null?d.type===3?!1:"":i:(s=d.attributeName,a=d.attributeNamespace,i===null?o.removeAttribute(s):(d=d.type,i=d===3||d===4&&i===!0?"":""+i,a?o.setAttributeNS(a,s,i):o.setAttribute(s,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(o){return o===null||typeof o!="object"?null:(o=Ja&&o[Ja]||o["@@iterator"],typeof o=="function"?o:null)}var A=Object.assign,La;function Ma(o){if(La===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+o}var Na=!1;function Oa(o,s){if(!o||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(tt){var a=tt}Reflect.construct(o,[],s)}else{try{s.call()}catch(tt){a=tt}o.call(s.prototype)}else{try{throw Error()}catch(tt){a=tt}o()}}catch(tt){if(tt&&a&&typeof tt.stack=="string"){for(var d=tt.stack.split(`
`),_=a.stack.split(`
`),b=d.length-1,$=_.length-1;1<=b&&0<=$&&d[b]!==_[$];)$--;for(;1<=b&&0<=$;b--,$--)if(d[b]!==_[$]){if(b!==1||$!==1)do if(b--,$--,0>$||d[b]!==_[$]){var nt=`
`+d[b].replace(" at new "," at ");return o.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",o.displayName)),nt}while(1<=b&&0<=$);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(o=o?o.displayName||o.name:"")?Ma(o):""}function Pa(o){switch(o.tag){case 5:return Ma(o.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return o=Oa(o.type,!1),o;case 11:return o=Oa(o.type.render,!1),o;case 1:return o=Oa(o.type,!0),o;default:return""}}function Qa(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca:return(o.displayName||"Context")+".Consumer";case Ba:return(o._context.displayName||"Context")+".Provider";case Da:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga:return s=o.displayName||null,s!==null?s:Qa(o.type)||"Memo";case Ha:s=o._payload,o=o._init;try{return Qa(o(s))}catch{}}return null}function Ra(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(o){var s=Ta(o)?"checked":"value",i=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),a=""+o[s];if(!o.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,_=i.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return d.call(this)},set:function(b){a=""+b,_.call(this,b)}}),Object.defineProperty(o,s,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var i=s.getValue(),a="";return o&&(a=Ta(o)?o.checked?"true":"false":o.value),o=a,o!==i?(s.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya(o,s){var i=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??o._wrapperState.initialChecked})}function Za(o,s){var i=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;i=Sa(s.value!=null?s.value:i),o._wrapperState={initialChecked:a,initialValue:i,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(o,s){s=s.checked,s!=null&&ta(o,"checked",s,!1)}function bb(o,s){ab(o,s);var i=Sa(s.value),a=s.type;if(i!=null)a==="number"?(i===0&&o.value===""||o.value!=i)&&(o.value=""+i):o.value!==""+i&&(o.value=""+i);else if(a==="submit"||a==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?cb(o,s.type,i):s.hasOwnProperty("defaultValue")&&cb(o,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function db(o,s,i){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,i||s===o.value||(o.value=s),o.defaultValue=s}i=o.name,i!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,i!==""&&(o.name=i)}function cb(o,s,i){(s!=="number"||Xa(o.ownerDocument)!==o)&&(i==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+i&&(o.defaultValue=""+i))}var eb=Array.isArray;function fb(o,s,i,a){if(o=o.options,s){s={};for(var d=0;d<i.length;d++)s["$"+i[d]]=!0;for(i=0;i<o.length;i++)d=s.hasOwnProperty("$"+o[i].value),o[i].selected!==d&&(o[i].selected=d),d&&a&&(o[i].defaultSelected=!0)}else{for(i=""+Sa(i),s=null,d=0;d<o.length;d++){if(o[d].value===i){o[d].selected=!0,a&&(o[d].defaultSelected=!0);return}s!==null||o[d].disabled||(s=o[d])}s!==null&&(s.selected=!0)}}function gb(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,s){var i=s.value;if(i==null){if(i=s.children,s=s.defaultValue,i!=null){if(s!=null)throw Error(p$1(92));if(eb(i)){if(1<i.length)throw Error(p$1(93));i=i[0]}s=i}s==null&&(s=""),i=s}o._wrapperState={initialValue:Sa(i)}}function ib(o,s){var i=Sa(s.value),a=Sa(s.defaultValue);i!=null&&(i=""+i,i!==o.value&&(o.value=i),s.defaultValue==null&&o.defaultValue!==i&&(o.defaultValue=i)),a!=null&&(o.defaultValue=""+a)}function jb(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function kb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?kb(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb,nb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,i,a,d){MSApp.execUnsafeLocalFunction(function(){return o(s,i,a,d)})}:o}(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function ob(o,s){if(s){var i=o.firstChild;if(i&&i===o.lastChild&&i.nodeType===3){i.nodeValue=s;return}}o.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(o){qb.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),pb[s]=pb[o]})});function rb(o,s,i){return s==null||typeof s=="boolean"||s===""?"":i||typeof s!="number"||s===0||pb.hasOwnProperty(o)&&pb[o]?(""+s).trim():s+"px"}function sb(o,s){o=o.style;for(var i in s)if(s.hasOwnProperty(i)){var a=i.indexOf("--")===0,d=rb(i,s[i],a);i==="float"&&(i="cssFloat"),a?o.setProperty(i,d):o[i]=d}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(o,s){if(s){if(tb[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p$1(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p$1(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p$1(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p$1(62))}}function vb(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(p$1(280));var s=o.stateNode;s&&(s=Db(s),yb(o.stateNode,o.type,s))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,s=Ab;if(Ab=zb=null,Bb(o),s)for(o=0;o<s.length;o++)Bb(s[o])}}function Gb(o,s){return o(s)}function Hb(){}var Ib=!1;function Jb(o,s,i){if(Ib)return o(s,i);Ib=!0;try{return Gb(o,s,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(o,s){var i=o.stateNode;if(i===null)return null;var a=Db(i);if(a===null)return null;i=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(o=o.type,a=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!a;break e;default:o=!1}if(o)return null;if(i&&typeof i!="function")throw Error(p$1(231,s,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(o,s,i,a,d,_,b,$,nt){var tt=Array.prototype.slice.call(arguments,3);try{s.apply(i,tt)}catch(et){this.onError(et)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(o){Ob=!0,Pb=o}};function Tb(o,s,i,a,d,_,b,$,nt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(o,s,i,a,d,_,b,$,nt){if(Tb.apply(this,arguments),Ob){if(Ob){var tt=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=tt)}}function Vb(o){var s=o,i=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,s.flags&4098&&(i=s.return),o=s.return;while(o)}return s.tag===3?i:null}function Wb(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(o){if(Vb(o)!==o)throw Error(p$1(188))}function Yb(o){var s=o.alternate;if(!s){if(s=Vb(o),s===null)throw Error(p$1(188));return s!==o?null:o}for(var i=o,a=s;;){var d=i.return;if(d===null)break;var _=d.alternate;if(_===null){if(a=d.return,a!==null){i=a;continue}break}if(d.child===_.child){for(_=d.child;_;){if(_===i)return Xb(d),o;if(_===a)return Xb(d),s;_=_.sibling}throw Error(p$1(188))}if(i.return!==a.return)i=d,a=_;else{for(var b=!1,$=d.child;$;){if($===i){b=!0,i=d,a=_;break}if($===a){b=!0,a=d,i=_;break}$=$.sibling}if(!b){for($=_.child;$;){if($===i){b=!0,i=_,a=d;break}if($===a){b=!0,a=_,i=d;break}$=$.sibling}if(!b)throw Error(p$1(189))}}if(i.alternate!==a)throw Error(p$1(190))}if(i.tag!==3)throw Error(p$1(188));return i.stateNode.current===i?o:s}function Zb(o){return o=Yb(o),o!==null?$b(o):null}function $b(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=$b(o);if(s!==null)return s;o=o.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(o){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,o,void 0,(o.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(o){return o>>>=0,o===0?32:31-(pc(o)/qc|0)|0}var rc=64,sc=4194304;function tc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc(o,s){var i=o.pendingLanes;if(i===0)return 0;var a=0,d=o.suspendedLanes,_=o.pingedLanes,b=i&268435455;if(b!==0){var $=b&~d;$!==0?a=tc($):(_&=b,_!==0&&(a=tc(_)))}else b=i&~d,b!==0?a=tc(b):_!==0&&(a=tc(_));if(a===0)return 0;if(s!==0&&s!==a&&!(s&d)&&(d=a&-a,_=s&-s,d>=_||d===16&&(_&4194240)!==0))return s;if(a&4&&(a|=i&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=a;0<s;)i=31-oc(s),d=1<<i,a|=o[i],s&=~d;return a}function vc(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(o,s){for(var i=o.suspendedLanes,a=o.pingedLanes,d=o.expirationTimes,_=o.pendingLanes;0<_;){var b=31-oc(_),$=1<<b,nt=d[b];nt===-1?(!($&i)||$&a)&&(d[b]=vc($,s)):nt<=s&&(o.expiredLanes|=$),_&=~$}}function xc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc(){var o=rc;return rc<<=1,!(rc&4194240)&&(rc=64),o}function zc(o){for(var s=[],i=0;31>i;i++)s.push(o);return s}function Ac(o,s,i){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-oc(s),o[s]=i}function Bc(o,s){var i=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var a=o.eventTimes;for(o=o.expirationTimes;0<i;){var d=31-oc(i),_=1<<d;s[d]=0,a[d]=-1,o[d]=-1,i&=~_}}function Cc(o,s){var i=o.entangledLanes|=s;for(o=o.entanglements;i;){var a=31-oc(i),d=1<<a;d&s|o[a]&s&&(o[a]|=s),i&=~d}}var C=0;function Dc(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(o,s){switch(o){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(o,s,i,a,d,_){return o===null||o.nativeEvent!==_?(o={blockedOn:s,domEventName:i,eventSystemFlags:a,nativeEvent:_,targetContainers:[d]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),o):(o.eventSystemFlags|=a,s=o.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),o)}function Uc(o,s,i,a,d){switch(s){case"focusin":return Lc=Tc(Lc,o,s,i,a,d),!0;case"dragenter":return Mc=Tc(Mc,o,s,i,a,d),!0;case"mouseover":return Nc=Tc(Nc,o,s,i,a,d),!0;case"pointerover":var _=d.pointerId;return Oc.set(_,Tc(Oc.get(_)||null,o,s,i,a,d)),!0;case"gotpointercapture":return _=d.pointerId,Pc.set(_,Tc(Pc.get(_)||null,o,s,i,a,d)),!0}return!1}function Vc(o){var s=Wc(o.target);if(s!==null){var i=Vb(s);if(i!==null){if(s=i.tag,s===13){if(s=Wb(i),s!==null){o.blockedOn=s,Ic(o.priority,function(){Gc(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){o.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var i=Yc(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(i===null){i=o.nativeEvent;var a=new i.constructor(i.type,i);wb=a,i.target.dispatchEvent(a),wb=null}else return s=Cb(i),s!==null&&Fc(s),o.blockedOn=i,!1;s.shift()}return!0}function Zc(o,s,i){Xc(o)&&i.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(o,s){o.blockedOn===s&&(o.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(o){function s(d){return ad(d,o)}if(0<Kc.length){ad(Kc[0],o);for(var i=1;i<Kc.length;i++){var a=Kc[i];a.blockedOn===o&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,o),Mc!==null&&ad(Mc,o),Nc!==null&&ad(Nc,o),Oc.forEach(s),Pc.forEach(s),i=0;i<Qc.length;i++)a=Qc[i],a.blockedOn===o&&(a.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(o,s,i,a){var d=C,_=cd.transition;cd.transition=null;try{C=1,fd(o,s,i,a)}finally{C=d,cd.transition=_}}function gd(o,s,i,a){var d=C,_=cd.transition;cd.transition=null;try{C=4,fd(o,s,i,a)}finally{C=d,cd.transition=_}}function fd(o,s,i,a){if(dd){var d=Yc(o,s,i,a);if(d===null)hd(o,s,a,id,i),Sc(o,a);else if(Uc(d,o,s,i,a))a.stopPropagation();else if(Sc(o,a),s&4&&-1<Rc.indexOf(o)){for(;d!==null;){var _=Cb(d);if(_!==null&&Ec(_),_=Yc(o,s,i,a),_===null&&hd(o,s,a,id,i),_===d)break;d=_}d!==null&&a.stopPropagation()}else hd(o,s,a,null,i)}}var id=null;function Yc(o,s,i,a){if(id=null,o=xb(a),o=Wc(o),o!==null)if(s=Vb(o),s===null)o=null;else if(i=s.tag,i===13){if(o=Wb(s),o!==null)return o;o=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return id=o,null}function jd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var o,s=ld,i=s.length,a,d="value"in kd?kd.value:kd.textContent,_=d.length;for(o=0;o<i&&s[o]===d[o];o++);var b=i-o;for(a=1;a<=b&&s[i-a]===d[_-a];a++);return md=d.slice(o,1<a?1-a:void 0)}function od(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function pd(){return!0}function qd(){return!1}function rd(o){function s(i,a,d,_,b){this._reactName=i,this._targetInst=d,this.type=a,this.nativeEvent=_,this.target=b,this.currentTarget=null;for(var $ in o)o.hasOwnProperty($)&&(i=o[$],this[$]=i?i(_):_[$]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd&&(yd&&o.type==="mousemove"?(wd=o.screenX-yd.screenX,xd=o.screenY-yd.screenY):xd=wd=0,yd=o),wd)},movementY:function(o){return"movementY"in o?o.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Od[o])?!!s[o]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(o){if(o.key){var s=Md[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(o,s){switch(o){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie=!1;function je(o,s){switch(o){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe=!0,ee);case"textInput":return o=s.data,o===ee&&fe?null:o;default:return null}}function ke(o,s){if(ie)return o==="compositionend"||!ae&&ge(o,s)?(o=nd(),md=ld=kd=null,ie=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!le[o.type]:s==="textarea"}function ne(o,s,i,a){Eb(a),s=oe(s,"onChange"),0<s.length&&(i=new td("onChange","change",null,i,a),o.push({event:i,listeners:s}))}var pe=null,qe=null;function re(o){se(o,0)}function te(o){var s=ue(o);if(Wa(s))return o}function ve(o,s){if(o==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(o){if(o.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,o,xb(o)),Jb(re,s)}}function Ce(o,s,i){o==="focusin"?(Ae(),pe=s,qe=i,pe.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae()}function De(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te(qe)}function Ee(o,s){if(o==="click")return te(s)}function Fe(o,s){if(o==="input"||o==="change")return te(s)}function Ge(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(o,s){if(He(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var i=Object.keys(o),a=Object.keys(s);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var d=i[a];if(!ja.call(s,d)||!He(o[d],s[d]))return!1}return!0}function Je(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke(o,s){var i=Je(o);o=0;for(var a;i;){if(i.nodeType===3){if(a=o+i.textContent.length,o<=s&&a>=s)return{node:i,offset:s-o};o=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Le(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var o=window,s=Xa();s instanceof o.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)o=s.contentWindow;else break;s=Xa(o.document)}return s}function Ne(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function Oe(o){var s=Me(),i=o.focusedElem,a=o.selectionRange;if(s!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(a!==null&&Ne(i)){if(s=a.start,o=a.end,o===void 0&&(o=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(o,i.value.length);else if(o=(s=i.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var d=i.textContent.length,_=Math.min(a.start,d);a=a.end===void 0?_:Math.min(a.end,d),!o.extend&&_>a&&(d=a,a=_,_=d),d=Ke(i,_);var b=Ke(i,a);d&&b&&(o.rangeCount!==1||o.anchorNode!==d.node||o.anchorOffset!==d.offset||o.focusNode!==b.node||o.focusOffset!==b.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),o.removeAllRanges(),_>a?(o.addRange(s),o.extend(b.node,b.offset)):(s.setEnd(b.node,b.offset),o.addRange(s)))}}for(s=[],o=i;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)o=s[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(o,s,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(s=new td("onSelect","select",null,s,i),o.push({event:s,listeners:a}),s.target=Qe)))}function Ve(o,s){var i={};return i[o.toLowerCase()]=s.toLowerCase(),i["Webkit"+o]="webkit"+s,i["Moz"+o]="moz"+s,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(o){if(Xe[o])return Xe[o];if(!We[o])return o;var s=We[o],i;for(i in s)if(s.hasOwnProperty(i)&&i in Ye)return Xe[o]=s[i];return o}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,s){df.set(o,s),fa(s,[o])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(o,s,i){var a=o.type||"unknown-event";o.currentTarget=i,Ub(a,s,void 0,o),o.currentTarget=null}function se(o,s){s=(s&4)!==0;for(var i=0;i<o.length;i++){var a=o[i],d=a.event;a=a.listeners;e:{var _=void 0;if(s)for(var b=a.length-1;0<=b;b--){var $=a[b],nt=$.instance,tt=$.currentTarget;if($=$.listener,nt!==_&&d.isPropagationStopped())break e;nf(d,$,tt),_=nt}else for(b=0;b<a.length;b++){if($=a[b],nt=$.instance,tt=$.currentTarget,$=$.listener,nt!==_&&d.isPropagationStopped())break e;nf(d,$,tt),_=nt}}}if(Qb)throw o=Rb,Qb=!1,Rb=null,o}function D(o,s){var i=s[of];i===void 0&&(i=s[of]=new Set);var a=o+"__bubble";i.has(a)||(pf(s,o,2,!1),i.add(a))}function qf(o,s,i){var a=0;s&&(a|=4),pf(i,o,a,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(o){if(!o[rf]){o[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,o),qf(i,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(o,s,i,a){switch(jd(s)){case 1:var d=ed;break;case 4:d=gd;break;default:d=fd}i=d.bind(null,s,i,o),d=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),a?d!==void 0?o.addEventListener(s,i,{capture:!0,passive:d}):o.addEventListener(s,i,!0):d!==void 0?o.addEventListener(s,i,{passive:d}):o.addEventListener(s,i,!1)}function hd(o,s,i,a,d){var _=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var b=a.tag;if(b===3||b===4){var $=a.stateNode.containerInfo;if($===d||$.nodeType===8&&$.parentNode===d)break;if(b===4)for(b=a.return;b!==null;){var nt=b.tag;if((nt===3||nt===4)&&(nt=b.stateNode.containerInfo,nt===d||nt.nodeType===8&&nt.parentNode===d))return;b=b.return}for(;$!==null;){if(b=Wc($),b===null)return;if(nt=b.tag,nt===5||nt===6){a=_=b;continue e}$=$.parentNode}}a=a.return}Jb(function(){var tt=_,et=xb(i),g=[];e:{var c=df.get(o);if(c!==void 0){var j=td,_e=o;switch(o){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":j=Rd;break;case"focusin":_e="focus",j=Fd;break;case"focusout":_e="blur",j=Fd;break;case"beforeblur":case"afterblur":j=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Vd;break;case $e:case af:case bf:j=Hd;break;case cf:j=Xd;break;case"scroll":j=vd;break;case"wheel":j=Zd;break;case"copy":case"cut":case"paste":j=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Td}var rt=(s&4)!==0,st=!rt&&o==="scroll",ot=rt?c!==null?c+"Capture":null:c;rt=[];for(var it=tt,at;it!==null;){at=it;var lt=at.stateNode;if(at.tag===5&&lt!==null&&(at=lt,ot!==null&&(lt=Kb(it,ot),lt!=null&&rt.push(tf(it,lt,at)))),st)break;it=it.return}0<rt.length&&(c=new j(c,_e,null,i,et),g.push({event:c,listeners:rt}))}}if(!(s&7)){e:{if(c=o==="mouseover"||o==="pointerover",j=o==="mouseout"||o==="pointerout",c&&i!==wb&&(_e=i.relatedTarget||i.fromElement)&&(Wc(_e)||_e[uf]))break e;if((j||c)&&(c=et.window===et?et:(c=et.ownerDocument)?c.defaultView||c.parentWindow:window,j?(_e=i.relatedTarget||i.toElement,j=tt,_e=_e?Wc(_e):null,_e!==null&&(st=Vb(_e),_e!==st||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(j=null,_e=tt),j!==_e)){if(rt=Bd,lt="onMouseLeave",ot="onMouseEnter",it="mouse",(o==="pointerout"||o==="pointerover")&&(rt=Td,lt="onPointerLeave",ot="onPointerEnter",it="pointer"),st=j==null?c:ue(j),at=_e==null?c:ue(_e),c=new rt(lt,it+"leave",j,i,et),c.target=st,c.relatedTarget=at,lt=null,Wc(et)===tt&&(rt=new rt(ot,it+"enter",_e,i,et),rt.target=at,rt.relatedTarget=st,lt=rt),st=lt,j&&_e)t:{for(rt=j,ot=_e,it=0,at=rt;at;at=vf(at))it++;for(at=0,lt=ot;lt;lt=vf(lt))at++;for(;0<it-at;)rt=vf(rt),it--;for(;0<at-it;)ot=vf(ot),at--;for(;it--;){if(rt===ot||ot!==null&&rt===ot.alternate)break t;rt=vf(rt),ot=vf(ot)}rt=null}else rt=null;j!==null&&wf(g,c,j,rt,!1),_e!==null&&st!==null&&wf(g,st,_e,rt,!0)}}e:{if(c=tt?ue(tt):window,j=c.nodeName&&c.nodeName.toLowerCase(),j==="select"||j==="input"&&c.type==="file")var ut=ve;else if(me(c))if(we)ut=Fe;else{ut=De;var ct=Ce}else(j=c.nodeName)&&j.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(ut=Ee);if(ut&&(ut=ut(o,tt))){ne(g,ut,i,et);break e}ct&&ct(o,c,tt),o==="focusout"&&(ct=c._wrapperState)&&ct.controlled&&c.type==="number"&&cb(c,"number",c.value)}switch(ct=tt?ue(tt):window,o){case"focusin":(me(ct)||ct.contentEditable==="true")&&(Qe=ct,Re=tt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(g,i,et);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(g,i,et)}var dt;if(ae)e:{switch(o){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else ie?ge(o,i)&&(ft="onCompositionEnd"):o==="keydown"&&i.keyCode===229&&(ft="onCompositionStart");ft&&(de&&i.locale!=="ko"&&(ie||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&ie&&(dt=nd()):(kd=et,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ct=oe(tt,ft),0<ct.length&&(ft=new Ld(ft,o,null,i,et),g.push({event:ft,listeners:ct}),dt?ft.data=dt:(dt=he(i),dt!==null&&(ft.data=dt)))),(dt=ce?je(o,i):ke(o,i))&&(tt=oe(tt,"onBeforeInput"),0<tt.length&&(et=new Ld("onBeforeInput","beforeinput",null,i,et),g.push({event:et,listeners:tt}),et.data=dt))}se(g,s)})}function tf(o,s,i){return{instance:o,listener:s,currentTarget:i}}function oe(o,s){for(var i=s+"Capture",a=[];o!==null;){var d=o,_=d.stateNode;d.tag===5&&_!==null&&(d=_,_=Kb(o,i),_!=null&&a.unshift(tf(o,_,d)),_=Kb(o,s),_!=null&&a.push(tf(o,_,d))),o=o.return}return a}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,s,i,a,d){for(var _=s._reactName,b=[];i!==null&&i!==a;){var $=i,nt=$.alternate,tt=$.stateNode;if(nt!==null&&nt===a)break;$.tag===5&&tt!==null&&($=tt,d?(nt=Kb(i,_),nt!=null&&b.unshift(tf(i,nt,$))):d||(nt=Kb(i,_),nt!=null&&b.push(tf(i,nt,$)))),i=i.return}b.length!==0&&o.push({event:s,listeners:b})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,s,i){if(s=zf(s),zf(o)!==s&&i)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If$1)}:Ff;function If$1(o){setTimeout(function(){throw o})}function Kf(o,s){var i=s,a=0;do{var d=i.nextSibling;if(o.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(a===0){o.removeChild(d),bd(s);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=d}while(i);bd(s)}function Lf(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var i=o.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return o;s--}else i==="/$"&&s++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(o){var s=o[Of];if(s)return s;for(var i=o.parentNode;i;){if(s=i[uf]||i[Of]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(o=Mf(o);o!==null;){if(i=o[Of])return i;o=Mf(o)}return s}o=i,i=o.parentNode}return null}function Cb(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p$1(33))}function Db(o){return o[Pf]||null}var Sf=[],Tf=-1;function Uf(o){return{current:o}}function E(o){0>Tf||(o.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(o,s){Tf++,Sf[Tf]=o.current,o.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,s){var i=o.type.contextTypes;if(!i)return Vf;var a=o.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var d={},_;for(_ in i)d[_]=s[_];return a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=d),d}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E(Wf),E(H)}function ag(o,s,i){if(H.current!==Vf)throw Error(p$1(168));G(H,s),G(Wf,i)}function bg(o,s,i){var a=o.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var d in a)if(!(d in s))throw Error(p$1(108,Ra(o)||"Unknown",d));return A({},i,a)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,o),G(Wf,Wf.current),!0}function dg(o,s,i){var a=o.stateNode;if(!a)throw Error(p$1(169));i?(o=bg(o,s,Xf),a.__reactInternalMemoizedMergedChildContext=o,E(Wf),E(H),G(H,o)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,s=C;try{var i=eg;for(C=1;o<i.length;o++){var a=i[o];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(d){throw eg!==null&&(eg=eg.slice(o+1)),ac(fc,jg),d}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,s){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=s}function ug(o,s,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var a=rg;o=sg;var d=32-oc(a)-1;a&=~(1<<d),i+=1;var _=32-oc(s)+d;if(30<_){var b=d-d%5;_=(a&(1<<b)-1).toString(32),a>>=b,d-=b,rg=1<<32-oc(s)+d|i<<d|a,sg=_+o}else rg=1<<_|i<<d|a,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(o,s){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=s,i.return=o,s=o.deletions,s===null?(o.deletions=[i],o.flags|=16):s.push(i)}function Cg(o,s){switch(o.tag){case 5:var i=o.type;return s=s.nodeType!==1||i.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,xg=o,yg=Lf(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,xg=o,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(i=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:s,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=s,i.return=o,o.child=i,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I){var s=yg;if(s){var i=s;if(!Cg(o,s)){if(Dg(o))throw Error(p$1(418));s=Lf(i.nextSibling);var a=xg;s&&Cg(o,s)?Ag(a,i):(o.flags=o.flags&-4097|2,I=!1,xg=o)}}else{if(Dg(o))throw Error(p$1(418));o.flags=o.flags&-4097|2,I=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I)return Fg(o),I=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!Ef(o.type,o.memoizedProps)),s&&(s=yg)){if(Dg(o))throw Hg(),Error(p$1(418));for(;s;)Ag(o,s),s=Lf(s.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p$1(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var i=o.data;if(i==="/$"){if(s===0){yg=Lf(o.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua.ReactCurrentBatchConfig;function Lg(o,s,i){if(o=i.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p$1(309));var a=i.stateNode}if(!a)throw Error(p$1(147,o));var d=a,_=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===_?s.ref:(s=function(b){var $=d.refs;b===null?delete $[_]:$[_]=b},s._stringRef=_,s)}if(typeof o!="string")throw Error(p$1(284));if(!i._owner)throw Error(p$1(290,o))}return o}function Mg(o,s){throw o=Object.prototype.toString.call(s),Error(p$1(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function Ng(o){var s=o._init;return s(o._payload)}function Og(o){function s(ot,it){if(o){var at=ot.deletions;at===null?(ot.deletions=[it],ot.flags|=16):at.push(it)}}function i(ot,it){if(!o)return null;for(;it!==null;)s(ot,it),it=it.sibling;return null}function a(ot,it){for(ot=new Map;it!==null;)it.key!==null?ot.set(it.key,it):ot.set(it.index,it),it=it.sibling;return ot}function d(ot,it){return ot=Pg(ot,it),ot.index=0,ot.sibling=null,ot}function _(ot,it,at){return ot.index=at,o?(at=ot.alternate,at!==null?(at=at.index,at<it?(ot.flags|=2,it):at):(ot.flags|=2,it)):(ot.flags|=1048576,it)}function b(ot){return o&&ot.alternate===null&&(ot.flags|=2),ot}function $(ot,it,at,lt){return it===null||it.tag!==6?(it=Qg(at,ot.mode,lt),it.return=ot,it):(it=d(it,at),it.return=ot,it)}function nt(ot,it,at,lt){var ut=at.type;return ut===ya?et(ot,it,at.props.children,lt,at.key):it!==null&&(it.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Ha&&Ng(ut)===it.type)?(lt=d(it,at.props),lt.ref=Lg(ot,it,at),lt.return=ot,lt):(lt=Rg(at.type,at.key,at.props,null,ot.mode,lt),lt.ref=Lg(ot,it,at),lt.return=ot,lt)}function tt(ot,it,at,lt){return it===null||it.tag!==4||it.stateNode.containerInfo!==at.containerInfo||it.stateNode.implementation!==at.implementation?(it=Sg(at,ot.mode,lt),it.return=ot,it):(it=d(it,at.children||[]),it.return=ot,it)}function et(ot,it,at,lt,ut){return it===null||it.tag!==7?(it=Tg(at,ot.mode,lt,ut),it.return=ot,it):(it=d(it,at),it.return=ot,it)}function g(ot,it,at){if(typeof it=="string"&&it!==""||typeof it=="number")return it=Qg(""+it,ot.mode,at),it.return=ot,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case va:return at=Rg(it.type,it.key,it.props,null,ot.mode,at),at.ref=Lg(ot,null,it),at.return=ot,at;case wa:return it=Sg(it,ot.mode,at),it.return=ot,it;case Ha:var lt=it._init;return g(ot,lt(it._payload),at)}if(eb(it)||Ka(it))return it=Tg(it,ot.mode,at,null),it.return=ot,it;Mg(ot,it)}return null}function c(ot,it,at,lt){var ut=it!==null?it.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return ut!==null?null:$(ot,it,""+at,lt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case va:return at.key===ut?nt(ot,it,at,lt):null;case wa:return at.key===ut?tt(ot,it,at,lt):null;case Ha:return ut=at._init,c(ot,it,ut(at._payload),lt)}if(eb(at)||Ka(at))return ut!==null?null:et(ot,it,at,lt,null);Mg(ot,at)}return null}function j(ot,it,at,lt,ut){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return ot=ot.get(at)||null,$(it,ot,""+lt,ut);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case va:return ot=ot.get(lt.key===null?at:lt.key)||null,nt(it,ot,lt,ut);case wa:return ot=ot.get(lt.key===null?at:lt.key)||null,tt(it,ot,lt,ut);case Ha:var ct=lt._init;return j(ot,it,at,ct(lt._payload),ut)}if(eb(lt)||Ka(lt))return ot=ot.get(at)||null,et(it,ot,lt,ut,null);Mg(it,lt)}return null}function _e(ot,it,at,lt){for(var ut=null,ct=null,dt=it,ft=it=0,ht=null;dt!==null&&ft<at.length;ft++){dt.index>ft?(ht=dt,dt=null):ht=dt.sibling;var mt=c(ot,dt,at[ft],lt);if(mt===null){dt===null&&(dt=ht);break}o&&dt&&mt.alternate===null&&s(ot,dt),it=_(mt,it,ft),ct===null?ut=mt:ct.sibling=mt,ct=mt,dt=ht}if(ft===at.length)return i(ot,dt),I&&tg(ot,ft),ut;if(dt===null){for(;ft<at.length;ft++)dt=g(ot,at[ft],lt),dt!==null&&(it=_(dt,it,ft),ct===null?ut=dt:ct.sibling=dt,ct=dt);return I&&tg(ot,ft),ut}for(dt=a(ot,dt);ft<at.length;ft++)ht=j(dt,ot,ft,at[ft],lt),ht!==null&&(o&&ht.alternate!==null&&dt.delete(ht.key===null?ft:ht.key),it=_(ht,it,ft),ct===null?ut=ht:ct.sibling=ht,ct=ht);return o&&dt.forEach(function(yt){return s(ot,yt)}),I&&tg(ot,ft),ut}function rt(ot,it,at,lt){var ut=Ka(at);if(typeof ut!="function")throw Error(p$1(150));if(at=ut.call(at),at==null)throw Error(p$1(151));for(var ct=ut=null,dt=it,ft=it=0,ht=null,mt=at.next();dt!==null&&!mt.done;ft++,mt=at.next()){dt.index>ft?(ht=dt,dt=null):ht=dt.sibling;var yt=c(ot,dt,mt.value,lt);if(yt===null){dt===null&&(dt=ht);break}o&&dt&&yt.alternate===null&&s(ot,dt),it=_(yt,it,ft),ct===null?ut=yt:ct.sibling=yt,ct=yt,dt=ht}if(mt.done)return i(ot,dt),I&&tg(ot,ft),ut;if(dt===null){for(;!mt.done;ft++,mt=at.next())mt=g(ot,mt.value,lt),mt!==null&&(it=_(mt,it,ft),ct===null?ut=mt:ct.sibling=mt,ct=mt);return I&&tg(ot,ft),ut}for(dt=a(ot,dt);!mt.done;ft++,mt=at.next())mt=j(dt,ot,ft,mt.value,lt),mt!==null&&(o&&mt.alternate!==null&&dt.delete(mt.key===null?ft:mt.key),it=_(mt,it,ft),ct===null?ut=mt:ct.sibling=mt,ct=mt);return o&&dt.forEach(function(Tt){return s(ot,Tt)}),I&&tg(ot,ft),ut}function st(ot,it,at,lt){if(typeof at=="object"&&at!==null&&at.type===ya&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case va:e:{for(var ut=at.key,ct=it;ct!==null;){if(ct.key===ut){if(ut=at.type,ut===ya){if(ct.tag===7){i(ot,ct.sibling),it=d(ct,at.props.children),it.return=ot,ot=it;break e}}else if(ct.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Ha&&Ng(ut)===ct.type){i(ot,ct.sibling),it=d(ct,at.props),it.ref=Lg(ot,ct,at),it.return=ot,ot=it;break e}i(ot,ct);break}else s(ot,ct);ct=ct.sibling}at.type===ya?(it=Tg(at.props.children,ot.mode,lt,at.key),it.return=ot,ot=it):(lt=Rg(at.type,at.key,at.props,null,ot.mode,lt),lt.ref=Lg(ot,it,at),lt.return=ot,ot=lt)}return b(ot);case wa:e:{for(ct=at.key;it!==null;){if(it.key===ct)if(it.tag===4&&it.stateNode.containerInfo===at.containerInfo&&it.stateNode.implementation===at.implementation){i(ot,it.sibling),it=d(it,at.children||[]),it.return=ot,ot=it;break e}else{i(ot,it);break}else s(ot,it);it=it.sibling}it=Sg(at,ot.mode,lt),it.return=ot,ot=it}return b(ot);case Ha:return ct=at._init,st(ot,it,ct(at._payload),lt)}if(eb(at))return _e(ot,it,at,lt);if(Ka(at))return rt(ot,it,at,lt);Mg(ot,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,it!==null&&it.tag===6?(i(ot,it.sibling),it=d(it,at),it.return=ot,ot=it):(i(ot,it),it=Qg(at,ot.mode,lt),it.return=ot,ot=it),b(ot)):i(ot,it)}return st}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(o){var s=Wg.current;E(Wg),o._currentValue=s}function bh(o,s,i){for(;o!==null;){var a=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),o===i)break;o=o.return}}function ch(o,s){Xg=o,Zg=Yg=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&s&&(dh=!0),o.firstContext=null)}function eh(o){var s=o._currentValue;if(Zg!==o)if(o={context:o,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=o,Xg.dependencies={lanes:0,firstContext:o}}else Yg=Yg.next=o;return s}var fh=null;function gh(o){fh===null?fh=[o]:fh.push(o)}function hh(o,s,i,a){var d=s.interleaved;return d===null?(i.next=i,gh(s)):(i.next=d.next,d.next=i),s.interleaved=i,ih(o,a)}function ih(o,s){o.lanes|=s;var i=o.alternate;for(i!==null&&(i.lanes|=s),i=o,o=o.return;o!==null;)o.childLanes|=s,i=o.alternate,i!==null&&(i.childLanes|=s),i=o,o=o.return;return i.tag===3?i.stateNode:null}var jh=!1;function kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function mh(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function nh(o,s,i){var a=o.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var d=a.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),a.pending=s,ih(o,i)}return d=a.interleaved,d===null?(s.next=s,gh(a)):(s.next=d.next,d.next=s),a.interleaved=s,ih(o,i)}function oh(o,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194240)!==0)){var a=s.lanes;a&=o.pendingLanes,i|=a,s.lanes=i,Cc(o,i)}}function ph(o,s){var i=o.updateQueue,a=o.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var d=null,_=null;if(i=i.firstBaseUpdate,i!==null){do{var b={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};_===null?d=_=b:_=_.next=b,i=i.next}while(i!==null);_===null?d=_=s:_=_.next=s}else d=_=s;i={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:_,shared:a.shared,effects:a.effects},o.updateQueue=i;return}o=i.lastBaseUpdate,o===null?i.firstBaseUpdate=s:o.next=s,i.lastBaseUpdate=s}function qh(o,s,i,a){var d=o.updateQueue;jh=!1;var _=d.firstBaseUpdate,b=d.lastBaseUpdate,$=d.shared.pending;if($!==null){d.shared.pending=null;var nt=$,tt=nt.next;nt.next=null,b===null?_=tt:b.next=tt,b=nt;var et=o.alternate;et!==null&&(et=et.updateQueue,$=et.lastBaseUpdate,$!==b&&($===null?et.firstBaseUpdate=tt:$.next=tt,et.lastBaseUpdate=nt))}if(_!==null){var g=d.baseState;b=0,et=tt=nt=null,$=_;do{var c=$.lane,j=$.eventTime;if((a&c)===c){et!==null&&(et=et.next={eventTime:j,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var _e=o,rt=$;switch(c=s,j=i,rt.tag){case 1:if(_e=rt.payload,typeof _e=="function"){g=_e.call(j,g,c);break e}g=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=rt.payload,c=typeof _e=="function"?_e.call(j,g,c):_e,c==null)break e;g=A({},g,c);break e;case 2:jh=!0}}$.callback!==null&&$.lane!==0&&(o.flags|=64,c=d.effects,c===null?d.effects=[$]:c.push($))}else j={eventTime:j,lane:c,tag:$.tag,payload:$.payload,callback:$.callback,next:null},et===null?(tt=et=j,nt=g):et=et.next=j,b|=c;if($=$.next,$===null){if($=d.shared.pending,$===null)break;c=$,$=c.next,c.next=null,d.lastBaseUpdate=c,d.shared.pending=null}}while(!0);if(et===null&&(nt=g),d.baseState=nt,d.firstBaseUpdate=tt,d.lastBaseUpdate=et,s=d.shared.interleaved,s!==null){d=s;do b|=d.lane,d=d.next;while(d!==s)}else _===null&&(d.shared.lanes=0);rh|=b,o.lanes=b,o.memoizedState=g}}function sh(o,s,i){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var a=o[s],d=a.callback;if(d!==null){if(a.callback=null,a=i,typeof d!="function")throw Error(p$1(191,d));d.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(o){if(o===th)throw Error(p$1(174));return o}function yh(o,s){switch(G(wh,s),G(vh,o),G(uh,th),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=lb(s,o)}E(uh),G(uh,s)}function zh(){E(uh),E(vh),E(wh)}function Ah(o){xh(wh.current);var s=xh(uh.current),i=lb(s,o.type);s!==i&&(G(vh,o),G(uh,i))}function Bh(o){vh.current===o&&(E(uh),E(vh))}var L=Uf(0);function Ch(o){for(var s=o;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var o=0;o<Dh.length;o++)Dh[o]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$1(321))}function Mh(o,s){if(s===null)return!1;for(var i=0;i<s.length&&i<o.length;i++)if(!He(o[i],s[i]))return!1;return!0}function Nh(o,s,i,a,d,_){if(Hh=_,M=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=o===null||o.memoizedState===null?Oh:Ph,o=i(a,d),Jh){_=0;do{if(Jh=!1,Kh=0,25<=_)throw Error(p$1(301));_+=1,O=N=null,s.updateQueue=null,Fh.current=Qh,o=i(a,d)}while(Jh)}if(Fh.current=Rh,s=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,s)throw Error(p$1(300));return o}function Sh(){var o=Kh!==0;return Kh=0,o}function Th(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=o:O=O.next=o,O}function Uh(){if(N===null){var o=M.alternate;o=o!==null?o.memoizedState:null}else o=N.next;var s=O===null?M.memoizedState:O.next;if(s!==null)O=s,N=o;else{if(o===null)throw Error(p$1(310));N=o,o={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=o:O=O.next=o}return O}function Vh(o,s){return typeof s=="function"?s(o):s}function Wh(o){var s=Uh(),i=s.queue;if(i===null)throw Error(p$1(311));i.lastRenderedReducer=o;var a=N,d=a.baseQueue,_=i.pending;if(_!==null){if(d!==null){var b=d.next;d.next=_.next,_.next=b}a.baseQueue=d=_,i.pending=null}if(d!==null){_=d.next,a=a.baseState;var $=b=null,nt=null,tt=_;do{var et=tt.lane;if((Hh&et)===et)nt!==null&&(nt=nt.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),a=tt.hasEagerState?tt.eagerState:o(a,tt.action);else{var g={lane:et,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};nt===null?($=nt=g,b=a):nt=nt.next=g,M.lanes|=et,rh|=et}tt=tt.next}while(tt!==null&&tt!==_);nt===null?b=a:nt.next=$,He(a,s.memoizedState)||(dh=!0),s.memoizedState=a,s.baseState=b,s.baseQueue=nt,i.lastRenderedState=a}if(o=i.interleaved,o!==null){d=o;do _=d.lane,M.lanes|=_,rh|=_,d=d.next;while(d!==o)}else d===null&&(i.lanes=0);return[s.memoizedState,i.dispatch]}function Xh(o){var s=Uh(),i=s.queue;if(i===null)throw Error(p$1(311));i.lastRenderedReducer=o;var a=i.dispatch,d=i.pending,_=s.memoizedState;if(d!==null){i.pending=null;var b=d=d.next;do _=o(_,b.action),b=b.next;while(b!==d);He(_,s.memoizedState)||(dh=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),i.lastRenderedState=_}return[_,a]}function Yh(){}function Zh(o,s){var i=M,a=Uh(),d=s(),_=!He(a.memoizedState,d);if(_&&(a.memoizedState=d,dh=!0),a=a.queue,$h(ai.bind(null,i,a,o),[o]),a.getSnapshot!==s||_||O!==null&&O.memoizedState.tag&1){if(i.flags|=2048,bi(9,ci.bind(null,i,a,d,s),void 0,null),Q===null)throw Error(p$1(349));Hh&30||di(i,s,d)}return d}function di(o,s,i){o.flags|=16384,o={getSnapshot:s,value:i},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.stores=[o]):(i=s.stores,i===null?s.stores=[o]:i.push(o))}function ci(o,s,i,a){s.value=i,s.getSnapshot=a,ei(s)&&fi(o)}function ai(o,s,i){return i(function(){ei(s)&&fi(o)})}function ei(o){var s=o.getSnapshot;o=o.value;try{var i=s();return!He(o,i)}catch{return!0}}function fi(o){var s=ih(o,1);s!==null&&gi(s,o,1,-1)}function hi(o){var s=Th();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:o},s.queue=o,o=o.dispatch=ii.bind(null,M,o),[s.memoizedState,o]}function bi(o,s,i,a){return o={tag:o,create:s,destroy:i,deps:a,next:null},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.lastEffect=o.next=o):(i=s.lastEffect,i===null?s.lastEffect=o.next=o:(a=i.next,i.next=o,o.next=a,s.lastEffect=o)),o}function ji(){return Uh().memoizedState}function ki(o,s,i,a){var d=Th();M.flags|=o,d.memoizedState=bi(1|s,i,void 0,a===void 0?null:a)}function li(o,s,i,a){var d=Uh();a=a===void 0?null:a;var _=void 0;if(N!==null){var b=N.memoizedState;if(_=b.destroy,a!==null&&Mh(a,b.deps)){d.memoizedState=bi(s,i,_,a);return}}M.flags|=o,d.memoizedState=bi(1|s,i,_,a)}function mi(o,s){return ki(8390656,8,o,s)}function $h(o,s){return li(2048,8,o,s)}function ni(o,s){return li(4,2,o,s)}function oi(o,s){return li(4,4,o,s)}function pi(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function qi(o,s,i){return i=i!=null?i.concat([o]):null,li(4,4,pi.bind(null,s,o),i)}function ri(){}function si(o,s){var i=Uh();s=s===void 0?null:s;var a=i.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(i.memoizedState=[o,s],o)}function ti(o,s){var i=Uh();s=s===void 0?null:s;var a=i.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(o=o(),i.memoizedState=[o,s],o)}function ui(o,s,i){return Hh&21?(He(i,s)||(i=yc(),M.lanes|=i,rh|=i,o.baseState=!0),s):(o.baseState&&(o.baseState=!1,dh=!0),o.memoizedState=i)}function vi(o,s){var i=C;C=i!==0&&4>i?i:4,o(!0);var a=Gh.transition;Gh.transition={};try{o(!1),s()}finally{C=i,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(o,s,i){var a=yi(o);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},zi(o))Ai(s,i);else if(i=hh(o,s,i,a),i!==null){var d=R();gi(i,o,a,d),Bi(i,s,a)}}function ii(o,s,i){var a=yi(o),d={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(zi(o))Ai(s,d);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var b=s.lastRenderedState,$=_(b,i);if(d.hasEagerState=!0,d.eagerState=$,He($,b)){var nt=s.interleaved;nt===null?(d.next=d,gh(s)):(d.next=nt.next,nt.next=d),s.interleaved=d;return}}catch{}finally{}i=hh(o,s,d,a),i!==null&&(d=R(),gi(i,o,a,d),Bi(i,s,a))}}function zi(o){var s=o.alternate;return o===M||s!==null&&s===M}function Ai(o,s){Jh=Ih=!0;var i=o.pending;i===null?s.next=s:(s.next=i.next,i.next=s),o.pending=s}function Bi(o,s,i){if(i&4194240){var a=s.lanes;a&=o.pendingLanes,i|=a,s.lanes=i,Cc(o,i)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(o,s){return Th().memoizedState=[o,s===void 0?null:s],o},useContext:eh,useEffect:mi,useImperativeHandle:function(o,s,i){return i=i!=null?i.concat([o]):null,ki(4194308,4,pi.bind(null,s,o),i)},useLayoutEffect:function(o,s){return ki(4194308,4,o,s)},useInsertionEffect:function(o,s){return ki(4,2,o,s)},useMemo:function(o,s){var i=Th();return s=s===void 0?null:s,o=o(),i.memoizedState=[o,s],o},useReducer:function(o,s,i){var a=Th();return s=i!==void 0?i(s):s,a.memoizedState=a.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},a.queue=o,o=o.dispatch=xi.bind(null,M,o),[a.memoizedState,o]},useRef:function(o){var s=Th();return o={current:o},s.memoizedState=o},useState:hi,useDebugValue:ri,useDeferredValue:function(o){return Th().memoizedState=o},useTransition:function(){var o=hi(!1),s=o[0];return o=vi.bind(null,o[1]),Th().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,i){var a=M,d=Th();if(I){if(i===void 0)throw Error(p$1(407));i=i()}else{if(i=s(),Q===null)throw Error(p$1(349));Hh&30||di(a,s,i)}d.memoizedState=i;var _={value:i,getSnapshot:s};return d.queue=_,mi(ai.bind(null,a,_,o),[o]),a.flags|=2048,bi(9,ci.bind(null,a,_,i,s),void 0,null),i},useId:function(){var o=Th(),s=Q.identifierPrefix;if(I){var i=sg,a=rg;i=(a&~(1<<32-oc(a)-1)).toString(32)+i,s=":"+s+"R"+i,i=Kh++,0<i&&(s+="H"+i.toString(32)),s+=":"}else i=Lh++,s=":"+s+"r"+i.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var s=Uh();return ui(s,N.memoizedState,o)},useTransition:function(){var o=Wh(Vh)[0],s=Uh().memoizedState;return[o,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var s=Uh();return N===null?s.memoizedState=o:ui(s,N.memoizedState,o)},useTransition:function(){var o=Xh(Vh)[0],s=Uh().memoizedState;return[o,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(o,s){if(o&&o.defaultProps){s=A({},s),o=o.defaultProps;for(var i in o)s[i]===void 0&&(s[i]=o[i]);return s}return s}function Di(o,s,i,a){s=o.memoizedState,i=i(a,s),i=i==null?s:A({},s,i),o.memoizedState=i,o.lanes===0&&(o.updateQueue.baseState=i)}var Ei={isMounted:function(o){return(o=o._reactInternals)?Vb(o)===o:!1},enqueueSetState:function(o,s,i){o=o._reactInternals;var a=R(),d=yi(o),_=mh(a,d);_.payload=s,i!=null&&(_.callback=i),s=nh(o,_,d),s!==null&&(gi(s,o,d,a),oh(s,o,d))},enqueueReplaceState:function(o,s,i){o=o._reactInternals;var a=R(),d=yi(o),_=mh(a,d);_.tag=1,_.payload=s,i!=null&&(_.callback=i),s=nh(o,_,d),s!==null&&(gi(s,o,d,a),oh(s,o,d))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var i=R(),a=yi(o),d=mh(i,a);d.tag=2,s!=null&&(d.callback=s),s=nh(o,d,a),s!==null&&(gi(s,o,a,i),oh(s,o,a))}};function Fi(o,s,i,a,d,_,b){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(a,_,b):s.prototype&&s.prototype.isPureReactComponent?!Ie(i,a)||!Ie(d,_):!0}function Gi(o,s,i){var a=!1,d=Vf,_=s.contextType;return typeof _=="object"&&_!==null?_=eh(_):(d=Zf(s)?Xf:H.current,a=s.contextTypes,_=(a=a!=null)?Yf(o,d):Vf),s=new s(i,_),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei,o.stateNode=s,s._reactInternals=o,a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=d,o.__reactInternalMemoizedMaskedChildContext=_),s}function Hi(o,s,i,a){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,a),s.state!==o&&Ei.enqueueReplaceState(s,s.state,null)}function Ii(o,s,i,a){var d=o.stateNode;d.props=i,d.state=o.memoizedState,d.refs={},kh(o);var _=s.contextType;typeof _=="object"&&_!==null?d.context=eh(_):(_=Zf(s)?Xf:H.current,d.context=Yf(o,_)),d.state=o.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(Di(o,s,_,i),d.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Ei.enqueueReplaceState(d,d.state,null),qh(o,i,d,a),d.state=o.memoizedState),typeof d.componentDidMount=="function"&&(o.flags|=4194308)}function Ji(o,s){try{var i="",a=s;do i+=Pa(a),a=a.return;while(a);var d=i}catch(_){d=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:s,stack:d,digest:null}}function Ki(o,s,i){return{value:o,source:null,stack:i??null,digest:s??null}}function Li(o,s){try{console.error(s.value)}catch(i){setTimeout(function(){throw i})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(o,s,i){i=mh(-1,i),i.tag=3,i.payload={element:null};var a=s.value;return i.callback=function(){Oi||(Oi=!0,Pi=a),Li(o,s)},i}function Qi(o,s,i){i=mh(-1,i),i.tag=3;var a=o.type.getDerivedStateFromError;if(typeof a=="function"){var d=s.value;i.payload=function(){return a(d)},i.callback=function(){Li(o,s)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){Li(o,s),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})}),i}function Si(o,s,i){var a=o.pingCache;if(a===null){a=o.pingCache=new Mi;var d=new Set;a.set(s,d)}else d=a.get(s),d===void 0&&(d=new Set,a.set(s,d));d.has(i)||(d.add(i),o=Ti.bind(null,o,s,i),s.then(o,o))}function Ui(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function Vi(o,s,i,a,d){return o.mode&1?(o.flags|=65536,o.lanes=d,o):(o===s?o.flags|=65536:(o.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(s=mh(-1,1),s.tag=2,nh(i,s,1))),i.lanes|=1),o)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(o,s,i,a){s.child=o===null?Vg(s,null,i,a):Ug(s,o.child,i,a)}function Yi(o,s,i,a,d){i=i.render;var _=s.ref;return ch(s,d),a=Nh(o,s,i,a,_,d),i=Sh(),o!==null&&!dh?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~d,Zi(o,s,d)):(I&&i&&vg(s),s.flags|=1,Xi(o,s,a,d),s.child)}function $i(o,s,i,a,d){if(o===null){var _=i.type;return typeof _=="function"&&!aj(_)&&_.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(s.tag=15,s.type=_,bj(o,s,_,a,d)):(o=Rg(i.type,null,a,s,s.mode,d),o.ref=s.ref,o.return=s,s.child=o)}if(_=o.child,!(o.lanes&d)){var b=_.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(b,a)&&o.ref===s.ref)return Zi(o,s,d)}return s.flags|=1,o=Pg(_,a),o.ref=s.ref,o.return=s,s.child=o}function bj(o,s,i,a,d){if(o!==null){var _=o.memoizedProps;if(Ie(_,a)&&o.ref===s.ref)if(dh=!1,s.pendingProps=a=_,(o.lanes&d)!==0)o.flags&131072&&(dh=!0);else return s.lanes=o.lanes,Zi(o,s,d)}return cj(o,s,i,a,d)}function dj(o,s,i){var a=s.pendingProps,d=a.children,_=o!==null?o.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=i;else{if(!(i&1073741824))return o=_!==null?_.baseLanes|i:i,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,G(ej,fj),fj|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=_!==null?_.baseLanes:i,G(ej,fj),fj|=a}else _!==null?(a=_.baseLanes|i,s.memoizedState=null):a=i,G(ej,fj),fj|=a;return Xi(o,s,d,i),s.child}function gj(o,s){var i=s.ref;(o===null&&i!==null||o!==null&&o.ref!==i)&&(s.flags|=512,s.flags|=2097152)}function cj(o,s,i,a,d){var _=Zf(i)?Xf:H.current;return _=Yf(s,_),ch(s,d),i=Nh(o,s,i,a,_,d),a=Sh(),o!==null&&!dh?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~d,Zi(o,s,d)):(I&&a&&vg(s),s.flags|=1,Xi(o,s,i,d),s.child)}function hj(o,s,i,a,d){if(Zf(i)){var _=!0;cg(s)}else _=!1;if(ch(s,d),s.stateNode===null)ij(o,s),Gi(s,i,a),Ii(s,i,a,d),a=!0;else if(o===null){var b=s.stateNode,$=s.memoizedProps;b.props=$;var nt=b.context,tt=i.contextType;typeof tt=="object"&&tt!==null?tt=eh(tt):(tt=Zf(i)?Xf:H.current,tt=Yf(s,tt));var et=i.getDerivedStateFromProps,g=typeof et=="function"||typeof b.getSnapshotBeforeUpdate=="function";g||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($!==a||nt!==tt)&&Hi(s,b,a,tt),jh=!1;var c=s.memoizedState;b.state=c,qh(s,a,b,d),nt=s.memoizedState,$!==a||c!==nt||Wf.current||jh?(typeof et=="function"&&(Di(s,i,et,a),nt=s.memoizedState),($=jh||Fi(s,i,$,a,c,nt,tt))?(g||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=nt),b.props=a,b.state=nt,b.context=tt,a=$):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{b=s.stateNode,lh(o,s),$=s.memoizedProps,tt=s.type===s.elementType?$:Ci(s.type,$),b.props=tt,g=s.pendingProps,c=b.context,nt=i.contextType,typeof nt=="object"&&nt!==null?nt=eh(nt):(nt=Zf(i)?Xf:H.current,nt=Yf(s,nt));var j=i.getDerivedStateFromProps;(et=typeof j=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($!==g||c!==nt)&&Hi(s,b,a,nt),jh=!1,c=s.memoizedState,b.state=c,qh(s,a,b,d);var _e=s.memoizedState;$!==g||c!==_e||Wf.current||jh?(typeof j=="function"&&(Di(s,i,j,a),_e=s.memoizedState),(tt=jh||Fi(s,i,tt,a,c,_e,nt)||!1)?(et||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(a,_e,nt),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(a,_e,nt)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||$===o.memoizedProps&&c===o.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||$===o.memoizedProps&&c===o.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=_e),b.props=a,b.state=_e,b.context=nt,a=tt):(typeof b.componentDidUpdate!="function"||$===o.memoizedProps&&c===o.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||$===o.memoizedProps&&c===o.memoizedState||(s.flags|=1024),a=!1)}return jj(o,s,i,a,_,d)}function jj(o,s,i,a,d,_){gj(o,s);var b=(s.flags&128)!==0;if(!a&&!b)return d&&dg(s,i,!1),Zi(o,s,_);a=s.stateNode,Wi.current=s;var $=b&&typeof i.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,o!==null&&b?(s.child=Ug(s,o.child,null,_),s.child=Ug(s,null,$,_)):Xi(o,s,$,_),s.memoizedState=a.state,d&&dg(s,i,!0),s.child}function kj(o){var s=o.stateNode;s.pendingContext?ag(o,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(o,s.context,!1),yh(o,s.containerInfo)}function lj(o,s,i,a,d){return Ig(),Jg(d),s.flags|=256,Xi(o,s,i,a),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(o){return{baseLanes:o,cachePool:null,transitions:null}}function oj(o,s,i){var a=s.pendingProps,d=L.current,_=!1,b=(s.flags&128)!==0,$;if(($=b)||($=o!==null&&o.memoizedState===null?!1:(d&2)!==0),$?(_=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(d|=1),G(L,d&1),o===null)return Eg(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(s.mode&1?o.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(b=a.children,o=a.fallback,_?(a=s.mode,_=s.child,b={mode:"hidden",children:b},!(a&1)&&_!==null?(_.childLanes=0,_.pendingProps=b):_=pj(b,a,0,null),o=Tg(o,a,i,null),_.return=s,o.return=s,_.sibling=o,s.child=_,s.child.memoizedState=nj(i),s.memoizedState=mj,o):qj(s,b));if(d=o.memoizedState,d!==null&&($=d.dehydrated,$!==null))return rj(o,s,b,a,$,d,i);if(_){_=a.fallback,b=s.mode,d=o.child,$=d.sibling;var nt={mode:"hidden",children:a.children};return!(b&1)&&s.child!==d?(a=s.child,a.childLanes=0,a.pendingProps=nt,s.deletions=null):(a=Pg(d,nt),a.subtreeFlags=d.subtreeFlags&14680064),$!==null?_=Pg($,_):(_=Tg(_,b,i,null),_.flags|=2),_.return=s,a.return=s,a.sibling=_,s.child=a,a=_,_=s.child,b=o.child.memoizedState,b=b===null?nj(i):{baseLanes:b.baseLanes|i,cachePool:null,transitions:b.transitions},_.memoizedState=b,_.childLanes=o.childLanes&~i,s.memoizedState=mj,a}return _=o.child,o=_.sibling,a=Pg(_,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=i),a.return=s,a.sibling=null,o!==null&&(i=s.deletions,i===null?(s.deletions=[o],s.flags|=16):i.push(o)),s.child=a,s.memoizedState=null,a}function qj(o,s){return s=pj({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function sj(o,s,i,a){return a!==null&&Jg(a),Ug(s,o.child,null,i),o=qj(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function rj(o,s,i,a,d,_,b){if(i)return s.flags&256?(s.flags&=-257,a=Ki(Error(p$1(422))),sj(o,s,b,a)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(_=a.fallback,d=s.mode,a=pj({mode:"visible",children:a.children},d,0,null),_=Tg(_,d,b,null),_.flags|=2,a.return=s,_.return=s,a.sibling=_,s.child=a,s.mode&1&&Ug(s,o.child,null,b),s.child.memoizedState=nj(b),s.memoizedState=mj,_);if(!(s.mode&1))return sj(o,s,b,null);if(d.data==="$!"){if(a=d.nextSibling&&d.nextSibling.dataset,a)var $=a.dgst;return a=$,_=Error(p$1(419)),a=Ki(_,a,void 0),sj(o,s,b,a)}if($=(b&o.childLanes)!==0,dh||$){if(a=Q,a!==null){switch(b&-b){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(a.suspendedLanes|b)?0:d,d!==0&&d!==_.retryLane&&(_.retryLane=d,ih(o,d),gi(a,o,d,-1))}return tj(),a=Ki(Error(p$1(421))),sj(o,s,b,a)}return d.data==="$?"?(s.flags|=128,s.child=o.child,s=uj.bind(null,o),d._reactRetry=s,null):(o=_.treeContext,yg=Lf(d.nextSibling),xg=s,I=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=s),s=qj(s,a.children),s.flags|=4096,s)}function vj(o,s,i){o.lanes|=s;var a=o.alternate;a!==null&&(a.lanes|=s),bh(o.return,s,i)}function wj(o,s,i,a,d){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=a,_.tail=i,_.tailMode=d)}function xj(o,s,i){var a=s.pendingProps,d=a.revealOrder,_=a.tail;if(Xi(o,s,a.children,i),a=L.current,a&2)a=a&1|2,s.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vj(o,i,s);else if(o.tag===19)vj(o,i,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}a&=1}if(G(L,a),!(s.mode&1))s.memoizedState=null;else switch(d){case"forwards":for(i=s.child,d=null;i!==null;)o=i.alternate,o!==null&&Ch(o)===null&&(d=i),i=i.sibling;i=d,i===null?(d=s.child,s.child=null):(d=i.sibling,i.sibling=null),wj(s,!1,d,i,_);break;case"backwards":for(i=null,d=s.child,s.child=null;d!==null;){if(o=d.alternate,o!==null&&Ch(o)===null){s.child=d;break}o=d.sibling,d.sibling=i,i=d,d=o}wj(s,!0,i,null,_);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(o,s){!(s.mode&1)&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function Zi(o,s,i){if(o!==null&&(s.dependencies=o.dependencies),rh|=s.lanes,!(i&s.childLanes))return null;if(o!==null&&s.child!==o.child)throw Error(p$1(153));if(s.child!==null){for(o=s.child,i=Pg(o,o.pendingProps),s.child=i,i.return=s;o.sibling!==null;)o=o.sibling,i=i.sibling=Pg(o,o.pendingProps),i.return=s;i.sibling=null}return s.child}function yj(o,s,i){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,d=s.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=d;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),s.flags|=128,null):i&s.child.childLanes?oj(o,s,i):(G(L,L.current&1),o=Zi(o,s,i),o!==null?o.sibling:null);G(L,L.current&1);break;case 19:if(a=(i&s.childLanes)!==0,o.flags&128){if(a)return xj(o,s,i);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return s.lanes=0,dj(o,s,i)}return Zi(o,s,i)}var zj,Aj,Bj,Cj;zj=function(o,s){for(var i=s.child;i!==null;){if(i.tag===5||i.tag===6)o.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aj=function(){};Bj=function(o,s,i,a){var d=o.memoizedProps;if(d!==a){o=s.stateNode,xh(uh.current);var _=null;switch(i){case"input":d=Ya(o,d),a=Ya(o,a),_=[];break;case"select":d=A({},d,{value:void 0}),a=A({},a,{value:void 0}),_=[];break;case"textarea":d=gb(o,d),a=gb(o,a),_=[];break;default:typeof d.onClick!="function"&&typeof a.onClick=="function"&&(o.onclick=Bf)}ub(i,a);var b;i=null;for(tt in d)if(!a.hasOwnProperty(tt)&&d.hasOwnProperty(tt)&&d[tt]!=null)if(tt==="style"){var $=d[tt];for(b in $)$.hasOwnProperty(b)&&(i||(i={}),i[b]="")}else tt!=="dangerouslySetInnerHTML"&&tt!=="children"&&tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(ea.hasOwnProperty(tt)?_||(_=[]):(_=_||[]).push(tt,null));for(tt in a){var nt=a[tt];if($=d!=null?d[tt]:void 0,a.hasOwnProperty(tt)&&nt!==$&&(nt!=null||$!=null))if(tt==="style")if($){for(b in $)!$.hasOwnProperty(b)||nt&&nt.hasOwnProperty(b)||(i||(i={}),i[b]="");for(b in nt)nt.hasOwnProperty(b)&&$[b]!==nt[b]&&(i||(i={}),i[b]=nt[b])}else i||(_||(_=[]),_.push(tt,i)),i=nt;else tt==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,$=$?$.__html:void 0,nt!=null&&$!==nt&&(_=_||[]).push(tt,nt)):tt==="children"?typeof nt!="string"&&typeof nt!="number"||(_=_||[]).push(tt,""+nt):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(tt)?(nt!=null&&tt==="onScroll"&&D("scroll",o),_||$===nt||(_=[])):(_=_||[]).push(tt,nt))}i&&(_=_||[]).push("style",i);var tt=_;(s.updateQueue=tt)&&(s.flags|=4)}};Cj=function(o,s,i,a){i!==a&&(s.flags|=4)};function Dj(o,s){if(!I)switch(o.tailMode){case"hidden":s=o.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?o.tail=null:i.sibling=null;break;case"collapsed":i=o.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:a.sibling=null}}function S(o){var s=o.alternate!==null&&o.alternate.child===o.child,i=0,a=0;if(s)for(var d=o.child;d!==null;)i|=d.lanes|d.childLanes,a|=d.subtreeFlags&14680064,a|=d.flags&14680064,d.return=o,d=d.sibling;else for(d=o.child;d!==null;)i|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=o,d=d.sibling;return o.subtreeFlags|=a,o.childLanes=i,s}function Ej(o,s,i){var a=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf(s.type)&&$f(),S(s),null;case 3:return a=s.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(o===null||o.child===null)&&(Gg(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(o,s),S(s),null;case 5:Bh(s);var d=xh(wh.current);if(i=s.type,o!==null&&s.stateNode!=null)Bj(o,s,i,a,d),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(p$1(166));return S(s),null}if(o=xh(uh.current),Gg(s)){a=s.stateNode,i=s.type;var _=s.memoizedProps;switch(a[Of]=s,a[Pf]=_,o=(s.mode&1)!==0,i){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(d=0;d<lf.length;d++)D(lf[d],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,_),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!_.multiple},D("invalid",a);break;case"textarea":hb(a,_),D("invalid",a)}ub(i,_),d=null;for(var b in _)if(_.hasOwnProperty(b)){var $=_[b];b==="children"?typeof $=="string"?a.textContent!==$&&(_.suppressHydrationWarning!==!0&&Af(a.textContent,$,o),d=["children",$]):typeof $=="number"&&a.textContent!==""+$&&(_.suppressHydrationWarning!==!0&&Af(a.textContent,$,o),d=["children",""+$]):ea.hasOwnProperty(b)&&$!=null&&b==="onScroll"&&D("scroll",a)}switch(i){case"input":Va(a),db(a,_,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(a.onclick=Bf)}a=d,s.updateQueue=a,a!==null&&(s.flags|=4)}else{b=d.nodeType===9?d:d.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb(i)),o==="http://www.w3.org/1999/xhtml"?i==="script"?(o=b.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof a.is=="string"?o=b.createElement(i,{is:a.is}):(o=b.createElement(i),i==="select"&&(b=o,a.multiple?b.multiple=!0:a.size&&(b.size=a.size))):o=b.createElementNS(o,i),o[Of]=s,o[Pf]=a,zj(o,s,!1,!1),s.stateNode=o;e:{switch(b=vb(i,a),i){case"dialog":D("cancel",o),D("close",o),d=a;break;case"iframe":case"object":case"embed":D("load",o),d=a;break;case"video":case"audio":for(d=0;d<lf.length;d++)D(lf[d],o);d=a;break;case"source":D("error",o),d=a;break;case"img":case"image":case"link":D("error",o),D("load",o),d=a;break;case"details":D("toggle",o),d=a;break;case"input":Za(o,a),d=Ya(o,a),D("invalid",o);break;case"option":d=a;break;case"select":o._wrapperState={wasMultiple:!!a.multiple},d=A({},a,{value:void 0}),D("invalid",o);break;case"textarea":hb(o,a),d=gb(o,a),D("invalid",o);break;default:d=a}ub(i,d),$=d;for(_ in $)if($.hasOwnProperty(_)){var nt=$[_];_==="style"?sb(o,nt):_==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,nt!=null&&nb(o,nt)):_==="children"?typeof nt=="string"?(i!=="textarea"||nt!=="")&&ob(o,nt):typeof nt=="number"&&ob(o,""+nt):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea.hasOwnProperty(_)?nt!=null&&_==="onScroll"&&D("scroll",o):nt!=null&&ta(o,_,nt,b))}switch(i){case"input":Va(o),db(o,a,!1);break;case"textarea":Va(o),jb(o);break;case"option":a.value!=null&&o.setAttribute("value",""+Sa(a.value));break;case"select":o.multiple=!!a.multiple,_=a.value,_!=null?fb(o,!!a.multiple,_,!1):a.defaultValue!=null&&fb(o,!!a.multiple,a.defaultValue,!0);break;default:typeof d.onClick=="function"&&(o.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(o&&s.stateNode!=null)Cj(o,s,o.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(p$1(166));if(i=xh(wh.current),xh(uh.current),Gg(s)){if(a=s.stateNode,i=s.memoizedProps,a[Of]=s,(_=a.nodeValue!==i)&&(o=xg,o!==null))switch(o.tag){case 3:Af(a.nodeValue,i,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,i,(o.mode&1)!==0)}_&&(s.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Of]=s,s.stateNode=a}return S(s),null;case 13:if(E(L),a=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,_=!1;else if(_=Gg(s),a!==null&&a.dehydrated!==null){if(o===null){if(!_)throw Error(p$1(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(p$1(317));_[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),_=!1}else zg!==null&&(Fj(zg),zg=null),_=!0;if(!_)return s.flags&65536?s:null}return s.flags&128?(s.lanes=i,s):(a=a!==null,a!==(o!==null&&o.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(o===null||L.current&1?T===0&&(T=3):tj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return zh(),Aj(o,s),o===null&&sf(s.stateNode.containerInfo),S(s),null;case 10:return ah(s.type._context),S(s),null;case 17:return Zf(s.type)&&$f(),S(s),null;case 19:if(E(L),_=s.memoizedState,_===null)return S(s),null;if(a=(s.flags&128)!==0,b=_.rendering,b===null)if(a)Dj(_,!1);else{if(T!==0||o!==null&&o.flags&128)for(o=s.child;o!==null;){if(b=Ch(o),b!==null){for(s.flags|=128,Dj(_,!1),a=b.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=i,i=s.child;i!==null;)_=i,o=a,_.flags&=14680066,b=_.alternate,b===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=b.childLanes,_.lanes=b.lanes,_.child=b.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=b.memoizedProps,_.memoizedState=b.memoizedState,_.updateQueue=b.updateQueue,_.type=b.type,o=b.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i=i.sibling;return G(L,L.current&1|2),s.child}o=o.sibling}_.tail!==null&&B()>Gj&&(s.flags|=128,a=!0,Dj(_,!1),s.lanes=4194304)}else{if(!a)if(o=Ch(b),o!==null){if(s.flags|=128,a=!0,i=o.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),Dj(_,!0),_.tail===null&&_.tailMode==="hidden"&&!b.alternate&&!I)return S(s),null}else 2*B()-_.renderingStartTime>Gj&&i!==1073741824&&(s.flags|=128,a=!0,Dj(_,!1),s.lanes=4194304);_.isBackwards?(b.sibling=s.child,s.child=b):(i=_.last,i!==null?i.sibling=b:s.child=b,_.last=b)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=B(),s.sibling=null,i=L.current,G(L,a?i&1|2:i&1),s):(S(s),null);case 22:case 23:return Hj(),a=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?fj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p$1(156,s.tag))}function Ij(o,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return zh(),E(Wf),E(H),Eh(),o=s.flags,o&65536&&!(o&128)?(s.flags=o&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E(L),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(p$1(340));Ig()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(o,s){var i=o.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){W(o,s,a)}else i.current=null}function Mj(o,s,i){try{i()}catch(a){W(o,s,a)}}var Nj=!1;function Oj(o,s){if(Cf=dd,o=Me(),Ne(o)){if("selectionStart"in o)var i={start:o.selectionStart,end:o.selectionEnd};else e:{i=(i=o.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var d=a.anchorOffset,_=a.focusNode;a=a.focusOffset;try{i.nodeType,_.nodeType}catch{i=null;break e}var b=0,$=-1,nt=-1,tt=0,et=0,g=o,c=null;t:for(;;){for(var j;g!==i||d!==0&&g.nodeType!==3||($=b+d),g!==_||a!==0&&g.nodeType!==3||(nt=b+a),g.nodeType===3&&(b+=g.nodeValue.length),(j=g.firstChild)!==null;)c=g,g=j;for(;;){if(g===o)break t;if(c===i&&++tt===d&&($=b),c===_&&++et===a&&(nt=b),(j=g.nextSibling)!==null)break;g=c,c=g.parentNode}g=j}i=$===-1||nt===-1?null:{start:$,end:nt}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:o,selectionRange:i},dd=!1,V=s;V!==null;)if(s=V,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,V=o;else for(;V!==null;){s=V;try{var _e=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var rt=_e.memoizedProps,st=_e.memoizedState,ot=s.stateNode,it=ot.getSnapshotBeforeUpdate(s.elementType===s.type?rt:Ci(s.type,rt),st);ot.__reactInternalSnapshotBeforeUpdate=it}break;case 3:var at=s.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(lt){W(s,s.return,lt)}if(o=s.sibling,o!==null){o.return=s.return,V=o;break}V=s.return}return _e=Nj,Nj=!1,_e}function Pj(o,s,i){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&o)===o){var _=d.destroy;d.destroy=void 0,_!==void 0&&Mj(s,i,_)}d=d.next}while(d!==a)}}function Qj(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&o)===o){var a=i.create;i.destroy=a()}i=i.next}while(i!==s)}}function Rj(o){var s=o.ref;if(s!==null){var i=o.stateNode;switch(o.tag){case 5:o=i;break;default:o=i}typeof s=="function"?s(o):s.current=o}}function Sj(o){var s=o.alternate;s!==null&&(o.alternate=null,Sj(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tj(o){return o.tag===5||o.tag===3||o.tag===4}function Uj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Vj(o,s,i){var a=o.tag;if(a===5||a===6)o=o.stateNode,s?i.nodeType===8?i.parentNode.insertBefore(o,s):i.insertBefore(o,s):(i.nodeType===8?(s=i.parentNode,s.insertBefore(o,i)):(s=i,s.appendChild(o)),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Bf));else if(a!==4&&(o=o.child,o!==null))for(Vj(o,s,i),o=o.sibling;o!==null;)Vj(o,s,i),o=o.sibling}function Wj(o,s,i){var a=o.tag;if(a===5||a===6)o=o.stateNode,s?i.insertBefore(o,s):i.appendChild(o);else if(a!==4&&(o=o.child,o!==null))for(Wj(o,s,i),o=o.sibling;o!==null;)Wj(o,s,i),o=o.sibling}var X$1=null,Xj=!1;function Yj(o,s,i){for(i=i.child;i!==null;)Zj(o,s,i),i=i.sibling}function Zj(o,s,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Lj(i,s);case 6:var a=X$1,d=Xj;X$1=null,Yj(o,s,i),X$1=a,Xj=d,X$1!==null&&(Xj?(o=X$1,i=i.stateNode,o.nodeType===8?o.parentNode.removeChild(i):o.removeChild(i)):X$1.removeChild(i.stateNode));break;case 18:X$1!==null&&(Xj?(o=X$1,i=i.stateNode,o.nodeType===8?Kf(o.parentNode,i):o.nodeType===1&&Kf(o,i),bd(o)):Kf(X$1,i.stateNode));break;case 4:a=X$1,d=Xj,X$1=i.stateNode.containerInfo,Xj=!0,Yj(o,s,i),X$1=a,Xj=d;break;case 0:case 11:case 14:case 15:if(!U&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){d=a=a.next;do{var _=d,b=_.destroy;_=_.tag,b!==void 0&&(_&2||_&4)&&Mj(i,s,b),d=d.next}while(d!==a)}Yj(o,s,i);break;case 1:if(!U&&(Lj(i,s),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch($){W(i,s,$)}Yj(o,s,i);break;case 21:Yj(o,s,i);break;case 22:i.mode&1?(U=(a=U)||i.memoizedState!==null,Yj(o,s,i),U=a):Yj(o,s,i);break;default:Yj(o,s,i)}}function ak(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var i=o.stateNode;i===null&&(i=o.stateNode=new Kj),s.forEach(function(a){var d=bk.bind(null,o,a);i.has(a)||(i.add(a),a.then(d,d))})}}function ck(o,s){var i=s.deletions;if(i!==null)for(var a=0;a<i.length;a++){var d=i[a];try{var _=o,b=s,$=b;e:for(;$!==null;){switch($.tag){case 5:X$1=$.stateNode,Xj=!1;break e;case 3:X$1=$.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=$.stateNode.containerInfo,Xj=!0;break e}$=$.return}if(X$1===null)throw Error(p$1(160));Zj(_,b,d),X$1=null,Xj=!1;var nt=d.alternate;nt!==null&&(nt.return=null),d.return=null}catch(tt){W(d,s,tt)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,o),s=s.sibling}function dk(o,s){var i=o.alternate,a=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ck(s,o),ek(o),a&4){try{Pj(3,o,o.return),Qj(3,o)}catch(rt){W(o,o.return,rt)}try{Pj(5,o,o.return)}catch(rt){W(o,o.return,rt)}}break;case 1:ck(s,o),ek(o),a&512&&i!==null&&Lj(i,i.return);break;case 5:if(ck(s,o),ek(o),a&512&&i!==null&&Lj(i,i.return),o.flags&32){var d=o.stateNode;try{ob(d,"")}catch(rt){W(o,o.return,rt)}}if(a&4&&(d=o.stateNode,d!=null)){var _=o.memoizedProps,b=i!==null?i.memoizedProps:_,$=o.type,nt=o.updateQueue;if(o.updateQueue=null,nt!==null)try{$==="input"&&_.type==="radio"&&_.name!=null&&ab(d,_),vb($,b);var tt=vb($,_);for(b=0;b<nt.length;b+=2){var et=nt[b],g=nt[b+1];et==="style"?sb(d,g):et==="dangerouslySetInnerHTML"?nb(d,g):et==="children"?ob(d,g):ta(d,et,g,tt)}switch($){case"input":bb(d,_);break;case"textarea":ib(d,_);break;case"select":var c=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!_.multiple;var j=_.value;j!=null?fb(d,!!_.multiple,j,!1):c!==!!_.multiple&&(_.defaultValue!=null?fb(d,!!_.multiple,_.defaultValue,!0):fb(d,!!_.multiple,_.multiple?[]:"",!1))}d[Pf]=_}catch(rt){W(o,o.return,rt)}}break;case 6:if(ck(s,o),ek(o),a&4){if(o.stateNode===null)throw Error(p$1(162));d=o.stateNode,_=o.memoizedProps;try{d.nodeValue=_}catch(rt){W(o,o.return,rt)}}break;case 3:if(ck(s,o),ek(o),a&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(rt){W(o,o.return,rt)}break;case 4:ck(s,o),ek(o);break;case 13:ck(s,o),ek(o),d=o.child,d.flags&8192&&(_=d.memoizedState!==null,d.stateNode.isHidden=_,!_||d.alternate!==null&&d.alternate.memoizedState!==null||(fk=B())),a&4&&ak(o);break;case 22:if(et=i!==null&&i.memoizedState!==null,o.mode&1?(U=(tt=U)||et,ck(s,o),U=tt):ck(s,o),ek(o),a&8192){if(tt=o.memoizedState!==null,(o.stateNode.isHidden=tt)&&!et&&o.mode&1)for(V=o,et=o.child;et!==null;){for(g=V=et;V!==null;){switch(c=V,j=c.child,c.tag){case 0:case 11:case 14:case 15:Pj(4,c,c.return);break;case 1:Lj(c,c.return);var _e=c.stateNode;if(typeof _e.componentWillUnmount=="function"){a=c,i=c.return;try{s=a,_e.props=s.memoizedProps,_e.state=s.memoizedState,_e.componentWillUnmount()}catch(rt){W(a,i,rt)}}break;case 5:Lj(c,c.return);break;case 22:if(c.memoizedState!==null){gk(g);continue}}j!==null?(j.return=c,V=j):gk(g)}et=et.sibling}e:for(et=null,g=o;;){if(g.tag===5){if(et===null){et=g;try{d=g.stateNode,tt?(_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):($=g.stateNode,nt=g.memoizedProps.style,b=nt!=null&&nt.hasOwnProperty("display")?nt.display:null,$.style.display=rb("display",b))}catch(rt){W(o,o.return,rt)}}}else if(g.tag===6){if(et===null)try{g.stateNode.nodeValue=tt?"":g.memoizedProps}catch(rt){W(o,o.return,rt)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===o)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;et===g&&(et=null),g=g.return}et===g&&(et=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ck(s,o),ek(o),a&4&&ak(o);break;case 21:break;default:ck(s,o),ek(o)}}function ek(o){var s=o.flags;if(s&2){try{e:{for(var i=o.return;i!==null;){if(Tj(i)){var a=i;break e}i=i.return}throw Error(p$1(160))}switch(a.tag){case 5:var d=a.stateNode;a.flags&32&&(ob(d,""),a.flags&=-33);var _=Uj(o);Wj(o,_,d);break;case 3:case 4:var b=a.stateNode.containerInfo,$=Uj(o);Vj(o,$,b);break;default:throw Error(p$1(161))}}catch(nt){W(o,o.return,nt)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function hk(o,s,i){V=o,ik(o)}function ik(o,s,i){for(var a=(o.mode&1)!==0;V!==null;){var d=V,_=d.child;if(d.tag===22&&a){var b=d.memoizedState!==null||Jj;if(!b){var $=d.alternate,nt=$!==null&&$.memoizedState!==null||U;$=Jj;var tt=U;if(Jj=b,(U=nt)&&!tt)for(V=d;V!==null;)b=V,nt=b.child,b.tag===22&&b.memoizedState!==null?jk(d):nt!==null?(nt.return=b,V=nt):jk(d);for(;_!==null;)V=_,ik(_),_=_.sibling;V=d,Jj=$,U=tt}kk(o)}else d.subtreeFlags&8772&&_!==null?(_.return=d,V=_):kk(o)}}function kk(o){for(;V!==null;){var s=V;if(s.flags&8772){var i=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Qj(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!U)if(i===null)a.componentDidMount();else{var d=s.elementType===s.type?i.memoizedProps:Ci(s.type,i.memoizedProps);a.componentDidUpdate(d,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var _=s.updateQueue;_!==null&&sh(s,_,a);break;case 3:var b=s.updateQueue;if(b!==null){if(i=null,s.child!==null)switch(s.child.tag){case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}sh(s,b,i)}break;case 5:var $=s.stateNode;if(i===null&&s.flags&4){i=$;var nt=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":nt.autoFocus&&i.focus();break;case"img":nt.src&&(i.src=nt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var tt=s.alternate;if(tt!==null){var et=tt.memoizedState;if(et!==null){var g=et.dehydrated;g!==null&&bd(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||s.flags&512&&Rj(s)}catch(c){W(s,s.return,c)}}if(s===o){V=null;break}if(i=s.sibling,i!==null){i.return=s.return,V=i;break}V=s.return}}function gk(o){for(;V!==null;){var s=V;if(s===o){V=null;break}var i=s.sibling;if(i!==null){i.return=s.return,V=i;break}V=s.return}}function jk(o){for(;V!==null;){var s=V;try{switch(s.tag){case 0:case 11:case 15:var i=s.return;try{Qj(4,s)}catch(nt){W(s,i,nt)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var d=s.return;try{a.componentDidMount()}catch(nt){W(s,d,nt)}}var _=s.return;try{Rj(s)}catch(nt){W(s,_,nt)}break;case 5:var b=s.return;try{Rj(s)}catch(nt){W(s,b,nt)}}}catch(nt){W(s,s.return,nt)}if(s===o){V=null;break}var $=s.sibling;if($!==null){$.return=s.return,V=$;break}V=s.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(o){return o.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(o=C,o!==0||(o=window.event,o=o===void 0?16:jd(o.type)),o):1}function gi(o,s,i,a){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(o,i,a),(!(K&2)||o!==Q)&&(o===Q&&(!(K&2)&&(qk|=i),T===4&&Ck(o,Z)),Dk(o,a),i===1&&K===0&&!(s.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(o,s){var i=o.callbackNode;wc(o,s);var a=uc(o,o===Q?Z:0);if(a===0)i!==null&&bc(i),o.callbackNode=null,o.callbackPriority=0;else if(s=a&-a,o.callbackPriority!==s){if(i!=null&&bc(i),s===1)o.tag===0?ig(Ek.bind(null,o)):hg(Ek.bind(null,o)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(a)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Fk(i,Gk.bind(null,o))}o.callbackPriority=s,o.callbackNode=i}}function Gk(o,s){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var i=o.callbackNode;if(Hk()&&o.callbackNode!==i)return null;var a=uc(o,o===Q?Z:0);if(a===0)return null;if(a&30||a&o.expiredLanes||s)s=Ik(o,a);else{s=a;var d=K;K|=2;var _=Jk();(Q!==o||Z!==s)&&(uk=null,Gj=B()+500,Kk(o,s));do try{Lk();break}catch($){Mk(o,$)}while(!0);$g(),mk.current=_,K=d,Y!==null?s=0:(Q=null,Z=0,s=T)}if(s!==0){if(s===2&&(d=xc(o),d!==0&&(a=d,s=Nk(o,d))),s===1)throw i=pk,Kk(o,0),Ck(o,a),Dk(o,B()),i;if(s===6)Ck(o,a);else{if(d=o.current.alternate,!(a&30)&&!Ok(d)&&(s=Ik(o,a),s===2&&(_=xc(o),_!==0&&(a=_,s=Nk(o,_))),s===1))throw i=pk,Kk(o,0),Ck(o,a),Dk(o,B()),i;switch(o.finishedWork=d,o.finishedLanes=a,s){case 0:case 1:throw Error(p$1(345));case 2:Pk(o,tk,uk);break;case 3:if(Ck(o,a),(a&130023424)===a&&(s=fk+500-B(),10<s)){if(uc(o,0)!==0)break;if(d=o.suspendedLanes,(d&a)!==a){R(),o.pingedLanes|=o.suspendedLanes&d;break}o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),s);break}Pk(o,tk,uk);break;case 4:if(Ck(o,a),(a&4194240)===a)break;for(s=o.eventTimes,d=-1;0<a;){var b=31-oc(a);_=1<<b,b=s[b],b>d&&(d=b),a&=~_}if(a=d,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),a);break}Pk(o,tk,uk);break;case 5:Pk(o,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(o,B()),o.callbackNode===i?Gk.bind(null,o):null}function Nk(o,s){var i=sk;return o.current.memoizedState.isDehydrated&&(Kk(o,s).flags|=256),o=Ik(o,s),o!==2&&(s=tk,tk=i,s!==null&&Fj(s)),o}function Fj(o){tk===null?tk=o:tk.push.apply(tk,o)}function Ok(o){for(var s=o;;){if(s.flags&16384){var i=s.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var d=i[a],_=d.getSnapshot;d=d.value;try{if(!He(_(),d))return!1}catch{return!1}}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(o,s){for(s&=~rk,s&=~qk,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var i=31-oc(s),a=1<<i;o[i]=-1,s&=~a}}function Ek(o){if(K&6)throw Error(p$1(327));Hk();var s=uc(o,0);if(!(s&1))return Dk(o,B()),null;var i=Ik(o,s);if(o.tag!==0&&i===2){var a=xc(o);a!==0&&(s=a,i=Nk(o,a))}if(i===1)throw i=pk,Kk(o,0),Ck(o,s),Dk(o,B()),i;if(i===6)throw Error(p$1(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,Pk(o,tk,uk),Dk(o,B()),null}function Qk(o,s){var i=K;K|=1;try{return o(s)}finally{K=i,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(o){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var i=ok.transition,a=C;try{if(ok.transition=null,C=1,o)return o()}finally{C=a,ok.transition=i,K=s,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(o,s){o.finishedWork=null,o.finishedLanes=0;var i=o.timeoutHandle;if(i!==-1&&(o.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var a=i;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}i=i.return}if(Q=o,Y=o=Pg(o.current,null),Z=fj=s,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(i=fh[s],a=i.interleaved,a!==null){i.interleaved=null;var d=a.next,_=i.pending;if(_!==null){var b=_.next;_.next=d,a.next=b}i.pending=a}fh=null}return o}function Mk(o,s){do{var i=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var d=a.queue;d!==null&&(d.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,i===null||i.return===null){T=1,pk=s,Y=null;break}e:{var _=o,b=i.return,$=i,nt=s;if(s=Z,$.flags|=32768,nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var tt=nt,et=$,g=et.tag;if(!(et.mode&1)&&(g===0||g===11||g===15)){var c=et.alternate;c?(et.updateQueue=c.updateQueue,et.memoizedState=c.memoizedState,et.lanes=c.lanes):(et.updateQueue=null,et.memoizedState=null)}var j=Ui(b);if(j!==null){j.flags&=-257,Vi(j,b,$,_,s),j.mode&1&&Si(_,tt,s),s=j,nt=tt;var _e=s.updateQueue;if(_e===null){var rt=new Set;rt.add(nt),s.updateQueue=rt}else _e.add(nt);break e}else{if(!(s&1)){Si(_,tt,s),tj();break e}nt=Error(p$1(426))}}else if(I&&$.mode&1){var st=Ui(b);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Vi(st,b,$,_,s),Jg(Ji(nt,$));break e}}_=nt=Ji(nt,$),T!==4&&(T=2),sk===null?sk=[_]:sk.push(_),_=b;do{switch(_.tag){case 3:_.flags|=65536,s&=-s,_.lanes|=s;var ot=Ni(_,nt,s);ph(_,ot);break e;case 1:$=nt;var it=_.type,at=_.stateNode;if(!(_.flags&128)&&(typeof it.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Ri===null||!Ri.has(at)))){_.flags|=65536,s&=-s,_.lanes|=s;var lt=Qi(_,$,s);ph(_,lt);break e}}_=_.return}while(_!==null)}Sk(i)}catch(ut){s=ut,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(!0)}function Jk(){var o=mk.current;return mk.current=Rh,o===null?Rh:o}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(o,s){var i=K;K|=2;var a=Jk();(Q!==o||Z!==s)&&(uk=null,Kk(o,s));do try{Tk();break}catch(d){Mk(o,d)}while(!0);if($g(),K=i,mk.current=a,Y!==null)throw Error(p$1(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(o){var s=Vk(o.alternate,o,fj);o.memoizedProps=o.pendingProps,s===null?Sk(o):Y=s,nk.current=null}function Sk(o){var s=o;do{var i=s.alternate;if(o=s.return,s.flags&32768){if(i=Ij(i,s),i!==null){i.flags&=32767,Y=i;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T=6,Y=null;return}}else if(i=Ej(i,s,fj),i!==null){Y=i;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=o}while(s!==null);T===0&&(T=5)}function Pk(o,s,i){var a=C,d=ok.transition;try{ok.transition=null,C=1,Wk(o,s,i,a)}finally{ok.transition=d,C=a}return null}function Wk(o,s,i,a){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));i=o.finishedWork;var d=o.finishedLanes;if(i===null)return null;if(o.finishedWork=null,o.finishedLanes=0,i===o.current)throw Error(p$1(177));o.callbackNode=null,o.callbackPriority=0;var _=i.lanes|i.childLanes;if(Bc(o,_),o===Q&&(Y=Q=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),_=(i.flags&15990)!==0,i.subtreeFlags&15990||_){_=ok.transition,ok.transition=null;var b=C;C=1;var $=K;K|=4,nk.current=null,Oj(o,i),dk(i,o),Oe(Df),dd=!!Cf,Df=Cf=null,o.current=i,hk(i),dc(),K=$,C=b,ok.transition=_}else o.current=i;if(vk&&(vk=!1,wk=o,xk=d),_=o.pendingLanes,_===0&&(Ri=null),mc(i.stateNode),Dk(o,B()),s!==null)for(a=o.onRecoverableError,i=0;i<s.length;i++)d=s[i],a(d.value,{componentStack:d.stack,digest:d.digest});if(Oi)throw Oi=!1,o=Pi,Pi=null,o;return xk&1&&o.tag!==0&&Hk(),_=o.pendingLanes,_&1?o===zk?yk++:(yk=0,zk=o):yk=0,jg(),null}function Hk(){if(wk!==null){var o=Dc(xk),s=ok.transition,i=C;try{if(ok.transition=null,C=16>o?16:o,wk===null)var a=!1;else{if(o=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var d=K;for(K|=4,V=o.current;V!==null;){var _=V,b=_.child;if(V.flags&16){var $=_.deletions;if($!==null){for(var nt=0;nt<$.length;nt++){var tt=$[nt];for(V=tt;V!==null;){var et=V;switch(et.tag){case 0:case 11:case 15:Pj(8,et,_)}var g=et.child;if(g!==null)g.return=et,V=g;else for(;V!==null;){et=V;var c=et.sibling,j=et.return;if(Sj(et),et===tt){V=null;break}if(c!==null){c.return=j,V=c;break}V=j}}}var _e=_.alternate;if(_e!==null){var rt=_e.child;if(rt!==null){_e.child=null;do{var st=rt.sibling;rt.sibling=null,rt=st}while(rt!==null)}}V=_}}if(_.subtreeFlags&2064&&b!==null)b.return=_,V=b;else e:for(;V!==null;){if(_=V,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Pj(9,_,_.return)}var ot=_.sibling;if(ot!==null){ot.return=_.return,V=ot;break e}V=_.return}}var it=o.current;for(V=it;V!==null;){b=V;var at=b.child;if(b.subtreeFlags&2064&&at!==null)at.return=b,V=at;else e:for(b=it;V!==null;){if($=V,$.flags&2048)try{switch($.tag){case 0:case 11:case 15:Qj(9,$)}}catch(ut){W($,$.return,ut)}if($===b){V=null;break e}var lt=$.sibling;if(lt!==null){lt.return=$.return,V=lt;break e}V=$.return}}if(K=d,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,o)}catch{}a=!0}return a}finally{C=i,ok.transition=s}}return!1}function Xk(o,s,i){s=Ji(i,s),s=Ni(o,s,1),o=nh(o,s,1),s=R(),o!==null&&(Ac(o,1,s),Dk(o,s))}function W(o,s,i){if(o.tag===3)Xk(o,o,i);else for(;s!==null;){if(s.tag===3){Xk(s,o,i);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){o=Ji(i,o),o=Qi(s,o,1),s=nh(s,o,1),o=R(),s!==null&&(Ac(s,1,o),Dk(s,o));break}}s=s.return}}function Ti(o,s,i){var a=o.pingCache;a!==null&&a.delete(s),s=R(),o.pingedLanes|=o.suspendedLanes&i,Q===o&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(o,0):rk|=i),Dk(o,s)}function Yk(o,s){s===0&&(o.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var i=R();o=ih(o,s),o!==null&&(Ac(o,s,i),Dk(o,i))}function uj(o){var s=o.memoizedState,i=0;s!==null&&(i=s.retryLane),Yk(o,i)}function bk(o,s){var i=0;switch(o.tag){case 13:var a=o.stateNode,d=o.memoizedState;d!==null&&(i=d.retryLane);break;case 19:a=o.stateNode;break;default:throw Error(p$1(314))}a!==null&&a.delete(s),Yk(o,i)}var Vk;Vk=function(o,s,i){if(o!==null)if(o.memoizedProps!==s.pendingProps||Wf.current)dh=!0;else{if(!(o.lanes&i)&&!(s.flags&128))return dh=!1,yj(o,s,i);dh=!!(o.flags&131072)}else dh=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;ij(o,s),o=s.pendingProps;var d=Yf(s,H.current);ch(s,i),d=Nh(null,s,a,o,d,i);var _=Sh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(a)?(_=!0,cg(s)):_=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,kh(s),d.updater=Ei,s.stateNode=d,d._reactInternals=s,Ii(s,a,o,i),s=jj(null,s,a,!0,_,i)):(s.tag=0,I&&_&&vg(s),Xi(null,s,d,i),s=s.child),s;case 16:a=s.elementType;e:{switch(ij(o,s),o=s.pendingProps,d=a._init,a=d(a._payload),s.type=a,d=s.tag=Zk(a),o=Ci(a,o),d){case 0:s=cj(null,s,a,o,i);break e;case 1:s=hj(null,s,a,o,i);break e;case 11:s=Yi(null,s,a,o,i);break e;case 14:s=$i(null,s,a,Ci(a.type,o),i);break e}throw Error(p$1(306,a,""))}return s;case 0:return a=s.type,d=s.pendingProps,d=s.elementType===a?d:Ci(a,d),cj(o,s,a,d,i);case 1:return a=s.type,d=s.pendingProps,d=s.elementType===a?d:Ci(a,d),hj(o,s,a,d,i);case 3:e:{if(kj(s),o===null)throw Error(p$1(387));a=s.pendingProps,_=s.memoizedState,d=_.element,lh(o,s),qh(s,a,null,i);var b=s.memoizedState;if(a=b.element,_.isDehydrated)if(_={element:a,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){d=Ji(Error(p$1(423)),s),s=lj(o,s,a,i,d);break e}else if(a!==d){d=Ji(Error(p$1(424)),s),s=lj(o,s,a,i,d);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,i=Vg(s,null,a,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),a===d){s=Zi(o,s,i);break e}Xi(o,s,a,i)}s=s.child}return s;case 5:return Ah(s),o===null&&Eg(s),a=s.type,d=s.pendingProps,_=o!==null?o.memoizedProps:null,b=d.children,Ef(a,d)?b=null:_!==null&&Ef(a,_)&&(s.flags|=32),gj(o,s),Xi(o,s,b,i),s.child;case 6:return o===null&&Eg(s),null;case 13:return oj(o,s,i);case 4:return yh(s,s.stateNode.containerInfo),a=s.pendingProps,o===null?s.child=Ug(s,null,a,i):Xi(o,s,a,i),s.child;case 11:return a=s.type,d=s.pendingProps,d=s.elementType===a?d:Ci(a,d),Yi(o,s,a,d,i);case 7:return Xi(o,s,s.pendingProps,i),s.child;case 8:return Xi(o,s,s.pendingProps.children,i),s.child;case 12:return Xi(o,s,s.pendingProps.children,i),s.child;case 10:e:{if(a=s.type._context,d=s.pendingProps,_=s.memoizedProps,b=d.value,G(Wg,a._currentValue),a._currentValue=b,_!==null)if(He(_.value,b)){if(_.children===d.children&&!Wf.current){s=Zi(o,s,i);break e}}else for(_=s.child,_!==null&&(_.return=s);_!==null;){var $=_.dependencies;if($!==null){b=_.child;for(var nt=$.firstContext;nt!==null;){if(nt.context===a){if(_.tag===1){nt=mh(-1,i&-i),nt.tag=2;var tt=_.updateQueue;if(tt!==null){tt=tt.shared;var et=tt.pending;et===null?nt.next=nt:(nt.next=et.next,et.next=nt),tt.pending=nt}}_.lanes|=i,nt=_.alternate,nt!==null&&(nt.lanes|=i),bh(_.return,i,s),$.lanes|=i;break}nt=nt.next}}else if(_.tag===10)b=_.type===s.type?null:_.child;else if(_.tag===18){if(b=_.return,b===null)throw Error(p$1(341));b.lanes|=i,$=b.alternate,$!==null&&($.lanes|=i),bh(b,i,s),b=_.sibling}else b=_.child;if(b!==null)b.return=_;else for(b=_;b!==null;){if(b===s){b=null;break}if(_=b.sibling,_!==null){_.return=b.return,b=_;break}b=b.return}_=b}Xi(o,s,d.children,i),s=s.child}return s;case 9:return d=s.type,a=s.pendingProps.children,ch(s,i),d=eh(d),a=a(d),s.flags|=1,Xi(o,s,a,i),s.child;case 14:return a=s.type,d=Ci(a,s.pendingProps),d=Ci(a.type,d),$i(o,s,a,d,i);case 15:return bj(o,s,s.type,s.pendingProps,i);case 17:return a=s.type,d=s.pendingProps,d=s.elementType===a?d:Ci(a,d),ij(o,s),s.tag=1,Zf(a)?(o=!0,cg(s)):o=!1,ch(s,i),Gi(s,a,d),Ii(s,a,d,i),jj(null,s,a,!0,o,i);case 19:return xj(o,s,i);case 22:return dj(o,s,i)}throw Error(p$1(156,s.tag))};function Fk(o,s){return ac(o,s)}function $k(o,s,i,a){this.tag=o,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,s,i,a){return new $k(o,s,i,a)}function aj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Zk(o){if(typeof o=="function")return aj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da)return 11;if(o===Ga)return 14}return 2}function Pg(o,s){var i=o.alternate;return i===null?(i=Bg(o.tag,s,o.key,o.mode),i.elementType=o.elementType,i.type=o.type,i.stateNode=o.stateNode,i.alternate=o,o.alternate=i):(i.pendingProps=s,i.type=o.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=o.flags&14680064,i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=o.sibling,i.index=o.index,i.ref=o.ref,i}function Rg(o,s,i,a,d,_){var b=2;if(a=o,typeof o=="function")aj(o)&&(b=1);else if(typeof o=="string")b=5;else e:switch(o){case ya:return Tg(i.children,d,_,s);case za:b=8,d|=8;break;case Aa:return o=Bg(12,i,s,d|2),o.elementType=Aa,o.lanes=_,o;case Ea:return o=Bg(13,i,s,d),o.elementType=Ea,o.lanes=_,o;case Fa:return o=Bg(19,i,s,d),o.elementType=Fa,o.lanes=_,o;case Ia:return pj(i,d,_,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba:b=10;break e;case Ca:b=9;break e;case Da:b=11;break e;case Ga:b=14;break e;case Ha:b=16,a=null;break e}throw Error(p$1(130,o==null?o:typeof o,""))}return s=Bg(b,i,s,d),s.elementType=o,s.type=a,s.lanes=_,s}function Tg(o,s,i,a){return o=Bg(7,o,a,s),o.lanes=i,o}function pj(o,s,i,a){return o=Bg(22,o,a,s),o.elementType=Ia,o.lanes=i,o.stateNode={isHidden:!1},o}function Qg(o,s,i){return o=Bg(6,o,null,s),o.lanes=i,o}function Sg(o,s,i){return s=Bg(4,o.children!==null?o.children:[],o.key,s),s.lanes=i,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function al(o,s,i,a,d){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function bl(o,s,i,a,d,_,b,$,nt){return o=new al(o,s,i,$,nt),s===1?(s=1,_===!0&&(s|=8)):s=0,_=Bg(3,null,null,s),o.current=_,_.stateNode=o,_.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(_),o}function cl(o,s,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:o,containerInfo:s,implementation:i}}function dl(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb(o)!==o||o.tag!==1)throw Error(p$1(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p$1(171))}if(o.tag===1){var i=o.type;if(Zf(i))return bg(o,i,s)}return s}function el(o,s,i,a,d,_,b,$,nt){return o=bl(i,a,!0,o,d,_,b,$,nt),o.context=dl(null),i=o.current,a=R(),d=yi(i),_=mh(a,d),_.callback=s??null,nh(i,_,d),o.current.lanes=d,Ac(o,d,a),Dk(o,a),o}function fl(o,s,i,a){var d=s.current,_=R(),b=yi(d);return i=dl(i),s.context===null?s.context=i:s.pendingContext=i,s=mh(_,b),s.payload={element:o},a=a===void 0?null:a,a!==null&&(s.callback=a),o=nh(d,s,b),o!==null&&(gi(o,d,b,_),oh(o,d,b)),b}function gl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function hl(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var i=o.retryLane;o.retryLane=i!==0&&i<s?i:s}}function il(o,s){hl(o,s),(o=o.alternate)&&hl(o,s)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(o){console.error(o)};function ll(o){this._internalRoot=o}ml.prototype.render=ll.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(p$1(409));fl(o,s,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Rk(function(){fl(null,o,null,null)}),s[uf]=null}};function ml(o){this._internalRoot=o}ml.prototype.unstable_scheduleHydration=function(o){if(o){var s=Hc();o={blockedOn:null,target:o,priority:s};for(var i=0;i<Qc.length&&s!==0&&s<Qc[i].priority;i++);Qc.splice(i,0,o),i===0&&Vc(o)}};function nl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(o,s,i,a,d){if(d){if(typeof a=="function"){var _=a;a=function(){var tt=gl(b);_.call(tt)}}var b=el(s,a,o,0,null,!1,!1,"",pl);return o._reactRootContainer=b,o[uf]=b.current,sf(o.nodeType===8?o.parentNode:o),Rk(),b}for(;d=o.lastChild;)o.removeChild(d);if(typeof a=="function"){var $=a;a=function(){var tt=gl(nt);$.call(tt)}}var nt=bl(o,0,!1,null,null,!1,!1,"",pl);return o._reactRootContainer=nt,o[uf]=nt.current,sf(o.nodeType===8?o.parentNode:o),Rk(function(){fl(s,nt,i,a)}),nt}function rl(o,s,i,a,d){var _=i._reactRootContainer;if(_){var b=_;if(typeof d=="function"){var $=d;d=function(){var nt=gl(b);$.call(nt)}}fl(s,b,o,d)}else b=ql(i,s,o,d,a);return gl(b)}Ec=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var i=tc(s.pendingLanes);i!==0&&(Cc(s,i|1),Dk(s,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(o,1);if(a!==null){var d=R();gi(a,o,1,d)}}),il(o,1)}};Fc=function(o){if(o.tag===13){var s=ih(o,134217728);if(s!==null){var i=R();gi(s,o,134217728,i)}il(o,134217728)}};Gc=function(o){if(o.tag===13){var s=yi(o),i=ih(o,s);if(i!==null){var a=R();gi(i,o,s,a)}il(o,s)}};Hc=function(){return C};Ic=function(o,s){var i=C;try{return C=o,s()}finally{C=i}};yb=function(o,s,i){switch(s){case"input":if(bb(o,i),s=i.name,i.type==="radio"&&s!=null){for(i=o;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<i.length;s++){var a=i[s];if(a!==o&&a.form===o.form){var d=Db(a);if(!d)throw Error(p$1(90));Wa(a),bb(a,d)}}}break;case"textarea":ib(o,i);break;case"select":s=i.value,s!=null&&fb(o,!!i.multiple,s,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(o,s){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(s))throw Error(p$1(200));return cl(o,s,null,i)};reactDom_production_min.createRoot=function(o,s){if(!nl(o))throw Error(p$1(299));var i=!1,a="",d=kl;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=bl(o,1,!1,null,null,i,!1,a,d),o[uf]=s.current,sf(o.nodeType===8?o.parentNode:o),new ll(s)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(p$1(188)):(o=Object.keys(o).join(","),Error(p$1(268,o)));return o=Zb(s),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Rk(o)};reactDom_production_min.hydrate=function(o,s,i){if(!ol(s))throw Error(p$1(200));return rl(null,o,s,!0,i)};reactDom_production_min.hydrateRoot=function(o,s,i){if(!nl(o))throw Error(p$1(405));var a=i!=null&&i.hydratedSources||null,d=!1,_="",b=kl;if(i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(_=i.identifierPrefix),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),s=el(s,null,o,1,i??null,d,!1,_,b),o[uf]=s.current,sf(o),a)for(o=0;o<a.length;o++)i=a[o],d=i._getVersion,d=d(i._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[i,d]:s.mutableSourceEagerHydrationData.push(i,d);return new ml(s)};reactDom_production_min.render=function(o,s,i){if(!ol(s))throw Error(p$1(200));return rl(null,o,s,!1,i)};reactDom_production_min.unmountComponentAtNode=function(o){if(!ol(o))throw Error(p$1(40));return o._reactRootContainer?(Rk(function(){rl(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,s,i,a){if(!ol(i))throw Error(p$1(200));if(o==null||o._reactInternals===void 0)throw Error(p$1(38));return rl(o,s,i,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;function parse$2(o,s){if(o instanceof RegExp)return{keys:!1,pattern:o};var i,a,d,_,b=[],$="",nt=o.split("/");for(nt[0]||nt.shift();d=nt.shift();)i=d[0],i==="*"?(b.push(i),$+=d[1]==="?"?"(?:/(.*))?":"/(.*)"):i===":"?(a=d.indexOf("?",1),_=d.indexOf(".",1),b.push(d.substring(1,~a?a:~_?_:d.length)),$+=~a&&!~_?"(?:/([^/]+?))?":"/([^/]+?)",~_&&($+=(~a?"?":"")+"\\"+d.substring(_))):$+="/"+d;return{keys:b,pattern:new RegExp("^"+$+(s?"(?=$|/)":"/?$"),"i")}}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var k=typeof Object.is=="function"?Object.is:h,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(o,s){var i=s(),a=l({inst:{value:i,getSnapshot:s}}),d=a[0].inst,_=a[1];return n(function(){d.value=i,d.getSnapshot=s,r$1(d)&&_({inst:d})},[o,i,s]),m(function(){return r$1(d)&&_({inst:d}),o(function(){r$1(d)&&_({inst:d})})},[o]),p(i),i}function r$1(o){var s=o.getSnapshot;o=o.value;try{var i=s();return!k(o,i)}catch{return!0}}function t(o,s){return s()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t:q;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const useBuiltinInsertionEffect=React$1.useInsertionEffect,canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect$1=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect,useInsertionEffect=useBuiltinInsertionEffect||useIsomorphicLayoutEffect$1,useEvent=o=>{const s=reactExports.useRef([o,(...i)=>s[0](...i)]).current;return useInsertionEffect(()=>{s[0]=o}),s[1]},eventPopstate="popstate",eventPushState="pushState",eventReplaceState="replaceState",eventHashchange="hashchange",events=[eventPopstate,eventPushState,eventReplaceState,eventHashchange],subscribeToLocationUpdates=o=>{for(const s of events)addEventListener(s,o);return()=>{for(const s of events)removeEventListener(s,o)}},useLocationProperty=(o,s)=>shimExports.useSyncExternalStore(subscribeToLocationUpdates,o,s),currentSearch=()=>location.search,useSearch=({ssrSearch:o=""}={})=>useLocationProperty(currentSearch,()=>o),currentPathname=()=>location.pathname,usePathname=({ssrPath:o}={})=>useLocationProperty(currentPathname,o?()=>o:currentPathname),navigate=(o,{replace:s=!1,state:i=null}={})=>history[s?eventReplaceState:eventPushState](i,"",o),useBrowserLocation=(o={})=>[usePathname(o),navigate],patchKey=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[patchKey]>"u"){for(const o of[eventPushState,eventReplaceState]){const s=history[o];history[o]=function(){const i=s.apply(this,arguments),a=new Event(o);return a.arguments=arguments,dispatchEvent(a),i}}Object.defineProperty(window,patchKey,{value:!0})}const _relativePath=(o,s)=>s.toLowerCase().indexOf(o.toLowerCase())?"~"+s:s.slice(o.length)||"/",baseDefaults=(o="")=>o==="/"?"":o,absolutePath=(o,s)=>o[0]==="~"?o.slice(1):baseDefaults(s)+o,relativePath=(o="",s)=>_relativePath(unescape(baseDefaults(o)),unescape(s)),unescape=o=>{try{return decodeURI(o)}catch{return o}},defaultRouter={hook:useBrowserLocation,searchHook:useSearch,parser:parse$2,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:o=>o},RouterCtx=reactExports.createContext(defaultRouter),useRouter=()=>reactExports.useContext(RouterCtx),Params0={},ParamsCtx=reactExports.createContext(Params0),useParams=()=>reactExports.useContext(ParamsCtx),useLocationFromRouter=o=>{const[s,i]=o.hook(o);return[relativePath(o.base,s),useEvent((a,d)=>i(absolutePath(a,o.base),d))]},matchRoute=(o,s,i,a)=>{const{pattern:d,keys:_}=s instanceof RegExp?{keys:!1,pattern:s}:o(s||"*",a),b=d.exec(i)||[],[$,...nt]=b;return $!==void 0?[!0,(()=>{const tt=_!==!1?Object.fromEntries(_.map((g,c)=>[g,nt[c]])):b.groups;let et={...nt};return tt&&Object.assign(et,tt),et})(),...a?[$]:[]]:[!1,null]},Router$1=({children:o,...s})=>{var et,g;const i=useRouter(),a=s.hook?defaultRouter:i;let d=a;const[_,b]=((et=s.ssrPath)==null?void 0:et.split("?"))??[];b&&(s.ssrSearch=b,s.ssrPath=_),s.hrefs=s.hrefs??((g=s.hook)==null?void 0:g.hrefs);let $=reactExports.useRef({}),nt=$.current,tt=nt;for(let c in a){const j=c==="base"?a[c]+(s[c]||""):s[c]||a[c];nt===tt&&j!==tt[c]&&($.current=tt={...tt}),tt[c]=j,j!==a[c]&&(d=tt)}return reactExports.createElement(RouterCtx.Provider,{value:d,children:o})},h_route=({children:o,component:s},i)=>s?reactExports.createElement(s,{params:i}):typeof o=="function"?o(i):o,useCachedParams=o=>{let s=reactExports.useRef(Params0),i=s.current;for(const a in o)o[a]!==i[a]&&(i=o);return Object.keys(o).length===0&&(i=o),s.current=i},Route=({path:o,nest:s,match:i,...a})=>{const d=useRouter(),[_]=useLocationFromRouter(d),[b,$,nt]=i??matchRoute(d.parser,o,_,s),tt=useCachedParams({...useParams(),...$});if(!b)return null;const et=nt?reactExports.createElement(Router$1,{base:nt},h_route(a,tt)):h_route(a,tt);return reactExports.createElement(ParamsCtx.Provider,{value:tt,children:et})};reactExports.forwardRef((o,s)=>{const i=useRouter(),[a,d]=useLocationFromRouter(i),{to:_="",href:b=_,onClick:$,asChild:nt,children:tt,className:et,replace:g,state:c,...j}=o,_e=useEvent(st=>{st.ctrlKey||st.metaKey||st.altKey||st.shiftKey||st.button!==0||($==null||$(st),st.defaultPrevented||(st.preventDefault(),d(b,o)))}),rt=i.hrefs(b[0]==="~"?b.slice(1):i.base+b,i);return nt&&reactExports.isValidElement(tt)?reactExports.cloneElement(tt,{onClick:_e,href:rt}):reactExports.createElement("a",{...j,onClick:_e,href:rt,className:et!=null&&et.call?et(a===b):et,children:tt,ref:s})});const flattenChildren=o=>Array.isArray(o)?o.flatMap(s=>flattenChildren(s&&s.type===reactExports.Fragment?s.props.children:s)):[o],Switch$2=({children:o,location:s})=>{const i=useRouter(),[a]=useLocationFromRouter(i);for(const d of flattenChildren(o)){let _=0;if(reactExports.isValidElement(d)&&(_=matchRoute(i.parser,d.props.path,s||a,d.props.nest))[0])return reactExports.cloneElement(d,{match:_})}return null};var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(o){return this.listeners.add(o),this.onSubscribe(),()=>{this.listeners.delete(o),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$3(){}function functionalUpdate(o,s){return typeof o=="function"?o(s):o}function isValidTimeout(o){return typeof o=="number"&&o>=0&&o!==1/0}function timeUntilStale(o,s){return Math.max(o+(s||0)-Date.now(),0)}function resolveStaleTime(o,s){return typeof o=="function"?o(s):o}function resolveEnabled(o,s){return typeof o=="function"?o(s):o}function matchQuery(o,s){const{type:i="all",exact:a,fetchStatus:d,predicate:_,queryKey:b,stale:$}=o;if(b){if(a){if(s.queryHash!==hashQueryKeyByOptions(b,s.options))return!1}else if(!partialMatchKey(s.queryKey,b))return!1}if(i!=="all"){const nt=s.isActive();if(i==="active"&&!nt||i==="inactive"&&nt)return!1}return!(typeof $=="boolean"&&s.isStale()!==$||d&&d!==s.state.fetchStatus||_&&!_(s))}function matchMutation(o,s){const{exact:i,status:a,predicate:d,mutationKey:_}=o;if(_){if(!s.options.mutationKey)return!1;if(i){if(hashKey(s.options.mutationKey)!==hashKey(_))return!1}else if(!partialMatchKey(s.options.mutationKey,_))return!1}return!(a&&s.state.status!==a||d&&!d(s))}function hashQueryKeyByOptions(o,s){return((s==null?void 0:s.queryKeyHashFn)||hashKey)(o)}function hashKey(o){return JSON.stringify(o,(s,i)=>isPlainObject$1(i)?Object.keys(i).sort().reduce((a,d)=>(a[d]=i[d],a),{}):i)}function partialMatchKey(o,s){return o===s?!0:typeof o!=typeof s?!1:o&&s&&typeof o=="object"&&typeof s=="object"?!Object.keys(s).some(i=>!partialMatchKey(o[i],s[i])):!1}function replaceEqualDeep(o,s){if(o===s)return o;const i=isPlainArray(o)&&isPlainArray(s);if(i||isPlainObject$1(o)&&isPlainObject$1(s)){const a=i?o:Object.keys(o),d=a.length,_=i?s:Object.keys(s),b=_.length,$=i?[]:{};let nt=0;for(let tt=0;tt<b;tt++){const et=i?tt:_[tt];(!i&&a.includes(et)||i)&&o[et]===void 0&&s[et]===void 0?($[et]=void 0,nt++):($[et]=replaceEqualDeep(o[et],s[et]),$[et]===o[et]&&o[et]!==void 0&&nt++)}return d===b&&nt===d?o:$}return s}function shallowEqualObjects(o,s){if(!s||Object.keys(o).length!==Object.keys(s).length)return!1;for(const i in o)if(o[i]!==s[i])return!1;return!0}function isPlainArray(o){return Array.isArray(o)&&o.length===Object.keys(o).length}function isPlainObject$1(o){if(!hasObjectPrototype(o))return!1;const s=o.constructor;if(s===void 0)return!0;const i=s.prototype;return!(!hasObjectPrototype(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(o)!==Object.prototype)}function hasObjectPrototype(o){return Object.prototype.toString.call(o)==="[object Object]"}function sleep$1(o){return new Promise(s=>{setTimeout(s,o)})}function replaceData(o,s,i){return typeof i.structuralSharing=="function"?i.structuralSharing(o,s):i.structuralSharing!==!1?replaceEqualDeep(o,s):s}function addToEnd(o,s,i=0){const a=[...o,s];return i&&a.length>i?a.slice(1):a}function addToStart(o,s,i=0){const a=[s,...o];return i&&a.length>i?a.slice(0,-1):a}var skipToken=Symbol();function ensureQueryFn(o,s){return!o.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!o.queryFn||o.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${o.queryHash}'`)):o.queryFn}var Cr,gr,Ur,mo,FocusManager=(mo=class extends Subscribable{constructor(){super();tn(this,Cr);tn(this,gr);tn(this,Ur);qt(this,Ur,s=>{if(!isServer&&window.addEventListener){const i=()=>s();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}})}onSubscribe(){Ct(this,gr)||this.setEventListener(Ct(this,Ur))}onUnsubscribe(){var s;this.hasListeners()||((s=Ct(this,gr))==null||s.call(this),qt(this,gr,void 0))}setEventListener(s){var i;qt(this,Ur,s),(i=Ct(this,gr))==null||i.call(this),qt(this,gr,s(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(s){Ct(this,Cr)!==s&&(qt(this,Cr,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(i=>{i(s)})}isFocused(){var s;return typeof Ct(this,Cr)=="boolean"?Ct(this,Cr):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Cr=new WeakMap,gr=new WeakMap,Ur=new WeakMap,mo),focusManager=new FocusManager,zr,yr,Vr,go,OnlineManager=(go=class extends Subscribable{constructor(){super();tn(this,zr,!0);tn(this,yr);tn(this,Vr);qt(this,Vr,s=>{if(!isServer&&window.addEventListener){const i=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",a)}}})}onSubscribe(){Ct(this,yr)||this.setEventListener(Ct(this,Vr))}onUnsubscribe(){var s;this.hasListeners()||((s=Ct(this,yr))==null||s.call(this),qt(this,yr,void 0))}setEventListener(s){var i;qt(this,Vr,s),(i=Ct(this,yr))==null||i.call(this),qt(this,yr,s(this.setOnline.bind(this)))}setOnline(s){Ct(this,zr)!==s&&(qt(this,zr,s),this.listeners.forEach(a=>{a(s)}))}isOnline(){return Ct(this,zr)}},zr=new WeakMap,yr=new WeakMap,Vr=new WeakMap,go),onlineManager=new OnlineManager;function pendingThenable(){let o,s;const i=new Promise((d,_)=>{o=d,s=_});i.status="pending",i.catch(()=>{});function a(d){Object.assign(i,d),delete i.resolve,delete i.reject}return i.resolve=d=>{a({status:"fulfilled",value:d}),o(d)},i.reject=d=>{a({status:"rejected",reason:d}),s(d)},i}function defaultRetryDelay(o){return Math.min(1e3*2**o,3e4)}function canFetch(o){return(o??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(o){super("CancelledError"),this.revert=o==null?void 0:o.revert,this.silent=o==null?void 0:o.silent}};function isCancelledError(o){return o instanceof CancelledError}function createRetryer(o){let s=!1,i=0,a=!1,d;const _=pendingThenable(),b=rt=>{var st;a||(c(new CancelledError(rt)),(st=o.abort)==null||st.call(o))},$=()=>{s=!0},nt=()=>{s=!1},tt=()=>focusManager.isFocused()&&(o.networkMode==="always"||onlineManager.isOnline())&&o.canRun(),et=()=>canFetch(o.networkMode)&&o.canRun(),g=rt=>{var st;a||(a=!0,(st=o.onSuccess)==null||st.call(o,rt),d==null||d(),_.resolve(rt))},c=rt=>{var st;a||(a=!0,(st=o.onError)==null||st.call(o,rt),d==null||d(),_.reject(rt))},j=()=>new Promise(rt=>{var st;d=ot=>{(a||tt())&&rt(ot)},(st=o.onPause)==null||st.call(o)}).then(()=>{var rt;d=void 0,a||(rt=o.onContinue)==null||rt.call(o)}),_e=()=>{if(a)return;let rt;const st=i===0?o.initialPromise:void 0;try{rt=st??o.fn()}catch(ot){rt=Promise.reject(ot)}Promise.resolve(rt).then(g).catch(ot=>{var ct;if(a)return;const it=o.retry??(isServer?0:3),at=o.retryDelay??defaultRetryDelay,lt=typeof at=="function"?at(i,ot):at,ut=it===!0||typeof it=="number"&&i<it||typeof it=="function"&&it(i,ot);if(s||!ut){c(ot);return}i++,(ct=o.onFail)==null||ct.call(o,i,ot),sleep$1(lt).then(()=>tt()?void 0:j()).then(()=>{s?c(ot):_e()})})};return{promise:_,cancel:b,continue:()=>(d==null||d(),_),cancelRetry:$,continueRetry:nt,canStart:et,start:()=>(et()?_e():j().then(_e),_)}}function createNotifyManager(){let o=[],s=0,i=$=>{$()},a=$=>{$()},d=$=>setTimeout($,0);const _=$=>{s?o.push($):d(()=>{i($)})},b=()=>{const $=o;o=[],$.length&&d(()=>{a(()=>{$.forEach(nt=>{i(nt)})})})};return{batch:$=>{let nt;s++;try{nt=$()}finally{s--,s||b()}return nt},batchCalls:$=>(...nt)=>{_(()=>{$(...nt)})},schedule:_,setNotifyFunction:$=>{i=$},setBatchNotifyFunction:$=>{a=$},setScheduler:$=>{d=$}}}var notifyManager=createNotifyManager(),Mr,yo,Removable=(yo=class{constructor(){tn(this,Mr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&qt(this,Mr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(o){this.gcTime=Math.max(this.gcTime||0,o??(isServer?1/0:5*60*1e3))}clearGcTimeout(){Ct(this,Mr)&&(clearTimeout(Ct(this,Mr)),qt(this,Mr,void 0))}},Mr=new WeakMap,yo),Gr,Wr,Zn,Fn,gs,Rr,er,dr,_o,Query=(_o=class extends Removable{constructor(s){super();tn(this,er);tn(this,Gr);tn(this,Wr);tn(this,Zn);tn(this,Fn);tn(this,gs);tn(this,Rr);qt(this,Rr,!1),qt(this,gs,s.defaultOptions),this.setOptions(s.options),this.observers=[],qt(this,Zn,s.cache),this.queryKey=s.queryKey,this.queryHash=s.queryHash,qt(this,Gr,getDefaultState$1(this.options)),this.state=s.state??Ct(this,Gr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=Ct(this,Fn))==null?void 0:s.promise}setOptions(s){this.options={...Ct(this,gs),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ct(this,Zn).remove(this)}setData(s,i){const a=replaceData(this.state.data,s,this.options);return mn(this,er,dr).call(this,{data:a,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt,manual:i==null?void 0:i.manual}),a}setState(s,i){mn(this,er,dr).call(this,{type:"setState",state:s,setStateOptions:i})}cancel(s){var a,d;const i=(a=Ct(this,Fn))==null?void 0:a.promise;return(d=Ct(this,Fn))==null||d.cancel(s),i?i.then(noop$3).catch(noop$3):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ct(this,Gr))}isActive(){return this.observers.some(s=>resolveEnabled(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(s=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,s)}onFocus(){var i;const s=this.observers.find(a=>a.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(i=Ct(this,Fn))==null||i.continue()}onOnline(){var i;const s=this.observers.find(a=>a.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(i=Ct(this,Fn))==null||i.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),Ct(this,Zn).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(i=>i!==s),this.observers.length||(Ct(this,Fn)&&(Ct(this,Rr)?Ct(this,Fn).cancel({revert:!0}):Ct(this,Fn).cancelRetry()),this.scheduleGc()),Ct(this,Zn).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||mn(this,er,dr).call(this,{type:"invalidate"})}fetch(s,i){var nt,tt,et;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(Ct(this,Fn))return Ct(this,Fn).continueRetry(),Ct(this,Fn).promise}if(s&&this.setOptions(s),!this.options.queryFn){const g=this.observers.find(c=>c.options.queryFn);g&&this.setOptions(g.options)}const a=new AbortController,d=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(qt(this,Rr,!0),a.signal)})},_=()=>{const g=ensureQueryFn(this.options,i),c={queryKey:this.queryKey,meta:this.meta};return d(c),qt(this,Rr,!1),this.options.persister?this.options.persister(g,c,this):g(c)},b={fetchOptions:i,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:_};d(b),(nt=this.options.behavior)==null||nt.onFetch(b,this),qt(this,Wr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((tt=b.fetchOptions)==null?void 0:tt.meta))&&mn(this,er,dr).call(this,{type:"fetch",meta:(et=b.fetchOptions)==null?void 0:et.meta});const $=g=>{var c,j,_e,rt;isCancelledError(g)&&g.silent||mn(this,er,dr).call(this,{type:"error",error:g}),isCancelledError(g)||((j=(c=Ct(this,Zn).config).onError)==null||j.call(c,g,this),(rt=(_e=Ct(this,Zn).config).onSettled)==null||rt.call(_e,this.state.data,g,this)),this.scheduleGc()};return qt(this,Fn,createRetryer({initialPromise:i==null?void 0:i.initialPromise,fn:b.fetchFn,abort:a.abort.bind(a),onSuccess:g=>{var c,j,_e,rt;if(g===void 0){$(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(st){$(st);return}(j=(c=Ct(this,Zn).config).onSuccess)==null||j.call(c,g,this),(rt=(_e=Ct(this,Zn).config).onSettled)==null||rt.call(_e,g,this.state.error,this),this.scheduleGc()},onError:$,onFail:(g,c)=>{mn(this,er,dr).call(this,{type:"failed",failureCount:g,error:c})},onPause:()=>{mn(this,er,dr).call(this,{type:"pause"})},onContinue:()=>{mn(this,er,dr).call(this,{type:"continue"})},retry:b.options.retry,retryDelay:b.options.retryDelay,networkMode:b.options.networkMode,canRun:()=>!0})),Ct(this,Fn).start()}},Gr=new WeakMap,Wr=new WeakMap,Zn=new WeakMap,Fn=new WeakMap,gs=new WeakMap,Rr=new WeakMap,er=new WeakSet,dr=function(s){const i=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...fetchState(a.data,this.options),fetchMeta:s.meta??null};case"success":return{...a,data:s.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const d=s.error;return isCancelledError(d)&&d.revert&&Ct(this,Wr)?{...Ct(this,Wr),fetchStatus:"idle"}:{...a,error:d,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=i(this.state),notifyManager.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Ct(this,Zn).notify({query:this,type:"updated",action:s})})},_o);function fetchState(o,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(s.networkMode)?"fetching":"paused",...o===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(o){const s=typeof o.initialData=="function"?o.initialData():o.initialData,i=s!==void 0,a=i?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:i?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var rr,bo,QueryCache=(bo=class extends Subscribable{constructor(s={}){super();tn(this,rr);this.config=s,qt(this,rr,new Map)}build(s,i,a){const d=i.queryKey,_=i.queryHash??hashQueryKeyByOptions(d,i);let b=this.get(_);return b||(b=new Query({cache:this,queryKey:d,queryHash:_,options:s.defaultQueryOptions(i),state:a,defaultOptions:s.getQueryDefaults(d)}),this.add(b)),b}add(s){Ct(this,rr).has(s.queryHash)||(Ct(this,rr).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const i=Ct(this,rr).get(s.queryHash);i&&(s.destroy(),i===s&&Ct(this,rr).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return Ct(this,rr).get(s)}getAll(){return[...Ct(this,rr).values()]}find(s){const i={exact:!0,...s};return this.getAll().find(a=>matchQuery(i,a))}findAll(s={}){const i=this.getAll();return Object.keys(s).length>0?i.filter(a=>matchQuery(s,a)):i}notify(s){notifyManager.batch(()=>{this.listeners.forEach(i=>{i(s)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},rr=new WeakMap,bo),sr,Bn,Ir,or,mr,xo,Mutation=(xo=class extends Removable{constructor(s){super();tn(this,or);tn(this,sr);tn(this,Bn);tn(this,Ir);this.mutationId=s.mutationId,qt(this,Bn,s.mutationCache),qt(this,sr,[]),this.state=s.state||getDefaultState(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){Ct(this,sr).includes(s)||(Ct(this,sr).push(s),this.clearGcTimeout(),Ct(this,Bn).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){qt(this,sr,Ct(this,sr).filter(i=>i!==s)),this.scheduleGc(),Ct(this,Bn).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){Ct(this,sr).length||(this.state.status==="pending"?this.scheduleGc():Ct(this,Bn).remove(this))}continue(){var s;return((s=Ct(this,Ir))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var d,_,b,$,nt,tt,et,g,c,j,_e,rt,st,ot,it,at,lt,ut,ct,dt;qt(this,Ir,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(ft,ht)=>{mn(this,or,mr).call(this,{type:"failed",failureCount:ft,error:ht})},onPause:()=>{mn(this,or,mr).call(this,{type:"pause"})},onContinue:()=>{mn(this,or,mr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ct(this,Bn).canRun(this)}));const i=this.state.status==="pending",a=!Ct(this,Ir).canStart();try{if(!i){mn(this,or,mr).call(this,{type:"pending",variables:s,isPaused:a}),await((_=(d=Ct(this,Bn).config).onMutate)==null?void 0:_.call(d,s,this));const ht=await(($=(b=this.options).onMutate)==null?void 0:$.call(b,s));ht!==this.state.context&&mn(this,or,mr).call(this,{type:"pending",context:ht,variables:s,isPaused:a})}const ft=await Ct(this,Ir).start();return await((tt=(nt=Ct(this,Bn).config).onSuccess)==null?void 0:tt.call(nt,ft,s,this.state.context,this)),await((g=(et=this.options).onSuccess)==null?void 0:g.call(et,ft,s,this.state.context)),await((j=(c=Ct(this,Bn).config).onSettled)==null?void 0:j.call(c,ft,null,this.state.variables,this.state.context,this)),await((rt=(_e=this.options).onSettled)==null?void 0:rt.call(_e,ft,null,s,this.state.context)),mn(this,or,mr).call(this,{type:"success",data:ft}),ft}catch(ft){try{throw await((ot=(st=Ct(this,Bn).config).onError)==null?void 0:ot.call(st,ft,s,this.state.context,this)),await((at=(it=this.options).onError)==null?void 0:at.call(it,ft,s,this.state.context)),await((ut=(lt=Ct(this,Bn).config).onSettled)==null?void 0:ut.call(lt,void 0,ft,this.state.variables,this.state.context,this)),await((dt=(ct=this.options).onSettled)==null?void 0:dt.call(ct,void 0,ft,s,this.state.context)),ft}finally{mn(this,or,mr).call(this,{type:"error",error:ft})}}finally{Ct(this,Bn).runNext(this)}}},sr=new WeakMap,Bn=new WeakMap,Ir=new WeakMap,or=new WeakSet,mr=function(s){const i=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=i(this.state),notifyManager.batch(()=>{Ct(this,sr).forEach(a=>{a.onMutationUpdate(s)}),Ct(this,Bn).notify({mutation:this,type:"updated",action:s})})},xo);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kn,ys,vo,MutationCache=(vo=class extends Subscribable{constructor(s={}){super();tn(this,Kn);tn(this,ys);this.config=s,qt(this,Kn,new Map),qt(this,ys,Date.now())}build(s,i,a){const d=new Mutation({mutationCache:this,mutationId:++As(this,ys)._,options:s.defaultMutationOptions(i),state:a});return this.add(d),d}add(s){const i=scopeFor(s),a=Ct(this,Kn).get(i)??[];a.push(s),Ct(this,Kn).set(i,a),this.notify({type:"added",mutation:s})}remove(s){var a;const i=scopeFor(s);if(Ct(this,Kn).has(i)){const d=(a=Ct(this,Kn).get(i))==null?void 0:a.filter(_=>_!==s);d&&(d.length===0?Ct(this,Kn).delete(i):Ct(this,Kn).set(i,d))}this.notify({type:"removed",mutation:s})}canRun(s){var a;const i=(a=Ct(this,Kn).get(scopeFor(s)))==null?void 0:a.find(d=>d.state.status==="pending");return!i||i===s}runNext(s){var a;const i=(a=Ct(this,Kn).get(scopeFor(s)))==null?void 0:a.find(d=>d!==s&&d.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}getAll(){return[...Ct(this,Kn).values()].flat()}find(s){const i={exact:!0,...s};return this.getAll().find(a=>matchMutation(i,a))}findAll(s={}){return this.getAll().filter(i=>matchMutation(s,i))}notify(s){notifyManager.batch(()=>{this.listeners.forEach(i=>{i(s)})})}resumePausedMutations(){const s=this.getAll().filter(i=>i.state.isPaused);return notifyManager.batch(()=>Promise.all(s.map(i=>i.continue().catch(noop$3))))}},Kn=new WeakMap,ys=new WeakMap,vo);function scopeFor(o){var s;return((s=o.options.scope)==null?void 0:s.id)??String(o.mutationId)}function infiniteQueryBehavior(o){return{onFetch:(s,i)=>{var et,g,c,j,_e;const a=s.options,d=(c=(g=(et=s.fetchOptions)==null?void 0:et.meta)==null?void 0:g.fetchMore)==null?void 0:c.direction,_=((j=s.state.data)==null?void 0:j.pages)||[],b=((_e=s.state.data)==null?void 0:_e.pageParams)||[];let $={pages:[],pageParams:[]},nt=0;const tt=async()=>{let rt=!1;const st=at=>{Object.defineProperty(at,"signal",{enumerable:!0,get:()=>(s.signal.aborted?rt=!0:s.signal.addEventListener("abort",()=>{rt=!0}),s.signal)})},ot=ensureQueryFn(s.options,s.fetchOptions),it=async(at,lt,ut)=>{if(rt)return Promise.reject();if(lt==null&&at.pages.length)return Promise.resolve(at);const ct={queryKey:s.queryKey,pageParam:lt,direction:ut?"backward":"forward",meta:s.options.meta};st(ct);const dt=await ot(ct),{maxPages:ft}=s.options,ht=ut?addToStart:addToEnd;return{pages:ht(at.pages,dt,ft),pageParams:ht(at.pageParams,lt,ft)}};if(d&&_.length){const at=d==="backward",lt=at?getPreviousPageParam:getNextPageParam,ut={pages:_,pageParams:b},ct=lt(a,ut);$=await it(ut,ct,at)}else{const at=o??_.length;do{const lt=nt===0?b[0]??a.initialPageParam:getNextPageParam(a,$);if(nt>0&&lt==null)break;$=await it($,lt),nt++}while(nt<at)}return $};s.options.persister?s.fetchFn=()=>{var rt,st;return(st=(rt=s.options).persister)==null?void 0:st.call(rt,tt,{queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},i)}:s.fetchFn=tt}}}function getNextPageParam(o,{pages:s,pageParams:i}){const a=s.length-1;return s.length>0?o.getNextPageParam(s[a],s,i[a],i):void 0}function getPreviousPageParam(o,{pages:s,pageParams:i}){var a;return s.length>0?(a=o.getPreviousPageParam)==null?void 0:a.call(o,s[0],s,i[0],i):void 0}var In,_r,br,Hr,qr,xr,Kr,Yr,wo,QueryClient=(wo=class{constructor(o={}){tn(this,In);tn(this,_r);tn(this,br);tn(this,Hr);tn(this,qr);tn(this,xr);tn(this,Kr);tn(this,Yr);qt(this,In,o.queryCache||new QueryCache),qt(this,_r,o.mutationCache||new MutationCache),qt(this,br,o.defaultOptions||{}),qt(this,Hr,new Map),qt(this,qr,new Map),qt(this,xr,0)}mount(){As(this,xr)._++,Ct(this,xr)===1&&(qt(this,Kr,focusManager.subscribe(async o=>{o&&(await this.resumePausedMutations(),Ct(this,In).onFocus())})),qt(this,Yr,onlineManager.subscribe(async o=>{o&&(await this.resumePausedMutations(),Ct(this,In).onOnline())})))}unmount(){var o,s;As(this,xr)._--,Ct(this,xr)===0&&((o=Ct(this,Kr))==null||o.call(this),qt(this,Kr,void 0),(s=Ct(this,Yr))==null||s.call(this),qt(this,Yr,void 0))}isFetching(o){return Ct(this,In).findAll({...o,fetchStatus:"fetching"}).length}isMutating(o){return Ct(this,_r).findAll({...o,status:"pending"}).length}getQueryData(o){var i;const s=this.defaultQueryOptions({queryKey:o});return(i=Ct(this,In).get(s.queryHash))==null?void 0:i.state.data}ensureQueryData(o){const s=this.getQueryData(o.queryKey);if(s===void 0)return this.fetchQuery(o);{const i=this.defaultQueryOptions(o),a=Ct(this,In).build(this,i);return o.revalidateIfStale&&a.isStaleByTime(resolveStaleTime(i.staleTime,a))&&this.prefetchQuery(i),Promise.resolve(s)}}getQueriesData(o){return Ct(this,In).findAll(o).map(({queryKey:s,state:i})=>{const a=i.data;return[s,a]})}setQueryData(o,s,i){const a=this.defaultQueryOptions({queryKey:o}),d=Ct(this,In).get(a.queryHash),_=d==null?void 0:d.state.data,b=functionalUpdate(s,_);if(b!==void 0)return Ct(this,In).build(this,a).setData(b,{...i,manual:!0})}setQueriesData(o,s,i){return notifyManager.batch(()=>Ct(this,In).findAll(o).map(({queryKey:a})=>[a,this.setQueryData(a,s,i)]))}getQueryState(o){var i;const s=this.defaultQueryOptions({queryKey:o});return(i=Ct(this,In).get(s.queryHash))==null?void 0:i.state}removeQueries(o){const s=Ct(this,In);notifyManager.batch(()=>{s.findAll(o).forEach(i=>{s.remove(i)})})}resetQueries(o,s){const i=Ct(this,In),a={type:"active",...o};return notifyManager.batch(()=>(i.findAll(o).forEach(d=>{d.reset()}),this.refetchQueries(a,s)))}cancelQueries(o={},s={}){const i={revert:!0,...s},a=notifyManager.batch(()=>Ct(this,In).findAll(o).map(d=>d.cancel(i)));return Promise.all(a).then(noop$3).catch(noop$3)}invalidateQueries(o={},s={}){return notifyManager.batch(()=>{if(Ct(this,In).findAll(o).forEach(a=>{a.invalidate()}),o.refetchType==="none")return Promise.resolve();const i={...o,type:o.refetchType??o.type??"active"};return this.refetchQueries(i,s)})}refetchQueries(o={},s){const i={...s,cancelRefetch:(s==null?void 0:s.cancelRefetch)??!0},a=notifyManager.batch(()=>Ct(this,In).findAll(o).filter(d=>!d.isDisabled()).map(d=>{let _=d.fetch(void 0,i);return i.throwOnError||(_=_.catch(noop$3)),d.state.fetchStatus==="paused"?Promise.resolve():_}));return Promise.all(a).then(noop$3)}fetchQuery(o){const s=this.defaultQueryOptions(o);s.retry===void 0&&(s.retry=!1);const i=Ct(this,In).build(this,s);return i.isStaleByTime(resolveStaleTime(s.staleTime,i))?i.fetch(s):Promise.resolve(i.state.data)}prefetchQuery(o){return this.fetchQuery(o).then(noop$3).catch(noop$3)}fetchInfiniteQuery(o){return o.behavior=infiniteQueryBehavior(o.pages),this.fetchQuery(o)}prefetchInfiniteQuery(o){return this.fetchInfiniteQuery(o).then(noop$3).catch(noop$3)}ensureInfiniteQueryData(o){return o.behavior=infiniteQueryBehavior(o.pages),this.ensureQueryData(o)}resumePausedMutations(){return onlineManager.isOnline()?Ct(this,_r).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ct(this,In)}getMutationCache(){return Ct(this,_r)}getDefaultOptions(){return Ct(this,br)}setDefaultOptions(o){qt(this,br,o)}setQueryDefaults(o,s){Ct(this,Hr).set(hashKey(o),{queryKey:o,defaultOptions:s})}getQueryDefaults(o){const s=[...Ct(this,Hr).values()];let i={};return s.forEach(a=>{partialMatchKey(o,a.queryKey)&&(i={...i,...a.defaultOptions})}),i}setMutationDefaults(o,s){Ct(this,qr).set(hashKey(o),{mutationKey:o,defaultOptions:s})}getMutationDefaults(o){const s=[...Ct(this,qr).values()];let i={};return s.forEach(a=>{partialMatchKey(o,a.mutationKey)&&(i={...i,...a.defaultOptions})}),i}defaultQueryOptions(o){if(o._defaulted)return o;const s={...Ct(this,br).queries,...this.getQueryDefaults(o.queryKey),...o,_defaulted:!0};return s.queryHash||(s.queryHash=hashQueryKeyByOptions(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.enabled!==!0&&s.queryFn===skipToken&&(s.enabled=!1),s}defaultMutationOptions(o){return o!=null&&o._defaulted?o:{...Ct(this,br).mutations,...(o==null?void 0:o.mutationKey)&&this.getMutationDefaults(o.mutationKey),...o,_defaulted:!0}}clear(){Ct(this,In).clear(),Ct(this,_r).clear()}},In=new WeakMap,_r=new WeakMap,br=new WeakMap,Hr=new WeakMap,qr=new WeakMap,xr=new WeakMap,Kr=new WeakMap,Yr=new WeakMap,wo),Wn,Tn,_s,Un,Nr,Xr,vr,ir,bs,Qr,Jr,jr,Dr,wr,Zr,Pn,ms,js,Ds,Ls,$s,Fs,Bs,Us,Po,Eo,QueryObserver=(Eo=class extends Subscribable{constructor(s,i){super();tn(this,Pn);tn(this,Wn);tn(this,Tn);tn(this,_s);tn(this,Un);tn(this,Nr);tn(this,Xr);tn(this,vr);tn(this,ir);tn(this,bs);tn(this,Qr);tn(this,Jr);tn(this,jr);tn(this,Dr);tn(this,wr);tn(this,Zr,new Set);this.options=i,qt(this,Wn,s),qt(this,ir,null),qt(this,vr,pendingThenable()),this.options.experimental_prefetchInRender||Ct(this,vr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(i)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ct(this,Tn).addObserver(this),shouldFetchOnMount(Ct(this,Tn),this.options)?mn(this,Pn,ms).call(this):this.updateResult(),mn(this,Pn,$s).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(Ct(this,Tn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(Ct(this,Tn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,mn(this,Pn,Fs).call(this),mn(this,Pn,Bs).call(this),Ct(this,Tn).removeObserver(this)}setOptions(s,i){const a=this.options,d=Ct(this,Tn);if(this.options=Ct(this,Wn).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,Ct(this,Tn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");mn(this,Pn,Us).call(this),Ct(this,Tn).setOptions(this.options),a._defaulted&&!shallowEqualObjects(this.options,a)&&Ct(this,Wn).getQueryCache().notify({type:"observerOptionsUpdated",query:Ct(this,Tn),observer:this});const _=this.hasListeners();_&&shouldFetchOptionally(Ct(this,Tn),d,this.options,a)&&mn(this,Pn,ms).call(this),this.updateResult(i),_&&(Ct(this,Tn)!==d||resolveEnabled(this.options.enabled,Ct(this,Tn))!==resolveEnabled(a.enabled,Ct(this,Tn))||resolveStaleTime(this.options.staleTime,Ct(this,Tn))!==resolveStaleTime(a.staleTime,Ct(this,Tn)))&&mn(this,Pn,js).call(this);const b=mn(this,Pn,Ds).call(this);_&&(Ct(this,Tn)!==d||resolveEnabled(this.options.enabled,Ct(this,Tn))!==resolveEnabled(a.enabled,Ct(this,Tn))||b!==Ct(this,wr))&&mn(this,Pn,Ls).call(this,b)}getOptimisticResult(s){const i=Ct(this,Wn).getQueryCache().build(Ct(this,Wn),s),a=this.createResult(i,s);return shouldAssignObserverCurrentProperties(this,a)&&(qt(this,Un,a),qt(this,Xr,this.options),qt(this,Nr,Ct(this,Tn).state)),a}getCurrentResult(){return Ct(this,Un)}trackResult(s,i){const a={};return Object.keys(s).forEach(d=>{Object.defineProperty(a,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),i==null||i(d),s[d])})}),a}trackProp(s){Ct(this,Zr).add(s)}getCurrentQuery(){return Ct(this,Tn)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const i=Ct(this,Wn).defaultQueryOptions(s),a=Ct(this,Wn).getQueryCache().build(Ct(this,Wn),i);return a.fetch().then(()=>this.createResult(a,i))}fetch(s){return mn(this,Pn,ms).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),Ct(this,Un)))}createResult(s,i){var ft;const a=Ct(this,Tn),d=this.options,_=Ct(this,Un),b=Ct(this,Nr),$=Ct(this,Xr),tt=s!==a?s.state:Ct(this,_s),{state:et}=s;let g={...et},c=!1,j;if(i._optimisticResults){const ht=this.hasListeners(),mt=!ht&&shouldFetchOnMount(s,i),yt=ht&&shouldFetchOptionally(s,a,i,d);(mt||yt)&&(g={...g,...fetchState(et.data,s.options)}),i._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:_e,errorUpdatedAt:rt,status:st}=g;if(i.select&&g.data!==void 0)if(_&&g.data===(b==null?void 0:b.data)&&i.select===Ct(this,bs))j=Ct(this,Qr);else try{qt(this,bs,i.select),j=i.select(g.data),j=replaceData(_==null?void 0:_.data,j,i),qt(this,Qr,j),qt(this,ir,null)}catch(ht){qt(this,ir,ht)}else j=g.data;if(i.placeholderData!==void 0&&j===void 0&&st==="pending"){let ht;if(_!=null&&_.isPlaceholderData&&i.placeholderData===($==null?void 0:$.placeholderData))ht=_.data;else if(ht=typeof i.placeholderData=="function"?i.placeholderData((ft=Ct(this,Jr))==null?void 0:ft.state.data,Ct(this,Jr)):i.placeholderData,i.select&&ht!==void 0)try{ht=i.select(ht),qt(this,ir,null)}catch(mt){qt(this,ir,mt)}ht!==void 0&&(st="success",j=replaceData(_==null?void 0:_.data,ht,i),c=!0)}Ct(this,ir)&&(_e=Ct(this,ir),j=Ct(this,Qr),rt=Date.now(),st="error");const ot=g.fetchStatus==="fetching",it=st==="pending",at=st==="error",lt=it&&ot,ut=j!==void 0,dt={status:st,fetchStatus:g.fetchStatus,isPending:it,isSuccess:st==="success",isError:at,isInitialLoading:lt,isLoading:lt,data:j,dataUpdatedAt:g.dataUpdatedAt,error:_e,errorUpdatedAt:rt,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>tt.dataUpdateCount||g.errorUpdateCount>tt.errorUpdateCount,isFetching:ot,isRefetching:ot&&!it,isLoadingError:at&&!ut,isPaused:g.fetchStatus==="paused",isPlaceholderData:c,isRefetchError:at&&ut,isStale:isStale(s,i),refetch:this.refetch,promise:Ct(this,vr)};if(this.options.experimental_prefetchInRender){const ht=Tt=>{dt.status==="error"?Tt.reject(dt.error):dt.data!==void 0&&Tt.resolve(dt.data)},mt=()=>{const Tt=qt(this,vr,dt.promise=pendingThenable());ht(Tt)},yt=Ct(this,vr);switch(yt.status){case"pending":s.queryHash===a.queryHash&&ht(yt);break;case"fulfilled":(dt.status==="error"||dt.data!==yt.value)&&mt();break;case"rejected":(dt.status!=="error"||dt.error!==yt.reason)&&mt();break}}return dt}updateResult(s){const i=Ct(this,Un),a=this.createResult(Ct(this,Tn),this.options);if(qt(this,Nr,Ct(this,Tn).state),qt(this,Xr,this.options),Ct(this,Nr).data!==void 0&&qt(this,Jr,Ct(this,Tn)),shallowEqualObjects(a,i))return;qt(this,Un,a);const d={},_=()=>{if(!i)return!0;const{notifyOnChangeProps:b}=this.options,$=typeof b=="function"?b():b;if($==="all"||!$&&!Ct(this,Zr).size)return!0;const nt=new Set($??Ct(this,Zr));return this.options.throwOnError&&nt.add("error"),Object.keys(Ct(this,Un)).some(tt=>{const et=tt;return Ct(this,Un)[et]!==i[et]&&nt.has(et)})};(s==null?void 0:s.listeners)!==!1&&_()&&(d.listeners=!0),mn(this,Pn,Po).call(this,{...d,...s})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&mn(this,Pn,$s).call(this)}},Wn=new WeakMap,Tn=new WeakMap,_s=new WeakMap,Un=new WeakMap,Nr=new WeakMap,Xr=new WeakMap,vr=new WeakMap,ir=new WeakMap,bs=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,jr=new WeakMap,Dr=new WeakMap,wr=new WeakMap,Zr=new WeakMap,Pn=new WeakSet,ms=function(s){mn(this,Pn,Us).call(this);let i=Ct(this,Tn).fetch(this.options,s);return s!=null&&s.throwOnError||(i=i.catch(noop$3)),i},js=function(){mn(this,Pn,Fs).call(this);const s=resolveStaleTime(this.options.staleTime,Ct(this,Tn));if(isServer||Ct(this,Un).isStale||!isValidTimeout(s))return;const a=timeUntilStale(Ct(this,Un).dataUpdatedAt,s)+1;qt(this,jr,setTimeout(()=>{Ct(this,Un).isStale||this.updateResult()},a))},Ds=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ct(this,Tn)):this.options.refetchInterval)??!1},Ls=function(s){mn(this,Pn,Bs).call(this),qt(this,wr,s),!(isServer||resolveEnabled(this.options.enabled,Ct(this,Tn))===!1||!isValidTimeout(Ct(this,wr))||Ct(this,wr)===0)&&qt(this,Dr,setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&mn(this,Pn,ms).call(this)},Ct(this,wr)))},$s=function(){mn(this,Pn,js).call(this),mn(this,Pn,Ls).call(this,mn(this,Pn,Ds).call(this))},Fs=function(){Ct(this,jr)&&(clearTimeout(Ct(this,jr)),qt(this,jr,void 0))},Bs=function(){Ct(this,Dr)&&(clearInterval(Ct(this,Dr)),qt(this,Dr,void 0))},Us=function(){const s=Ct(this,Wn).getQueryCache().build(Ct(this,Wn),this.options);if(s===Ct(this,Tn))return;const i=Ct(this,Tn);qt(this,Tn,s),qt(this,_s,s.state),this.hasListeners()&&(i==null||i.removeObserver(this),s.addObserver(this))},Po=function(s){notifyManager.batch(()=>{s.listeners&&this.listeners.forEach(i=>{i(Ct(this,Un))}),Ct(this,Wn).getQueryCache().notify({query:Ct(this,Tn),type:"observerResultsUpdated"})})},Eo);function shouldLoadOnMount(o,s){return resolveEnabled(s.enabled,o)!==!1&&o.state.data===void 0&&!(o.state.status==="error"&&s.retryOnMount===!1)}function shouldFetchOnMount(o,s){return shouldLoadOnMount(o,s)||o.state.data!==void 0&&shouldFetchOn(o,s,s.refetchOnMount)}function shouldFetchOn(o,s,i){if(resolveEnabled(s.enabled,o)!==!1){const a=typeof i=="function"?i(o):i;return a==="always"||a!==!1&&isStale(o,s)}return!1}function shouldFetchOptionally(o,s,i,a){return(o!==s||resolveEnabled(a.enabled,o)===!1)&&(!i.suspense||o.state.status!=="error")&&isStale(o,i)}function isStale(o,s){return resolveEnabled(s.enabled,o)!==!1&&o.isStaleByTime(resolveStaleTime(s.staleTime,o))}function shouldAssignObserverCurrentProperties(o,s){return!shallowEqualObjects(o.getCurrentResult(),s)}var Er,Tr,Hn,hr,fr,Os,zs,To,MutationObserver$1=(To=class extends Subscribable{constructor(i,a){super();tn(this,fr);tn(this,Er);tn(this,Tr);tn(this,Hn);tn(this,hr);qt(this,Er,i),this.setOptions(a),this.bindMethods(),mn(this,fr,Os).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(i){var d;const a=this.options;this.options=Ct(this,Er).defaultMutationOptions(i),shallowEqualObjects(this.options,a)||Ct(this,Er).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ct(this,Hn),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&hashKey(a.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():((d=Ct(this,Hn))==null?void 0:d.state.status)==="pending"&&Ct(this,Hn).setOptions(this.options)}onUnsubscribe(){var i;this.hasListeners()||(i=Ct(this,Hn))==null||i.removeObserver(this)}onMutationUpdate(i){mn(this,fr,Os).call(this),mn(this,fr,zs).call(this,i)}getCurrentResult(){return Ct(this,Tr)}reset(){var i;(i=Ct(this,Hn))==null||i.removeObserver(this),qt(this,Hn,void 0),mn(this,fr,Os).call(this),mn(this,fr,zs).call(this)}mutate(i,a){var d;return qt(this,hr,a),(d=Ct(this,Hn))==null||d.removeObserver(this),qt(this,Hn,Ct(this,Er).getMutationCache().build(Ct(this,Er),this.options)),Ct(this,Hn).addObserver(this),Ct(this,Hn).execute(i)}},Er=new WeakMap,Tr=new WeakMap,Hn=new WeakMap,hr=new WeakMap,fr=new WeakSet,Os=function(){var a;const i=((a=Ct(this,Hn))==null?void 0:a.state)??getDefaultState();qt(this,Tr,{...i,isPending:i.status==="pending",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset})},zs=function(i){notifyManager.batch(()=>{var a,d,_,b,$,nt,tt,et;if(Ct(this,hr)&&this.hasListeners()){const g=Ct(this,Tr).variables,c=Ct(this,Tr).context;(i==null?void 0:i.type)==="success"?((d=(a=Ct(this,hr)).onSuccess)==null||d.call(a,i.data,g,c),(b=(_=Ct(this,hr)).onSettled)==null||b.call(_,i.data,null,g,c)):(i==null?void 0:i.type)==="error"&&((nt=($=Ct(this,hr)).onError)==null||nt.call($,i.error,g,c),(et=(tt=Ct(this,hr)).onSettled)==null||et.call(tt,void 0,i.error,g,c))}this.listeners.forEach(g=>{g(Ct(this,Tr))})})},To),QueryClientContext=reactExports.createContext(void 0),useQueryClient=o=>{const s=reactExports.useContext(QueryClientContext);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},QueryClientProvider=({client:o,children:s})=>(reactExports.useEffect(()=>(o.mount(),()=>{o.unmount()}),[o]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:o,children:s})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let o=!1;return{clearReset:()=>{o=!1},reset:()=>{o=!0},isReset:()=>o}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(o,s){return typeof o=="function"?o(...s):!!o}function noop$2(){}var ensurePreventErrorBoundaryRetry=(o,s)=>{(o.suspense||o.throwOnError||o.experimental_prefetchInRender)&&(s.isReset()||(o.retryOnMount=!1))},useClearResetErrorBoundary=o=>{reactExports.useEffect(()=>{o.clearReset()},[o])},getHasError=({result:o,errorResetBoundary:s,throwOnError:i,query:a})=>o.isError&&!s.isReset()&&!o.isFetching&&a&&shouldThrowError(i,[o.error,a]),ensureSuspenseTimers=o=>{o.suspense&&(o.staleTime===void 0&&(o.staleTime=1e3),typeof o.gcTime=="number"&&(o.gcTime=Math.max(o.gcTime,1e3)))},willFetch=(o,s)=>o.isLoading&&o.isFetching&&!s,shouldSuspend=(o,s)=>(o==null?void 0:o.suspense)&&s.isPending,fetchOptimistic=(o,s,i)=>s.fetchOptimistic(o).catch(()=>{i.clearReset()});function useBaseQuery(o,s,i){var et,g,c,j,_e;const a=useQueryClient(),d=useIsRestoring(),_=useQueryErrorResetBoundary(),b=a.defaultQueryOptions(o);(g=(et=a.getDefaultOptions().queries)==null?void 0:et._experimental_beforeQuery)==null||g.call(et,b),b._optimisticResults=d?"isRestoring":"optimistic",ensureSuspenseTimers(b),ensurePreventErrorBoundaryRetry(b,_),useClearResetErrorBoundary(_);const $=!a.getQueryCache().get(b.queryHash),[nt]=reactExports.useState(()=>new s(a,b)),tt=nt.getOptimisticResult(b);if(reactExports.useSyncExternalStore(reactExports.useCallback(rt=>{const st=d?noop$2:nt.subscribe(notifyManager.batchCalls(rt));return nt.updateResult(),st},[nt,d]),()=>nt.getCurrentResult(),()=>nt.getCurrentResult()),reactExports.useEffect(()=>{nt.setOptions(b,{listeners:!1})},[b,nt]),shouldSuspend(b,tt))throw fetchOptimistic(b,nt,_);if(getHasError({result:tt,errorResetBoundary:_,throwOnError:b.throwOnError,query:a.getQueryCache().get(b.queryHash)}))throw tt.error;if((j=(c=a.getDefaultOptions().queries)==null?void 0:c._experimental_afterQuery)==null||j.call(c,b,tt),b.experimental_prefetchInRender&&!isServer&&willFetch(tt,d)){const rt=$?fetchOptimistic(b,nt,_):(_e=a.getQueryCache().get(b.queryHash))==null?void 0:_e.promise;rt==null||rt.catch(noop$2).finally(()=>{nt.updateResult()})}return b.notifyOnChangeProps?tt:nt.trackResult(tt)}function useQuery(o,s){return useBaseQuery(o,QueryObserver)}function useMutation(o,s){const i=useQueryClient(),[a]=reactExports.useState(()=>new MutationObserver$1(i,o));reactExports.useEffect(()=>{a.setOptions(o)},[a,o]);const d=reactExports.useSyncExternalStore(reactExports.useCallback(b=>a.subscribe(notifyManager.batchCalls(b)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),_=reactExports.useCallback((b,$)=>{a.mutate(b,$).catch(noop$2)},[a]);if(d.error&&shouldThrowError(a.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:_,mutateAsync:d.mutate}}async function throwIfResNotOk(o){if(!o.ok){const s=await o.text()||o.statusText;throw new Error(`${o.status}: ${s}`)}}async function apiRequest(o,s,i){const a=await fetch(s,{method:o,headers:i?{"Content-Type":"application/json"}:{},body:i?JSON.stringify(i):void 0,credentials:"include"});return await throwIfResNotOk(a),a}const getQueryFn=({on401:o})=>async({queryKey:s})=>{const i=await fetch(s.join("/"),{credentials:"include"});return o==="returnNull"&&i.status===401?null:(await throwIfResNotOk(i),await i.json())},queryClient=new QueryClient({defaultOptions:{queries:{queryFn:getQueryFn({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_SAFE_INTEGER,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=o=>{if(toastTimeouts.has(o))return;const s=setTimeout(()=>{toastTimeouts.delete(o),dispatch({type:"REMOVE_TOAST",toastId:o})},TOAST_REMOVE_DELAY);toastTimeouts.set(o,s)},reducer=(o,s)=>{switch(s.type){case"ADD_TOAST":return{...o,toasts:[s.toast,...o.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...o,toasts:o.toasts.map(i=>i.id===s.toast.id?{...i,...s.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=s;return i?addToRemoveQueue(i):o.toasts.forEach(a=>{addToRemoveQueue(a.id)}),{...o,toasts:o.toasts.map(a=>a.id===i||i===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return s.toastId===void 0?{...o,toasts:[]}:{...o,toasts:o.toasts.filter(i=>i.id!==s.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(o){memoryState=reducer(memoryState,o),listeners.forEach(s=>{s(memoryState)})}function toast({...o}){const s=genId(),i=d=>dispatch({type:"UPDATE_TOAST",toast:{...d,id:s}}),a=()=>dispatch({type:"DISMISS_TOAST",toastId:s});return dispatch({type:"ADD_TOAST",toast:{...o,id:s,open:!0,onOpenChange:d=>{d||a()}}}),{id:s,dismiss:a,update:i}}function useToast(){const[o,s]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(s),()=>{const i=listeners.indexOf(s);i>-1&&listeners.splice(i,1)}),[o]),{...o,toast,dismiss:i=>dispatch({type:"DISMISS_TOAST",toastId:i})}}function composeEventHandlers(o,s,{checkForDefaultPrevented:i=!0}={}){return function(d){if(o==null||o(d),i===!1||!d.defaultPrevented)return s==null?void 0:s(d)}}function setRef(o,s){if(typeof o=="function")return o(s);o!=null&&(o.current=s)}function composeRefs(...o){return s=>{let i=!1;const a=o.map(d=>{const _=setRef(d,s);return!i&&typeof _=="function"&&(i=!0),_});if(i)return()=>{for(let d=0;d<a.length;d++){const _=a[d];typeof _=="function"?_():setRef(o[d],null)}}}}function useComposedRefs(...o){return reactExports.useCallback(composeRefs(...o),o)}function createContextScope(o,s=[]){let i=[];function a(_,b){const $=reactExports.createContext(b),nt=i.length;i=[...i,b];const tt=g=>{var ot;const{scope:c,children:j,..._e}=g,rt=((ot=c==null?void 0:c[o])==null?void 0:ot[nt])||$,st=reactExports.useMemo(()=>_e,Object.values(_e));return jsxRuntimeExports.jsx(rt.Provider,{value:st,children:j})};tt.displayName=_+"Provider";function et(g,c){var rt;const j=((rt=c==null?void 0:c[o])==null?void 0:rt[nt])||$,_e=reactExports.useContext(j);if(_e)return _e;if(b!==void 0)return b;throw new Error(`\`${g}\` must be used within \`${_}\``)}return[tt,et]}const d=()=>{const _=i.map(b=>reactExports.createContext(b));return function($){const nt=($==null?void 0:$[o])||_;return reactExports.useMemo(()=>({[`__scope${o}`]:{...$,[o]:nt}}),[$,nt])}};return d.scopeName=o,[a,composeContextScopes(d,...s)]}function composeContextScopes(...o){const s=o[0];if(o.length===1)return s;const i=()=>{const a=o.map(d=>({useScope:d(),scopeName:d.scopeName}));return function(_){const b=a.reduce(($,{useScope:nt,scopeName:tt})=>{const g=nt(_)[`__scope${tt}`];return{...$,...g}},{});return reactExports.useMemo(()=>({[`__scope${s.scopeName}`]:b}),[b])}};return i.scopeName=s.scopeName,i}function createSlot(o){const s=createSlotClone(o),i=reactExports.forwardRef((a,d)=>{const{children:_,...b}=a,$=reactExports.Children.toArray(_),nt=$.find(isSlottable);if(nt){const tt=nt.props.children,et=$.map(g=>g===nt?reactExports.Children.count(tt)>1?reactExports.Children.only(null):reactExports.isValidElement(tt)?tt.props.children:null:g);return jsxRuntimeExports.jsx(s,{...b,ref:d,children:reactExports.isValidElement(tt)?reactExports.cloneElement(tt,void 0,et):null})}return jsxRuntimeExports.jsx(s,{...b,ref:d,children:_})});return i.displayName=`${o}.Slot`,i}var Slot$1=createSlot("Slot");function createSlotClone(o){const s=reactExports.forwardRef((i,a)=>{const{children:d,..._}=i;if(reactExports.isValidElement(d)){const b=getElementRef$1(d),$=mergeProps(_,d.props);return d.type!==reactExports.Fragment&&($.ref=a?composeRefs(a,b):b),reactExports.cloneElement(d,$)}return reactExports.Children.count(d)>1?reactExports.Children.only(null):null});return s.displayName=`${o}.SlotClone`,s}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function createSlottable(o){const s=({children:i})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:i});return s.displayName=`${o}.Slottable`,s.__radixId=SLOTTABLE_IDENTIFIER,s}function isSlottable(o){return reactExports.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(o,s){const i={...s};for(const a in s){const d=o[a],_=s[a];/^on[A-Z]/.test(a)?d&&_?i[a]=(...$)=>{_(...$),d(...$)}:d&&(i[a]=d):a==="style"?i[a]={...d,..._}:a==="className"&&(i[a]=[d,_].filter(Boolean).join(" "))}return{...o,...i}}function getElementRef$1(o){var a,d;let s=(a=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:a.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?o.ref:(s=(d=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:d.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?o.props.ref:o.props.ref||o.ref)}function createCollection(o){const s=o+"CollectionProvider",[i,a]=createContextScope(s),[d,_]=i(s,{collectionRef:{current:null},itemMap:new Map}),b=rt=>{const{scope:st,children:ot}=rt,it=React.useRef(null),at=React.useRef(new Map).current;return jsxRuntimeExports.jsx(d,{scope:st,itemMap:at,collectionRef:it,children:ot})};b.displayName=s;const $=o+"CollectionSlot",nt=createSlot($),tt=React.forwardRef((rt,st)=>{const{scope:ot,children:it}=rt,at=_($,ot),lt=useComposedRefs(st,at.collectionRef);return jsxRuntimeExports.jsx(nt,{ref:lt,children:it})});tt.displayName=$;const et=o+"CollectionItemSlot",g="data-radix-collection-item",c=createSlot(et),j=React.forwardRef((rt,st)=>{const{scope:ot,children:it,...at}=rt,lt=React.useRef(null),ut=useComposedRefs(st,lt),ct=_(et,ot);return React.useEffect(()=>(ct.itemMap.set(lt,{ref:lt,...at}),()=>void ct.itemMap.delete(lt))),jsxRuntimeExports.jsx(c,{[g]:"",ref:ut,children:it})});j.displayName=et;function _e(rt){const st=_(o+"CollectionConsumer",rt);return React.useCallback(()=>{const it=st.collectionRef.current;if(!it)return[];const at=Array.from(it.querySelectorAll(`[${g}]`));return Array.from(st.itemMap.values()).sort((ct,dt)=>at.indexOf(ct.ref.current)-at.indexOf(dt.ref.current))},[st.collectionRef,st.itemMap])}return[{Provider:b,Slot:tt,ItemSlot:j},_e,a]}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((o,s)=>{const i=createSlot(`Primitive.${s}`),a=reactExports.forwardRef((d,_)=>{const{asChild:b,...$}=d,nt=b?i:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(nt,{...$,ref:_})});return a.displayName=`Primitive.${s}`,{...o,[s]:a}},{});function dispatchDiscreteCustomEvent(o,s){o&&reactDomExports.flushSync(()=>o.dispatchEvent(s))}function useCallbackRef$1(o){const s=reactExports.useRef(o);return reactExports.useEffect(()=>{s.current=o}),reactExports.useMemo(()=>(...i)=>{var a;return(a=s.current)==null?void 0:a.call(s,...i)},[])}function useEscapeKeydown(o,s=globalThis==null?void 0:globalThis.document){const i=useCallbackRef$1(o);reactExports.useEffect(()=>{const a=d=>{d.key==="Escape"&&i(d)};return s.addEventListener("keydown",a,{capture:!0}),()=>s.removeEventListener("keydown",a,{capture:!0})},[i,s])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((o,s)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:d,onFocusOutside:_,onInteractOutside:b,onDismiss:$,...nt}=o,tt=reactExports.useContext(DismissableLayerContext),[et,g]=reactExports.useState(null),c=(et==null?void 0:et.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=reactExports.useState({}),_e=useComposedRefs(s,dt=>g(dt)),rt=Array.from(tt.layers),[st]=[...tt.layersWithOutsidePointerEventsDisabled].slice(-1),ot=rt.indexOf(st),it=et?rt.indexOf(et):-1,at=tt.layersWithOutsidePointerEventsDisabled.size>0,lt=it>=ot,ut=usePointerDownOutside(dt=>{const ft=dt.target,ht=[...tt.branches].some(mt=>mt.contains(ft));!lt||ht||(d==null||d(dt),b==null||b(dt),dt.defaultPrevented||$==null||$())},c),ct=useFocusOutside(dt=>{const ft=dt.target;[...tt.branches].some(mt=>mt.contains(ft))||(_==null||_(dt),b==null||b(dt),dt.defaultPrevented||$==null||$())},c);return useEscapeKeydown(dt=>{it===tt.layers.size-1&&(a==null||a(dt),!dt.defaultPrevented&&$&&(dt.preventDefault(),$()))},c),reactExports.useEffect(()=>{if(et)return i&&(tt.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=c.body.style.pointerEvents,c.body.style.pointerEvents="none"),tt.layersWithOutsidePointerEventsDisabled.add(et)),tt.layers.add(et),dispatchUpdate(),()=>{i&&tt.layersWithOutsidePointerEventsDisabled.size===1&&(c.body.style.pointerEvents=originalBodyPointerEvents)}},[et,c,i,tt]),reactExports.useEffect(()=>()=>{et&&(tt.layers.delete(et),tt.layersWithOutsidePointerEventsDisabled.delete(et),dispatchUpdate())},[et,tt]),reactExports.useEffect(()=>{const dt=()=>j({});return document.addEventListener(CONTEXT_UPDATE,dt),()=>document.removeEventListener(CONTEXT_UPDATE,dt)},[]),jsxRuntimeExports.jsx(Primitive.div,{...nt,ref:_e,style:{pointerEvents:at?lt?"auto":"none":void 0,...o.style},onFocusCapture:composeEventHandlers(o.onFocusCapture,ct.onFocusCapture),onBlurCapture:composeEventHandlers(o.onBlurCapture,ct.onBlurCapture),onPointerDownCapture:composeEventHandlers(o.onPointerDownCapture,ut.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((o,s)=>{const i=reactExports.useContext(DismissableLayerContext),a=reactExports.useRef(null),d=useComposedRefs(s,a);return reactExports.useEffect(()=>{const _=a.current;if(_)return i.branches.add(_),()=>{i.branches.delete(_)}},[i.branches]),jsxRuntimeExports.jsx(Primitive.div,{...o,ref:d})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(o,s=globalThis==null?void 0:globalThis.document){const i=useCallbackRef$1(o),a=reactExports.useRef(!1),d=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const _=$=>{if($.target&&!a.current){let nt=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,i,tt,{discrete:!0})};const tt={originalEvent:$};$.pointerType==="touch"?(s.removeEventListener("click",d.current),d.current=nt,s.addEventListener("click",d.current,{once:!0})):nt()}else s.removeEventListener("click",d.current);a.current=!1},b=window.setTimeout(()=>{s.addEventListener("pointerdown",_)},0);return()=>{window.clearTimeout(b),s.removeEventListener("pointerdown",_),s.removeEventListener("click",d.current)}},[s,i]),{onPointerDownCapture:()=>a.current=!0}}function useFocusOutside(o,s=globalThis==null?void 0:globalThis.document){const i=useCallbackRef$1(o),a=reactExports.useRef(!1);return reactExports.useEffect(()=>{const d=_=>{_.target&&!a.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,i,{originalEvent:_},{discrete:!1})};return s.addEventListener("focusin",d),()=>s.removeEventListener("focusin",d)},[s,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function dispatchUpdate(){const o=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(o)}function handleAndDispatchCustomEvent$1(o,s,i,{discrete:a}){const d=i.originalEvent.target,_=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:i});s&&d.addEventListener(o,s,{once:!0}),a?dispatchDiscreteCustomEvent(d,_):d.dispatchEvent(_)}var Root$5=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$2="Portal",Portal$1=reactExports.forwardRef((o,s)=>{var $;const{container:i,...a}=o,[d,_]=reactExports.useState(!1);useLayoutEffect2(()=>_(!0),[]);const b=i||d&&(($=globalThis==null?void 0:globalThis.document)==null?void 0:$.body);return b?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...a,ref:s}),b):null});Portal$1.displayName=PORTAL_NAME$2;function useStateMachine(o,s){return reactExports.useReducer((i,a)=>s[i][a]??i,o)}var Presence=o=>{const{present:s,children:i}=o,a=usePresence(s),d=typeof i=="function"?i({present:a.isPresent}):reactExports.Children.only(i),_=useComposedRefs(a.ref,getElementRef(d));return typeof i=="function"||a.isPresent?reactExports.cloneElement(d,{ref:_}):null};Presence.displayName="Presence";function usePresence(o){const[s,i]=reactExports.useState(),a=reactExports.useRef({}),d=reactExports.useRef(o),_=reactExports.useRef("none"),b=o?"mounted":"unmounted",[$,nt]=useStateMachine(b,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const tt=getAnimationName(a.current);_.current=$==="mounted"?tt:"none"},[$]),useLayoutEffect2(()=>{const tt=a.current,et=d.current;if(et!==o){const c=_.current,j=getAnimationName(tt);o?nt("MOUNT"):j==="none"||(tt==null?void 0:tt.display)==="none"?nt("UNMOUNT"):nt(et&&c!==j?"ANIMATION_OUT":"UNMOUNT"),d.current=o}},[o,nt]),useLayoutEffect2(()=>{if(s){let tt;const et=s.ownerDocument.defaultView??window,g=j=>{const rt=getAnimationName(a.current).includes(j.animationName);if(j.target===s&&rt&&(nt("ANIMATION_END"),!d.current)){const st=s.style.animationFillMode;s.style.animationFillMode="forwards",tt=et.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=st)})}},c=j=>{j.target===s&&(_.current=getAnimationName(a.current))};return s.addEventListener("animationstart",c),s.addEventListener("animationcancel",g),s.addEventListener("animationend",g),()=>{et.clearTimeout(tt),s.removeEventListener("animationstart",c),s.removeEventListener("animationcancel",g),s.removeEventListener("animationend",g)}}else nt("ANIMATION_END")},[s,nt]),{isPresent:["mounted","unmountSuspended"].includes($),ref:reactExports.useCallback(tt=>{tt&&(a.current=getComputedStyle(tt)),i(tt)},[])}}function getAnimationName(o){return(o==null?void 0:o.animationName)||"none"}function getElementRef(o){var a,d;let s=(a=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:a.get,i=s&&"isReactWarning"in s&&s.isReactWarning;return i?o.ref:(s=(d=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:d.get,i=s&&"isReactWarning"in s&&s.isReactWarning,i?o.props.ref:o.props.ref||o.ref)}function useControllableState({prop:o,defaultProp:s,onChange:i=()=>{}}){const[a,d]=useUncontrolledState({defaultProp:s,onChange:i}),_=o!==void 0,b=_?o:a,$=useCallbackRef$1(i),nt=reactExports.useCallback(tt=>{if(_){const g=typeof tt=="function"?tt(o):tt;g!==o&&$(g)}else d(tt)},[_,o,d,$]);return[b,nt]}function useUncontrolledState({defaultProp:o,onChange:s}){const i=reactExports.useState(o),[a]=i,d=reactExports.useRef(a),_=useCallbackRef$1(s);return reactExports.useEffect(()=>{d.current!==a&&(_(a),d.current=a)},[a,d,_]),i}var NAME$2="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((o,s)=>jsxRuntimeExports.jsx(Primitive.span,{...o,ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...o.style}}));VisuallyHidden.displayName=NAME$2;var Root$4=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope("Toast",[createCollectionScope$1]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=o=>{const{__scopeToast:s,label:i="Notification",duration:a=5e3,swipeDirection:d="right",swipeThreshold:_=50,children:b}=o,[$,nt]=reactExports.useState(null),[tt,et]=reactExports.useState(0),g=reactExports.useRef(!1),c=reactExports.useRef(!1);return i.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection$1.Provider,{scope:s,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:s,label:i,duration:a,swipeDirection:d,swipeThreshold:_,toastCount:tt,viewport:$,onViewportChange:nt,onToastAdd:reactExports.useCallback(()=>et(j=>j+1),[]),onToastRemove:reactExports.useCallback(()=>et(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:c,children:b})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME$1="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((o,s)=>{const{__scopeToast:i,hotkey:a=VIEWPORT_DEFAULT_HOTKEY,label:d="Notifications ({hotkey})",..._}=o,b=useToastProviderContext(VIEWPORT_NAME$1,i),$=useCollection$1(i),nt=reactExports.useRef(null),tt=reactExports.useRef(null),et=reactExports.useRef(null),g=reactExports.useRef(null),c=useComposedRefs(s,g,b.onViewportChange),j=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),_e=b.toastCount>0;reactExports.useEffect(()=>{const st=ot=>{var at;a.length!==0&&a.every(lt=>ot[lt]||ot.code===lt)&&((at=g.current)==null||at.focus())};return document.addEventListener("keydown",st),()=>document.removeEventListener("keydown",st)},[a]),reactExports.useEffect(()=>{const st=nt.current,ot=g.current;if(_e&&st&&ot){const it=()=>{if(!b.isClosePausedRef.current){const ct=new CustomEvent(VIEWPORT_PAUSE);ot.dispatchEvent(ct),b.isClosePausedRef.current=!0}},at=()=>{if(b.isClosePausedRef.current){const ct=new CustomEvent(VIEWPORT_RESUME);ot.dispatchEvent(ct),b.isClosePausedRef.current=!1}},lt=ct=>{!st.contains(ct.relatedTarget)&&at()},ut=()=>{st.contains(document.activeElement)||at()};return st.addEventListener("focusin",it),st.addEventListener("focusout",lt),st.addEventListener("pointermove",it),st.addEventListener("pointerleave",ut),window.addEventListener("blur",it),window.addEventListener("focus",at),()=>{st.removeEventListener("focusin",it),st.removeEventListener("focusout",lt),st.removeEventListener("pointermove",it),st.removeEventListener("pointerleave",ut),window.removeEventListener("blur",it),window.removeEventListener("focus",at)}}},[_e,b.isClosePausedRef]);const rt=reactExports.useCallback(({tabbingDirection:st})=>{const it=$().map(at=>{const lt=at.ref.current,ut=[lt,...getTabbableCandidates$1(lt)];return st==="forwards"?ut:ut.reverse()});return(st==="forwards"?it.reverse():it).flat()},[$]);return reactExports.useEffect(()=>{const st=g.current;if(st){const ot=it=>{var ut,ct,dt;const at=it.altKey||it.ctrlKey||it.metaKey;if(it.key==="Tab"&&!at){const ft=document.activeElement,ht=it.shiftKey;if(it.target===st&&ht){(ut=tt.current)==null||ut.focus();return}const Tt=rt({tabbingDirection:ht?"backwards":"forwards"}),St=Tt.findIndex(xt=>xt===ft);focusFirst$1(Tt.slice(St+1))?it.preventDefault():ht?(ct=tt.current)==null||ct.focus():(dt=et.current)==null||dt.focus()}};return st.addEventListener("keydown",ot),()=>st.removeEventListener("keydown",ot)}},[$,rt]),jsxRuntimeExports.jsxs(Branch,{ref:nt,role:"region","aria-label":d.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:_e?void 0:"none"},children:[_e&&jsxRuntimeExports.jsx(FocusProxy,{ref:tt,onFocusFromOutsideViewport:()=>{const st=rt({tabbingDirection:"forwards"});focusFirst$1(st)}}),jsxRuntimeExports.jsx(Collection$1.Slot,{scope:i,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,..._,ref:c})}),_e&&jsxRuntimeExports.jsx(FocusProxy,{ref:et,onFocusFromOutsideViewport:()=>{const st=rt({tabbingDirection:"backwards"});focusFirst$1(st)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME$1;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((o,s)=>{const{__scopeToast:i,onFocusFromOutsideViewport:a,...d}=o,_=useToastProviderContext(FOCUS_PROXY_NAME,i);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...d,ref:s,style:{position:"fixed"},onFocus:b=>{var tt;const $=b.relatedTarget;!((tt=_.viewport)!=null&&tt.contains($))&&a()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((o,s)=>{const{forceMount:i,open:a,defaultOpen:d,onOpenChange:_,...b}=o,[$=!0,nt]=useControllableState({prop:a,defaultProp:d,onChange:_});return jsxRuntimeExports.jsx(Presence,{present:i||$,children:jsxRuntimeExports.jsx(ToastImpl,{open:$,...b,ref:s,onClose:()=>nt(!1),onPause:useCallbackRef$1(o.onPause),onResume:useCallbackRef$1(o.onResume),onSwipeStart:composeEventHandlers(o.onSwipeStart,tt=>{tt.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(o.onSwipeMove,tt=>{const{x:et,y:g}=tt.detail.delta;tt.currentTarget.setAttribute("data-swipe","move"),tt.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${et}px`),tt.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:composeEventHandlers(o.onSwipeCancel,tt=>{tt.currentTarget.setAttribute("data-swipe","cancel"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(o.onSwipeEnd,tt=>{const{x:et,y:g}=tt.detail.delta;tt.currentTarget.setAttribute("data-swipe","end"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),tt.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),tt.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${et}px`),tt.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),nt(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((o,s)=>{const{__scopeToast:i,type:a="foreground",duration:d,open:_,onClose:b,onEscapeKeyDown:$,onPause:nt,onResume:tt,onSwipeStart:et,onSwipeMove:g,onSwipeCancel:c,onSwipeEnd:j,..._e}=o,rt=useToastProviderContext(TOAST_NAME,i),[st,ot]=reactExports.useState(null),it=useComposedRefs(s,xt=>ot(xt)),at=reactExports.useRef(null),lt=reactExports.useRef(null),ut=d||rt.duration,ct=reactExports.useRef(0),dt=reactExports.useRef(ut),ft=reactExports.useRef(0),{onToastAdd:ht,onToastRemove:mt}=rt,yt=useCallbackRef$1(()=>{var wt;(st==null?void 0:st.contains(document.activeElement))&&((wt=rt.viewport)==null||wt.focus()),b()}),Tt=reactExports.useCallback(xt=>{!xt||xt===1/0||(window.clearTimeout(ft.current),ct.current=new Date().getTime(),ft.current=window.setTimeout(yt,xt))},[yt]);reactExports.useEffect(()=>{const xt=rt.viewport;if(xt){const wt=()=>{Tt(dt.current),tt==null||tt()},gt=()=>{const vt=new Date().getTime()-ct.current;dt.current=dt.current-vt,window.clearTimeout(ft.current),nt==null||nt()};return xt.addEventListener(VIEWPORT_PAUSE,gt),xt.addEventListener(VIEWPORT_RESUME,wt),()=>{xt.removeEventListener(VIEWPORT_PAUSE,gt),xt.removeEventListener(VIEWPORT_RESUME,wt)}}},[rt.viewport,ut,nt,tt,Tt]),reactExports.useEffect(()=>{_&&!rt.isClosePausedRef.current&&Tt(ut)},[_,ut,rt.isClosePausedRef,Tt]),reactExports.useEffect(()=>(ht(),()=>mt()),[ht,mt]);const St=reactExports.useMemo(()=>st?getAnnounceTextContent(st):null,[st]);return rt.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[St&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:i,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:St}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:i,onClose:yt,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:i,children:jsxRuntimeExports.jsx(Root$5,{asChild:!0,onEscapeKeyDown:composeEventHandlers($,()=>{rt.isFocusedToastEscapeKeyDownRef.current||yt(),rt.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":_?"open":"closed","data-swipe-direction":rt.swipeDirection,..._e,ref:it,style:{userSelect:"none",touchAction:"none",...o.style},onKeyDown:composeEventHandlers(o.onKeyDown,xt=>{xt.key==="Escape"&&($==null||$(xt.nativeEvent),xt.nativeEvent.defaultPrevented||(rt.isFocusedToastEscapeKeyDownRef.current=!0,yt()))}),onPointerDown:composeEventHandlers(o.onPointerDown,xt=>{xt.button===0&&(at.current={x:xt.clientX,y:xt.clientY})}),onPointerMove:composeEventHandlers(o.onPointerMove,xt=>{if(!at.current)return;const wt=xt.clientX-at.current.x,gt=xt.clientY-at.current.y,vt=!!lt.current,Ot=["left","right"].includes(rt.swipeDirection),At=["left","up"].includes(rt.swipeDirection)?Math.min:Math.max,Ft=Ot?At(0,wt):0,Bt=Ot?0:At(0,gt),Wt=xt.pointerType==="touch"?10:2,sn={x:Ft,y:Bt},Jt={originalEvent:xt,delta:sn};vt?(lt.current=sn,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,g,Jt,{discrete:!1})):isDeltaInDirection(sn,rt.swipeDirection,Wt)?(lt.current=sn,handleAndDispatchCustomEvent(TOAST_SWIPE_START,et,Jt,{discrete:!1}),xt.target.setPointerCapture(xt.pointerId)):(Math.abs(wt)>Wt||Math.abs(gt)>Wt)&&(at.current=null)}),onPointerUp:composeEventHandlers(o.onPointerUp,xt=>{const wt=lt.current,gt=xt.target;if(gt.hasPointerCapture(xt.pointerId)&&gt.releasePointerCapture(xt.pointerId),lt.current=null,at.current=null,wt){const vt=xt.currentTarget,Ot={originalEvent:xt,delta:wt};isDeltaInDirection(wt,rt.swipeDirection,rt.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,j,Ot,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,c,Ot,{discrete:!0}),vt.addEventListener("click",At=>At.preventDefault(),{once:!0})}})})})}),rt.viewport)})]}):null}),ToastAnnounce=o=>{const{__scopeToast:s,children:i,...a}=o,d=useToastProviderContext(TOAST_NAME,s),[_,b]=reactExports.useState(!1),[$,nt]=reactExports.useState(!1);return useNextFrame(()=>b(!0)),reactExports.useEffect(()=>{const tt=window.setTimeout(()=>nt(!0),1e3);return()=>window.clearTimeout(tt)},[]),$?null:jsxRuntimeExports.jsx(Portal$1,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...a,children:_&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[d.label," ",i]})})})},TITLE_NAME="ToastTitle",ToastTitle$1=reactExports.forwardRef((o,s)=>{const{__scopeToast:i,...a}=o;return jsxRuntimeExports.jsx(Primitive.div,{...a,ref:s})});ToastTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="ToastDescription",ToastDescription$1=reactExports.forwardRef((o,s)=>{const{__scopeToast:i,...a}=o;return jsxRuntimeExports.jsx(Primitive.div,{...a,ref:s})});ToastDescription$1.displayName=DESCRIPTION_NAME;var ACTION_NAME="ToastAction",ToastAction$1=reactExports.forwardRef((o,s)=>{const{altText:i,...a}=o;return i.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:i,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...a,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME;var CLOSE_NAME="ToastClose",ToastClose$1=reactExports.forwardRef((o,s)=>{const{__scopeToast:i,...a}=o,d=useToastInteractiveContext(CLOSE_NAME,i);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...a,ref:s,onClick:composeEventHandlers(o.onClick,d.onClose)})})});ToastClose$1.displayName=CLOSE_NAME;var ToastAnnounceExclude=reactExports.forwardRef((o,s)=>{const{__scopeToast:i,altText:a,...d}=o;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...d,ref:s})});function getAnnounceTextContent(o){const s=[];return Array.from(o.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&s.push(a.textContent),isHTMLElement$1(a)){const d=a.ariaHidden||a.hidden||a.style.display==="none",_=a.dataset.radixToastAnnounceExclude==="";if(!d)if(_){const b=a.dataset.radixToastAnnounceAlt;b&&s.push(b)}else s.push(...getAnnounceTextContent(a))}}),s}function handleAndDispatchCustomEvent(o,s,i,{discrete:a}){const d=i.originalEvent.currentTarget,_=new CustomEvent(o,{bubbles:!0,cancelable:!0,detail:i});s&&d.addEventListener(o,s,{once:!0}),a?dispatchDiscreteCustomEvent(d,_):d.dispatchEvent(_)}var isDeltaInDirection=(o,s,i=0)=>{const a=Math.abs(o.x),d=Math.abs(o.y),_=a>d;return s==="left"||s==="right"?_&&a>i:!_&&d>i};function useNextFrame(o=()=>{}){const s=useCallbackRef$1(o);useLayoutEffect2(()=>{let i=0,a=0;return i=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(i),window.cancelAnimationFrame(a)}},[s])}function isHTMLElement$1(o){return o.nodeType===o.ELEMENT_NODE}function getTabbableCandidates$1(o){const s=[],i=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const d=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||d?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)s.push(i.currentNode);return s}function focusFirst$1(o){const s=document.activeElement;return o.some(i=>i===s?!0:(i.focus(),document.activeElement!==s))}var Provider$1=ToastProvider$1,Viewport$1=ToastViewport$1,Root2$2=Toast$1,Title=ToastTitle$1,Description=ToastDescription$1,Action=ToastAction$1,Close=ToastClose$1;function r(o){var s,i,a="";if(typeof o=="string"||typeof o=="number")a+=o;else if(typeof o=="object")if(Array.isArray(o)){var d=o.length;for(s=0;s<d;s++)o[s]&&(i=r(o[s]))&&(a&&(a+=" "),a+=i)}else for(i in o)o[i]&&(a&&(a+=" "),a+=i);return a}function clsx(){for(var o,s,i=0,a="",d=arguments.length;i<d;i++)(o=arguments[i])&&(s=r(o))&&(a&&(a+=" "),a+=s);return a}const falsyToString=o=>typeof o=="boolean"?`${o}`:o===0?"0":o,cx=clsx,cva=(o,s)=>i=>{var a;if((s==null?void 0:s.variants)==null)return cx(o,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:d,defaultVariants:_}=s,b=Object.keys(d).map(tt=>{const et=i==null?void 0:i[tt],g=_==null?void 0:_[tt];if(et===null)return null;const c=falsyToString(et)||falsyToString(g);return d[tt][c]}),$=i&&Object.entries(i).reduce((tt,et)=>{let[g,c]=et;return c===void 0||(tt[g]=c),tt},{}),nt=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((tt,et)=>{let{class:g,className:c,...j}=et;return Object.entries(j).every(_e=>{let[rt,st]=_e;return Array.isArray(st)?st.includes({..._,...$}[rt]):{..._,...$}[rt]===st})?[...tt,g,c]:tt},[]);return cx(o,b,nt,i==null?void 0:i.class,i==null?void 0:i.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...o)=>o.filter((s,i,a)=>!!s&&a.indexOf(s)===i).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:o="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:d="",children:_,iconNode:b,...$},nt)=>reactExports.createElement("svg",{ref:nt,...defaultAttributes,width:s,height:s,stroke:o,strokeWidth:a?Number(i)*24/Number(s):i,className:mergeClasses("lucide",d),...$},[...b.map(([tt,et])=>reactExports.createElement(tt,et)),...Array.isArray(_)?_:[_]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(o,s)=>{const i=reactExports.forwardRef(({className:a,...d},_)=>reactExports.createElement(Icon$1,{ref:_,iconNode:s,className:mergeClasses(`lucide-${toKebabCase(o)}`,a),...d}));return i.displayName=`${o}`,i};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bell=createLucideIcon("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bot=createLucideIcon("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Brain=createLucideIcon("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CalendarPlus=createLucideIcon("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleAlert=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CloudUpload=createLucideIcon("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileImage=createLucideIcon("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mic=createLucideIcon("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Palette=createLucideIcon("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Save=createLucideIcon("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings$1=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shield=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Square=createLucideIcon("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Stethoscope=createLucideIcon("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Video=createLucideIcon("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=o=>{const s=createClassMap(o),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=o;return{getClassGroupId:b=>{const $=b.split(CLASS_PART_SEPARATOR);return $[0]===""&&$.length!==1&&$.shift(),getGroupRecursive($,s)||getGroupIdForArbitraryProperty(b)},getConflictingClassGroupIds:(b,$)=>{const nt=i[b]||[];return $&&a[b]?[...nt,...a[b]]:nt}}},getGroupRecursive=(o,s)=>{var b;if(o.length===0)return s.classGroupId;const i=o[0],a=s.nextPart.get(i),d=a?getGroupRecursive(o.slice(1),a):void 0;if(d)return d;if(s.validators.length===0)return;const _=o.join(CLASS_PART_SEPARATOR);return(b=s.validators.find(({validator:$})=>$(_)))==null?void 0:b.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=o=>{if(arbitraryPropertyRegex.test(o)){const s=arbitraryPropertyRegex.exec(o)[1],i=s==null?void 0:s.substring(0,s.indexOf(":"));if(i)return"arbitrary.."+i}},createClassMap=o=>{const{theme:s,prefix:i}=o,a={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(o.classGroups),i).forEach(([_,b])=>{processClassesRecursively(b,a,_,s)}),a},processClassesRecursively=(o,s,i,a)=>{o.forEach(d=>{if(typeof d=="string"){const _=d===""?s:getPart(s,d);_.classGroupId=i;return}if(typeof d=="function"){if(isThemeGetter(d)){processClassesRecursively(d(a),s,i,a);return}s.validators.push({validator:d,classGroupId:i});return}Object.entries(d).forEach(([_,b])=>{processClassesRecursively(b,getPart(s,_),i,a)})})},getPart=(o,s)=>{let i=o;return s.split(CLASS_PART_SEPARATOR).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},isThemeGetter=o=>o.isThemeGetter,getPrefixedClassGroupEntries=(o,s)=>s?o.map(([i,a])=>{const d=a.map(_=>typeof _=="string"?s+_:typeof _=="object"?Object.fromEntries(Object.entries(_).map(([b,$])=>[s+b,$])):_);return[i,d]}):o,createLruCache=o=>{if(o<1)return{get:()=>{},set:()=>{}};let s=0,i=new Map,a=new Map;const d=(_,b)=>{i.set(_,b),s++,s>o&&(s=0,a=i,i=new Map)};return{get(_){let b=i.get(_);if(b!==void 0)return b;if((b=a.get(_))!==void 0)return d(_,b),b},set(_,b){i.has(_)?i.set(_,b):d(_,b)}}},IMPORTANT_MODIFIER="!",createParseClassName=o=>{const{separator:s,experimentalParseClassName:i}=o,a=s.length===1,d=s[0],_=s.length,b=$=>{const nt=[];let tt=0,et=0,g;for(let st=0;st<$.length;st++){let ot=$[st];if(tt===0){if(ot===d&&(a||$.slice(st,st+_)===s)){nt.push($.slice(et,st)),et=st+_;continue}if(ot==="/"){g=st;continue}}ot==="["?tt++:ot==="]"&&tt--}const c=nt.length===0?$:$.substring(et),j=c.startsWith(IMPORTANT_MODIFIER),_e=j?c.substring(1):c,rt=g&&g>et?g-et:void 0;return{modifiers:nt,hasImportantModifier:j,baseClassName:_e,maybePostfixModifierPosition:rt}};return i?$=>i({className:$,parseClassName:b}):b},sortModifiers=o=>{if(o.length<=1)return o;const s=[];let i=[];return o.forEach(a=>{a[0]==="["?(s.push(...i.sort(),a),i=[]):i.push(a)}),s.push(...i.sort()),s},createConfigUtils=o=>({cache:createLruCache(o.cacheSize),parseClassName:createParseClassName(o),...createClassGroupUtils(o)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(o,s)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:d}=s,_=[],b=o.trim().split(SPLIT_CLASSES_REGEX);let $="";for(let nt=b.length-1;nt>=0;nt-=1){const tt=b[nt],{modifiers:et,hasImportantModifier:g,baseClassName:c,maybePostfixModifierPosition:j}=i(tt);let _e=!!j,rt=a(_e?c.substring(0,j):c);if(!rt){if(!_e){$=tt+($.length>0?" "+$:$);continue}if(rt=a(c),!rt){$=tt+($.length>0?" "+$:$);continue}_e=!1}const st=sortModifiers(et).join(":"),ot=g?st+IMPORTANT_MODIFIER:st,it=ot+rt;if(_.includes(it))continue;_.push(it);const at=d(rt,_e);for(let lt=0;lt<at.length;++lt){const ut=at[lt];_.push(ot+ut)}$=tt+($.length>0?" "+$:$)}return $};function twJoin(){let o=0,s,i,a="";for(;o<arguments.length;)(s=arguments[o++])&&(i=toValue(s))&&(a&&(a+=" "),a+=i);return a}const toValue=o=>{if(typeof o=="string")return o;let s,i="";for(let a=0;a<o.length;a++)o[a]&&(s=toValue(o[a]))&&(i&&(i+=" "),i+=s);return i};function createTailwindMerge(o,...s){let i,a,d,_=b;function b(nt){const tt=s.reduce((et,g)=>g(et),o());return i=createConfigUtils(tt),a=i.cache.get,d=i.cache.set,_=$,$(nt)}function $(nt){const tt=a(nt);if(tt)return tt;const et=mergeClassList(nt,i);return d(nt,et),et}return function(){return _(twJoin.apply(null,arguments))}}const fromTheme=o=>{const s=i=>i[o]||[];return s.isThemeGetter=!0,s},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=o=>isNumber(o)||stringLengths.has(o)||fractionRegex.test(o),isArbitraryLength=o=>getIsArbitraryValue(o,"length",isLengthOnly),isNumber=o=>!!o&&!Number.isNaN(Number(o)),isArbitraryNumber=o=>getIsArbitraryValue(o,"number",isNumber),isInteger$1=o=>!!o&&Number.isInteger(Number(o)),isPercent=o=>o.endsWith("%")&&isNumber(o.slice(0,-1)),isArbitraryValue=o=>arbitraryValueRegex.test(o),isTshirtSize=o=>tshirtUnitRegex.test(o),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=o=>getIsArbitraryValue(o,sizeLabels,isNever),isArbitraryPosition=o=>getIsArbitraryValue(o,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=o=>getIsArbitraryValue(o,imageLabels,isImage),isArbitraryShadow=o=>getIsArbitraryValue(o,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(o,s,i)=>{const a=arbitraryValueRegex.exec(o);return a?a[1]?typeof s=="string"?a[1]===s:s.has(a[1]):i(a[2]):!1},isLengthOnly=o=>lengthUnitRegex.test(o)&&!colorFunctionRegex.test(o),isNever=()=>!1,isShadow=o=>shadowRegex.test(o),isImage=o=>imageRegex.test(o),getDefaultConfig=()=>{const o=fromTheme("colors"),s=fromTheme("spacing"),i=fromTheme("blur"),a=fromTheme("brightness"),d=fromTheme("borderColor"),_=fromTheme("borderRadius"),b=fromTheme("borderSpacing"),$=fromTheme("borderWidth"),nt=fromTheme("contrast"),tt=fromTheme("grayscale"),et=fromTheme("hueRotate"),g=fromTheme("invert"),c=fromTheme("gap"),j=fromTheme("gradientColorStops"),_e=fromTheme("gradientColorStopPositions"),rt=fromTheme("inset"),st=fromTheme("margin"),ot=fromTheme("opacity"),it=fromTheme("padding"),at=fromTheme("saturate"),lt=fromTheme("scale"),ut=fromTheme("sepia"),ct=fromTheme("skew"),dt=fromTheme("space"),ft=fromTheme("translate"),ht=()=>["auto","contain","none"],mt=()=>["auto","hidden","clip","visible","scroll"],yt=()=>["auto",isArbitraryValue,s],Tt=()=>[isArbitraryValue,s],St=()=>["",isLength,isArbitraryLength],xt=()=>["auto",isNumber,isArbitraryValue],wt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],gt=()=>["solid","dashed","dotted","double","none"],vt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ot=()=>["start","end","center","between","around","evenly","stretch"],At=()=>["","0",isArbitraryValue],Ft=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Bt=()=>[isNumber,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:Bt(),borderColor:[o],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:Tt(),borderWidth:St(),contrast:Bt(),grayscale:At(),hueRotate:Bt(),invert:At(),gap:Tt(),gradientColorStops:[o],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:yt(),margin:yt(),opacity:Bt(),padding:Tt(),saturate:Bt(),scale:Bt(),sepia:At(),skew:Bt(),space:Tt(),translate:Tt()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":Ft()}],"break-before":[{"break-before":Ft()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...wt(),isArbitraryValue]}],overflow:[{overflow:mt()}],"overflow-x":[{"overflow-x":mt()}],"overflow-y":[{"overflow-y":mt()}],overscroll:[{overscroll:ht()}],"overscroll-x":[{"overscroll-x":ht()}],"overscroll-y":[{"overscroll-y":ht()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[rt]}],"inset-x":[{"inset-x":[rt]}],"inset-y":[{"inset-y":[rt]}],start:[{start:[rt]}],end:[{end:[rt]}],top:[{top:[rt]}],right:[{right:[rt]}],bottom:[{bottom:[rt]}],left:[{left:[rt]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger$1,isArbitraryValue]}],basis:[{basis:yt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:At()}],shrink:[{shrink:At()}],order:[{order:["first","last","none",isInteger$1,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger$1,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":xt()}],"col-end":[{"col-end":xt()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger$1,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":xt()}],"row-end":[{"row-end":xt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[c]}],"gap-x":[{"gap-x":[c]}],"gap-y":[{"gap-y":[c]}],"justify-content":[{justify:["normal",...Ot()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ot(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ot(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[it]}],px:[{px:[it]}],py:[{py:[it]}],ps:[{ps:[it]}],pe:[{pe:[it]}],pt:[{pt:[it]}],pr:[{pr:[it]}],pb:[{pb:[it]}],pl:[{pl:[it]}],m:[{m:[st]}],mx:[{mx:[st]}],my:[{my:[st]}],ms:[{ms:[st]}],me:[{me:[st]}],mt:[{mt:[st]}],mr:[{mr:[st]}],mb:[{mb:[st]}],ml:[{ml:[st]}],"space-x":[{"space-x":[dt]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[dt]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,s]}],"min-w":[{"min-w":[isArbitraryValue,s,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,s,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,s,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[o]}],"placeholder-opacity":[{"placeholder-opacity":[ot]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[o]}],"text-opacity":[{"text-opacity":[ot]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...gt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[o]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Tt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[ot]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...wt(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[o]}],"gradient-from-pos":[{from:[_e]}],"gradient-via-pos":[{via:[_e]}],"gradient-to-pos":[{to:[_e]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[_]}],"rounded-s":[{"rounded-s":[_]}],"rounded-e":[{"rounded-e":[_]}],"rounded-t":[{"rounded-t":[_]}],"rounded-r":[{"rounded-r":[_]}],"rounded-b":[{"rounded-b":[_]}],"rounded-l":[{"rounded-l":[_]}],"rounded-ss":[{"rounded-ss":[_]}],"rounded-se":[{"rounded-se":[_]}],"rounded-ee":[{"rounded-ee":[_]}],"rounded-es":[{"rounded-es":[_]}],"rounded-tl":[{"rounded-tl":[_]}],"rounded-tr":[{"rounded-tr":[_]}],"rounded-br":[{"rounded-br":[_]}],"rounded-bl":[{"rounded-bl":[_]}],"border-w":[{border:[$]}],"border-w-x":[{"border-x":[$]}],"border-w-y":[{"border-y":[$]}],"border-w-s":[{"border-s":[$]}],"border-w-e":[{"border-e":[$]}],"border-w-t":[{"border-t":[$]}],"border-w-r":[{"border-r":[$]}],"border-w-b":[{"border-b":[$]}],"border-w-l":[{"border-l":[$]}],"border-opacity":[{"border-opacity":[ot]}],"border-style":[{border:[...gt(),"hidden"]}],"divide-x":[{"divide-x":[$]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[$]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[ot]}],"divide-style":[{divide:gt()}],"border-color":[{border:[d]}],"border-color-x":[{"border-x":[d]}],"border-color-y":[{"border-y":[d]}],"border-color-s":[{"border-s":[d]}],"border-color-e":[{"border-e":[d]}],"border-color-t":[{"border-t":[d]}],"border-color-r":[{"border-r":[d]}],"border-color-b":[{"border-b":[d]}],"border-color-l":[{"border-l":[d]}],"divide-color":[{divide:[d]}],"outline-style":[{outline:["",...gt()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[o]}],"ring-w":[{ring:St()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[o]}],"ring-opacity":[{"ring-opacity":[ot]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[o]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[ot]}],"mix-blend":[{"mix-blend":[...vt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":vt()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[a]}],contrast:[{contrast:[nt]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[tt]}],"hue-rotate":[{"hue-rotate":[et]}],invert:[{invert:[g]}],saturate:[{saturate:[at]}],sepia:[{sepia:[ut]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[nt]}],"backdrop-grayscale":[{"backdrop-grayscale":[tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[ot]}],"backdrop-saturate":[{"backdrop-saturate":[at]}],"backdrop-sepia":[{"backdrop-sepia":[ut]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[b]}],"border-spacing-x":[{"border-spacing-x":[b]}],"border-spacing-y":[{"border-spacing-y":[b]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:Bt()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:Bt()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[lt]}],"scale-x":[{"scale-x":[lt]}],"scale-y":[{"scale-y":[lt]}],rotate:[{rotate:[isInteger$1,isArbitraryValue]}],"translate-x":[{"translate-x":[ft]}],"translate-y":[{"translate-y":[ft]}],"skew-x":[{"skew-x":[ct]}],"skew-y":[{"skew-y":[ct]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",o]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[o]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Tt()}],"scroll-mx":[{"scroll-mx":Tt()}],"scroll-my":[{"scroll-my":Tt()}],"scroll-ms":[{"scroll-ms":Tt()}],"scroll-me":[{"scroll-me":Tt()}],"scroll-mt":[{"scroll-mt":Tt()}],"scroll-mr":[{"scroll-mr":Tt()}],"scroll-mb":[{"scroll-mb":Tt()}],"scroll-ml":[{"scroll-ml":Tt()}],"scroll-p":[{"scroll-p":Tt()}],"scroll-px":[{"scroll-px":Tt()}],"scroll-py":[{"scroll-py":Tt()}],"scroll-ps":[{"scroll-ps":Tt()}],"scroll-pe":[{"scroll-pe":Tt()}],"scroll-pt":[{"scroll-pt":Tt()}],"scroll-pr":[{"scroll-pr":Tt()}],"scroll-pb":[{"scroll-pb":Tt()}],"scroll-pl":[{"scroll-pl":Tt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[o,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[o,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...o){return twMerge(clsx(o))}const ToastProvider=Provider$1,ToastViewport=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Viewport$1,{ref:i,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",o),...s}));ToastViewport.displayName=Viewport$1.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:o,variant:s,...i},a)=>jsxRuntimeExports.jsx(Root2$2,{ref:a,className:cn(toastVariants({variant:s}),o),...i}));Toast.displayName=Root2$2.displayName;const ToastAction=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Action,{ref:i,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",o),...s}));ToastAction.displayName=Action.displayName;const ToastClose=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Close,{ref:i,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",o),"toast-close":"",...s,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})}));ToastClose.displayName=Close.displayName;const ToastTitle=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Title,{ref:i,className:cn("text-sm font-semibold",o),...s}));ToastTitle.displayName=Title.displayName;const ToastDescription=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Description,{ref:i,className:cn("text-sm opacity-90",o),...s}));ToastDescription.displayName=Description.displayName;function Toaster(){const{toasts:o}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[o.map(function({id:s,title:i,description:a,action:d,..._}){return jsxRuntimeExports.jsxs(Toast,{..._,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[i&&jsxRuntimeExports.jsx(ToastTitle,{children:i}),a&&jsxRuntimeExports.jsx(ToastDescription,{children:a})]}),d,jsxRuntimeExports.jsx(ToastClose,{})]},s)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}var useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count$1=0;function useId(o){const[s,i]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{i(a=>a??String(count$1++))},[o]),s?`radix-${s}`:""}const sides=["top","right","bottom","left"],min$1=Math.min,max$1=Math.max,round$1=Math.round,floor=Math.floor,createCoords=o=>({x:o,y:o}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(o,s,i){return max$1(o,min$1(s,i))}function evaluate(o,s){return typeof o=="function"?o(s):o}function getSide(o){return o.split("-")[0]}function getAlignment(o){return o.split("-")[1]}function getOppositeAxis(o){return o==="x"?"y":"x"}function getAxisLength(o){return o==="y"?"height":"width"}function getSideAxis(o){return["top","bottom"].includes(getSide(o))?"y":"x"}function getAlignmentAxis(o){return getOppositeAxis(getSideAxis(o))}function getAlignmentSides(o,s,i){i===void 0&&(i=!1);const a=getAlignment(o),d=getAlignmentAxis(o),_=getAxisLength(d);let b=d==="x"?a===(i?"end":"start")?"right":"left":a==="start"?"bottom":"top";return s.reference[_]>s.floating[_]&&(b=getOppositePlacement(b)),[b,getOppositePlacement(b)]}function getExpandedPlacements(o){const s=getOppositePlacement(o);return[getOppositeAlignmentPlacement(o),s,getOppositeAlignmentPlacement(s)]}function getOppositeAlignmentPlacement(o){return o.replace(/start|end/g,s=>oppositeAlignmentMap[s])}function getSideList(o,s,i){const a=["left","right"],d=["right","left"],_=["top","bottom"],b=["bottom","top"];switch(o){case"top":case"bottom":return i?s?d:a:s?a:d;case"left":case"right":return s?_:b;default:return[]}}function getOppositeAxisPlacements(o,s,i,a){const d=getAlignment(o);let _=getSideList(getSide(o),i==="start",a);return d&&(_=_.map(b=>b+"-"+d),s&&(_=_.concat(_.map(getOppositeAlignmentPlacement)))),_}function getOppositePlacement(o){return o.replace(/left|right|bottom|top/g,s=>oppositeSideMap[s])}function expandPaddingObject(o){return{top:0,right:0,bottom:0,left:0,...o}}function getPaddingObject(o){return typeof o!="number"?expandPaddingObject(o):{top:o,right:o,bottom:o,left:o}}function rectToClientRect(o){const{x:s,y:i,width:a,height:d}=o;return{width:a,height:d,top:i,left:s,right:s+a,bottom:i+d,x:s,y:i}}function computeCoordsFromPlacement(o,s,i){let{reference:a,floating:d}=o;const _=getSideAxis(s),b=getAlignmentAxis(s),$=getAxisLength(b),nt=getSide(s),tt=_==="y",et=a.x+a.width/2-d.width/2,g=a.y+a.height/2-d.height/2,c=a[$]/2-d[$]/2;let j;switch(nt){case"top":j={x:et,y:a.y-d.height};break;case"bottom":j={x:et,y:a.y+a.height};break;case"right":j={x:a.x+a.width,y:g};break;case"left":j={x:a.x-d.width,y:g};break;default:j={x:a.x,y:a.y}}switch(getAlignment(s)){case"start":j[b]-=c*(i&&tt?-1:1);break;case"end":j[b]+=c*(i&&tt?-1:1);break}return j}const computePosition$1=async(o,s,i)=>{const{placement:a="bottom",strategy:d="absolute",middleware:_=[],platform:b}=i,$=_.filter(Boolean),nt=await(b.isRTL==null?void 0:b.isRTL(s));let tt=await b.getElementRects({reference:o,floating:s,strategy:d}),{x:et,y:g}=computeCoordsFromPlacement(tt,a,nt),c=a,j={},_e=0;for(let rt=0;rt<$.length;rt++){const{name:st,fn:ot}=$[rt],{x:it,y:at,data:lt,reset:ut}=await ot({x:et,y:g,initialPlacement:a,placement:c,strategy:d,middlewareData:j,rects:tt,platform:b,elements:{reference:o,floating:s}});et=it??et,g=at??g,j={...j,[st]:{...j[st],...lt}},ut&&_e<=50&&(_e++,typeof ut=="object"&&(ut.placement&&(c=ut.placement),ut.rects&&(tt=ut.rects===!0?await b.getElementRects({reference:o,floating:s,strategy:d}):ut.rects),{x:et,y:g}=computeCoordsFromPlacement(tt,c,nt)),rt=-1)}return{x:et,y:g,placement:c,strategy:d,middlewareData:j}};async function detectOverflow(o,s){var i;s===void 0&&(s={});const{x:a,y:d,platform:_,rects:b,elements:$,strategy:nt}=o,{boundary:tt="clippingAncestors",rootBoundary:et="viewport",elementContext:g="floating",altBoundary:c=!1,padding:j=0}=evaluate(s,o),_e=getPaddingObject(j),st=$[c?g==="floating"?"reference":"floating":g],ot=rectToClientRect(await _.getClippingRect({element:(i=await(_.isElement==null?void 0:_.isElement(st)))==null||i?st:st.contextElement||await(_.getDocumentElement==null?void 0:_.getDocumentElement($.floating)),boundary:tt,rootBoundary:et,strategy:nt})),it=g==="floating"?{x:a,y:d,width:b.floating.width,height:b.floating.height}:b.reference,at=await(_.getOffsetParent==null?void 0:_.getOffsetParent($.floating)),lt=await(_.isElement==null?void 0:_.isElement(at))?await(_.getScale==null?void 0:_.getScale(at))||{x:1,y:1}:{x:1,y:1},ut=rectToClientRect(_.convertOffsetParentRelativeRectToViewportRelativeRect?await _.convertOffsetParentRelativeRectToViewportRelativeRect({elements:$,rect:it,offsetParent:at,strategy:nt}):it);return{top:(ot.top-ut.top+_e.top)/lt.y,bottom:(ut.bottom-ot.bottom+_e.bottom)/lt.y,left:(ot.left-ut.left+_e.left)/lt.x,right:(ut.right-ot.right+_e.right)/lt.x}}const arrow$3=o=>({name:"arrow",options:o,async fn(s){const{x:i,y:a,placement:d,rects:_,platform:b,elements:$,middlewareData:nt}=s,{element:tt,padding:et=0}=evaluate(o,s)||{};if(tt==null)return{};const g=getPaddingObject(et),c={x:i,y:a},j=getAlignmentAxis(d),_e=getAxisLength(j),rt=await b.getDimensions(tt),st=j==="y",ot=st?"top":"left",it=st?"bottom":"right",at=st?"clientHeight":"clientWidth",lt=_.reference[_e]+_.reference[j]-c[j]-_.floating[_e],ut=c[j]-_.reference[j],ct=await(b.getOffsetParent==null?void 0:b.getOffsetParent(tt));let dt=ct?ct[at]:0;(!dt||!await(b.isElement==null?void 0:b.isElement(ct)))&&(dt=$.floating[at]||_.floating[_e]);const ft=lt/2-ut/2,ht=dt/2-rt[_e]/2-1,mt=min$1(g[ot],ht),yt=min$1(g[it],ht),Tt=mt,St=dt-rt[_e]-yt,xt=dt/2-rt[_e]/2+ft,wt=clamp$1(Tt,xt,St),gt=!nt.arrow&&getAlignment(d)!=null&&xt!==wt&&_.reference[_e]/2-(xt<Tt?mt:yt)-rt[_e]/2<0,vt=gt?xt<Tt?xt-Tt:xt-St:0;return{[j]:c[j]+vt,data:{[j]:wt,centerOffset:xt-wt-vt,...gt&&{alignmentOffset:vt}},reset:gt}}}),flip$2=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(s){var i,a;const{placement:d,middlewareData:_,rects:b,initialPlacement:$,platform:nt,elements:tt}=s,{mainAxis:et=!0,crossAxis:g=!0,fallbackPlacements:c,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:_e="none",flipAlignment:rt=!0,...st}=evaluate(o,s);if((i=_.arrow)!=null&&i.alignmentOffset)return{};const ot=getSide(d),it=getSideAxis($),at=getSide($)===$,lt=await(nt.isRTL==null?void 0:nt.isRTL(tt.floating)),ut=c||(at||!rt?[getOppositePlacement($)]:getExpandedPlacements($)),ct=_e!=="none";!c&&ct&&ut.push(...getOppositeAxisPlacements($,rt,_e,lt));const dt=[$,...ut],ft=await detectOverflow(s,st),ht=[];let mt=((a=_.flip)==null?void 0:a.overflows)||[];if(et&&ht.push(ft[ot]),g){const xt=getAlignmentSides(d,b,lt);ht.push(ft[xt[0]],ft[xt[1]])}if(mt=[...mt,{placement:d,overflows:ht}],!ht.every(xt=>xt<=0)){var yt,Tt;const xt=(((yt=_.flip)==null?void 0:yt.index)||0)+1,wt=dt[xt];if(wt)return{data:{index:xt,overflows:mt},reset:{placement:wt}};let gt=(Tt=mt.filter(vt=>vt.overflows[0]<=0).sort((vt,Ot)=>vt.overflows[1]-Ot.overflows[1])[0])==null?void 0:Tt.placement;if(!gt)switch(j){case"bestFit":{var St;const vt=(St=mt.filter(Ot=>{if(ct){const At=getSideAxis(Ot.placement);return At===it||At==="y"}return!0}).map(Ot=>[Ot.placement,Ot.overflows.filter(At=>At>0).reduce((At,Ft)=>At+Ft,0)]).sort((Ot,At)=>Ot[1]-At[1])[0])==null?void 0:St[0];vt&&(gt=vt);break}case"initialPlacement":gt=$;break}if(d!==gt)return{reset:{placement:gt}}}return{}}}};function getSideOffsets(o,s){return{top:o.top-s.height,right:o.right-s.width,bottom:o.bottom-s.height,left:o.left-s.width}}function isAnySideFullyClipped(o){return sides.some(s=>o[s]>=0)}const hide$2=function(o){return o===void 0&&(o={}),{name:"hide",options:o,async fn(s){const{rects:i}=s,{strategy:a="referenceHidden",...d}=evaluate(o,s);switch(a){case"referenceHidden":{const _=await detectOverflow(s,{...d,elementContext:"reference"}),b=getSideOffsets(_,i.reference);return{data:{referenceHiddenOffsets:b,referenceHidden:isAnySideFullyClipped(b)}}}case"escaped":{const _=await detectOverflow(s,{...d,altBoundary:!0}),b=getSideOffsets(_,i.floating);return{data:{escapedOffsets:b,escaped:isAnySideFullyClipped(b)}}}default:return{}}}}};async function convertValueToCoords(o,s){const{placement:i,platform:a,elements:d}=o,_=await(a.isRTL==null?void 0:a.isRTL(d.floating)),b=getSide(i),$=getAlignment(i),nt=getSideAxis(i)==="y",tt=["left","top"].includes(b)?-1:1,et=_&&nt?-1:1,g=evaluate(s,o);let{mainAxis:c,crossAxis:j,alignmentAxis:_e}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return $&&typeof _e=="number"&&(j=$==="end"?_e*-1:_e),nt?{x:j*et,y:c*tt}:{x:c*tt,y:j*et}}const offset$2=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(s){var i,a;const{x:d,y:_,placement:b,middlewareData:$}=s,nt=await convertValueToCoords(s,o);return b===((i=$.offset)==null?void 0:i.placement)&&(a=$.arrow)!=null&&a.alignmentOffset?{}:{x:d+nt.x,y:_+nt.y,data:{...nt,placement:b}}}}},shift$2=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(s){const{x:i,y:a,placement:d}=s,{mainAxis:_=!0,crossAxis:b=!1,limiter:$={fn:st=>{let{x:ot,y:it}=st;return{x:ot,y:it}}},...nt}=evaluate(o,s),tt={x:i,y:a},et=await detectOverflow(s,nt),g=getSideAxis(getSide(d)),c=getOppositeAxis(g);let j=tt[c],_e=tt[g];if(_){const st=c==="y"?"top":"left",ot=c==="y"?"bottom":"right",it=j+et[st],at=j-et[ot];j=clamp$1(it,j,at)}if(b){const st=g==="y"?"top":"left",ot=g==="y"?"bottom":"right",it=_e+et[st],at=_e-et[ot];_e=clamp$1(it,_e,at)}const rt=$.fn({...s,[c]:j,[g]:_e});return{...rt,data:{x:rt.x-i,y:rt.y-a,enabled:{[c]:_,[g]:b}}}}}},limitShift$2=function(o){return o===void 0&&(o={}),{options:o,fn(s){const{x:i,y:a,placement:d,rects:_,middlewareData:b}=s,{offset:$=0,mainAxis:nt=!0,crossAxis:tt=!0}=evaluate(o,s),et={x:i,y:a},g=getSideAxis(d),c=getOppositeAxis(g);let j=et[c],_e=et[g];const rt=evaluate($,s),st=typeof rt=="number"?{mainAxis:rt,crossAxis:0}:{mainAxis:0,crossAxis:0,...rt};if(nt){const at=c==="y"?"height":"width",lt=_.reference[c]-_.floating[at]+st.mainAxis,ut=_.reference[c]+_.reference[at]-st.mainAxis;j<lt?j=lt:j>ut&&(j=ut)}if(tt){var ot,it;const at=c==="y"?"width":"height",lt=["top","left"].includes(getSide(d)),ut=_.reference[g]-_.floating[at]+(lt&&((ot=b.offset)==null?void 0:ot[g])||0)+(lt?0:st.crossAxis),ct=_.reference[g]+_.reference[at]+(lt?0:((it=b.offset)==null?void 0:it[g])||0)-(lt?st.crossAxis:0);_e<ut?_e=ut:_e>ct&&(_e=ct)}return{[c]:j,[g]:_e}}}},size$2=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(s){var i,a;const{placement:d,rects:_,platform:b,elements:$}=s,{apply:nt=()=>{},...tt}=evaluate(o,s),et=await detectOverflow(s,tt),g=getSide(d),c=getAlignment(d),j=getSideAxis(d)==="y",{width:_e,height:rt}=_.floating;let st,ot;g==="top"||g==="bottom"?(st=g,ot=c===(await(b.isRTL==null?void 0:b.isRTL($.floating))?"start":"end")?"left":"right"):(ot=g,st=c==="end"?"top":"bottom");const it=rt-et.top-et.bottom,at=_e-et.left-et.right,lt=min$1(rt-et[st],it),ut=min$1(_e-et[ot],at),ct=!s.middlewareData.shift;let dt=lt,ft=ut;if((i=s.middlewareData.shift)!=null&&i.enabled.x&&(ft=at),(a=s.middlewareData.shift)!=null&&a.enabled.y&&(dt=it),ct&&!c){const mt=max$1(et.left,0),yt=max$1(et.right,0),Tt=max$1(et.top,0),St=max$1(et.bottom,0);j?ft=_e-2*(mt!==0||yt!==0?mt+yt:max$1(et.left,et.right)):dt=rt-2*(Tt!==0||St!==0?Tt+St:max$1(et.top,et.bottom))}await nt({...s,availableWidth:ft,availableHeight:dt});const ht=await b.getDimensions($.floating);return _e!==ht.width||rt!==ht.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(o){return isNode(o)?(o.nodeName||"").toLowerCase():"#document"}function getWindow(o){var s;return(o==null||(s=o.ownerDocument)==null?void 0:s.defaultView)||window}function getDocumentElement(o){var s;return(s=(isNode(o)?o.ownerDocument:o.document)||window.document)==null?void 0:s.documentElement}function isNode(o){return hasWindow()?o instanceof Node||o instanceof getWindow(o).Node:!1}function isElement(o){return hasWindow()?o instanceof Element||o instanceof getWindow(o).Element:!1}function isHTMLElement(o){return hasWindow()?o instanceof HTMLElement||o instanceof getWindow(o).HTMLElement:!1}function isShadowRoot(o){return!hasWindow()||typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof getWindow(o).ShadowRoot}function isOverflowElement(o){const{overflow:s,overflowX:i,overflowY:a,display:d}=getComputedStyle$1(o);return/auto|scroll|overlay|hidden|clip/.test(s+a+i)&&!["inline","contents"].includes(d)}function isTableElement(o){return["table","td","th"].includes(getNodeName(o))}function isTopLayer(o){return[":popover-open",":modal"].some(s=>{try{return o.matches(s)}catch{return!1}})}function isContainingBlock(o){const s=isWebKit(),i=isElement(o)?getComputedStyle$1(o):o;return["transform","translate","scale","rotate","perspective"].some(a=>i[a]?i[a]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!s&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!s&&(i.filter?i.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(i.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(i.contain||"").includes(a))}function getContainingBlock(o){let s=getParentNode(o);for(;isHTMLElement(s)&&!isLastTraversableNode(s);){if(isContainingBlock(s))return s;if(isTopLayer(s))return null;s=getParentNode(s)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(o){return["html","body","#document"].includes(getNodeName(o))}function getComputedStyle$1(o){return getWindow(o).getComputedStyle(o)}function getNodeScroll(o){return isElement(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.scrollX,scrollTop:o.scrollY}}function getParentNode(o){if(getNodeName(o)==="html")return o;const s=o.assignedSlot||o.parentNode||isShadowRoot(o)&&o.host||getDocumentElement(o);return isShadowRoot(s)?s.host:s}function getNearestOverflowAncestor(o){const s=getParentNode(o);return isLastTraversableNode(s)?o.ownerDocument?o.ownerDocument.body:o.body:isHTMLElement(s)&&isOverflowElement(s)?s:getNearestOverflowAncestor(s)}function getOverflowAncestors(o,s,i){var a;s===void 0&&(s=[]),i===void 0&&(i=!0);const d=getNearestOverflowAncestor(o),_=d===((a=o.ownerDocument)==null?void 0:a.body),b=getWindow(d);if(_){const $=getFrameElement(b);return s.concat(b,b.visualViewport||[],isOverflowElement(d)?d:[],$&&i?getOverflowAncestors($):[])}return s.concat(d,getOverflowAncestors(d,[],i))}function getFrameElement(o){return o.parent&&Object.getPrototypeOf(o.parent)?o.frameElement:null}function getCssDimensions(o){const s=getComputedStyle$1(o);let i=parseFloat(s.width)||0,a=parseFloat(s.height)||0;const d=isHTMLElement(o),_=d?o.offsetWidth:i,b=d?o.offsetHeight:a,$=round$1(i)!==_||round$1(a)!==b;return $&&(i=_,a=b),{width:i,height:a,$}}function unwrapElement(o){return isElement(o)?o:o.contextElement}function getScale(o){const s=unwrapElement(o);if(!isHTMLElement(s))return createCoords(1);const i=s.getBoundingClientRect(),{width:a,height:d,$:_}=getCssDimensions(s);let b=(_?round$1(i.width):i.width)/a,$=(_?round$1(i.height):i.height)/d;return(!b||!Number.isFinite(b))&&(b=1),(!$||!Number.isFinite($))&&($=1),{x:b,y:$}}const noOffsets=createCoords(0);function getVisualOffsets(o){const s=getWindow(o);return!isWebKit()||!s.visualViewport?noOffsets:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function shouldAddVisualOffsets(o,s,i){return s===void 0&&(s=!1),!i||s&&i!==getWindow(o)?!1:s}function getBoundingClientRect(o,s,i,a){s===void 0&&(s=!1),i===void 0&&(i=!1);const d=o.getBoundingClientRect(),_=unwrapElement(o);let b=createCoords(1);s&&(a?isElement(a)&&(b=getScale(a)):b=getScale(o));const $=shouldAddVisualOffsets(_,i,a)?getVisualOffsets(_):createCoords(0);let nt=(d.left+$.x)/b.x,tt=(d.top+$.y)/b.y,et=d.width/b.x,g=d.height/b.y;if(_){const c=getWindow(_),j=a&&isElement(a)?getWindow(a):a;let _e=c,rt=getFrameElement(_e);for(;rt&&a&&j!==_e;){const st=getScale(rt),ot=rt.getBoundingClientRect(),it=getComputedStyle$1(rt),at=ot.left+(rt.clientLeft+parseFloat(it.paddingLeft))*st.x,lt=ot.top+(rt.clientTop+parseFloat(it.paddingTop))*st.y;nt*=st.x,tt*=st.y,et*=st.x,g*=st.y,nt+=at,tt+=lt,_e=getWindow(rt),rt=getFrameElement(_e)}}return rectToClientRect({width:et,height:g,x:nt,y:tt})}function getWindowScrollBarX(o,s){const i=getNodeScroll(o).scrollLeft;return s?s.left+i:getBoundingClientRect(getDocumentElement(o)).left+i}function getHTMLOffset(o,s,i){i===void 0&&(i=!1);const a=o.getBoundingClientRect(),d=a.left+s.scrollLeft-(i?0:getWindowScrollBarX(o,a)),_=a.top+s.scrollTop;return{x:d,y:_}}function convertOffsetParentRelativeRectToViewportRelativeRect(o){let{elements:s,rect:i,offsetParent:a,strategy:d}=o;const _=d==="fixed",b=getDocumentElement(a),$=s?isTopLayer(s.floating):!1;if(a===b||$&&_)return i;let nt={scrollLeft:0,scrollTop:0},tt=createCoords(1);const et=createCoords(0),g=isHTMLElement(a);if((g||!g&&!_)&&((getNodeName(a)!=="body"||isOverflowElement(b))&&(nt=getNodeScroll(a)),isHTMLElement(a))){const j=getBoundingClientRect(a);tt=getScale(a),et.x=j.x+a.clientLeft,et.y=j.y+a.clientTop}const c=b&&!g&&!_?getHTMLOffset(b,nt,!0):createCoords(0);return{width:i.width*tt.x,height:i.height*tt.y,x:i.x*tt.x-nt.scrollLeft*tt.x+et.x+c.x,y:i.y*tt.y-nt.scrollTop*tt.y+et.y+c.y}}function getClientRects(o){return Array.from(o.getClientRects())}function getDocumentRect(o){const s=getDocumentElement(o),i=getNodeScroll(o),a=o.ownerDocument.body,d=max$1(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),_=max$1(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let b=-i.scrollLeft+getWindowScrollBarX(o);const $=-i.scrollTop;return getComputedStyle$1(a).direction==="rtl"&&(b+=max$1(s.clientWidth,a.clientWidth)-d),{width:d,height:_,x:b,y:$}}function getViewportRect(o,s){const i=getWindow(o),a=getDocumentElement(o),d=i.visualViewport;let _=a.clientWidth,b=a.clientHeight,$=0,nt=0;if(d){_=d.width,b=d.height;const tt=isWebKit();(!tt||tt&&s==="fixed")&&($=d.offsetLeft,nt=d.offsetTop)}return{width:_,height:b,x:$,y:nt}}function getInnerBoundingClientRect(o,s){const i=getBoundingClientRect(o,!0,s==="fixed"),a=i.top+o.clientTop,d=i.left+o.clientLeft,_=isHTMLElement(o)?getScale(o):createCoords(1),b=o.clientWidth*_.x,$=o.clientHeight*_.y,nt=d*_.x,tt=a*_.y;return{width:b,height:$,x:nt,y:tt}}function getClientRectFromClippingAncestor(o,s,i){let a;if(s==="viewport")a=getViewportRect(o,i);else if(s==="document")a=getDocumentRect(getDocumentElement(o));else if(isElement(s))a=getInnerBoundingClientRect(s,i);else{const d=getVisualOffsets(o);a={x:s.x-d.x,y:s.y-d.y,width:s.width,height:s.height}}return rectToClientRect(a)}function hasFixedPositionAncestor(o,s){const i=getParentNode(o);return i===s||!isElement(i)||isLastTraversableNode(i)?!1:getComputedStyle$1(i).position==="fixed"||hasFixedPositionAncestor(i,s)}function getClippingElementAncestors(o,s){const i=s.get(o);if(i)return i;let a=getOverflowAncestors(o,[],!1).filter($=>isElement($)&&getNodeName($)!=="body"),d=null;const _=getComputedStyle$1(o).position==="fixed";let b=_?getParentNode(o):o;for(;isElement(b)&&!isLastTraversableNode(b);){const $=getComputedStyle$1(b),nt=isContainingBlock(b);!nt&&$.position==="fixed"&&(d=null),(_?!nt&&!d:!nt&&$.position==="static"&&!!d&&["absolute","fixed"].includes(d.position)||isOverflowElement(b)&&!nt&&hasFixedPositionAncestor(o,b))?a=a.filter(et=>et!==b):d=$,b=getParentNode(b)}return s.set(o,a),a}function getClippingRect(o){let{element:s,boundary:i,rootBoundary:a,strategy:d}=o;const b=[...i==="clippingAncestors"?isTopLayer(s)?[]:getClippingElementAncestors(s,this._c):[].concat(i),a],$=b[0],nt=b.reduce((tt,et)=>{const g=getClientRectFromClippingAncestor(s,et,d);return tt.top=max$1(g.top,tt.top),tt.right=min$1(g.right,tt.right),tt.bottom=min$1(g.bottom,tt.bottom),tt.left=max$1(g.left,tt.left),tt},getClientRectFromClippingAncestor(s,$,d));return{width:nt.right-nt.left,height:nt.bottom-nt.top,x:nt.left,y:nt.top}}function getDimensions(o){const{width:s,height:i}=getCssDimensions(o);return{width:s,height:i}}function getRectRelativeToOffsetParent(o,s,i){const a=isHTMLElement(s),d=getDocumentElement(s),_=i==="fixed",b=getBoundingClientRect(o,!0,_,s);let $={scrollLeft:0,scrollTop:0};const nt=createCoords(0);if(a||!a&&!_)if((getNodeName(s)!=="body"||isOverflowElement(d))&&($=getNodeScroll(s)),a){const c=getBoundingClientRect(s,!0,_,s);nt.x=c.x+s.clientLeft,nt.y=c.y+s.clientTop}else d&&(nt.x=getWindowScrollBarX(d));const tt=d&&!a&&!_?getHTMLOffset(d,$):createCoords(0),et=b.left+$.scrollLeft-nt.x-tt.x,g=b.top+$.scrollTop-nt.y-tt.y;return{x:et,y:g,width:b.width,height:b.height}}function isStaticPositioned(o){return getComputedStyle$1(o).position==="static"}function getTrueOffsetParent(o,s){if(!isHTMLElement(o)||getComputedStyle$1(o).position==="fixed")return null;if(s)return s(o);let i=o.offsetParent;return getDocumentElement(o)===i&&(i=i.ownerDocument.body),i}function getOffsetParent(o,s){const i=getWindow(o);if(isTopLayer(o))return i;if(!isHTMLElement(o)){let d=getParentNode(o);for(;d&&!isLastTraversableNode(d);){if(isElement(d)&&!isStaticPositioned(d))return d;d=getParentNode(d)}return i}let a=getTrueOffsetParent(o,s);for(;a&&isTableElement(a)&&isStaticPositioned(a);)a=getTrueOffsetParent(a,s);return a&&isLastTraversableNode(a)&&isStaticPositioned(a)&&!isContainingBlock(a)?i:a||getContainingBlock(o)||i}const getElementRects=async function(o){const s=this.getOffsetParent||getOffsetParent,i=this.getDimensions,a=await i(o.floating);return{reference:getRectRelativeToOffsetParent(o.reference,await s(o.floating),o.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function isRTL(o){return getComputedStyle$1(o).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(o,s){return o.x===s.x&&o.y===s.y&&o.width===s.width&&o.height===s.height}function observeMove(o,s){let i=null,a;const d=getDocumentElement(o);function _(){var $;clearTimeout(a),($=i)==null||$.disconnect(),i=null}function b($,nt){$===void 0&&($=!1),nt===void 0&&(nt=1),_();const tt=o.getBoundingClientRect(),{left:et,top:g,width:c,height:j}=tt;if($||s(),!c||!j)return;const _e=floor(g),rt=floor(d.clientWidth-(et+c)),st=floor(d.clientHeight-(g+j)),ot=floor(et),at={rootMargin:-_e+"px "+-rt+"px "+-st+"px "+-ot+"px",threshold:max$1(0,min$1(1,nt))||1};let lt=!0;function ut(ct){const dt=ct[0].intersectionRatio;if(dt!==nt){if(!lt)return b();dt?b(!1,dt):a=setTimeout(()=>{b(!1,1e-7)},1e3)}dt===1&&!rectsAreEqual(tt,o.getBoundingClientRect())&&b(),lt=!1}try{i=new IntersectionObserver(ut,{...at,root:d.ownerDocument})}catch{i=new IntersectionObserver(ut,at)}i.observe(o)}return b(!0),_}function autoUpdate(o,s,i,a){a===void 0&&(a={});const{ancestorScroll:d=!0,ancestorResize:_=!0,elementResize:b=typeof ResizeObserver=="function",layoutShift:$=typeof IntersectionObserver=="function",animationFrame:nt=!1}=a,tt=unwrapElement(o),et=d||_?[...tt?getOverflowAncestors(tt):[],...getOverflowAncestors(s)]:[];et.forEach(ot=>{d&&ot.addEventListener("scroll",i,{passive:!0}),_&&ot.addEventListener("resize",i)});const g=tt&&$?observeMove(tt,i):null;let c=-1,j=null;b&&(j=new ResizeObserver(ot=>{let[it]=ot;it&&it.target===tt&&j&&(j.unobserve(s),cancelAnimationFrame(c),c=requestAnimationFrame(()=>{var at;(at=j)==null||at.observe(s)})),i()}),tt&&!nt&&j.observe(tt),j.observe(s));let _e,rt=nt?getBoundingClientRect(o):null;nt&&st();function st(){const ot=getBoundingClientRect(o);rt&&!rectsAreEqual(rt,ot)&&i(),rt=ot,_e=requestAnimationFrame(st)}return i(),()=>{var ot;et.forEach(it=>{d&&it.removeEventListener("scroll",i),_&&it.removeEventListener("resize",i)}),g==null||g(),(ot=j)==null||ot.disconnect(),j=null,nt&&cancelAnimationFrame(_e)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(o,s,i)=>{const a=new Map,d={platform,...i},_={...d.platform,_c:a};return computePosition$1(o,s,{...d,platform:_})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(o,s){if(o===s)return!0;if(typeof o!=typeof s)return!1;if(typeof o=="function"&&o.toString()===s.toString())return!0;let i,a,d;if(o&&s&&typeof o=="object"){if(Array.isArray(o)){if(i=o.length,i!==s.length)return!1;for(a=i;a--!==0;)if(!deepEqual(o[a],s[a]))return!1;return!0}if(d=Object.keys(o),i=d.length,i!==Object.keys(s).length)return!1;for(a=i;a--!==0;)if(!{}.hasOwnProperty.call(s,d[a]))return!1;for(a=i;a--!==0;){const _=d[a];if(!(_==="_owner"&&o.$$typeof)&&!deepEqual(o[_],s[_]))return!1}return!0}return o!==o&&s!==s}function getDPR(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(o,s){const i=getDPR(o);return Math.round(s*i)/i}function useLatestRef(o){const s=reactExports.useRef(o);return index(()=>{s.current=o}),s}function useFloating(o){o===void 0&&(o={});const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:d,elements:{reference:_,floating:b}={},transform:$=!0,whileElementsMounted:nt,open:tt}=o,[et,g]=reactExports.useState({x:0,y:0,strategy:i,placement:s,middlewareData:{},isPositioned:!1}),[c,j]=reactExports.useState(a);deepEqual(c,a)||j(a);const[_e,rt]=reactExports.useState(null),[st,ot]=reactExports.useState(null),it=reactExports.useCallback(Ot=>{Ot!==ct.current&&(ct.current=Ot,rt(Ot))},[]),at=reactExports.useCallback(Ot=>{Ot!==dt.current&&(dt.current=Ot,ot(Ot))},[]),lt=_||_e,ut=b||st,ct=reactExports.useRef(null),dt=reactExports.useRef(null),ft=reactExports.useRef(et),ht=nt!=null,mt=useLatestRef(nt),yt=useLatestRef(d),Tt=useLatestRef(tt),St=reactExports.useCallback(()=>{if(!ct.current||!dt.current)return;const Ot={placement:s,strategy:i,middleware:c};yt.current&&(Ot.platform=yt.current),computePosition(ct.current,dt.current,Ot).then(At=>{const Ft={...At,isPositioned:Tt.current!==!1};xt.current&&!deepEqual(ft.current,Ft)&&(ft.current=Ft,reactDomExports.flushSync(()=>{g(Ft)}))})},[c,s,i,yt,Tt]);index(()=>{tt===!1&&ft.current.isPositioned&&(ft.current.isPositioned=!1,g(Ot=>({...Ot,isPositioned:!1})))},[tt]);const xt=reactExports.useRef(!1);index(()=>(xt.current=!0,()=>{xt.current=!1}),[]),index(()=>{if(lt&&(ct.current=lt),ut&&(dt.current=ut),lt&&ut){if(mt.current)return mt.current(lt,ut,St);St()}},[lt,ut,St,mt,ht]);const wt=reactExports.useMemo(()=>({reference:ct,floating:dt,setReference:it,setFloating:at}),[it,at]),gt=reactExports.useMemo(()=>({reference:lt,floating:ut}),[lt,ut]),vt=reactExports.useMemo(()=>{const Ot={position:i,left:0,top:0};if(!gt.floating)return Ot;const At=roundByDPR(gt.floating,et.x),Ft=roundByDPR(gt.floating,et.y);return $?{...Ot,transform:"translate("+At+"px, "+Ft+"px)",...getDPR(gt.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:At,top:Ft}},[i,$,gt.floating,et.x,et.y]);return reactExports.useMemo(()=>({...et,update:St,refs:wt,elements:gt,floatingStyles:vt}),[et,St,wt,gt,vt])}const arrow$1=o=>{function s(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:o,fn(i){const{element:a,padding:d}=typeof o=="function"?o(i):o;return a&&s(a)?a.current!=null?arrow$2({element:a.current,padding:d}).fn(i):{}:a?arrow$2({element:a,padding:d}).fn(i):{}}}},offset=(o,s)=>({...offset$1(o),options:[o,s]}),shift=(o,s)=>({...shift$1(o),options:[o,s]}),limitShift=(o,s)=>({...limitShift$1(o),options:[o,s]}),flip=(o,s)=>({...flip$1(o),options:[o,s]}),size=(o,s)=>({...size$1(o),options:[o,s]}),hide=(o,s)=>({...hide$1(o),options:[o,s]}),arrow=(o,s)=>({...arrow$1(o),options:[o,s]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((o,s)=>{const{children:i,width:a=10,height:d=5,..._}=o;return jsxRuntimeExports.jsx(Primitive.svg,{..._,ref:s,width:a,height:d,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:o.asChild?i:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$3=Arrow$1;function useSize(o){const[s,i]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(o){i({width:o.offsetWidth,height:o.offsetHeight});const a=new ResizeObserver(d=>{if(!Array.isArray(d)||!d.length)return;const _=d[0];let b,$;if("borderBoxSize"in _){const nt=_.borderBoxSize,tt=Array.isArray(nt)?nt[0]:nt;b=tt.inlineSize,$=tt.blockSize}else b=o.offsetWidth,$=o.offsetHeight;i({width:b,height:$})});return a.observe(o,{box:"border-box"}),()=>a.unobserve(o)}else i(void 0)},[o]),s}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=o=>{const{__scopePopper:s,children:i}=o,[a,d]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:s,anchor:a,onAnchorChange:d,children:i})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((o,s)=>{const{__scopePopper:i,virtualRef:a,...d}=o,_=usePopperContext(ANCHOR_NAME,i),b=reactExports.useRef(null),$=useComposedRefs(s,b);return reactExports.useEffect(()=>{_.onAnchorChange((a==null?void 0:a.current)||b.current)}),a?null:jsxRuntimeExports.jsx(Primitive.div,{...d,ref:$})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$2="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$2),PopperContent=reactExports.forwardRef((o,s)=>{var zt,nn,wn,Qt,Zt,en;const{__scopePopper:i,side:a="bottom",sideOffset:d=0,align:_="center",alignOffset:b=0,arrowPadding:$=0,avoidCollisions:nt=!0,collisionBoundary:tt=[],collisionPadding:et=0,sticky:g="partial",hideWhenDetached:c=!1,updatePositionStrategy:j="optimized",onPlaced:_e,...rt}=o,st=usePopperContext(CONTENT_NAME$2,i),[ot,it]=reactExports.useState(null),at=useComposedRefs(s,dn=>it(dn)),[lt,ut]=reactExports.useState(null),ct=useSize(lt),dt=(ct==null?void 0:ct.width)??0,ft=(ct==null?void 0:ct.height)??0,ht=a+(_!=="center"?"-"+_:""),mt=typeof et=="number"?et:{top:0,right:0,bottom:0,left:0,...et},yt=Array.isArray(tt)?tt:[tt],Tt=yt.length>0,St={padding:mt,boundary:yt.filter(isNotNull),altBoundary:Tt},{refs:xt,floatingStyles:wt,placement:gt,isPositioned:vt,middlewareData:Ot}=useFloating({strategy:"fixed",placement:ht,whileElementsMounted:(...dn)=>autoUpdate(...dn,{animationFrame:j==="always"}),elements:{reference:st.anchor},middleware:[offset({mainAxis:d+ft,alignmentAxis:b}),nt&&shift({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?limitShift():void 0,...St}),nt&&flip({...St}),size({...St,apply:({elements:dn,rects:hn,availableWidth:Mn,availableHeight:Nn})=>{const{width:jn,height:Yn}=hn.reference,zn=dn.floating.style;zn.setProperty("--radix-popper-available-width",`${Mn}px`),zn.setProperty("--radix-popper-available-height",`${Nn}px`),zn.setProperty("--radix-popper-anchor-width",`${jn}px`),zn.setProperty("--radix-popper-anchor-height",`${Yn}px`)}}),lt&&arrow({element:lt,padding:$}),transformOrigin({arrowWidth:dt,arrowHeight:ft}),c&&hide({strategy:"referenceHidden",...St})]}),[At,Ft]=getSideAndAlignFromPlacement(gt),Bt=useCallbackRef$1(_e);useLayoutEffect2(()=>{vt&&(Bt==null||Bt())},[vt,Bt]);const Wt=(zt=Ot.arrow)==null?void 0:zt.x,sn=(nn=Ot.arrow)==null?void 0:nn.y,Jt=((wn=Ot.arrow)==null?void 0:wn.centerOffset)!==0,[Kt,rn]=reactExports.useState();return useLayoutEffect2(()=>{ot&&rn(window.getComputedStyle(ot).zIndex)},[ot]),jsxRuntimeExports.jsx("div",{ref:xt.setFloating,"data-radix-popper-content-wrapper":"",style:{...wt,transform:vt?wt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Kt,"--radix-popper-transform-origin":[(Qt=Ot.transformOrigin)==null?void 0:Qt.x,(Zt=Ot.transformOrigin)==null?void 0:Zt.y].join(" "),...((en=Ot.hide)==null?void 0:en.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:o.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:i,placedSide:At,onArrowChange:ut,arrowX:Wt,arrowY:sn,shouldHideArrow:Jt,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":At,"data-align":Ft,...rt,ref:at,style:{...rt.style,animation:vt?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$2;var ARROW_NAME$2="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(s,i){const{__scopePopper:a,...d}=s,_=useContentContext(ARROW_NAME$2,a),b=OPPOSITE_SIDE[_.placedSide];return jsxRuntimeExports.jsx("span",{ref:_.onArrowChange,style:{position:"absolute",left:_.arrowX,top:_.arrowY,[b]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[_.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[_.placedSide],visibility:_.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$3,{...d,ref:i,style:{...d.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$2;function isNotNull(o){return o!==null}var transformOrigin=o=>({name:"transformOrigin",options:o,fn(s){var st,ot,it;const{placement:i,rects:a,middlewareData:d}=s,b=((st=d.arrow)==null?void 0:st.centerOffset)!==0,$=b?0:o.arrowWidth,nt=b?0:o.arrowHeight,[tt,et]=getSideAndAlignFromPlacement(i),g={start:"0%",center:"50%",end:"100%"}[et],c=(((ot=d.arrow)==null?void 0:ot.x)??0)+$/2,j=(((it=d.arrow)==null?void 0:it.y)??0)+nt/2;let _e="",rt="";return tt==="bottom"?(_e=b?g:`${c}px`,rt=`${-nt}px`):tt==="top"?(_e=b?g:`${c}px`,rt=`${a.floating.height+nt}px`):tt==="right"?(_e=`${-nt}px`,rt=b?g:`${j}px`):tt==="left"&&(_e=`${a.floating.width+nt}px`,rt=b?g:`${j}px`),{data:{x:_e,y:rt}}}});function getSideAndAlignFromPlacement(o){const[s,i="center"]=o.split("-");return[s,i]}var Root2$1=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope("Tooltip",[createPopperScope]),usePopperScope$1=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=o=>{const{__scopeTooltip:s,delayDuration:i=DEFAULT_DELAY_DURATION,skipDelayDuration:a=300,disableHoverableContent:d=!1,children:_}=o,b=reactExports.useRef(!0),$=reactExports.useRef(!1),nt=reactExports.useRef(0);return reactExports.useEffect(()=>{const tt=nt.current;return()=>window.clearTimeout(tt)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:s,isOpenDelayedRef:b,delayDuration:i,onOpen:reactExports.useCallback(()=>{window.clearTimeout(nt.current),b.current=!1},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(nt.current),nt.current=window.setTimeout(()=>b.current=!0,a)},[a]),isPointerInTransitRef:$,onPointerInTransitChange:reactExports.useCallback(tt=>{$.current=tt},[]),disableHoverableContent:d,children:_})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),TRIGGER_NAME$1="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((o,s)=>{const{__scopeTooltip:i,...a}=o,d=useTooltipContext(TRIGGER_NAME$1,i),_=useTooltipProviderContext(TRIGGER_NAME$1,i),b=usePopperScope$1(i),$=reactExports.useRef(null),nt=useComposedRefs(s,$,d.onTriggerChange),tt=reactExports.useRef(!1),et=reactExports.useRef(!1),g=reactExports.useCallback(()=>tt.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...b,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":d.open?d.contentId:void 0,"data-state":d.stateAttribute,...a,ref:nt,onPointerMove:composeEventHandlers(o.onPointerMove,c=>{c.pointerType!=="touch"&&!et.current&&!_.isPointerInTransitRef.current&&(d.onTriggerEnter(),et.current=!0)}),onPointerLeave:composeEventHandlers(o.onPointerLeave,()=>{d.onTriggerLeave(),et.current=!1}),onPointerDown:composeEventHandlers(o.onPointerDown,()=>{d.open&&d.onClose(),tt.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:composeEventHandlers(o.onFocus,()=>{tt.current||d.onOpen()}),onBlur:composeEventHandlers(o.onBlur,d.onClose),onClick:composeEventHandlers(o.onClick,d.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME$1;var PORTAL_NAME$1="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME$1,{forceMount:void 0}),CONTENT_NAME$1="TooltipContent",TooltipContent$1=reactExports.forwardRef((o,s)=>{const i=usePortalContext(CONTENT_NAME$1,o.__scopeTooltip),{forceMount:a=i.forceMount,side:d="top",..._}=o,b=useTooltipContext(CONTENT_NAME$1,o.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:a||b.open,children:b.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:d,..._,ref:s}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:d,..._,ref:s})})}),TooltipContentHoverable=reactExports.forwardRef((o,s)=>{const i=useTooltipContext(CONTENT_NAME$1,o.__scopeTooltip),a=useTooltipProviderContext(CONTENT_NAME$1,o.__scopeTooltip),d=reactExports.useRef(null),_=useComposedRefs(s,d),[b,$]=reactExports.useState(null),{trigger:nt,onClose:tt}=i,et=d.current,{onPointerInTransitChange:g}=a,c=reactExports.useCallback(()=>{$(null),g(!1)},[g]),j=reactExports.useCallback((_e,rt)=>{const st=_e.currentTarget,ot={x:_e.clientX,y:_e.clientY},it=getExitSideFromRect(ot,st.getBoundingClientRect()),at=getPaddedExitPoints(ot,it),lt=getPointsFromRect(rt.getBoundingClientRect()),ut=getHull([...at,...lt]);$(ut),g(!0)},[g]);return reactExports.useEffect(()=>()=>c(),[c]),reactExports.useEffect(()=>{if(nt&&et){const _e=st=>j(st,et),rt=st=>j(st,nt);return nt.addEventListener("pointerleave",_e),et.addEventListener("pointerleave",rt),()=>{nt.removeEventListener("pointerleave",_e),et.removeEventListener("pointerleave",rt)}}},[nt,et,j,c]),reactExports.useEffect(()=>{if(b){const _e=rt=>{const st=rt.target,ot={x:rt.clientX,y:rt.clientY},it=(nt==null?void 0:nt.contains(st))||(et==null?void 0:et.contains(st)),at=!isPointInPolygon(ot,b);it?c():at&&(c(),tt())};return document.addEventListener("pointermove",_e),()=>document.removeEventListener("pointermove",_e)}},[nt,et,b,tt,c]),jsxRuntimeExports.jsx(TooltipContentImpl,{...o,ref:_})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),Slottable=createSlottable("TooltipContent"),TooltipContentImpl=reactExports.forwardRef((o,s)=>{const{__scopeTooltip:i,children:a,"aria-label":d,onEscapeKeyDown:_,onPointerDownOutside:b,...$}=o,nt=useTooltipContext(CONTENT_NAME$1,i),tt=usePopperScope$1(i),{onClose:et}=nt;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,et),()=>document.removeEventListener(TOOLTIP_OPEN,et)),[et]),reactExports.useEffect(()=>{if(nt.trigger){const g=c=>{const j=c.target;j!=null&&j.contains(nt.trigger)&&et()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[nt.trigger,et]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:_,onPointerDownOutside:b,onFocusOutside:g=>g.preventDefault(),onDismiss:et,children:jsxRuntimeExports.jsxs(Content,{"data-state":nt.stateAttribute,...tt,...$,ref:s,style:{...$.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:a}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:i,isInside:!0,children:jsxRuntimeExports.jsx(Root$4,{id:nt.contentId,role:"tooltip",children:d||a})})]})})});TooltipContent$1.displayName=CONTENT_NAME$1;var ARROW_NAME$1="TooltipArrow",TooltipArrow=reactExports.forwardRef((o,s)=>{const{__scopeTooltip:i,...a}=o,d=usePopperScope$1(i);return useVisuallyHiddenContentContext(ARROW_NAME$1,i).isInside?null:jsxRuntimeExports.jsx(Arrow,{...d,...a,ref:s})});TooltipArrow.displayName=ARROW_NAME$1;function getExitSideFromRect(o,s){const i=Math.abs(s.top-o.y),a=Math.abs(s.bottom-o.y),d=Math.abs(s.right-o.x),_=Math.abs(s.left-o.x);switch(Math.min(i,a,d,_)){case _:return"left";case d:return"right";case i:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(o,s,i=5){const a=[];switch(s){case"top":a.push({x:o.x-i,y:o.y+i},{x:o.x+i,y:o.y+i});break;case"bottom":a.push({x:o.x-i,y:o.y-i},{x:o.x+i,y:o.y-i});break;case"left":a.push({x:o.x+i,y:o.y-i},{x:o.x+i,y:o.y+i});break;case"right":a.push({x:o.x-i,y:o.y-i},{x:o.x-i,y:o.y+i});break}return a}function getPointsFromRect(o){const{top:s,right:i,bottom:a,left:d}=o;return[{x:d,y:s},{x:i,y:s},{x:i,y:a},{x:d,y:a}]}function isPointInPolygon(o,s){const{x:i,y:a}=o;let d=!1;for(let _=0,b=s.length-1;_<s.length;b=_++){const $=s[_].x,nt=s[_].y,tt=s[b].x,et=s[b].y;nt>a!=et>a&&i<(tt-$)*(a-nt)/(et-nt)+$&&(d=!d)}return d}function getHull(o){const s=o.slice();return s.sort((i,a)=>i.x<a.x?-1:i.x>a.x?1:i.y<a.y?-1:i.y>a.y?1:0),getHullPresorted(s)}function getHullPresorted(o){if(o.length<=1)return o.slice();const s=[];for(let a=0;a<o.length;a++){const d=o[a];for(;s.length>=2;){const _=s[s.length-1],b=s[s.length-2];if((_.x-b.x)*(d.y-b.y)>=(_.y-b.y)*(d.x-b.x))s.pop();else break}s.push(d)}s.pop();const i=[];for(let a=o.length-1;a>=0;a--){const d=o[a];for(;i.length>=2;){const _=i[i.length-1],b=i[i.length-2];if((_.x-b.x)*(d.y-b.y)>=(_.y-b.y)*(d.x-b.x))i.pop();else break}i.push(d)}return i.pop(),s.length===1&&i.length===1&&s[0].x===i[0].x&&s[0].y===i[0].y?s:s.concat(i)}var Provider=TooltipProvider$1,Content2$1=TooltipContent$1;const TooltipProvider=Provider,TooltipContent=reactExports.forwardRef(({className:o,sideOffset:s=4,...i},a)=>jsxRuntimeExports.jsx(Content2$1,{ref:a,sideOffset:s,className:cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",o),...i}));TooltipContent.displayName=Content2$1.displayName;const buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:o,variant:s,size:i,asChild:a=!1,...d},_)=>{const b=a?Slot$1:"button";return jsxRuntimeExports.jsx(b,{className:cn(buttonVariants({variant:s,size:i,className:o})),ref:_,...d})});Button.displayName="Button";const Card=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx("div",{ref:i,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",o),...s}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx("div",{ref:i,className:cn("flex flex-col space-y-1.5 p-6",o),...s}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx("div",{ref:i,className:cn("text-2xl font-semibold leading-none tracking-tight",o),...s}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx("div",{ref:i,className:cn("text-sm text-muted-foreground",o),...s}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx("div",{ref:i,className:cn("p-6 pt-0",o),...s}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx("div",{ref:i,className:cn("flex items-center p-6 pt-0",o),...s}));CardFooter.displayName="CardFooter";function Skeleton({className:o,...s}){return jsxRuntimeExports.jsx("div",{className:cn("animate-pulse rounded-md bg-muted",o),...s})}function Overview(){const{data:o,isLoading:s}=useQuery({queryKey:["/api/dashboard/stats"]});return s?jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[1,2,3].map(i=>jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-8 mb-4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-24 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-12"})]})},i))})}):jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx(Card,{"data-testid":"card-active-patients",children:jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Users,{className:"text-medical-blue-600 h-8 w-8"})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Patients"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900","data-testid":"text-active-patients",children:(o==null?void 0:o.activePatients)||0})]})]})})}),jsxRuntimeExports.jsx(Card,{"data-testid":"card-today-appointments",children:jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Calendar,{className:"text-green-600 h-8 w-8"})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Appointments"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900","data-testid":"text-today-appointments",children:(o==null?void 0:o.todayAppointments)||0})]})]})})}),jsxRuntimeExports.jsx(Card,{"data-testid":"card-ai-analyses",children:jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Brain,{className:"text-purple-600 h-8 w-8"})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"X-ray Analyses"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900","data-testid":"text-ai-analyses",children:(o==null?void 0:o.aiAnalyses)||0})]})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent X-ray Analyses"})}),jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:o!=null&&o.recentSummaries.length?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:o.recentSummaries.map((i,a)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx("i",{className:"fas fa-robot text-medical-blue-600 mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900","data-testid":`text-summary-patient-${a}`,children:i.patientName}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600","data-testid":`text-summary-content-${a}`,children:i.summary}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(i.timestamp).toLocaleString()})]})]},a))}):jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-8",children:"No recent X-ray analyses"})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Appointments"})}),jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:o!=null&&o.upcomingAppointments.length?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:o.upcomingAppointments.map((i,a)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("i",{className:`fas ${i.type==="video"?"fa-video text-purple-600":"fa-clock text-medical-blue-600"}`}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900","data-testid":`text-appointment-patient-${a}`,children:i.patientName}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600","data-testid":`text-appointment-type-${a}`,children:i.type})]})]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-medical-blue-600 font-medium","data-testid":`text-appointment-time-${a}`,children:new Date(i.time).toLocaleString()})]},a))}):jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-8",children:"No upcoming appointments"})})]})]})]})}function clamp(o,[s,i]){return Math.min(i,Math.max(s,o))}var DirectionContext=reactExports.createContext(void 0);function useDirection(o){const s=reactExports.useContext(DirectionContext);return o||s||"ltr"}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const o=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",o[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",o[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),count--}},[])}function createFocusGuard(){const o=document.createElement("span");return o.setAttribute("data-radix-focus-guard",""),o.tabIndex=0,o.style.outline="none",o.style.opacity="0",o.style.position="fixed",o.style.pointerEvents="none",o}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((o,s)=>{const{loop:i=!1,trapped:a=!1,onMountAutoFocus:d,onUnmountAutoFocus:_,...b}=o,[$,nt]=reactExports.useState(null),tt=useCallbackRef$1(d),et=useCallbackRef$1(_),g=reactExports.useRef(null),c=useComposedRefs(s,rt=>nt(rt)),j=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(a){let rt=function(at){if(j.paused||!$)return;const lt=at.target;$.contains(lt)?g.current=lt:focus(g.current,{select:!0})},st=function(at){if(j.paused||!$)return;const lt=at.relatedTarget;lt!==null&&($.contains(lt)||focus(g.current,{select:!0}))},ot=function(at){if(document.activeElement===document.body)for(const ut of at)ut.removedNodes.length>0&&focus($)};document.addEventListener("focusin",rt),document.addEventListener("focusout",st);const it=new MutationObserver(ot);return $&&it.observe($,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",rt),document.removeEventListener("focusout",st),it.disconnect()}}},[a,$,j.paused]),reactExports.useEffect(()=>{if($){focusScopesStack.add(j);const rt=document.activeElement;if(!$.contains(rt)){const ot=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS);$.addEventListener(AUTOFOCUS_ON_MOUNT,tt),$.dispatchEvent(ot),ot.defaultPrevented||(focusFirst(removeLinks(getTabbableCandidates($)),{select:!0}),document.activeElement===rt&&focus($))}return()=>{$.removeEventListener(AUTOFOCUS_ON_MOUNT,tt),setTimeout(()=>{const ot=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS);$.addEventListener(AUTOFOCUS_ON_UNMOUNT,et),$.dispatchEvent(ot),ot.defaultPrevented||focus(rt??document.body,{select:!0}),$.removeEventListener(AUTOFOCUS_ON_UNMOUNT,et),focusScopesStack.remove(j)},0)}}},[$,tt,et,j]);const _e=reactExports.useCallback(rt=>{if(!i&&!a||j.paused)return;const st=rt.key==="Tab"&&!rt.altKey&&!rt.ctrlKey&&!rt.metaKey,ot=document.activeElement;if(st&&ot){const it=rt.currentTarget,[at,lt]=getTabbableEdges(it);at&&lt?!rt.shiftKey&&ot===lt?(rt.preventDefault(),i&&focus(at,{select:!0})):rt.shiftKey&&ot===at&&(rt.preventDefault(),i&&focus(lt,{select:!0})):ot===it&&rt.preventDefault()}},[i,a,j.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...b,ref:c,onKeyDown:_e})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst(o,{select:s=!1}={}){const i=document.activeElement;for(const a of o)if(focus(a,{select:s}),document.activeElement!==i)return}function getTabbableEdges(o){const s=getTabbableCandidates(o),i=findVisible(s,o),a=findVisible(s.reverse(),o);return[i,a]}function getTabbableCandidates(o){const s=[],i=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const d=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||d?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)s.push(i.currentNode);return s}function findVisible(o,s){for(const i of o)if(!isHidden(i,{upTo:s}))return i}function isHidden(o,{upTo:s}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(s!==void 0&&o===s)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function isSelectableInput(o){return o instanceof HTMLInputElement&&"select"in o}function focus(o,{select:s=!1}={}){if(o&&o.focus){const i=document.activeElement;o.focus({preventScroll:!0}),o!==i&&isSelectableInput(o)&&s&&o.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let o=[];return{add(s){const i=o[0];s!==i&&(i==null||i.pause()),o=arrayRemove(o,s),o.unshift(s)},remove(s){var i;o=arrayRemove(o,s),(i=o[0])==null||i.resume()}}}function arrayRemove(o,s){const i=[...o],a=i.indexOf(s);return a!==-1&&i.splice(a,1),i}function removeLinks(o){return o.filter(s=>s.tagName!=="A")}function usePrevious(o){const s=reactExports.useRef({value:o,previous:o});return reactExports.useMemo(()=>(s.current.value!==o&&(s.current.previous=s.current.value,s.current.value=o),s.current.previous),[o])}var getDefaultParent=function(o){if(typeof document>"u")return null;var s=Array.isArray(o)?o[0]:o;return s.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(o){return o&&(o.host||unwrapHost(o.parentNode))},correctTargets=function(o,s){return s.map(function(i){if(o.contains(i))return i;var a=unwrapHost(i);return a&&o.contains(a)?a:(console.error("aria-hidden",i,"in not contained inside",o,". Doing nothing"),null)}).filter(function(i){return!!i})},applyAttributeToOthers=function(o,s,i,a){var d=correctTargets(s,Array.isArray(o)?o:[o]);markerMap[i]||(markerMap[i]=new WeakMap);var _=markerMap[i],b=[],$=new Set,nt=new Set(d),tt=function(g){!g||$.has(g)||($.add(g),tt(g.parentNode))};d.forEach(tt);var et=function(g){!g||nt.has(g)||Array.prototype.forEach.call(g.children,function(c){if($.has(c))et(c);else try{var j=c.getAttribute(a),_e=j!==null&&j!=="false",rt=(counterMap.get(c)||0)+1,st=(_.get(c)||0)+1;counterMap.set(c,rt),_.set(c,st),b.push(c),rt===1&&_e&&uncontrolledNodes.set(c,!0),st===1&&c.setAttribute(i,"true"),_e||c.setAttribute(a,"true")}catch(ot){console.error("aria-hidden: cannot operate on ",c,ot)}})};return et(s),$.clear(),lockCount++,function(){b.forEach(function(g){var c=counterMap.get(g)-1,j=_.get(g)-1;counterMap.set(g,c),_.set(g,j),c||(uncontrolledNodes.has(g)||g.removeAttribute(a),uncontrolledNodes.delete(g)),j||g.removeAttribute(i)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(o,s,i){i===void 0&&(i="data-aria-hidden");var a=Array.from(Array.isArray(o)?o:[o]),d=getDefaultParent(o);return d?(a.push.apply(a,Array.from(d.querySelectorAll("[aria-live]"))),applyAttributeToOthers(a,d,i,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(s){for(var i,a=1,d=arguments.length;a<d;a++){i=arguments[a];for(var _ in i)Object.prototype.hasOwnProperty.call(i,_)&&(s[_]=i[_])}return s},__assign.apply(this,arguments)};function __rest$2(o,s){var i={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&s.indexOf(a)<0&&(i[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)s.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(i[a[d]]=o[a[d]]);return i}function __spreadArray(o,s,i){if(i||arguments.length===2)for(var a=0,d=s.length,_;a<d;a++)(_||!(a in s))&&(_||(_=Array.prototype.slice.call(s,0,a)),_[a]=s[a]);return o.concat(_||Array.prototype.slice.call(s))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(o,s){return typeof o=="function"?o(s):o&&(o.current=s),o}function useCallbackRef(o,s){var i=reactExports.useState(function(){return{value:o,callback:s,facade:{get current(){return i.value},set current(a){var d=i.value;d!==a&&(i.value=a,i.callback(a,d))}}}})[0];return i.callback=s,i.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(o,s){var i=useCallbackRef(null,function(a){return o.forEach(function(d){return assignRef(d,a)})});return useIsomorphicLayoutEffect(function(){var a=currentValues.get(i);if(a){var d=new Set(a),_=new Set(o),b=i.current;d.forEach(function($){_.has($)||assignRef($,null)}),_.forEach(function($){d.has($)||assignRef($,b)})}currentValues.set(i,o)},[o]),i}function ItoI(o){return o}function innerCreateMedium(o,s){s===void 0&&(s=ItoI);var i=[],a=!1,d={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:o},useMedium:function(_){var b=s(_,a);return i.push(b),function(){i=i.filter(function($){return $!==b})}},assignSyncMedium:function(_){for(a=!0;i.length;){var b=i;i=[],b.forEach(_)}i={push:function($){return _($)},filter:function(){return i}}},assignMedium:function(_){a=!0;var b=[];if(i.length){var $=i;i=[],$.forEach(_),b=i}var nt=function(){var et=b;b=[],et.forEach(_)},tt=function(){return Promise.resolve().then(nt)};tt(),i={push:function(et){b.push(et),tt()},filter:function(et){return b=b.filter(et),i}}}};return d}function createSidecarMedium(o){o===void 0&&(o={});var s=innerCreateMedium(null);return s.options=__assign({async:!0,ssr:!1},o),s}var SideCar$1=function(o){var s=o.sideCar,i=__rest$2(o,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=s.read();if(!a)throw new Error("Sidecar medium not found");return reactExports.createElement(a,__assign({},i))};SideCar$1.isSideCarExport=!0;function exportSidecar(o,s){return o.useMedium(s),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(o,s){var i=reactExports.useRef(null),a=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),d=a[0],_=a[1],b=o.forwardProps,$=o.children,nt=o.className,tt=o.removeScrollBar,et=o.enabled,g=o.shards,c=o.sideCar,j=o.noIsolation,_e=o.inert,rt=o.allowPinchZoom,st=o.as,ot=st===void 0?"div":st,it=o.gapMode,at=__rest$2(o,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),lt=c,ut=useMergeRefs([i,s]),ct=__assign(__assign({},at),d);return reactExports.createElement(reactExports.Fragment,null,et&&reactExports.createElement(lt,{sideCar:effectCar,removeScrollBar:tt,shards:g,noIsolation:j,inert:_e,setCallbacks:_,allowPinchZoom:!!rt,lockRef:i,gapMode:it}),b?reactExports.cloneElement(reactExports.Children.only($),__assign(__assign({},ct),{ref:ut})):reactExports.createElement(ot,__assign({},ct,{className:nt,ref:ut}),$))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var o=document.createElement("style");o.type="text/css";var s=getNonce();return s&&o.setAttribute("nonce",s),o}function injectStyles(o,s){o.styleSheet?o.styleSheet.cssText=s:o.appendChild(document.createTextNode(s))}function insertStyleTag(o){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(o)}var stylesheetSingleton=function(){var o=0,s=null;return{add:function(i){o==0&&(s=makeStyleTag())&&(injectStyles(s,i),insertStyleTag(s)),o++},remove:function(){o--,!o&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},styleHookSingleton=function(){var o=stylesheetSingleton();return function(s,i){reactExports.useEffect(function(){return o.add(s),function(){o.remove()}},[s&&i])}},styleSingleton=function(){var o=styleHookSingleton(),s=function(i){var a=i.styles,d=i.dynamic;return o(a,d),null};return s},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(o){return parseInt(o||"",10)||0},getOffset=function(o){var s=window.getComputedStyle(document.body),i=s[o==="padding"?"paddingLeft":"marginLeft"],a=s[o==="padding"?"paddingTop":"marginTop"],d=s[o==="padding"?"paddingRight":"marginRight"];return[parse$1(i),parse$1(a),parse$1(d)]},getGapWidth=function(o){if(o===void 0&&(o="margin"),typeof window>"u")return zeroGap;var s=getOffset(o),i=document.documentElement.clientWidth,a=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,a-i+s[2]-s[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(o,s,i,a){var d=o.left,_=o.top,b=o.right,$=o.gap;return i===void 0&&(i="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat($,"px ").concat(a,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(a,";"),i==="margin"&&`
    padding-left: `.concat(d,`px;
    padding-top: `).concat(_,`px;
    padding-right: `).concat(b,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat($,"px ").concat(a,`;
    `),i==="padding"&&"padding-right: ".concat($,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat($,"px ").concat(a,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat($,"px ").concat(a,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat($,`px;
  }
`)},getCurrentUseCounter=function(){var o=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(o)?o:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var o=getCurrentUseCounter()-1;o<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,o.toString())}},[])},RemoveScrollBar=function(o){var s=o.noRelative,i=o.noImportant,a=o.gapMode,d=a===void 0?"margin":a;useLockAttribute();var _=reactExports.useMemo(function(){return getGapWidth(d)},[d]);return reactExports.createElement(Style,{styles:getStyles(_,!s,d,i?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(o){return o.tagName==="TEXTAREA"},elementCanBeScrolled=function(o,s){if(!(o instanceof Element))return!1;var i=window.getComputedStyle(o);return i[s]!=="hidden"&&!(i.overflowY===i.overflowX&&!alwaysContainsScroll(o)&&i[s]==="visible")},elementCouldBeVScrolled=function(o){return elementCanBeScrolled(o,"overflowY")},elementCouldBeHScrolled=function(o){return elementCanBeScrolled(o,"overflowX")},locationCouldBeScrolled=function(o,s){var i=s.ownerDocument,a=s;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var d=elementCouldBeScrolled(o,a);if(d){var _=getScrollVariables(o,a),b=_[1],$=_[2];if(b>$)return!0}a=a.parentNode}while(a&&a!==i.body);return!1},getVScrollVariables=function(o){var s=o.scrollTop,i=o.scrollHeight,a=o.clientHeight;return[s,i,a]},getHScrollVariables=function(o){var s=o.scrollLeft,i=o.scrollWidth,a=o.clientWidth;return[s,i,a]},elementCouldBeScrolled=function(o,s){return o==="v"?elementCouldBeVScrolled(s):elementCouldBeHScrolled(s)},getScrollVariables=function(o,s){return o==="v"?getVScrollVariables(s):getHScrollVariables(s)},getDirectionFactor=function(o,s){return o==="h"&&s==="rtl"?-1:1},handleScroll=function(o,s,i,a,d){var _=getDirectionFactor(o,window.getComputedStyle(s).direction),b=_*a,$=i.target,nt=s.contains($),tt=!1,et=b>0,g=0,c=0;do{var j=getScrollVariables(o,$),_e=j[0],rt=j[1],st=j[2],ot=rt-st-_*_e;(_e||ot)&&elementCouldBeScrolled(o,$)&&(g+=ot,c+=_e),$ instanceof ShadowRoot?$=$.host:$=$.parentNode}while(!nt&&$!==document.body||nt&&(s.contains($)||s===$));return(et&&(Math.abs(g)<1||!d)||!et&&(Math.abs(c)<1||!d))&&(tt=!0),tt},getTouchXY=function(o){return"changedTouches"in o?[o.changedTouches[0].clientX,o.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(o){return[o.deltaX,o.deltaY]},extractRef=function(o){return o&&"current"in o?o.current:o},deltaCompare=function(o,s){return o[0]===s[0]&&o[1]===s[1]},generateStyle=function(o){return`
  .block-interactivity-`.concat(o,` {pointer-events: none;}
  .allow-interactivity-`).concat(o,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(o){var s=reactExports.useRef([]),i=reactExports.useRef([0,0]),a=reactExports.useRef(),d=reactExports.useState(idCounter++)[0],_=reactExports.useState(styleSingleton)[0],b=reactExports.useRef(o);reactExports.useEffect(function(){b.current=o},[o]),reactExports.useEffect(function(){if(o.inert){document.body.classList.add("block-interactivity-".concat(d));var rt=__spreadArray([o.lockRef.current],(o.shards||[]).map(extractRef),!0).filter(Boolean);return rt.forEach(function(st){return st.classList.add("allow-interactivity-".concat(d))}),function(){document.body.classList.remove("block-interactivity-".concat(d)),rt.forEach(function(st){return st.classList.remove("allow-interactivity-".concat(d))})}}},[o.inert,o.lockRef.current,o.shards]);var $=reactExports.useCallback(function(rt,st){if("touches"in rt&&rt.touches.length===2||rt.type==="wheel"&&rt.ctrlKey)return!b.current.allowPinchZoom;var ot=getTouchXY(rt),it=i.current,at="deltaX"in rt?rt.deltaX:it[0]-ot[0],lt="deltaY"in rt?rt.deltaY:it[1]-ot[1],ut,ct=rt.target,dt=Math.abs(at)>Math.abs(lt)?"h":"v";if("touches"in rt&&dt==="h"&&ct.type==="range")return!1;var ft=locationCouldBeScrolled(dt,ct);if(!ft)return!0;if(ft?ut=dt:(ut=dt==="v"?"h":"v",ft=locationCouldBeScrolled(dt,ct)),!ft)return!1;if(!a.current&&"changedTouches"in rt&&(at||lt)&&(a.current=ut),!ut)return!0;var ht=a.current||ut;return handleScroll(ht,st,rt,ht==="h"?at:lt,!0)},[]),nt=reactExports.useCallback(function(rt){var st=rt;if(!(!lockStack.length||lockStack[lockStack.length-1]!==_)){var ot="deltaY"in st?getDeltaXY(st):getTouchXY(st),it=s.current.filter(function(ut){return ut.name===st.type&&(ut.target===st.target||st.target===ut.shadowParent)&&deltaCompare(ut.delta,ot)})[0];if(it&&it.should){st.cancelable&&st.preventDefault();return}if(!it){var at=(b.current.shards||[]).map(extractRef).filter(Boolean).filter(function(ut){return ut.contains(st.target)}),lt=at.length>0?$(st,at[0]):!b.current.noIsolation;lt&&st.cancelable&&st.preventDefault()}}},[]),tt=reactExports.useCallback(function(rt,st,ot,it){var at={name:rt,delta:st,target:ot,should:it,shadowParent:getOutermostShadowParent(ot)};s.current.push(at),setTimeout(function(){s.current=s.current.filter(function(lt){return lt!==at})},1)},[]),et=reactExports.useCallback(function(rt){i.current=getTouchXY(rt),a.current=void 0},[]),g=reactExports.useCallback(function(rt){tt(rt.type,getDeltaXY(rt),rt.target,$(rt,o.lockRef.current))},[]),c=reactExports.useCallback(function(rt){tt(rt.type,getTouchXY(rt),rt.target,$(rt,o.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(_),o.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:c}),document.addEventListener("wheel",nt,nonPassive),document.addEventListener("touchmove",nt,nonPassive),document.addEventListener("touchstart",et,nonPassive),function(){lockStack=lockStack.filter(function(rt){return rt!==_}),document.removeEventListener("wheel",nt,nonPassive),document.removeEventListener("touchmove",nt,nonPassive),document.removeEventListener("touchstart",et,nonPassive)}},[]);var j=o.removeScrollBar,_e=o.inert;return reactExports.createElement(reactExports.Fragment,null,_e?reactExports.createElement(_,{styles:generateStyle(d)}):null,j?reactExports.createElement(RemoveScrollBar,{gapMode:o.gapMode}):null)}function getOutermostShadowParent(o){for(var s=null;o!==null;)o instanceof ShadowRoot&&(s=o.host,o=o.host),o=o.parentNode;return s}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(o,s){return reactExports.createElement(RemoveScroll,__assign({},o,{ref:s,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=o=>{const{__scopeSelect:s,children:i,open:a,defaultOpen:d,onOpenChange:_,value:b,defaultValue:$,onValueChange:nt,dir:tt,name:et,autoComplete:g,disabled:c,required:j,form:_e}=o,rt=usePopperScope(s),[st,ot]=reactExports.useState(null),[it,at]=reactExports.useState(null),[lt,ut]=reactExports.useState(!1),ct=useDirection(tt),[dt=!1,ft]=useControllableState({prop:a,defaultProp:d,onChange:_}),[ht,mt]=useControllableState({prop:b,defaultProp:$,onChange:nt}),yt=reactExports.useRef(null),Tt=st?_e||!!st.closest("form"):!0,[St,xt]=reactExports.useState(new Set),wt=Array.from(St).map(gt=>gt.props.value).join(";");return jsxRuntimeExports.jsx(Root2$1,{...rt,children:jsxRuntimeExports.jsxs(SelectProvider,{required:j,scope:s,trigger:st,onTriggerChange:ot,valueNode:it,onValueNodeChange:at,valueNodeHasChildren:lt,onValueNodeHasChildrenChange:ut,contentId:useId(),value:ht,onValueChange:mt,open:dt,onOpenChange:ft,dir:ct,triggerPointerDownPosRef:yt,disabled:c,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:s,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:o.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(gt=>{xt(vt=>new Set(vt).add(gt))},[]),onNativeOptionRemove:reactExports.useCallback(gt=>{xt(vt=>{const Ot=new Set(vt);return Ot.delete(gt),Ot})},[]),children:i})}),Tt?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:j,tabIndex:-1,name:et,autoComplete:g,value:ht,onChange:gt=>mt(gt.target.value),disabled:c,form:_e,children:[ht===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(St)]},wt):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,disabled:a=!1,...d}=o,_=usePopperScope(i),b=useSelectContext(TRIGGER_NAME,i),$=b.disabled||a,nt=useComposedRefs(s,b.onTriggerChange),tt=useCollection(i),et=reactExports.useRef("touch"),[g,c,j]=useTypeaheadSearch(rt=>{const st=tt().filter(at=>!at.disabled),ot=st.find(at=>at.value===b.value),it=findNextItem(st,rt,ot);it!==void 0&&b.onValueChange(it.value)}),_e=rt=>{$||(b.onOpenChange(!0),j()),rt&&(b.triggerPointerDownPosRef.current={x:Math.round(rt.pageX),y:Math.round(rt.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,..._,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":b.contentId,"aria-expanded":b.open,"aria-required":b.required,"aria-autocomplete":"none",dir:b.dir,"data-state":b.open?"open":"closed",disabled:$,"data-disabled":$?"":void 0,"data-placeholder":shouldShowPlaceholder(b.value)?"":void 0,...d,ref:nt,onClick:composeEventHandlers(d.onClick,rt=>{rt.currentTarget.focus(),et.current!=="mouse"&&_e(rt)}),onPointerDown:composeEventHandlers(d.onPointerDown,rt=>{et.current=rt.pointerType;const st=rt.target;st.hasPointerCapture(rt.pointerId)&&st.releasePointerCapture(rt.pointerId),rt.button===0&&rt.ctrlKey===!1&&rt.pointerType==="mouse"&&(_e(rt),rt.preventDefault())}),onKeyDown:composeEventHandlers(d.onKeyDown,rt=>{const st=g.current!=="";!(rt.ctrlKey||rt.altKey||rt.metaKey)&&rt.key.length===1&&c(rt.key),!(st&&rt.key===" ")&&OPEN_KEYS.includes(rt.key)&&(_e(),rt.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,className:a,style:d,children:_,placeholder:b="",...$}=o,nt=useSelectContext(VALUE_NAME,i),{onValueNodeHasChildrenChange:tt}=nt,et=_!==void 0,g=useComposedRefs(s,nt.onValueNodeChange);return useLayoutEffect2(()=>{tt(et)},[tt,et]),jsxRuntimeExports.jsx(Primitive.span,{...$,ref:g,style:{pointerEvents:"none"},children:shouldShowPlaceholder(nt.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:b}):_})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,children:a,...d}=o;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...d,ref:s,children:a||"▼"})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=o=>jsxRuntimeExports.jsx(Portal$1,{asChild:!0,...o});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME="SelectContent",SelectContent$1=reactExports.forwardRef((o,s)=>{const i=useSelectContext(CONTENT_NAME,o.__scopeSelect),[a,d]=reactExports.useState();if(useLayoutEffect2(()=>{d(new DocumentFragment)},[]),!i.open){const _=a;return _?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:o.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:o.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:o.children})})}),_):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...o,ref:s})});SelectContent$1.displayName=CONTENT_NAME;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME),CONTENT_IMPL_NAME="SelectContentImpl",Slot=createSlot("SelectContent.RemoveScroll"),SelectContentImpl=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,position:a="item-aligned",onCloseAutoFocus:d,onEscapeKeyDown:_,onPointerDownOutside:b,side:$,sideOffset:nt,align:tt,alignOffset:et,arrowPadding:g,collisionBoundary:c,collisionPadding:j,sticky:_e,hideWhenDetached:rt,avoidCollisions:st,...ot}=o,it=useSelectContext(CONTENT_NAME,i),[at,lt]=reactExports.useState(null),[ut,ct]=reactExports.useState(null),dt=useComposedRefs(s,zt=>lt(zt)),[ft,ht]=reactExports.useState(null),[mt,yt]=reactExports.useState(null),Tt=useCollection(i),[St,xt]=reactExports.useState(!1),wt=reactExports.useRef(!1);reactExports.useEffect(()=>{if(at)return hideOthers(at)},[at]),useFocusGuards();const gt=reactExports.useCallback(zt=>{const[nn,...wn]=Tt().map(en=>en.ref.current),[Qt]=wn.slice(-1),Zt=document.activeElement;for(const en of zt)if(en===Zt||(en==null||en.scrollIntoView({block:"nearest"}),en===nn&&ut&&(ut.scrollTop=0),en===Qt&&ut&&(ut.scrollTop=ut.scrollHeight),en==null||en.focus(),document.activeElement!==Zt))return},[Tt,ut]),vt=reactExports.useCallback(()=>gt([ft,at]),[gt,ft,at]);reactExports.useEffect(()=>{St&&vt()},[St,vt]);const{onOpenChange:Ot,triggerPointerDownPosRef:At}=it;reactExports.useEffect(()=>{if(at){let zt={x:0,y:0};const nn=Qt=>{var Zt,en;zt={x:Math.abs(Math.round(Qt.pageX)-(((Zt=At.current)==null?void 0:Zt.x)??0)),y:Math.abs(Math.round(Qt.pageY)-(((en=At.current)==null?void 0:en.y)??0))}},wn=Qt=>{zt.x<=10&&zt.y<=10?Qt.preventDefault():at.contains(Qt.target)||Ot(!1),document.removeEventListener("pointermove",nn),At.current=null};return At.current!==null&&(document.addEventListener("pointermove",nn),document.addEventListener("pointerup",wn,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",nn),document.removeEventListener("pointerup",wn,{capture:!0})}}},[at,Ot,At]),reactExports.useEffect(()=>{const zt=()=>Ot(!1);return window.addEventListener("blur",zt),window.addEventListener("resize",zt),()=>{window.removeEventListener("blur",zt),window.removeEventListener("resize",zt)}},[Ot]);const[Ft,Bt]=useTypeaheadSearch(zt=>{const nn=Tt().filter(Zt=>!Zt.disabled),wn=nn.find(Zt=>Zt.ref.current===document.activeElement),Qt=findNextItem(nn,zt,wn);Qt&&setTimeout(()=>Qt.ref.current.focus())}),Wt=reactExports.useCallback((zt,nn,wn)=>{const Qt=!wt.current&&!wn;(it.value!==void 0&&it.value===nn||Qt)&&(ht(zt),Qt&&(wt.current=!0))},[it.value]),sn=reactExports.useCallback(()=>at==null?void 0:at.focus(),[at]),Jt=reactExports.useCallback((zt,nn,wn)=>{const Qt=!wt.current&&!wn;(it.value!==void 0&&it.value===nn||Qt)&&yt(zt)},[it.value]),Kt=a==="popper"?SelectPopperPosition:SelectItemAlignedPosition,rn=Kt===SelectPopperPosition?{side:$,sideOffset:nt,align:tt,alignOffset:et,arrowPadding:g,collisionBoundary:c,collisionPadding:j,sticky:_e,hideWhenDetached:rt,avoidCollisions:st}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:i,content:at,viewport:ut,onViewportChange:ct,itemRefCallback:Wt,selectedItem:ft,onItemLeave:sn,itemTextRefCallback:Jt,focusSelectedItem:vt,selectedItemText:mt,position:a,isPositioned:St,searchRef:Ft,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:it.open,onMountAutoFocus:zt=>{zt.preventDefault()},onUnmountAutoFocus:composeEventHandlers(d,zt=>{var nn;(nn=it.trigger)==null||nn.focus({preventScroll:!0}),zt.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:_,onPointerDownOutside:b,onFocusOutside:zt=>zt.preventDefault(),onDismiss:()=>it.onOpenChange(!1),children:jsxRuntimeExports.jsx(Kt,{role:"listbox",id:it.contentId,"data-state":it.open?"open":"closed",dir:it.dir,onContextMenu:zt=>zt.preventDefault(),...ot,...rn,onPlaced:()=>xt(!0),ref:dt,style:{display:"flex",flexDirection:"column",outline:"none",...ot.style},onKeyDown:composeEventHandlers(ot.onKeyDown,zt=>{const nn=zt.ctrlKey||zt.altKey||zt.metaKey;if(zt.key==="Tab"&&zt.preventDefault(),!nn&&zt.key.length===1&&Bt(zt.key),["ArrowUp","ArrowDown","Home","End"].includes(zt.key)){let Qt=Tt().filter(Zt=>!Zt.disabled).map(Zt=>Zt.ref.current);if(["ArrowUp","End"].includes(zt.key)&&(Qt=Qt.slice().reverse()),["ArrowUp","ArrowDown"].includes(zt.key)){const Zt=zt.target,en=Qt.indexOf(Zt);Qt=Qt.slice(en+1)}setTimeout(()=>gt(Qt)),zt.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,onPlaced:a,...d}=o,_=useSelectContext(CONTENT_NAME,i),b=useSelectContentContext(CONTENT_NAME,i),[$,nt]=reactExports.useState(null),[tt,et]=reactExports.useState(null),g=useComposedRefs(s,dt=>et(dt)),c=useCollection(i),j=reactExports.useRef(!1),_e=reactExports.useRef(!0),{viewport:rt,selectedItem:st,selectedItemText:ot,focusSelectedItem:it}=b,at=reactExports.useCallback(()=>{if(_.trigger&&_.valueNode&&$&&tt&&rt&&st&&ot){const dt=_.trigger.getBoundingClientRect(),ft=tt.getBoundingClientRect(),ht=_.valueNode.getBoundingClientRect(),mt=ot.getBoundingClientRect();if(_.dir!=="rtl"){const Zt=mt.left-ft.left,en=ht.left-Zt,dn=dt.left-en,hn=dt.width+dn,Mn=Math.max(hn,ft.width),Nn=window.innerWidth-CONTENT_MARGIN,jn=clamp(en,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Nn-Mn)]);$.style.minWidth=hn+"px",$.style.left=jn+"px"}else{const Zt=ft.right-mt.right,en=window.innerWidth-ht.right-Zt,dn=window.innerWidth-dt.right-en,hn=dt.width+dn,Mn=Math.max(hn,ft.width),Nn=window.innerWidth-CONTENT_MARGIN,jn=clamp(en,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Nn-Mn)]);$.style.minWidth=hn+"px",$.style.right=jn+"px"}const yt=c(),Tt=window.innerHeight-CONTENT_MARGIN*2,St=rt.scrollHeight,xt=window.getComputedStyle(tt),wt=parseInt(xt.borderTopWidth,10),gt=parseInt(xt.paddingTop,10),vt=parseInt(xt.borderBottomWidth,10),Ot=parseInt(xt.paddingBottom,10),At=wt+gt+St+Ot+vt,Ft=Math.min(st.offsetHeight*5,At),Bt=window.getComputedStyle(rt),Wt=parseInt(Bt.paddingTop,10),sn=parseInt(Bt.paddingBottom,10),Jt=dt.top+dt.height/2-CONTENT_MARGIN,Kt=Tt-Jt,rn=st.offsetHeight/2,zt=st.offsetTop+rn,nn=wt+gt+zt,wn=At-nn;if(nn<=Jt){const Zt=yt.length>0&&st===yt[yt.length-1].ref.current;$.style.bottom="0px";const en=tt.clientHeight-rt.offsetTop-rt.offsetHeight,dn=Math.max(Kt,rn+(Zt?sn:0)+en+vt),hn=nn+dn;$.style.height=hn+"px"}else{const Zt=yt.length>0&&st===yt[0].ref.current;$.style.top="0px";const dn=Math.max(Jt,wt+rt.offsetTop+(Zt?Wt:0)+rn)+wn;$.style.height=dn+"px",rt.scrollTop=nn-Jt+rt.offsetTop}$.style.margin=`${CONTENT_MARGIN}px 0`,$.style.minHeight=Ft+"px",$.style.maxHeight=Tt+"px",a==null||a(),requestAnimationFrame(()=>j.current=!0)}},[c,_.trigger,_.valueNode,$,tt,rt,st,ot,_.dir,a]);useLayoutEffect2(()=>at(),[at]);const[lt,ut]=reactExports.useState();useLayoutEffect2(()=>{tt&&ut(window.getComputedStyle(tt).zIndex)},[tt]);const ct=reactExports.useCallback(dt=>{dt&&_e.current===!0&&(at(),it==null||it(),_e.current=!1)},[at,it]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:i,contentWrapper:$,shouldExpandOnScrollRef:j,onScrollButtonChange:ct,children:jsxRuntimeExports.jsx("div",{ref:nt,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:lt},children:jsxRuntimeExports.jsx(Primitive.div,{...d,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...d.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,align:a="start",collisionPadding:d=CONTENT_MARGIN,..._}=o,b=usePopperScope(i);return jsxRuntimeExports.jsx(Content,{...b,..._,ref:s,align:a,collisionPadding:d,style:{boxSizing:"border-box",..._.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME,{}),VIEWPORT_NAME="SelectViewport",SelectViewport=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,nonce:a,...d}=o,_=useSelectContentContext(VIEWPORT_NAME,i),b=useSelectViewportContext(VIEWPORT_NAME,i),$=useComposedRefs(s,_.onViewportChange),nt=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),jsxRuntimeExports.jsx(Collection.Slot,{scope:i,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...d,ref:$,style:{position:"relative",flex:1,overflow:"hidden auto",...d.style},onScroll:composeEventHandlers(d.onScroll,tt=>{const et=tt.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:c}=b;if(c!=null&&c.current&&g){const j=Math.abs(nt.current-et.scrollTop);if(j>0){const _e=window.innerHeight-CONTENT_MARGIN*2,rt=parseFloat(g.style.minHeight),st=parseFloat(g.style.height),ot=Math.max(rt,st);if(ot<_e){const it=ot+j,at=Math.min(_e,it),lt=it-at;g.style.height=at+"px",g.style.bottom==="0px"&&(et.scrollTop=lt>0?lt:0,g.style.justifyContent="flex-end")}}}nt.current=et.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,...a}=o,d=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:i,id:d,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":d,...a,ref:s})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,...a}=o,d=useSelectGroupContext(LABEL_NAME,i);return jsxRuntimeExports.jsx(Primitive.div,{id:d.id,...a,ref:s})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,value:a,disabled:d=!1,textValue:_,...b}=o,$=useSelectContext(ITEM_NAME,i),nt=useSelectContentContext(ITEM_NAME,i),tt=$.value===a,[et,g]=reactExports.useState(_??""),[c,j]=reactExports.useState(!1),_e=useComposedRefs(s,it=>{var at;return(at=nt.itemRefCallback)==null?void 0:at.call(nt,it,a,d)}),rt=useId(),st=reactExports.useRef("touch"),ot=()=>{d||($.onValueChange(a),$.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:i,value:a,disabled:d,textId:rt,isSelected:tt,onItemTextChange:reactExports.useCallback(it=>{g(at=>at||((it==null?void 0:it.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:i,value:a,disabled:d,textValue:et,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":rt,"data-highlighted":c?"":void 0,"aria-selected":tt&&c,"data-state":tt?"checked":"unchecked","aria-disabled":d||void 0,"data-disabled":d?"":void 0,tabIndex:d?void 0:-1,...b,ref:_e,onFocus:composeEventHandlers(b.onFocus,()=>j(!0)),onBlur:composeEventHandlers(b.onBlur,()=>j(!1)),onClick:composeEventHandlers(b.onClick,()=>{st.current!=="mouse"&&ot()}),onPointerUp:composeEventHandlers(b.onPointerUp,()=>{st.current==="mouse"&&ot()}),onPointerDown:composeEventHandlers(b.onPointerDown,it=>{st.current=it.pointerType}),onPointerMove:composeEventHandlers(b.onPointerMove,it=>{var at;st.current=it.pointerType,d?(at=nt.onItemLeave)==null||at.call(nt):st.current==="mouse"&&it.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(b.onPointerLeave,it=>{var at;it.currentTarget===document.activeElement&&((at=nt.onItemLeave)==null||at.call(nt))}),onKeyDown:composeEventHandlers(b.onKeyDown,it=>{var lt;((lt=nt.searchRef)==null?void 0:lt.current)!==""&&it.key===" "||(SELECTION_KEYS.includes(it.key)&&ot(),it.key===" "&&it.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,className:a,style:d,..._}=o,b=useSelectContext(ITEM_TEXT_NAME,i),$=useSelectContentContext(ITEM_TEXT_NAME,i),nt=useSelectItemContext(ITEM_TEXT_NAME,i),tt=useSelectNativeOptionsContext(ITEM_TEXT_NAME,i),[et,g]=reactExports.useState(null),c=useComposedRefs(s,ot=>g(ot),nt.onItemTextChange,ot=>{var it;return(it=$.itemTextRefCallback)==null?void 0:it.call($,ot,nt.value,nt.disabled)}),j=et==null?void 0:et.textContent,_e=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:nt.value,disabled:nt.disabled,children:j},nt.value),[nt.disabled,nt.value,j]),{onNativeOptionAdd:rt,onNativeOptionRemove:st}=tt;return useLayoutEffect2(()=>(rt(_e),()=>st(_e)),[rt,st,_e]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:nt.textId,..._,ref:c}),nt.isSelected&&b.valueNode&&!b.valueNodeHasChildren?reactDomExports.createPortal(_.children,b.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,...a}=o;return useSelectItemContext(ITEM_INDICATOR_NAME,i).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...a,ref:s}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((o,s)=>{const i=useSelectContentContext(SCROLL_UP_BUTTON_NAME,o.__scopeSelect),a=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,o.__scopeSelect),[d,_]=reactExports.useState(!1),b=useComposedRefs(s,a.onScrollButtonChange);return useLayoutEffect2(()=>{if(i.viewport&&i.isPositioned){let $=function(){const tt=nt.scrollTop>0;_(tt)};const nt=i.viewport;return $(),nt.addEventListener("scroll",$),()=>nt.removeEventListener("scroll",$)}},[i.viewport,i.isPositioned]),d?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...o,ref:b,onAutoScroll:()=>{const{viewport:$,selectedItem:nt}=i;$&&nt&&($.scrollTop=$.scrollTop-nt.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((o,s)=>{const i=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,o.__scopeSelect),a=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,o.__scopeSelect),[d,_]=reactExports.useState(!1),b=useComposedRefs(s,a.onScrollButtonChange);return useLayoutEffect2(()=>{if(i.viewport&&i.isPositioned){let $=function(){const tt=nt.scrollHeight-nt.clientHeight,et=Math.ceil(nt.scrollTop)<tt;_(et)};const nt=i.viewport;return $(),nt.addEventListener("scroll",$),()=>nt.removeEventListener("scroll",$)}},[i.viewport,i.isPositioned]),d?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...o,ref:b,onAutoScroll:()=>{const{viewport:$,selectedItem:nt}=i;$&&nt&&($.scrollTop=$.scrollTop+nt.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,onAutoScroll:a,...d}=o,_=useSelectContentContext("SelectScrollButton",i),b=reactExports.useRef(null),$=useCollection(i),nt=reactExports.useCallback(()=>{b.current!==null&&(window.clearInterval(b.current),b.current=null)},[]);return reactExports.useEffect(()=>()=>nt(),[nt]),useLayoutEffect2(()=>{var et;const tt=$().find(g=>g.ref.current===document.activeElement);(et=tt==null?void 0:tt.ref.current)==null||et.scrollIntoView({block:"nearest"})},[$]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...d,ref:s,style:{flexShrink:0,...d.style},onPointerDown:composeEventHandlers(d.onPointerDown,()=>{b.current===null&&(b.current=window.setInterval(a,50))}),onPointerMove:composeEventHandlers(d.onPointerMove,()=>{var tt;(tt=_.onItemLeave)==null||tt.call(_),b.current===null&&(b.current=window.setInterval(a,50))}),onPointerLeave:composeEventHandlers(d.onPointerLeave,()=>{nt()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,...a}=o;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...a,ref:s})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((o,s)=>{const{__scopeSelect:i,...a}=o,d=usePopperScope(i),_=useSelectContext(ARROW_NAME,i),b=useSelectContentContext(ARROW_NAME,i);return _.open&&b.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...d,...a,ref:s}):null});SelectArrow.displayName=ARROW_NAME;function shouldShowPlaceholder(o){return o===""||o===void 0}var BubbleSelect=reactExports.forwardRef((o,s)=>{const{value:i,...a}=o,d=reactExports.useRef(null),_=useComposedRefs(s,d),b=usePrevious(i);return reactExports.useEffect(()=>{const $=d.current,nt=window.HTMLSelectElement.prototype,et=Object.getOwnPropertyDescriptor(nt,"value").set;if(b!==i&&et){const g=new Event("change",{bubbles:!0});et.call($,i),$.dispatchEvent(g)}},[b,i]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...a,ref:_,defaultValue:i})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(o){const s=useCallbackRef$1(o),i=reactExports.useRef(""),a=reactExports.useRef(0),d=reactExports.useCallback(b=>{const $=i.current+b;s($),function nt(tt){i.current=tt,window.clearTimeout(a.current),tt!==""&&(a.current=window.setTimeout(()=>nt(""),1e3))}($)},[s]),_=reactExports.useCallback(()=>{i.current="",window.clearTimeout(a.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(a.current),[]),[i,d,_]}function findNextItem(o,s,i){const d=s.length>1&&Array.from(s).every(tt=>tt===s[0])?s[0]:s,_=i?o.indexOf(i):-1;let b=wrapArray(o,Math.max(_,0));d.length===1&&(b=b.filter(tt=>tt!==i));const nt=b.find(tt=>tt.textValue.toLowerCase().startsWith(d.toLowerCase()));return nt!==i?nt:void 0}function wrapArray(o,s){return o.map((i,a)=>o[(s+a)%o.length])}var Root2=Select$1,Trigger=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2=SelectContent$1,Viewport=SelectViewport,Label=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator$2=SelectSeparator$1;const Select=Root2,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:o,children:s,...i},a)=>jsxRuntimeExports.jsxs(Trigger,{ref:a,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o),...i,children:[s,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:i,className:cn("flex cursor-default items-center justify-center py-1",o),...s,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:i,className:cn("flex cursor-default items-center justify-center py-1",o),...s,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:o,children:s,position:i="popper",...a},d)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{ref:d,className:cn("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:i,...a,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport,{className:cn("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2.displayName;const SelectLabel=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Label,{ref:i,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",o),...s}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:o,children:s,...i},a)=>jsxRuntimeExports.jsxs(Item,{ref:a,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...i,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:s})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Separator$2,{ref:i,className:cn("-mx-1 my-1 h-px bg-muted",o),...s}));SelectSeparator.displayName=Separator$2.displayName;function XrayAnalysis(){const[o,s]=reactExports.useState(null),[i,a]=reactExports.useState(""),[d,_]=reactExports.useState(""),{toast:b}=useToast(),$=useQueryClient(),{data:nt}=useQuery({queryKey:["/api/patients"]}),{data:tt}=useQuery({queryKey:["/api/dental-xrays"]}),et=useMutation({mutationFn:async _e=>{const rt=await fetch("/api/dental-xrays",{method:"POST",body:_e});if(!rt.ok)throw new Error("Failed to upload X-ray");return rt.json()},onSuccess:()=>{$.invalidateQueries({queryKey:["/api/dental-xrays"]}),b({title:"Success",description:"Dental X-ray uploaded and analyzed successfully"}),s(null),a(""),_("")},onError:()=>{b({title:"Error",description:"Failed to upload dental X-ray",variant:"destructive"})}}),g=_e=>{var st;const rt=(st=_e.target.files)==null?void 0:st[0];rt&&s(rt)},c=()=>{if(!o||!i||!d){b({title:"Error",description:"Please select a file, patient, and X-ray type",variant:"destructive"});return}const _e=new FormData;_e.append("file",o),_e.append("patientId",i),_e.append("xrayType",d),et.mutate(_e)},j=_e=>{var rt;return((rt=nt==null?void 0:nt.find(st=>st.id===_e))==null?void 0:rt.name)||"Unknown Patient"};return jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx(Card,{"data-testid":"card-upload-scans",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Dental X-rays"}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Patient"}),jsxRuntimeExports.jsxs(Select,{value:i,onValueChange:a,children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-patient",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Choose patient..."})}),jsxRuntimeExports.jsx(SelectContent,{children:nt==null?void 0:nt.map(_e=>jsxRuntimeExports.jsx(SelectItem,{value:_e.id,children:_e.name},_e.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"X-ray Type"}),jsxRuntimeExports.jsxs(Select,{value:d,onValueChange:_,children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-xray-type",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Choose X-ray type..."})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"bitewing",children:"Bitewing X-Ray"}),jsxRuntimeExports.jsx(SelectItem,{value:"panoramic",children:"Panoramic X-Ray"}),jsxRuntimeExports.jsx(SelectItem,{value:"periapical",children:"Periapical X-Ray"}),jsxRuntimeExports.jsx(SelectItem,{value:"occlusal",children:"Occlusal X-Ray"}),jsxRuntimeExports.jsx(SelectItem,{value:"cephalometric",children:"Cephalometric X-Ray"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-medical-blue-500 transition-colors",children:[jsxRuntimeExports.jsx(CloudUpload,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-2",children:"Drag and drop X-ray files here, or"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{var _e;return(_e=document.getElementById("file-input"))==null?void 0:_e.click()},className:"bg-medical-blue-600 hover:bg-medical-blue-700","data-testid":"button-choose-files",children:"Choose Files"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supports dental X-ray formats: PNG, JPG, DICOM (Max 50MB)"}),jsxRuntimeExports.jsx("input",{id:"file-input",type:"file",accept:".dcm,.png,.jpg,.jpeg",onChange:g,className:"hidden","data-testid":"input-file"}),o&&jsxRuntimeExports.jsxs("p",{className:"mt-2 text-sm text-medical-blue-600",children:["Selected: ",o.name]})]}),jsxRuntimeExports.jsxs(Button,{onClick:c,disabled:!o||!i||!d||et.isPending,className:"w-full mt-4 bg-medical-blue-600 hover:bg-medical-blue-700","data-testid":"button-upload-xray",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),et.isPending?"Processing...":"Upload & Analyze"]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Recent Uploads"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(tt==null?void 0:tt.slice(0,5).map(_e=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx(FileImage,{className:"text-medical-blue-600 h-5 w-5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900","data-testid":`text-scan-filename-${scan.id}`,children:_e.filename}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600","data-testid":`text-scan-uploadtime-${scan.id}`,children:[j(_e.patientId||"")," • ",new Date(_e.uploadedAt).toLocaleString()]})]})]}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_e.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:_e.status==="completed"?"Processed":"Processing"})]},_e.id)))||jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent uploads"})})]})]})}),jsxRuntimeExports.jsx(Card,{"data-testid":"card-analysis-results",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI X-ray Analysis Results"}),tt!=null&&tt.filter(_e=>_e.aiAnalysis).length?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:tt.filter(_e=>_e.aiAnalysis).slice(0,3).map(_e=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-semibold text-gray-900","data-testid":`text-analysis-title-${_e.id}`,children:[_e.xrayType," Analysis"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600","data-testid":`text-analysis-patient-${_e.id}`,children:["Patient: ",j(_e.patientId||"")," | Date: ",new Date(_e.uploadedAt).toLocaleDateString()]})]}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${(_e.confidence||0)>80?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:(scan.confidence||0)>80?"High Confidence":"Moderate"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700",children:jsxRuntimeExports.jsx("strong",{children:"AI Summary:"})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded","data-testid":`text-analysis-summary-${_e.id}`,children:_e.aiAnalysis}),_e.confidence&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[jsxRuntimeExports.jsx("strong",{children:"Confidence:"})," ",_e.confidence,"%"]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:jsxRuntimeExports.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${_e.confidence}%`}})})]})]})]},_e.id))}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(FileImage,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"No X-ray analyses yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Upload dental X-rays to see AI analysis results"})]}),jsxRuntimeExports.jsxs(Button,{className:"w-full mt-4 bg-medical-blue-600 hover:bg-medical-blue-700",onClick:()=>{var _e;return(_e=document.getElementById("file-input"))==null?void 0:_e.click()},"data-testid":"button-analyze-new-scan",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"Analyze New X-ray"]})]})})]})}const Input=reactExports.forwardRef(({className:o,type:s,...i},a)=>jsxRuntimeExports.jsx("input",{type:s,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:a,...i}));Input.displayName="Input";const scriptRel="modulepreload",assetsURL=function(o){return"/"+o},seen={},__vitePreload=function(s,i,a){let d=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),$=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));d=Promise.allSettled(i.map(nt=>{if(nt=assetsURL(nt),nt in seen)return;seen[nt]=!0;const tt=nt.endsWith(".css"),et=tt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${nt}"]${et}`))return;const g=document.createElement("link");if(g.rel=tt?"stylesheet":scriptRel,tt||(g.as="script"),g.crossOrigin="",g.href=nt,$&&g.setAttribute("nonce",$),document.head.appendChild(g),tt)return new Promise((c,j)=>{g.addEventListener("load",c),g.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${nt}`)))})}))}function _(b){const $=new Event("vite:preloadError",{cancelable:!0});if($.payload=b,window.dispatchEvent($),!$.defaultPrevented)throw b}return d.then(b=>{for(const $ of b||[])$.status==="rejected"&&_($.reason);return s().catch(_)})},resolveFetch$3=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},void 0).then(({default:a})=>a(...i)):s=fetch,(...i)=>s(...i)};class FunctionsError extends Error{constructor(s,i="FunctionsError",a){super(s),this.name=i,this.context=a}}class FunctionsFetchError extends FunctionsError{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class FunctionsRelayError extends FunctionsError{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class FunctionsHttpError extends FunctionsError{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var FunctionRegion;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(o,s,i,a){function d(_){return _ instanceof i?_:new i(function(b){b(_)})}return new(i||(i=Promise))(function(_,b){function $(et){try{tt(a.next(et))}catch(g){b(g)}}function nt(et){try{tt(a.throw(et))}catch(g){b(g)}}function tt(et){et.done?_(et.value):d(et.value).then($,nt)}tt((a=a.apply(o,s||[])).next())})};class FunctionsClient{constructor(s,{headers:i={},customFetch:a,region:d=FunctionRegion.Any}={}){this.url=s,this.headers=i,this.region=d,this.fetch=resolveFetch$3(a)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,i={}){var a;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:d,method:_,body:b}=i;let $={},{region:nt}=i;nt||(nt=this.region);const tt=new URL(`${this.url}/${s}`);nt&&nt!=="any"&&($["x-region"]=nt,tt.searchParams.set("forceFunctionRegion",nt));let et;b&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)&&(typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?($["Content-Type"]="application/octet-stream",et=b):typeof b=="string"?($["Content-Type"]="text/plain",et=b):typeof FormData<"u"&&b instanceof FormData?et=b:($["Content-Type"]="application/json",et=JSON.stringify(b)));const g=yield this.fetch(tt.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},$),this.headers),d),body:et}).catch(rt=>{throw new FunctionsFetchError(rt)}),c=g.headers.get("x-relay-error");if(c&&c==="true")throw new FunctionsRelayError(g);if(!g.ok)throw new FunctionsHttpError(g);let j=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_e;return j==="application/json"?_e=yield g.json():j==="application/octet-stream"?_e=yield g.blob():j==="text/event-stream"?_e=g:j==="multipart/form-data"?_e=yield g.formData():_e=yield g.text(),{data:_e,error:null,response:g}}catch(d){return{data:null,error:d,response:d instanceof FunctionsHttpError||d instanceof FunctionsRelayError?d.context:void 0}}})}}var cjs={},PostgrestClient$2={},PostgrestQueryBuilder$2={},PostgrestFilterBuilder$2={},PostgrestTransformBuilder$2={},PostgrestBuilder$2={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(browser);var PostgrestError$2={};Object.defineProperty(PostgrestError$2,"__esModule",{value:!0});let PostgrestError$1=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}};PostgrestError$2.default=PostgrestError$1;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(PostgrestBuilder$2,"__esModule",{value:!0});const node_fetch_1=__importDefault$5(require$$0$1),PostgrestError_1$1=__importDefault$5(PostgrestError$2);let PostgrestBuilder$1=class{constructor(s){var i,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=node_fetch_1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let d=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async _=>{var b,$,nt,tt;let et=null,g=null,c=null,j=_.status,_e=_.statusText;if(_.ok){if(this.method!=="HEAD"){const it=await _.text();it===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((b=this.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?g=it:g=JSON.parse(it))}const st=($=this.headers.get("Prefer"))===null||$===void 0?void 0:$.match(/count=(exact|planned|estimated)/),ot=(nt=_.headers.get("content-range"))===null||nt===void 0?void 0:nt.split("/");st&&ot&&ot.length>1&&(c=parseInt(ot[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(et={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,c=null,j=406,_e="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const st=await _.text();try{et=JSON.parse(st),Array.isArray(et)&&_.status===404&&(g=[],et=null,j=200,_e="OK")}catch{_.status===404&&st===""?(j=204,_e="No Content"):et={message:st}}if(et&&this.isMaybeSingle&&(!((tt=et==null?void 0:et.details)===null||tt===void 0)&&tt.includes("0 rows"))&&(et=null,j=200,_e="OK"),et&&this.shouldThrowOnError)throw new PostgrestError_1$1.default(et)}return{error:et,data:g,count:c,status:j,statusText:_e}});return this.shouldThrowOnError||(d=d.catch(_=>{var b,$,nt;return{error:{message:`${(b=_==null?void 0:_.name)!==null&&b!==void 0?b:"FetchError"}: ${_==null?void 0:_.message}`,details:`${($=_==null?void 0:_.stack)!==null&&$!==void 0?$:""}`,hint:"",code:`${(nt=_==null?void 0:_.code)!==null&&nt!==void 0?nt:""}`},data:null,count:null,status:0,statusText:""}})),d.then(s,i)}returns(){return this}overrideTypes(){return this}};PostgrestBuilder$2.default=PostgrestBuilder$1;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(PostgrestTransformBuilder$2,"__esModule",{value:!0});const PostgrestBuilder_1$1=__importDefault$4(PostgrestBuilder$2);let PostgrestTransformBuilder$1=class extends PostgrestBuilder_1$1.default{select(s){let i=!1;const a=(s??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:d,referencedTable:_=d}={}){const b=_?`${_}.order`:"order",$=this.url.searchParams.get(b);return this.url.searchParams.set(b,`${$?`${$},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(d,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:d=a}={}){const _=typeof d>"u"?"offset":`${d}.offset`,b=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(_,`${s}`),this.url.searchParams.set(b,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:d=!1,wal:_=!1,format:b="text"}={}){var $;const nt=[s?"analyze":null,i?"verbose":null,a?"settings":null,d?"buffers":null,_?"wal":null].filter(Boolean).join("|"),tt=($=this.headers.get("Accept"))!==null&&$!==void 0?$:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${b}; for="${tt}"; options=${nt};`),b==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};PostgrestTransformBuilder$2.default=PostgrestTransformBuilder$1;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(PostgrestFilterBuilder$2,"__esModule",{value:!0});const PostgrestTransformBuilder_1$1=__importDefault$3(PostgrestTransformBuilder$2);let PostgrestFilterBuilder$1=class extends PostgrestTransformBuilder_1$1.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:d}={}){let _="";d==="plain"?_="pl":d==="phrase"?_="ph":d==="websearch"&&(_="w");const b=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${_}fts${b}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const d=a?`${a}.or`:"or";return this.url.searchParams.append(d,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}};PostgrestFilterBuilder$2.default=PostgrestFilterBuilder$1;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(PostgrestQueryBuilder$2,"__esModule",{value:!0});const PostgrestFilterBuilder_1$2=__importDefault$2(PostgrestFilterBuilder$2);let PostgrestQueryBuilder$1=class{constructor(s,{headers:i={},schema:a,fetch:d}){this.url=s,this.headers=new Headers(i),this.schema=a,this.fetch=d}select(s,{head:i=!1,count:a}={}){const d=i?"HEAD":"GET";let _=!1;const b=(s??"*").split("").map($=>/\s/.test($)&&!_?"":($==='"'&&(_=!_),$)).join("");return this.url.searchParams.set("select",b),a&&this.headers.append("Prefer",`count=${a}`),new PostgrestFilterBuilder_1$2.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:a=!0}={}){var d;const _="POST";if(i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const b=s.reduce(($,nt)=>$.concat(Object.keys(nt)),[]);if(b.length>0){const $=[...new Set(b)].map(nt=>`"${nt}"`);this.url.searchParams.set("columns",$.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:d,defaultToNull:_=!0}={}){var b;const $="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),d&&this.headers.append("Prefer",`count=${d}`),_||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const nt=s.reduce((tt,et)=>tt.concat(Object.keys(et)),[]);if(nt.length>0){const tt=[...new Set(nt)].map(et=>`"${et}"`);this.url.searchParams.set("columns",tt.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:$,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}update(s,{count:i}={}){var a;const d="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new PostgrestFilterBuilder_1$2.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var i;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new PostgrestFilterBuilder_1$2.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};PostgrestQueryBuilder$2.default=PostgrestQueryBuilder$1;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(PostgrestClient$2,"__esModule",{value:!0});const PostgrestQueryBuilder_1$1=__importDefault$1(PostgrestQueryBuilder$2),PostgrestFilterBuilder_1$1=__importDefault$1(PostgrestFilterBuilder$2);let PostgrestClient$1=class Ao{constructor(s,{headers:i={},schema:a,fetch:d}={}){this.url=s,this.headers=new Headers(i),this.schemaName=a,this.fetch=d}from(s){const i=new URL(`${this.url}/${s}`);return new PostgrestQueryBuilder_1$1.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new Ao(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,i={},{head:a=!1,get:d=!1,count:_}={}){var b;let $;const nt=new URL(`${this.url}/rpc/${s}`);let tt;a||d?($=a?"HEAD":"GET",Object.entries(i).filter(([g,c])=>c!==void 0).map(([g,c])=>[g,Array.isArray(c)?`{${c.join(",")}}`:`${c}`]).forEach(([g,c])=>{nt.searchParams.append(g,c)})):($="POST",tt=i);const et=new Headers(this.headers);return _&&et.set("Prefer",`count=${_}`),new PostgrestFilterBuilder_1$1.default({method:$,url:nt,headers:et,schema:this.schemaName,body:tt,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};PostgrestClient$2.default=PostgrestClient$1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(cjs,"__esModule",{value:!0});cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const PostgrestClient_1=__importDefault(PostgrestClient$2);cjs.PostgrestClient=PostgrestClient_1.default;const PostgrestQueryBuilder_1=__importDefault(PostgrestQueryBuilder$2);cjs.PostgrestQueryBuilder=PostgrestQueryBuilder_1.default;const PostgrestFilterBuilder_1=__importDefault(PostgrestFilterBuilder$2);cjs.PostgrestFilterBuilder=PostgrestFilterBuilder_1.default;const PostgrestTransformBuilder_1=__importDefault(PostgrestTransformBuilder$2);cjs.PostgrestTransformBuilder=PostgrestTransformBuilder_1.default;const PostgrestBuilder_1=__importDefault(PostgrestBuilder$2);cjs.PostgrestBuilder=PostgrestBuilder_1.default;const PostgrestError_1=__importDefault(PostgrestError$2);cjs.PostgrestError=PostgrestError_1.default;var _default=cjs.default={PostgrestClient:PostgrestClient_1.default,PostgrestQueryBuilder:PostgrestQueryBuilder_1.default,PostgrestFilterBuilder:PostgrestFilterBuilder_1.default,PostgrestTransformBuilder:PostgrestTransformBuilder_1.default,PostgrestBuilder:PostgrestBuilder_1.default,PostgrestError:PostgrestError_1.default};const{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=_default;class WebSocketFactory{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const a=i.node,d=parseInt(a.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let i=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(i+=`

Suggested solution: ${s.workaround}`),new Error(i)}static createWebSocket(s,i){const a=this.getWebSocketConstructor();return new a(s,i)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const version$3="2.15.5",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(o){o.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(s,i){return s.constructor===ArrayBuffer?i(this._binaryDecode(s)):i(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const i=new DataView(s),a=new TextDecoder;return this._decodeBroadcast(s,i,a)}_decodeBroadcast(s,i,a){const d=i.getUint8(1),_=i.getUint8(2);let b=this.HEADER_LENGTH+2;const $=a.decode(s.slice(b,b+d));b=b+d;const nt=a.decode(s.slice(b,b+_));b=b+_;const tt=JSON.parse(a.decode(s.slice(b,s.byteLength)));return{ref:null,topic:$,event:nt,payload:tt}}}class Timer{constructor(s,i){this.callback=s,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(o,s,i={})=>{var a;const d=(a=i.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(s).reduce((_,b)=>(_[b]=convertColumn(b,o,s,d),_),{})},convertColumn=(o,s,i,a)=>{const d=s.find($=>$.name===o),_=d==null?void 0:d.type,b=i[o];return _&&!a.includes(_)?convertCell(_,b):noop$1(b)},convertCell=(o,s)=>{if(o.charAt(0)==="_"){const i=o.slice(1,o.length);return toArray(s,i)}switch(o){case PostgresTypes.bool:return toBoolean(s);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(s);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(s);case PostgresTypes.timestamp:return toTimestampString(s);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(s);default:return noop$1(s)}},noop$1=o=>o,toBoolean=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},toNumber=o=>{if(typeof o=="string"){const s=parseFloat(o);if(!Number.isNaN(s))return s}return o},toJson=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(s){return console.log(`JSON parse error: ${s}`),o}return o},toArray=(o,s)=>{if(typeof o!="string")return o;const i=o.length-1,a=o[i];if(o[0]==="{"&&a==="}"){let _;const b=o.slice(1,i);try{_=JSON.parse("["+b+"]")}catch{_=b?b.split(","):[]}return _.map($=>convertCell(s,$))}return o},toTimestampString=o=>typeof o=="string"?o.replace(" ","T"):o,httpEndpointURL=o=>{let s=o;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class Push{constructor(s,i,a={},d=DEFAULT_TIMEOUT){this.channel=s,this.event=i,this.payload=a,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,i){var a;return this._hasReceived(s)&&i((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:s,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:i}){this.recHooks.filter(a=>a.status===s).forEach(a=>a.callback(i))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(s,i){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},d=>{const{onJoin:_,onLeave:b,onSync:$}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,d,_,b),this.pendingDiffs.forEach(nt=>{this.state=RealtimePresence.syncDiff(this.state,nt,_,b)}),this.pendingDiffs=[],$()}),this.channel._on(a.diff,{},d=>{const{onJoin:_,onLeave:b,onSync:$}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=RealtimePresence.syncDiff(this.state,d,_,b),$())}),this.onJoin((d,_,b)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:_,newPresences:b})}),this.onLeave((d,_,b)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:_,leftPresences:b})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,i,a,d){const _=this.cloneDeep(s),b=this.transformState(i),$={},nt={};return this.map(_,(tt,et)=>{b[tt]||(nt[tt]=et)}),this.map(b,(tt,et)=>{const g=_[tt];if(g){const c=et.map(st=>st.presence_ref),j=g.map(st=>st.presence_ref),_e=et.filter(st=>j.indexOf(st.presence_ref)<0),rt=g.filter(st=>c.indexOf(st.presence_ref)<0);_e.length>0&&($[tt]=_e),rt.length>0&&(nt[tt]=rt)}else $[tt]=et}),this.syncDiff(_,{joins:$,leaves:nt},a,d)}static syncDiff(s,i,a,d){const{joins:_,leaves:b}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return a||(a=()=>{}),d||(d=()=>{}),this.map(_,($,nt)=>{var tt;const et=(tt=s[$])!==null&&tt!==void 0?tt:[];if(s[$]=this.cloneDeep(nt),et.length>0){const g=s[$].map(j=>j.presence_ref),c=et.filter(j=>g.indexOf(j.presence_ref)<0);s[$].unshift(...c)}a($,et,nt)}),this.map(b,($,nt)=>{let tt=s[$];if(!tt)return;const et=nt.map(g=>g.presence_ref);tt=tt.filter(g=>et.indexOf(g.presence_ref)<0),s[$]=tt,d($,tt,nt),tt.length===0&&delete s[$]}),s}static map(s,i){return Object.getOwnPropertyNames(s).map(a=>i(a,s[a]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((i,a)=>{const d=s[a];return"metas"in d?i[a]=d.metas.map(_=>(_.presence_ref=_.phx_ref,delete _.phx_ref,delete _.phx_ref_prev,_)):i[a]=d,i},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(s,i={config:{}},a){this.topic=s,this.params=i,this.socket=a,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(d,_)=>{this._trigger(this._replyEventName(_),d)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,i=this.timeout){var a,d,_;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:b,presence:$,private:nt}}=this.params,tt=(d=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(j=>j.filter))!==null&&d!==void 0?d:[],et=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((_=this.params.config.presence)===null||_===void 0?void 0:_.enabled)===!0,g={},c={broadcast:b,presence:Object.assign(Object.assign({},$),{enabled:et}),postgres_changes:tt,private:nt};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(j=>s==null?void 0:s(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,j)),this._onClose(()=>s==null?void 0:s(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:c},g)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:j})=>{var _e;if(this.socket.setAuth(),j===void 0){s==null||s(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const rt=this.bindings.postgres_changes,st=(_e=rt==null?void 0:rt.length)!==null&&_e!==void 0?_e:0,ot=[];for(let it=0;it<st;it++){const at=rt[it],{filter:{event:lt,schema:ut,table:ct,filter:dt}}=at,ft=j&&j[it];if(ft&&ft.event===lt&&ft.schema===ut&&ft.table===ct&&ft.filter===dt)ot.push(Object.assign(Object.assign({},at),{id:ft.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,s==null||s(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ot,s&&s(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",j=>{this.state=CHANNEL_STATES.errored,s==null||s(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,i={}){return await this.send({type:"presence",event:"track",payload:s},i.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,i,a){return this.state===CHANNEL_STATES.joined&&s===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,i,a)}async send(s,i={}){var a,d;if(!this._canPush()&&s.type==="broadcast"){const{event:_,payload:b}=s,nt={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:_,payload:b,private:this.private}]})};try{const tt=await this._fetchWithTimeout(this.broadcastEndpointURL,nt,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);return await((d=tt.body)===null||d===void 0?void 0:d.cancel()),tt.ok?"ok":"error"}catch(tt){return tt.name==="AbortError"?"timed out":"error"}}else return new Promise(_=>{var b,$,nt;const tt=this._push(s.type,s,i.timeout||this.timeout);s.type==="broadcast"&&!(!((nt=($=(b=this.params)===null||b===void 0?void 0:b.config)===null||$===void 0?void 0:$.broadcast)===null||nt===void 0)&&nt.ack)&&_("ok"),tt.receive("ok",()=>_("ok")),tt.receive("error",()=>_("error")),tt.receive("timeout",()=>_("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=CHANNEL_STATES.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(d=>{a=new Push(this,CHANNEL_EVENTS.leave,{},s),a.receive("ok",()=>{i(),d("ok")}).receive("timeout",()=>{i(),d("timed out")}).receive("error",()=>{d("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(s,i,a){const d=new AbortController,_=setTimeout(()=>d.abort(),a),b=await this.socket.fetch(s,Object.assign(Object.assign({},i),{signal:d.signal}));return clearTimeout(_),b}_push(s,i,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Push(this,s,i,a);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(s,i,a){return i}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,i,a){var d,_;const b=s.toLocaleLowerCase(),{close:$,error:nt,leave:tt,join:et}=CHANNEL_EVENTS;if(a&&[$,nt,tt,et].indexOf(b)>=0&&a!==this._joinRef())return;let c=this._onMessage(b,i,a);if(i&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(b)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(j=>{var _e,rt,st;return((_e=j.filter)===null||_e===void 0?void 0:_e.event)==="*"||((st=(rt=j.filter)===null||rt===void 0?void 0:rt.event)===null||st===void 0?void 0:st.toLocaleLowerCase())===b}).map(j=>j.callback(c,a)):(_=this.bindings[b])===null||_===void 0||_.filter(j=>{var _e,rt,st,ot,it,at;if(["broadcast","presence","postgres_changes"].includes(b))if("id"in j){const lt=j.id,ut=(_e=j.filter)===null||_e===void 0?void 0:_e.event;return lt&&((rt=i.ids)===null||rt===void 0?void 0:rt.includes(lt))&&(ut==="*"||(ut==null?void 0:ut.toLocaleLowerCase())===((st=i.data)===null||st===void 0?void 0:st.type.toLocaleLowerCase()))}else{const lt=(it=(ot=j==null?void 0:j.filter)===null||ot===void 0?void 0:ot.event)===null||it===void 0?void 0:it.toLocaleLowerCase();return lt==="*"||lt===((at=i==null?void 0:i.event)===null||at===void 0?void 0:at.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===b}).map(j=>{if(typeof c=="object"&&"ids"in c){const _e=c.data,{schema:rt,table:st,commit_timestamp:ot,type:it,errors:at}=_e;c=Object.assign(Object.assign({},{schema:rt,table:st,commit_timestamp:ot,eventType:it,new:{},old:{},errors:at}),this._getPayloadRecords(_e))}j.callback(c,a)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,i,a){const d=s.toLocaleLowerCase(),_={type:d,filter:i,callback:a};return this.bindings[d]?this.bindings[d].push(_):this.bindings[d]=[_],this}_off(s,i){const a=s.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(d=>{var _;return!(((_=d.type)===null||_===void 0?void 0:_.toLocaleLowerCase())===a&&RealtimeChannel.isEqual(d.filter,i))})),this}static isEqual(s,i){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const a in s)if(s[a]!==i[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(CHANNEL_EVENTS.close,{},s)}_onError(s){this._on(CHANNEL_EVENTS.error,{},i=>s(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const i={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(i.new=convertChangeData(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(i.old=convertChangeData(s.columns,s.old_record)),i}}const noop=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(s,i){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop,this.ref=0,this.reconnectTimer=null,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>{let _;return d?_=d:typeof fetch>"u"?_=(...b)=>__vitePreload(async()=>{const{default:$}=await Promise.resolve().then(()=>browser);return{default:$}},void 0).then(({default:$})=>$(...b)).catch($=>{throw new Error(`Failed to load @supabase/node-fetch: ${$.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):_=fetch,(...b)=>_(...b)},!(!((a=i==null?void 0:i.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${s}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(s),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const i=s.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(s,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},s?this.conn.close(s,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const i=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const s=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,i,a){this.logger(s,i,a)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,i={config:{}}){const a=`realtime:${s}`,d=this.getChannels().find(_=>_.topic===a);if(d)return d;{const _=new RealtimeChannel(`realtime:${s}`,i,this);return this.channels.push(_),_}}push(s){const{topic:i,event:a,payload:d,ref:_}=s,b=()=>{this.encode(s,$=>{var nt;(nt=this.conn)===null||nt===void 0||nt.send($)})};this.log("push",`${i} ${a} (${_})`,d),this.isConnected()?b():this.sendBuffer.push(b)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let i=this.channels.find(a=>a.topic===s&&(a._isJoined()||a._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${s}"`),i.unsubscribe())}_remove(s){this.channels=this.channels.filter(i=>i.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(tt){this.log("error","error in heartbeat callback",tt)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:d,payload:_,ref:b}=i,$=b?`(${b})`:"",nt=_.status||"";this.log("receive",`${nt} ${a} ${d} ${$}`.trim(),_),this.channels.filter(tt=>tt._isMember(a)).forEach(tt=>tt._trigger(d,_,b)),this._triggerStateCallbacks("message",i)})}_clearTimer(s){var i;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var i;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(CHANNEL_EVENTS.error))}_appendParams(s,i){if(Object.keys(i).length===0)return s;const a=s.match(/\?/)?"&":"?",d=new URLSearchParams(i);return`${s}${a}${d}`}_workerObjectUrl(s){let i;if(s)i=s;else{const a=new Blob([WORKER_SCRIPT],{type:"application/javascript"});i=URL.createObjectURL(a)}return i}_setConnectionState(s,i=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(s=null){let i;s?i=s:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const d={access_token:i,version:DEFAULT_VERSION};i&&a.updateJoinPayload(d),a.joinedOnce&&a._isJoined()&&a._push(CHANNEL_EVENTS.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${s}`,i)})}_triggerStateCallbacks(s,i){try{this.stateChangeCallbacks[s].forEach(a=>{try{a(i)}catch(d){this.log("error",`error in ${s} callback`,d)}})}catch(a){this.log("error",`error triggering ${s} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var i,a,d,_,b,$,nt,tt,et;if(this.transport=(i=s==null?void 0:s.transport)!==null&&i!==void 0?i:null,this.timeout=(a=s==null?void 0:s.timeout)!==null&&a!==void 0?a:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(d=s==null?void 0:s.heartbeatIntervalMs)!==null&&d!==void 0?d:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(_=s==null?void 0:s.worker)!==null&&_!==void 0?_:!1,this.accessToken=(b=s==null?void 0:s.accessToken)!==null&&b!==void 0?b:null,this.heartbeatCallback=($=s==null?void 0:s.heartbeatCallback)!==null&&$!==void 0?$:noop,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(nt=s==null?void 0:s.reconnectAfterMs)!==null&&nt!==void 0?nt:g=>RECONNECT_INTERVALS[g-1]||DEFAULT_RECONNECT_FALLBACK,this.encode=(tt=s==null?void 0:s.encode)!==null&&tt!==void 0?tt:(g,c)=>c(JSON.stringify(g)),this.decode=(et=s==null?void 0:s.decode)!==null&&et!==void 0?et:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}class StorageError extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class StorageApiError extends StorageError{constructor(s,i,a){super(s),this.name="StorageApiError",this.status=i,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class StorageUnknownError extends StorageError{constructor(s,i){super(s),this.name="StorageUnknownError",this.originalError=i}}var __awaiter$6=function(o,s,i,a){function d(_){return _ instanceof i?_:new i(function(b){b(_)})}return new(i||(i=Promise))(function(_,b){function $(et){try{tt(a.next(et))}catch(g){b(g)}}function nt(et){try{tt(a.throw(et))}catch(g){b(g)}}function tt(et){et.done?_(et.value):d(et.value).then($,nt)}tt((a=a.apply(o,s||[])).next())})};const resolveFetch$2=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},void 0).then(({default:a})=>a(...i)):s=fetch,(...i)=>s(...i)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response}),recursiveToCamel=o=>{if(Array.isArray(o))return o.map(i=>recursiveToCamel(i));if(typeof o=="function"||o!==Object(o))return o;const s={};return Object.entries(o).forEach(([i,a])=>{const d=i.replace(/([-_][a-z])/gi,_=>_.toUpperCase().replace(/[-_]/g,""));s[d]=recursiveToCamel(a)}),s},isPlainObject=o=>{if(typeof o!="object"||o===null)return!1;const s=Object.getPrototypeOf(o);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var __awaiter$5=function(o,s,i,a){function d(_){return _ instanceof i?_:new i(function(b){b(_)})}return new(i||(i=Promise))(function(_,b){function $(et){try{tt(a.next(et))}catch(g){b(g)}}function nt(et){try{tt(a.throw(et))}catch(g){b(g)}}function tt(et){et.done?_(et.value):d(et.value).then($,nt)}tt((a=a.apply(o,s||[])).next())})};const _getErrorMessage$1=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),handleError$2=(o,s,i)=>__awaiter$5(void 0,void 0,void 0,function*(){const a=yield resolveResponse();o instanceof a&&!(i!=null&&i.noResolveJson)?o.json().then(d=>{const _=o.status||500,b=(d==null?void 0:d.statusCode)||_+"";s(new StorageApiError(_getErrorMessage$1(d),_,b))}).catch(d=>{s(new StorageUnknownError(_getErrorMessage$1(d),d))}):s(new StorageUnknownError(_getErrorMessage$1(o),o))}),_getRequestParams$1=(o,s,i,a)=>{const d={method:o,headers:(s==null?void 0:s.headers)||{}};return o==="GET"||!a?d:(isPlainObject(a)?(d.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),d.body=JSON.stringify(a)):d.body=a,s!=null&&s.duplex&&(d.duplex=s.duplex),Object.assign(Object.assign({},d),i))};function _handleRequest$1(o,s,i,a,d,_){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((b,$)=>{o(i,_getRequestParams$1(s,a,d,_)).then(nt=>{if(!nt.ok)throw nt;return a!=null&&a.noResolveJson?nt:nt.json()}).then(nt=>b(nt)).catch(nt=>handleError$2(nt,$,a))})})}function get(o,s,i,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"GET",s,i,a)})}function post(o,s,i,a,d){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"POST",s,a,d,i)})}function put(o,s,i,a,d){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"PUT",s,a,d,i)})}function head(o,s,i,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"HEAD",s,Object.assign(Object.assign({},i),{noResolveJson:!0}),a)})}function remove(o,s,i,a,d){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"DELETE",s,a,d,i)})}var __awaiter$4=function(o,s,i,a){function d(_){return _ instanceof i?_:new i(function(b){b(_)})}return new(i||(i=Promise))(function(_,b){function $(et){try{tt(a.next(et))}catch(g){b(g)}}function nt(et){try{tt(a.throw(et))}catch(g){b(g)}}function tt(et){et.done?_(et.value):d(et.value).then($,nt)}tt((a=a.apply(o,s||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(s,i={},a,d){this.shouldThrowOnError=!1,this.url=s,this.headers=i,this.bucketId=a,this.fetch=resolveFetch$2(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,i,a,d){return __awaiter$4(this,void 0,void 0,function*(){try{let _;const b=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),d);let $=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(b.upsert)});const nt=b.metadata;typeof Blob<"u"&&a instanceof Blob?(_=new FormData,_.append("cacheControl",b.cacheControl),nt&&_.append("metadata",this.encodeMetadata(nt)),_.append("",a)):typeof FormData<"u"&&a instanceof FormData?(_=a,_.append("cacheControl",b.cacheControl),nt&&_.append("metadata",this.encodeMetadata(nt))):(_=a,$["cache-control"]=`max-age=${b.cacheControl}`,$["content-type"]=b.contentType,nt&&($["x-metadata"]=this.toBase64(this.encodeMetadata(nt)))),d!=null&&d.headers&&($=Object.assign(Object.assign({},$),d.headers));const tt=this._removeEmptyFolders(i),et=this._getFinalPath(tt),g=yield(s=="PUT"?put:post)(this.fetch,`${this.url}/object/${et}`,_,Object.assign({headers:$},b!=null&&b.duplex?{duplex:b.duplex}:{}));return{data:{path:tt,id:g.Id,fullPath:g.Key},error:null}}catch(_){if(this.shouldThrowOnError)throw _;if(isStorageError(_))return{data:null,error:_};throw _}})}upload(s,i,a){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,i,a)})}uploadToSignedUrl(s,i,a,d){return __awaiter$4(this,void 0,void 0,function*(){const _=this._removeEmptyFolders(s),b=this._getFinalPath(_),$=new URL(this.url+`/object/upload/sign/${b}`);$.searchParams.set("token",i);try{let nt;const tt=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},d),et=Object.assign(Object.assign({},this.headers),{"x-upsert":String(tt.upsert)});typeof Blob<"u"&&a instanceof Blob?(nt=new FormData,nt.append("cacheControl",tt.cacheControl),nt.append("",a)):typeof FormData<"u"&&a instanceof FormData?(nt=a,nt.append("cacheControl",tt.cacheControl)):(nt=a,et["cache-control"]=`max-age=${tt.cacheControl}`,et["content-type"]=tt.contentType);const g=yield put(this.fetch,$.toString(),nt,{headers:et});return{data:{path:_,fullPath:g.Key},error:null}}catch(nt){if(this.shouldThrowOnError)throw nt;if(isStorageError(nt))return{data:null,error:nt};throw nt}})}createSignedUploadUrl(s,i){return __awaiter$4(this,void 0,void 0,function*(){try{let a=this._getFinalPath(s);const d=Object.assign({},this.headers);i!=null&&i.upsert&&(d["x-upsert"]="true");const _=yield post(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:d}),b=new URL(this.url+_.url),$=b.searchParams.get("token");if(!$)throw new StorageError("No token returned by API");return{data:{signedUrl:b.toString(),path:s,token:$},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}update(s,i,a){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,i,a)})}move(s,i,a){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}copy(s,i,a){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:i,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}createSignedUrl(s,i,a){return __awaiter$4(this,void 0,void 0,function*(){try{let d=this._getFinalPath(s),_=yield post(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:i},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const b=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return _={signedUrl:encodeURI(`${this.url}${_.signedURL}${b}`)},{data:_,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}createSignedUrls(s,i,a){return __awaiter$4(this,void 0,void 0,function*(){try{const d=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:s},{headers:this.headers}),_=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:d.map(b=>Object.assign(Object.assign({},b),{signedUrl:b.signedURL?encodeURI(`${this.url}${b.signedURL}${_}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}download(s,i){return __awaiter$4(this,void 0,void 0,function*(){const d=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",_=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),b=_?`?${_}`:"";try{const $=this._getFinalPath(s);return{data:yield(yield get(this.fetch,`${this.url}/${d}/${$}${b}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch($){if(this.shouldThrowOnError)throw $;if(isStorageError($))return{data:null,error:$};throw $}})}info(s){return __awaiter$4(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{const a=yield get(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:recursiveToCamel(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}exists(s){return __awaiter$4(this,void 0,void 0,function*(){const i=this._getFinalPath(s);try{return yield head(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a)&&a instanceof StorageUnknownError){const d=a.originalError;if([400,404].includes(d==null?void 0:d.status))return{data:!1,error:a}}throw a}})}getPublicUrl(s,i){const a=this._getFinalPath(s),d=[],_=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";_!==""&&d.push(_);const $=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",nt=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});nt!==""&&d.push(nt);let tt=d.join("&");return tt!==""&&(tt=`?${tt}`),{data:{publicUrl:encodeURI(`${this.url}/${$}/public/${a}${tt}`)}}}remove(s){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}list(s,i,a){return __awaiter$4(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),i),{prefix:s||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},a),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(isStorageError(d))return{data:null,error:d};throw d}})}listV2(s,i){return __awaiter$4(this,void 0,void 0,function*(){try{const a=Object.assign({},s);return{data:yield post(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const i=[];return s.width&&i.push(`width=${s.width}`),s.height&&i.push(`height=${s.height}`),s.resize&&i.push(`resize=${s.resize}`),s.format&&i.push(`format=${s.format}`),s.quality&&i.push(`quality=${s.quality}`),i.join("&")}}const version$2="2.12.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$3=function(o,s,i,a){function d(_){return _ instanceof i?_:new i(function(b){b(_)})}return new(i||(i=Promise))(function(_,b){function $(et){try{tt(a.next(et))}catch(g){b(g)}}function nt(et){try{tt(a.throw(et))}catch(g){b(g)}}function tt(et){et.done?_(et.value):d(et.value).then($,nt)}tt((a=a.apply(o,s||[])).next())})};class StorageBucketApi{constructor(s,i={},a,d){this.shouldThrowOnError=!1;const _=new URL(s);d!=null&&d.useNewHostname&&/supabase\.(co|in|red)$/.test(_.hostname)&&!_.hostname.includes("storage.supabase.")&&(_.hostname=_.hostname.replace("supabase.","storage.supabase.")),this.url=_.href,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),i),this.fetch=resolveFetch$2(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(isStorageError(s))return{data:null,error:s};throw s}})}getBucket(s){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}createBucket(s,i={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}updateBucket(s,i){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}})}emptyBucket(s){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}deleteBucket(s){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}})}}class StorageClient extends StorageBucketApi{constructor(s,i={},a,d){super(s,i,a,d)}from(s){return new StorageFileApi(this.url,this.headers,s,this.fetch)}}const version$1="2.57.4";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(o,s,i,a){function d(_){return _ instanceof i?_:new i(function(b){b(_)})}return new(i||(i=Promise))(function(_,b){function $(et){try{tt(a.next(et))}catch(g){b(g)}}function nt(et){try{tt(a.throw(et))}catch(g){b(g)}}function tt(et){et.done?_(et.value):d(et.value).then($,nt)}tt((a=a.apply(o,s||[])).next())})};const resolveFetch$1=o=>{let s;return o?s=o:typeof fetch>"u"?s=nodeFetch:s=fetch,(...i)=>s(...i)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(o,s,i)=>{const a=resolveFetch$1(i),d=resolveHeadersConstructor();return(_,b)=>__awaiter$2(void 0,void 0,void 0,function*(){var $;const nt=($=yield s())!==null&&$!==void 0?$:o;let tt=new d(b==null?void 0:b.headers);return tt.has("apikey")||tt.set("apikey",o),tt.has("Authorization")||tt.set("Authorization",`Bearer ${nt}`),a(_,Object.assign(Object.assign({},b),{headers:tt}))})};var __awaiter$1=function(o,s,i,a){function d(_){return _ instanceof i?_:new i(function(b){b(_)})}return new(i||(i=Promise))(function(_,b){function $(et){try{tt(a.next(et))}catch(g){b(g)}}function nt(et){try{tt(a.throw(et))}catch(g){b(g)}}function tt(et){et.done?_(et.value):d(et.value).then($,nt)}tt((a=a.apply(o,s||[])).next())})};function ensureTrailingSlash(o){return o.endsWith("/")?o:o+"/"}function applySettingDefaults(o,s){var i,a;const{db:d,auth:_,realtime:b,global:$}=o,{db:nt,auth:tt,realtime:et,global:g}=s,c={db:Object.assign(Object.assign({},nt),d),auth:Object.assign(Object.assign({},tt),_),realtime:Object.assign(Object.assign({},et),b),storage:{},global:Object.assign(Object.assign(Object.assign({},g),$),{headers:Object.assign(Object.assign({},(i=g==null?void 0:g.headers)!==null&&i!==void 0?i:{}),(a=$==null?void 0:$.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return o.accessToken?c.accessToken=o.accessToken:delete c.accessToken,c}function validateSupabaseUrl(o){const s=o==null?void 0:o.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const version="2.71.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=10*60*1e3;class AuthError extends Error{constructor(s,i,a){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=a}}function isAuthError(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class AuthApiError extends AuthError{constructor(s,i,a){super(s,i,a),this.name="AuthApiError",this.status=i,this.code=a}}function isAuthApiError(o){return isAuthError(o)&&o.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(s,i){super(s),this.name="AuthUnknownError",this.originalError=i}}class CustomAuthError extends AuthError{constructor(s,i,a,d){super(s,a,d),this.name=i,this.status=a}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(o){return isAuthError(o)&&o.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(s,i=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(o){return isAuthError(o)&&o.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(s,i=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(s,i){super(s,"AuthRetryableFetchError",i,void 0)}}function isAuthRetryableFetchError(o){return isAuthError(o)&&o.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(s,i,a){super(s,"AuthWeakPasswordError",i,"weak_password"),this.reasons=a}}class AuthInvalidJwtError extends CustomAuthError{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const o=new Array(128);for(let s=0;s<o.length;s+=1)o[s]=-1;for(let s=0;s<IGNORE_BASE64URL.length;s+=1)o[IGNORE_BASE64URL[s].charCodeAt(0)]=-2;for(let s=0;s<TO_BASE64URL.length;s+=1)o[TO_BASE64URL[s].charCodeAt(0)]=s;return o})();function byteToBase64URL(o,s,i){if(o!==null)for(s.queue=s.queue<<8|o,s.queuedBits+=8;s.queuedBits>=6;){const a=s.queue>>s.queuedBits-6&63;i(TO_BASE64URL[a]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const a=s.queue>>s.queuedBits-6&63;i(TO_BASE64URL[a]),s.queuedBits-=6}}function byteFromBase64URL(o,s,i){const a=FROM_BASE64URL[o];if(a>-1)for(s.queue=s.queue<<6|a,s.queuedBits+=6;s.queuedBits>=8;)i(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function stringFromBase64URL(o){const s=[],i=b=>{s.push(String.fromCodePoint(b))},a={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},_=b=>{stringFromUTF8(b,a,i)};for(let b=0;b<o.length;b+=1)byteFromBase64URL(o.charCodeAt(b),d,_);return s.join("")}function codepointToUTF8(o,s){if(o<=127){s(o);return}else if(o<=2047){s(192|o>>6),s(128|o&63);return}else if(o<=65535){s(224|o>>12),s(128|o>>6&63),s(128|o&63);return}else if(o<=1114111){s(240|o>>18),s(128|o>>12&63),s(128|o>>6&63),s(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function stringToUTF8(o,s){for(let i=0;i<o.length;i+=1){let a=o.charCodeAt(i);if(a>55295&&a<=56319){const d=(a-55296)*1024&65535;a=(o.charCodeAt(i+1)-56320&65535|d)+65536,i+=1}codepointToUTF8(a,s)}}function stringFromUTF8(o,s,i){if(s.utf8seq===0){if(o<=127){i(o);return}for(let a=1;a<6;a+=1)if(!(o>>7-a&1)){s.utf8seq=a;break}if(s.utf8seq===2)s.codepoint=o&31;else if(s.utf8seq===3)s.codepoint=o&15;else if(s.utf8seq===4)s.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|o&63,s.utf8seq-=1,s.utf8seq===0&&i(s.codepoint)}}function base64UrlToUint8Array(o){const s=[],i={queue:0,queuedBits:0},a=d=>{s.push(d)};for(let d=0;d<o.length;d+=1)byteFromBase64URL(o.charCodeAt(d),i,a);return new Uint8Array(s)}function stringToUint8Array(o){const s=[];return stringToUTF8(o,i=>s.push(i)),new Uint8Array(s)}function bytesToBase64URL(o){const s=[],i={queue:0,queuedBits:0},a=d=>{s.push(d)};return o.forEach(d=>byteToBase64URL(d,i,a)),byteToBase64URL(null,i,a),s.join("")}function expiresAt(o){return Math.round(Date.now()/1e3)+o}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const s=Math.random()*16|0;return(o=="x"?s:s&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(o){const s={},i=new URL(o);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((d,_)=>{s[_]=d})}catch{}return i.searchParams.forEach((a,d)=>{s[d]=a}),s}const resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...i)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},void 0).then(({default:a})=>a(...i)):s=fetch,(...i)=>s(...i)},looksLikeFetchResponse=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",setItemAsync=async(o,s,i)=>{await o.setItem(s,JSON.stringify(i))},getItemAsync=async(o,s)=>{const i=await o.getItem(s);if(!i)return null;try{return JSON.parse(i)}catch{return i}},removeItemAsync=async(o,s)=>{await o.removeItem(s)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((s,i)=>{this.resolve=s,this.reject=i})}}Deferred.promiseConstructor=Promise;function decodeJWT(o){const s=o.split(".");if(s.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let a=0;a<s.length;a++)if(!BASE64URL_REGEX.test(s[a]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(s[0])),payload:JSON.parse(stringFromBase64URL(s[1])),signature:base64UrlToUint8Array(s[2]),raw:{header:s[0],payload:s[1]}}}async function sleep(o){return await new Promise(s=>{setTimeout(()=>s(null),o)})}function retryable(o,s){return new Promise((a,d)=>{(async()=>{for(let _=0;_<1/0;_++)try{const b=await o(_);if(!s(_,null,b)){a(b);return}}catch(b){if(!s(_,b)){d(b);return}}})()})}function dec2hex(o){return("0"+o.toString(16)).substr(-2)}function generatePKCEVerifier(){const s=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=i.length;let d="";for(let _=0;_<56;_++)d+=i.charAt(Math.floor(Math.random()*a));return d}return crypto.getRandomValues(s),Array.from(s,dec2hex).join("")}async function sha256(o){const i=new TextEncoder().encode(o),a=await crypto.subtle.digest("SHA-256",i),d=new Uint8Array(a);return Array.from(d).map(_=>String.fromCharCode(_)).join("")}async function generatePKCEChallenge(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const i=await sha256(o);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(o,s,i=!1){const a=generatePKCEVerifier();let d=a;i&&(d+="/PASSWORD_RECOVERY"),await setItemAsync(o,`${s}-code-verifier`,d);const _=await generatePKCEChallenge(a);return[_,a===_?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(o){const s=o.headers.get(API_VERSION_HEADER_NAME);if(!s||!s.match(API_VERSION_REGEX))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function validateExp(o){if(!o)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(o<=s)throw new Error("JWT has expired")}function getAlgorithm(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(o){if(!UUID_REGEX.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const o={};return new Proxy(o,{get:(s,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function deepClone(o){return JSON.parse(JSON.stringify(o))}var __rest$1=function(o,s){var i={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&s.indexOf(a)<0&&(i[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)s.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(i[a[d]]=o[a[d]]);return i};const _getErrorMessage=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),NETWORK_ERROR_CODES=[502,503,504];async function handleError$1(o){var s;if(!looksLikeFetchResponse(o))throw new AuthRetryableFetchError(_getErrorMessage(o),0);if(NETWORK_ERROR_CODES.includes(o.status))throw new AuthRetryableFetchError(_getErrorMessage(o),o.status);let i;try{i=await o.json()}catch(_){throw new AuthUnknownError(_getErrorMessage(_),_)}let a;const d=parseResponseAPIVersion(o);if(d&&d.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?a=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(a=i.error_code),a){if(a==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(i),o.status,((s=i.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(a==="session_not_found")throw new AuthSessionMissingError}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((_,b)=>_&&typeof b=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(i),o.status,i.weak_password.reasons);throw new AuthApiError(_getErrorMessage(i),o.status||500,a)}const _getRequestParams=(o,s,i,a)=>{const d={method:o,headers:(s==null?void 0:s.headers)||{}};return o==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),d.body=JSON.stringify(a),Object.assign(Object.assign({},d),i))};async function _request(o,s,i,a){var d;const _=Object.assign({},a==null?void 0:a.headers);_[API_VERSION_HEADER_NAME]||(_[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),a!=null&&a.jwt&&(_.Authorization=`Bearer ${a.jwt}`);const b=(d=a==null?void 0:a.query)!==null&&d!==void 0?d:{};a!=null&&a.redirectTo&&(b.redirect_to=a.redirectTo);const $=Object.keys(b).length?"?"+new URLSearchParams(b).toString():"",nt=await _handleRequest(o,s,i+$,{headers:_,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(nt):{data:Object.assign({},nt),error:null}}async function _handleRequest(o,s,i,a,d,_){const b=_getRequestParams(s,a,d,_);let $;try{$=await o(i,Object.assign({},b))}catch(nt){throw console.error(nt),new AuthRetryableFetchError(_getErrorMessage(nt),0)}if($.ok||await handleError$1($),a!=null&&a.noResolveJson)return $;try{return await $.json()}catch(nt){await handleError$1(nt)}}function _sessionResponse(o){var s;let i=null;hasSession(o)&&(i=Object.assign({},o),o.expires_at||(i.expires_at=expiresAt(o.expires_in)));const a=(s=o.user)!==null&&s!==void 0?s:o;return{data:{session:i,user:a},error:null}}function _sessionResponsePassword(o){const s=_sessionResponse(o);return!s.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0)&&(s.data.weak_password=o.weak_password),s}function _userResponse(o){var s;return{data:{user:(s=o.user)!==null&&s!==void 0?s:o},error:null}}function _ssoResponse(o){return{data:o,error:null}}function _generateLinkResponse(o){const{action_link:s,email_otp:i,hashed_token:a,redirect_to:d,verification_type:_}=o,b=__rest$1(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),$={action_link:s,email_otp:i,hashed_token:a,redirect_to:d,verification_type:_},nt=Object.assign({},b);return{data:{properties:$,user:nt},error:null}}function _noResolveJsonResponse(o){return o}function hasSession(o){return o.access_token&&o.refresh_token&&o.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];var __rest=function(o,s){var i={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&s.indexOf(a)<0&&(i[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)s.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(i[a[d]]=o[a[d]]);return i};class GoTrueAdminApi{constructor({url:s="",headers:i={},fetch:a}){this.url=s,this.headers=i,this.fetch=resolveFetch(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,i=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(a){if(isAuthError(a))return{data:null,error:a};throw a}}async inviteUserByEmail(s,i={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async generateLink(s){try{const{options:i}=s,a=__rest(s,["options"]),d=Object.assign(Object.assign({},a),i);return"newEmail"in a&&(d.new_email=a==null?void 0:a.newEmail,delete d.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:_generateLinkResponse,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(isAuthError(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(s){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async listUsers(s){var i,a,d,_,b,$,nt;try{const tt={nextPage:null,lastPage:0,total:0},et=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:"",per_page:(_=(d=s==null?void 0:s.perPage)===null||d===void 0?void 0:d.toString())!==null&&_!==void 0?_:""},xform:_noResolveJsonResponse});if(et.error)throw et.error;const g=await et.json(),c=(b=et.headers.get("x-total-count"))!==null&&b!==void 0?b:0,j=(nt=($=et.headers.get("link"))===null||$===void 0?void 0:$.split(","))!==null&&nt!==void 0?nt:[];return j.length>0&&(j.forEach(_e=>{const rt=parseInt(_e.split(";")[0].split("=")[1].substring(0,1)),st=JSON.parse(_e.split(";")[1].split("=")[1]);tt[`${st}Page`]=rt}),tt.total=parseInt(c)),{data:Object.assign(Object.assign({},g),tt),error:null}}catch(tt){if(isAuthError(tt))return{data:{users:[]},error:tt};throw tt}}async getUserById(s){validateUUID(s);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async updateUserById(s,i){validateUUID(s);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:i,headers:this.headers,xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async deleteUser(s,i=!1){validateUUID(s);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:i},xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async _listFactors(s){validateUUID(s.userId);try{const{data:i,error:a}=await _request(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:i,error:a}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _deleteFactor(s){validateUUID(s.userId),validateUUID(s.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}}function memoryLocalStorageAdapter(o={}){return{getItem:s=>o[s]||null,setItem:(s,i)=>{o[s]=i},removeItem:s=>{delete o[s]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(o,s,i){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,s);const a=new globalThis.AbortController;return s>0&&setTimeout(()=>{a.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async d=>{if(d){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,d.name);try{return await i()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,d.name)}}else{if(s===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(internals.debug)try{const _=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(_,null,"  "))}catch(_){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",_)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lockNoOp(o,s,i){return await i()}const GLOBAL_JWKS={};class GoTrueClient{constructor(s){var i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const d=Object.assign(Object.assign({},DEFAULT_OPTIONS),s);if(this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.persistSession=d.persistSession,this.storageKey=d.storageKey,this.autoRefreshToken=d.autoRefreshToken,this.admin=new GoTrueAdminApi({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=resolveFetch(d.fetch),this.lock=d.lock||lockNoOp,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,d.lock?this.lock=d.lock:isBrowser()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(_){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",_)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async _=>{this._debug("received broadcast notification from other tab or client",_),await this._notifyAllSubscribers(_.data.event,_.data.session,!1)})}this.initialize()}get jwks(){var s,i;return(i=(s=GLOBAL_JWKS[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(s){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,i;return(i=(s=GLOBAL_JWKS[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const i=parseParametersFromURL(window.location.href);let a="none";if(this._isImplicitGrantCallback(i)?a="implicit":await this._isPKCECallback(i)&&(a="pkce"),isBrowser()&&this.detectSessionInUrl&&a!=="none"){const{data:d,error:_}=await this._getSessionFromURL(i,a);if(_){if(this._debug("#_initialize()","error detecting session from URL",_),isAuthImplicitGrantRedirectError(_)){const nt=(s=_.details)===null||s===void 0?void 0:s.code;if(nt==="identity_already_exists"||nt==="identity_not_found"||nt==="single_identity_not_deletable")return{error:_}}return await this._removeSession(),{error:_}}const{session:b,redirectType:$}=d;return this._debug("#_initialize()","detected session in URL",b,"redirect type",$),await this._saveSession(b),setTimeout(async()=>{$==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",b):await this._notifyAllSubscribers("SIGNED_IN",b)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return isAuthError(i)?{error:i}:{error:new AuthUnknownError("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var i,a,d;try{const _=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(i=s==null?void 0:s.options)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(d=s==null?void 0:s.options)===null||d===void 0?void 0:d.captchaToken}},xform:_sessionResponse}),{data:b,error:$}=_;if($||!b)return{data:{user:null,session:null},error:$};const nt=b.session,tt=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",nt)),{data:{user:tt,session:nt},error:null}}catch(_){if(isAuthError(_))return{data:{user:null,session:null},error:_};throw _}}async signUp(s){var i,a,d;try{let _;if("email"in s){const{email:et,password:g,options:c}=s;let j=null,_e=null;this.flowType==="pkce"&&([j,_e]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),_=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:c==null?void 0:c.emailRedirectTo,body:{email:et,password:g,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:j,code_challenge_method:_e},xform:_sessionResponse})}else if("phone"in s){const{phone:et,password:g,options:c}=s;_=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:et,password:g,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},channel:(d=c==null?void 0:c.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:b,error:$}=_;if($||!b)return{data:{user:null,session:null},error:$};const nt=b.session,tt=b.user;return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",nt)),{data:{user:tt,session:nt},error:null}}catch(_){if(isAuthError(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithPassword(s){try{let i;if("email"in s){const{email:_,password:b,options:$}=s;i=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:_,password:b,gotrue_meta_security:{captcha_token:$==null?void 0:$.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in s){const{phone:_,password:b,options:$}=s;i=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:_,password:b,gotrue_meta_security:{captcha_token:$==null?void 0:$.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:a,error:d}=i;return d?{data:{user:null,session:null},error:d}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:d})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(s){var i,a,d,_;return await this._handleProviderSignIn(s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=s.options)===null||a===void 0?void 0:a.scopes,queryParams:(d=s.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(_=s.options)===null||_===void 0?void 0:_.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:i}=s;if(i==="solana")return await this.signInWithSolana(s);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}async signInWithSolana(s){var i,a,d,_,b,$,nt,tt,et,g,c,j;let _e,rt;if("message"in s)_e=s.message,rt=s.signature;else{const{chain:st,wallet:ot,statement:it,options:at}=s;let lt;if(isBrowser())if(typeof ot=="object")lt=ot;else{const ct=window;if("solana"in ct&&typeof ct.solana=="object"&&("signIn"in ct.solana&&typeof ct.solana.signIn=="function"||"signMessage"in ct.solana&&typeof ct.solana.signMessage=="function"))lt=ct.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ot!="object"||!(at!=null&&at.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");lt=ot}const ut=new URL((i=at==null?void 0:at.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in lt&&lt.signIn){const ct=await lt.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},at==null?void 0:at.signInWithSolana),{version:"1",domain:ut.host,uri:ut.href}),it?{statement:it}:null));let dt;if(Array.isArray(ct)&&ct[0]&&typeof ct[0]=="object")dt=ct[0];else if(ct&&typeof ct=="object"&&"signedMessage"in ct&&"signature"in ct)dt=ct;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in dt&&"signature"in dt&&(typeof dt.signedMessage=="string"||dt.signedMessage instanceof Uint8Array)&&dt.signature instanceof Uint8Array)_e=typeof dt.signedMessage=="string"?dt.signedMessage:new TextDecoder().decode(dt.signedMessage),rt=dt.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in lt)||typeof lt.signMessage!="function"||!("publicKey"in lt)||typeof lt!="object"||!lt.publicKey||!("toBase58"in lt.publicKey)||typeof lt.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_e=[`${ut.host} wants you to sign in with your Solana account:`,lt.publicKey.toBase58(),...it?["",it,""]:[""],"Version: 1",`URI: ${ut.href}`,`Issued At: ${(d=(a=at==null?void 0:at.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((_=at==null?void 0:at.signInWithSolana)===null||_===void 0)&&_.notBefore?[`Not Before: ${at.signInWithSolana.notBefore}`]:[],...!((b=at==null?void 0:at.signInWithSolana)===null||b===void 0)&&b.expirationTime?[`Expiration Time: ${at.signInWithSolana.expirationTime}`]:[],...!(($=at==null?void 0:at.signInWithSolana)===null||$===void 0)&&$.chainId?[`Chain ID: ${at.signInWithSolana.chainId}`]:[],...!((nt=at==null?void 0:at.signInWithSolana)===null||nt===void 0)&&nt.nonce?[`Nonce: ${at.signInWithSolana.nonce}`]:[],...!((tt=at==null?void 0:at.signInWithSolana)===null||tt===void 0)&&tt.requestId?[`Request ID: ${at.signInWithSolana.requestId}`]:[],...!((g=(et=at==null?void 0:at.signInWithSolana)===null||et===void 0?void 0:et.resources)===null||g===void 0)&&g.length?["Resources",...at.signInWithSolana.resources.map(dt=>`- ${dt}`)]:[]].join(`
`);const ct=await lt.signMessage(new TextEncoder().encode(_e),"utf8");if(!ct||!(ct instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");rt=ct}}try{const{data:st,error:ot}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_e,signature:bytesToBase64URL(rt)},!((c=s.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:(j=s.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:_sessionResponse});if(ot)throw ot;return!st||!st.session||!st.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(st.session&&(await this._saveSession(st.session),await this._notifyAllSubscribers("SIGNED_IN",st.session)),{data:Object.assign({},st),error:ot})}catch(st){if(isAuthError(st))return{data:{user:null,session:null},error:st};throw st}}async _exchangeCodeForSession(s){const i=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[a,d]=(i??"").split("/");try{const{data:_,error:b}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:a},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),b)throw b;return!_||!_.session||!_.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign(Object.assign({},_),{redirectType:d??null}),error:b})}catch(_){if(isAuthError(_))return{data:{user:null,session:null,redirectType:null},error:_};throw _}}async signInWithIdToken(s){try{const{options:i,provider:a,token:d,access_token:_,nonce:b}=s,$=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:d,access_token:_,nonce:b,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:_sessionResponse}),{data:nt,error:tt}=$;return tt?{data:{user:null,session:null},error:tt}:!nt||!nt.session||!nt.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(nt.session&&(await this._saveSession(nt.session),await this._notifyAllSubscribers("SIGNED_IN",nt.session)),{data:nt,error:tt})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(s){var i,a,d,_,b;try{if("email"in s){const{email:$,options:nt}=s;let tt=null,et=null;this.flowType==="pkce"&&([tt,et]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:g}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:$,data:(i=nt==null?void 0:nt.data)!==null&&i!==void 0?i:{},create_user:(a=nt==null?void 0:nt.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:nt==null?void 0:nt.captchaToken},code_challenge:tt,code_challenge_method:et},redirectTo:nt==null?void 0:nt.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in s){const{phone:$,options:nt}=s,{data:tt,error:et}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:$,data:(d=nt==null?void 0:nt.data)!==null&&d!==void 0?d:{},create_user:(_=nt==null?void 0:nt.shouldCreateUser)!==null&&_!==void 0?_:!0,gotrue_meta_security:{captcha_token:nt==null?void 0:nt.captchaToken},channel:(b=nt==null?void 0:nt.channel)!==null&&b!==void 0?b:"sms"}});return{data:{user:null,session:null,messageId:tt==null?void 0:tt.message_id},error:et}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch($){if(isAuthError($))return{data:{user:null,session:null},error:$};throw $}}async verifyOtp(s){var i,a;try{let d,_;"options"in s&&(d=(i=s.options)===null||i===void 0?void 0:i.redirectTo,_=(a=s.options)===null||a===void 0?void 0:a.captchaToken);const{data:b,error:$}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:_}}),redirectTo:d,xform:_sessionResponse});if($)throw $;if(!b)throw new Error("An error occurred on token verification.");const nt=b.session,tt=b.user;return nt!=null&&nt.access_token&&(await this._saveSession(nt),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",nt)),{data:{user:tt,session:nt},error:null}}catch(d){if(isAuthError(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithSSO(s){var i,a,d;try{let _=null,b=null;return this.flowType==="pkce"&&([_,b]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(a=(i=s.options)===null||i===void 0?void 0:i.redirectTo)!==null&&a!==void 0?a:void 0}),!((d=s==null?void 0:s.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:_,code_challenge_method:b}),headers:this.headers,xform:_ssoResponse})}catch(_){if(isAuthError(_))return{data:null,error:_};throw _}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:i},error:a}=s;if(a)throw a;if(!i)throw new AuthSessionMissingError;const{error:d}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:d}})}catch(s){if(isAuthError(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const i=`${this.url}/resend`;if("email"in s){const{email:a,type:d,options:_}=s,{error:b}=await _request(this.fetch,"POST",i,{headers:this.headers,body:{email:a,type:d,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},redirectTo:_==null?void 0:_.emailRedirectTo});return{data:{user:null,session:null},error:b}}else if("phone"in s){const{phone:a,type:d,options:_}=s,{data:b,error:$}=await _request(this.fetch,"POST",i,{headers:this.headers,body:{phone:a,type:d,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}}});return{data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:$}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(s,i){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await a,await i()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=i();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await s(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const i=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?s=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const a=s.expires_at?s.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",s.expires_at),!a){if(this.userStorage){const b=await getItemAsync(this.userStorage,this.storageKey+"-user");b!=null&&b.user?s.user=b.user:s.user=userNotAvailableProxy()}if(this.storage.isServer&&s.user){let b=this.suppressGetSessionWarning;s=new Proxy(s,{get:(nt,tt,et)=>(!b&&tt==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),b=!0,this.suppressGetSessionWarning=!0),Reflect.get(nt,tt,et))})}return{data:{session:s},error:null}}const{session:d,error:_}=await this._callRefreshToken(s.refresh_token);return _?{data:{session:null},error:_}:{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:_userResponse}):await this._useSession(async i=>{var a,d,_;const{data:b,error:$}=i;if($)throw $;return!(!((a=b.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(_=(d=b.session)===null||d===void 0?void 0:d.access_token)!==null&&_!==void 0?_:void 0,xform:_userResponse})})}catch(i){if(isAuthError(i))return isAuthSessionMissingError(i)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(s,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,i))}async _updateUser(s,i={}){try{return await this._useSession(async a=>{const{data:d,error:_}=a;if(_)throw _;if(!d.session)throw new AuthSessionMissingError;const b=d.session;let $=null,nt=null;this.flowType==="pkce"&&s.email!=null&&([$,nt]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:tt,error:et}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:$,code_challenge_method:nt}),jwt:b.access_token,xform:_userResponse});if(et)throw et;return b.user=tt.user,await this._saveSession(b),await this._notifyAllSubscribers("USER_UPDATED",b),{data:{user:b.user},error:null}})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new AuthSessionMissingError;const i=Date.now()/1e3;let a=i,d=!0,_=null;const{payload:b}=decodeJWT(s.access_token);if(b.exp&&(a=b.exp,d=a<=i),d){const{session:$,error:nt}=await this._callRefreshToken(s.refresh_token);if(nt)return{data:{user:null,session:null},error:nt};if(!$)return{data:{user:null,session:null},error:null};_=$}else{const{data:$,error:nt}=await this._getUser(s.access_token);if(nt)throw nt;_={access_token:s.access_token,refresh_token:s.refresh_token,user:$.user,token_type:"bearer",expires_in:a-i,expires_at:a},await this._saveSession(_),await this._notifyAllSubscribers("SIGNED_IN",_)}return{data:{user:_.user,session:_},error:null}}catch(i){if(isAuthError(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async i=>{var a;if(!s){const{data:b,error:$}=i;if($)throw $;s=(a=b.session)!==null&&a!==void 0?a:void 0}if(!(s!=null&&s.refresh_token))throw new AuthSessionMissingError;const{session:d,error:_}=await this._callRefreshToken(s.refresh_token);return _?{data:{user:null,session:null},error:_}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(s,i){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(s.error||s.error_description||s.error_code)throw new AuthImplicitGrantRedirectError(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:it,error:at}=await this._exchangeCodeForSession(s.code);if(at)throw at;const lt=new URL(window.location.href);return lt.searchParams.delete("code"),window.history.replaceState(window.history.state,"",lt.toString()),{data:{session:it.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:d,access_token:_,refresh_token:b,expires_in:$,expires_at:nt,token_type:tt}=s;if(!_||!$||!b||!tt)throw new AuthImplicitGrantRedirectError("No session defined in URL");const et=Math.round(Date.now()/1e3),g=parseInt($);let c=et+g;nt&&(c=parseInt(nt));const j=c-et;j*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${g}s`);const _e=c-g;et-_e>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_e,c,et):et-_e<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_e,c,et);const{data:rt,error:st}=await this._getUser(_);if(st)throw st;const ot={provider_token:a,provider_refresh_token:d,access_token:_,expires_in:g,expires_at:c,refresh_token:b,token_type:tt,user:rt.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:ot,redirectType:s.type},error:null}}catch(a){if(isAuthError(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const i=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&i)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async i=>{var a;const{data:d,error:_}=i;if(_)return{error:_};const b=(a=d.session)===null||a===void 0?void 0:a.access_token;if(b){const{error:$}=await this.admin.signOut(b,s);if($&&!(isAuthApiError($)&&($.status===404||$.status===401||$.status===403)))return{error:$}}return s!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const i=uuid(),a={id:i,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:a}}}async _emitInitialSession(s){return await this._useSession(async i=>{var a,d;try{const{data:{session:_},error:b}=i;if(b)throw b;await((a=this.stateChangeEmitters.get(s))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",_)),this._debug("INITIAL_SESSION","callback id",s,"session",_)}catch(_){await((d=this.stateChangeEmitters.get(s))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",_),console.error(_)}})}async resetPasswordForEmail(s,i={}){let a=null,d=null;this.flowType==="pkce"&&([a,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:a,code_challenge_method:d,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(_){if(isAuthError(_))return{data:null,error:_};throw _}}async getUserIdentities(){var s;try{const{data:i,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(s=i.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async linkIdentity(s){var i;try{const{data:a,error:d}=await this._useSession(async _=>{var b,$,nt,tt,et;const{data:g,error:c}=_;if(c)throw c;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(b=s.options)===null||b===void 0?void 0:b.redirectTo,scopes:($=s.options)===null||$===void 0?void 0:$.scopes,queryParams:(nt=s.options)===null||nt===void 0?void 0:nt.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",j,{headers:this.headers,jwt:(et=(tt=g.session)===null||tt===void 0?void 0:tt.access_token)!==null&&et!==void 0?et:void 0})});if(d)throw d;return isBrowser()&&!(!((i=s.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:s.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(isAuthError(a))return{data:{provider:s.provider,url:null},error:a};throw a}}async unlinkIdentity(s){try{return await this._useSession(async i=>{var a,d;const{data:_,error:b}=i;if(b)throw b;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(d=(a=_.session)===null||a===void 0?void 0:a.access_token)!==null&&d!==void 0?d:void 0})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _refreshAccessToken(s){const i=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(i,"begin");try{const a=Date.now();return await retryable(async d=>(d>0&&await sleep(200*Math.pow(2,d-1)),this._debug(i,"refreshing attempt",d),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:_sessionResponse})),(d,_)=>{const b=200*Math.pow(2,d);return _&&isAuthRetryableFetchError(_)&&Date.now()+b-a<AUTO_REFRESH_TICK_DURATION_MS})}catch(a){if(this._debug(i,"error",a),isAuthError(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(i,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,i){const a=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",i,"url",a),isBrowser()&&!i.skipBrowserRedirect&&window.location.assign(a),{data:{provider:s,url:a},error:null}}async _recoverAndRefresh(){var s,i;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const d=await getItemAsync(this.storage,this.storageKey);if(d&&this.userStorage){let b=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:d.user},await setItemAsync(this.userStorage,this.storageKey+"-user",b)),d.user=(s=b==null?void 0:b.user)!==null&&s!==void 0?s:userNotAvailableProxy()}else if(d&&!d.user&&!d.user){const b=await getItemAsync(this.storage,this.storageKey+"-user");b&&(b!=null&&b.user)?(d.user=b.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,d)):d.user=userNotAvailableProxy()}if(this._debug(a,"session from storage",d),!this._isValidSession(d)){this._debug(a,"session is not valid"),d!==null&&await this._removeSession();return}const _=((i=d.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(a,`session has${_?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),_){if(this.autoRefreshToken&&d.refresh_token){const{error:b}=await this._callRefreshToken(d.refresh_token);b&&(console.error(b),isAuthRetryableFetchError(b)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",b),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:b,error:$}=await this._getUser(d.access_token);!$&&(b!=null&&b.user)?(d.user=b.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(b){console.error("Error getting user data:",b),this._debug(a,"error getting user data, skipping SIGNED_IN notification",b)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(a,"error",d),console.error(d);return}finally{this._debug(a,"end")}}async _callRefreshToken(s){var i,a;if(!s)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Deferred;const{data:_,error:b}=await this._refreshAccessToken(s);if(b)throw b;if(!_.session)throw new AuthSessionMissingError;await this._saveSession(_.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",_.session);const $={session:_.session,error:null};return this.refreshingDeferred.resolve($),$}catch(_){if(this._debug(d,"error",_),isAuthError(_)){const b={session:null,error:_};return isAuthRetryableFetchError(_)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(b),b}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(_),_}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(s,i,a=!0){const d=`#_notifyAllSubscribers(${s})`;this._debug(d,"begin",i,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:s,session:i});const _=[],b=Array.from(this.stateChangeEmitters.values()).map(async $=>{try{await $.callback(s,i)}catch(nt){_.push(nt)}});if(await Promise.all(b),_.length>0){for(let $=0;$<_.length;$+=1)console.error(_[$]);throw _[0]}}finally{this._debug(d,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const i=Object.assign({},s),a=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&i.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:i.user});const d=Object.assign({},i);delete d.user;const _=deepClone(d);await setItemAsync(this.storage,this.storageKey,_)}else{const d=deepClone(i);await setItemAsync(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async i=>{const{data:{session:a}}=i;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((a.expires_at*1e3-s)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),d<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(a.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const i=`#_onVisibilityChanged(${s})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,i,a){const d=[`provider=${encodeURIComponent(i)}`];if(a!=null&&a.redirectTo&&d.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&d.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[_,b]=await getCodeChallengeAndMethod(this.storage,this.storageKey),$=new URLSearchParams({code_challenge:`${encodeURIComponent(_)}`,code_challenge_method:`${encodeURIComponent(b)}`});d.push($.toString())}if(a!=null&&a.queryParams){const _=new URLSearchParams(a.queryParams);d.push(_.toString())}return a!=null&&a.skipBrowserRedirect&&d.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${s}?${d.join("&")}`}async _unenroll(s){try{return await this._useSession(async i=>{var a;const{data:d,error:_}=i;return _?{data:null,error:_}:await _request(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(a=d==null?void 0:d.session)===null||a===void 0?void 0:a.access_token})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _enroll(s){try{return await this._useSession(async i=>{var a,d;const{data:_,error:b}=i;if(b)return{data:null,error:b};const $=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:nt,error:tt}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:$,headers:this.headers,jwt:(a=_==null?void 0:_.session)===null||a===void 0?void 0:a.access_token});return tt?{data:null,error:tt}:(s.factorType==="totp"&&(!((d=nt==null?void 0:nt.totp)===null||d===void 0)&&d.qr_code)&&(nt.totp.qr_code=`data:image/svg+xml;utf-8,${nt.totp.qr_code}`),{data:nt,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var a;const{data:d,error:_}=i;if(_)return{data:null,error:_};const{data:b,error:$}=await _request(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(a=d==null?void 0:d.session)===null||a===void 0?void 0:a.access_token});return $?{data:null,error:$}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+b.expires_in},b)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",b),{data:b,error:$})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var a;const{data:d,error:_}=i;return _?{data:null,error:_}:await _request(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(a=d==null?void 0:d.session)===null||a===void 0?void 0:a.access_token})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(s){const{data:i,error:a}=await this._challenge({factorId:s.factorId});return a?{data:null,error:a}:await this._verify({factorId:s.factorId,challengeId:i.id,code:s.code})}async _listFactors(){const{data:{user:s},error:i}=await this.getUser();if(i)return{data:null,error:i};const a=(s==null?void 0:s.factors)||[],d=a.filter(b=>b.factor_type==="totp"&&b.status==="verified"),_=a.filter(b=>b.factor_type==="phone"&&b.status==="verified");return{data:{all:a,totp:d,phone:_},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var i,a;const{data:{session:d},error:_}=s;if(_)return{data:null,error:_};if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:b}=decodeJWT(d.access_token);let $=null;b.aal&&($=b.aal);let nt=$;((a=(i=d.user.factors)===null||i===void 0?void 0:i.filter(g=>g.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(nt="aal2");const et=b.amr||[];return{data:{currentLevel:$,nextLevel:nt,currentAuthenticationMethods:et},error:null}}))}async fetchJwk(s,i={keys:[]}){let a=i.keys.find($=>$.kid===s);if(a)return a;const d=Date.now();if(a=this.jwks.keys.find($=>$.kid===s),a&&this.jwks_cached_at+JWKS_TTL>d)return a;const{data:_,error:b}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(b)throw b;return!_.keys||_.keys.length===0||(this.jwks=_,this.jwks_cached_at=d,a=_.keys.find($=>$.kid===s),!a)?null:a}async getClaims(s,i={}){try{let a=s;if(!a){const{data:j,error:_e}=await this.getSession();if(_e||!j.session)return{data:null,error:_e};a=j.session.access_token}const{header:d,payload:_,signature:b,raw:{header:$,payload:nt}}=decodeJWT(a);i!=null&&i.allowExpired||validateExp(_.exp);const tt=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!tt){const{error:j}=await this.getUser(a);if(j)throw j;return{data:{claims:_,header:d,signature:b},error:null}}const et=getAlgorithm(d.alg),g=await crypto.subtle.importKey("jwk",tt,et,!0,["verify"]);if(!await crypto.subtle.verify(et,g,b,stringToUint8Array(`${$}.${nt}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:_,header:d,signature:b},error:null}}catch(a){if(isAuthError(a))return{data:null,error:a};throw a}}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(s){super(s)}}var __awaiter=function(o,s,i,a){function d(_){return _ instanceof i?_:new i(function(b){b(_)})}return new(i||(i=Promise))(function(_,b){function $(et){try{tt(a.next(et))}catch(g){b(g)}}function nt(et){try{tt(a.throw(et))}catch(g){b(g)}}function tt(et){et.done?_(et.value):d(et.value).then($,nt)}tt((a=a.apply(o,s||[])).next())})};class SupabaseClient{constructor(s,i,a){var d,_,b;this.supabaseUrl=s,this.supabaseKey=i;const $=validateSupabaseUrl(s);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",$),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",$),this.storageUrl=new URL("storage/v1",$),this.functionsUrl=new URL("functions/v1",$);const nt=`sb-${$.hostname.split(".")[0]}-auth-token`,tt={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:nt}),global:DEFAULT_GLOBAL_OPTIONS},et=applySettingDefaults(a??{},tt);this.storageKey=(d=et.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(_=et.global.headers)!==null&&_!==void 0?_:{},et.accessToken?(this.accessToken=et.accessToken,this.auth=new Proxy({},{get:(g,c)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(c)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((b=et.auth)!==null&&b!==void 0?b:{},this.headers,et.global.fetch),this.fetch=fetchWithAuth(i,this._getAccessToken.bind(this),et.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},et.realtime)),this.rest=new PostgrestClient(new URL("rest/v1",$).href,{headers:this.headers,schema:et.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),et.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,i={},a={}){return this.rest.rpc(s,i,a)}channel(s,i={config:{}}){return this.realtime.channel(s,i)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,i;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:i,detectSessionInUrl:a,storage:d,userStorage:_,storageKey:b,flowType:$,lock:nt,debug:tt},et,g){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},c),et),storageKey:b,autoRefreshToken:s,persistSession:i,detectSessionInUrl:a,storage:d,userStorage:_,flowType:$,lock:nt,debug:tt,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,a)=>{this._handleTokenChanged(i,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(s,i,a){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:s==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(o,s,i)=>new SupabaseClient(o,s,i);function shouldShowDeprecationWarning(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const s=o.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const supabaseUrl="https://akhfcmkssdvgbpnipvdw.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFraGZjbWtzc2R2Z2JwbmlwdmR3Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjUwNjE3MCwiZXhwIjoyMDcyMDgyMTcwfQ.PJM0Sji1InpnCAZLY9UdmJr3wtOBYqXJtdnSTvcdMhQ",supabase=createClient(supabaseUrl,supabaseKey);class SupabaseService{async searchIndividuals(s,i=30){if(!s){const{data:et,error:g}=await supabase.from("Individuals").select("*").eq("is_employee",!1).limit(i);if(g)throw g;return et||[]}if(s.match(/^\d+$/)){const{data:et,error:g}=await supabase.from("Individuals").select("*").eq("id",parseInt(s)).eq("is_employee",!1);if(g)throw g;return et||[]}const{data:d,error:_}=await supabase.from("Individuals").select("*").ilike("first_name",`%${s}%`).eq("is_employee",!1).limit(i),{data:b,error:$}=await supabase.from("Individuals").select("*").ilike("last_name",`%${s}%`).eq("is_employee",!1).limit(i);if(_&&$)throw _||$;return[...d||[],...b||[]].filter((et,g,c)=>g===c.findIndex(j=>j.id===et.id))}async getIndividualById(s){const{data:i,error:a}=await supabase.from("Individuals").select("*").eq("id",s).single();if(a)throw a;return i}async getAppointmentHistory(s){const{data:i,error:a}=await supabase.from("Appointment History").select("*").eq("individual_id",s).order("appointed_date",{ascending:!1});if(a)throw a;return i||[]}async getDentistNotes(s){const{data:i,error:a}=await supabase.from("Dentist Notes").select("*").eq("individual_id",s).order("created_date",{ascending:!1});if(a)throw a;return i||[]}async getSummary(s){const{data:i,error:a}=await supabase.from("Summaries").select("*").eq("individual_id",s).order("created_date",{ascending:!1}).limit(1).single();if(a&&a.code!=="PGRST116")throw console.error("Error fetching summary:",a),a;return a&&a.code==="PGRST116"?null:i}}const supabaseService=new SupabaseService;function PatientRecords(){const[o,s]=reactExports.useState(null),[i,a]=reactExports.useState(""),{toast:d}=useToast(),_=useQueryClient(),{data:b,isLoading:$}=useQuery({queryKey:["supabase-patients",i],queryFn:()=>supabaseService.searchIndividuals(i||void 0)}),{data:nt}=useQuery({queryKey:["supabase-patient",o],queryFn:()=>o?supabaseService.getIndividualById(o):null,enabled:!!o}),{data:tt}=useQuery({queryKey:["supabase-appointments",o],queryFn:()=>o?supabaseService.getAppointmentHistory(o):[],enabled:!!o}),{data:et}=useQuery({queryKey:["supabase-notes",o],queryFn:()=>o?supabaseService.getDentistNotes(o):[],enabled:!!o}),{data:g}=useQuery({queryKey:["supabase-summary",o],queryFn:()=>o?supabaseService.getSummary(o):null,enabled:!!o}),c=useMutation({mutationFn:async st=>{console.log(`🤖 Generating AI summary for patient ${st}...`);const ot=await fetch(`/api/patients/${st}/ai-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!ot.ok){const at=await ot.json().catch(()=>({}));throw new Error(at.message||`HTTP ${ot.status}: Failed to generate AI summary`)}const it=await ot.json();return console.log("✅ AI summary response:",it),it},onSuccess:(st,ot)=>{console.log(`🔄 Invalidating queries for patient ${ot}...`),_.invalidateQueries({queryKey:["supabase-summary",ot]}),_.invalidateQueries({queryKey:["supabase-patient",ot]}),_.refetchQueries({queryKey:["supabase-summary",ot]}),d({title:"Success",description:"AI summary generated successfully via MCP"})},onError:st=>{console.error("❌ AI summary generation failed:",st),d({title:"Error",description:st.message||"Failed to generate AI summary",variant:"destructive"})}}),j=st=>{const ot=new Date,it=new Date(st);let at=ot.getFullYear()-it.getFullYear();const lt=ot.getMonth()-it.getMonth();return(lt<0||lt===0&&ot.getDate()<it.getDate())&&at--,at},_e=st=>{const ot=new Date(st);return ot.toLocaleDateString()+" "+ot.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},rt=st=>st?st.split(`
`).map((it,at)=>{if(!it.trim())return jsxRuntimeExports.jsx("div",{className:"h-2"},at);if(/^\d+\.\s/.test(it.trim()))return jsxRuntimeExports.jsx("div",{className:"font-semibold text-medical-blue-900 mt-4 mb-2",children:it.trim()},at);const lt=it.length-it.trimStart().length;let ut="",ct="text-sm";return lt>=6?(ut="ml-8",ct="text-xs"):lt>=3&&(ut="ml-4"),jsxRuntimeExports.jsx("div",{className:`${ut} ${ct} mb-1`,children:it.trim()},at)}):[];return jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-1",children:jsxRuntimeExports.jsx(Card,{"data-testid":"card-patient-search",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient Search"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),jsxRuntimeExports.jsx(Input,{type:"text",placeholder:"Search by name, ID, or DOB",value:i,onChange:st=>a(st.target.value),className:"pl-10","data-testid":"input-patient-search"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[$?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"Loading patients..."}):b==null?void 0:b.map(st=>jsxRuntimeExports.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${o===st.id?"border-medical-blue-500 bg-medical-blue-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>s(st.id),"data-testid":`card-patient-${st.id}`,children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-gray-900","data-testid":`text-patient-name-${st.id}`,children:[st.first_name," ",st.last_name]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600","data-testid":`text-patient-details-${st.id}`,children:["ID: ",st.id," | DOB: ",_e(st.date_of_birth)]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[st.email_primary," | ",st.phone_number]})]},st.id)),!$&&!(b!=null&&b.length)&&jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"No patients found"})]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:nt?jsxRuntimeExports.jsx(Card,{"data-testid":"card-patient-details",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900","data-testid":"text-selected-patient-name",children:["Patient Record - ",nt.first_name," ",nt.last_name]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>o&&c.mutate(o),disabled:c.isPending||!o,className:"bg-medical-blue-600 hover:bg-medical-blue-700","data-testid":"button-generate-ai-summary",children:[jsxRuntimeExports.jsx(Bot,{className:"h-4 w-4 mr-2"}),c.isPending?"Generating...":"Generate AI Summary"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Basic Information"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Age:"})," ",jsxRuntimeExports.jsxs("span",{"data-testid":"text-patient-age",children:[j(nt.date_of_birth)," years"]})]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Date of Birth:"})," ",jsxRuntimeExports.jsx("span",{"data-testid":"text-patient-dob",children:_e(nt.date_of_birth)})]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"ID Number:"})," ",jsxRuntimeExports.jsx("span",{"data-testid":"text-patient-id-num",children:nt.identification_num})]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Email:"})," ",jsxRuntimeExports.jsx("span",{"data-testid":"text-patient-email",children:nt.email_primary})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Contact Information"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("p",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",jsxRuntimeExports.jsx("span",{className:"ml-1","data-testid":"text-patient-phone",children:nt.phone_number}),jsxRuntimeExports.jsx(Phone,{className:"h-3 w-3 ml-2 text-gray-400"})]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Primary Address:"})," ",jsxRuntimeExports.jsx("span",{"data-testid":"text-patient-address-primary",children:nt.address_primary})]}),nt.address_secondary&&jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Secondary Address:"})," ",jsxRuntimeExports.jsx("span",{"data-testid":"text-patient-address-secondary",children:nt.address_secondary})]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Patient Since:"})," ",jsxRuntimeExports.jsx("span",{"data-testid":"text-patient-created",children:_e(nt.created_date)})]})]})]})]}),g?jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-semibold text-medical-blue-900 mb-2",children:[jsxRuntimeExports.jsx(Bot,{className:"inline h-4 w-4 mr-2"}),"AI-Generated Patient Summary (v",g.version,")"]}),jsxRuntimeExports.jsxs("details",{className:"mb-2",children:[jsxRuntimeExports.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Debug: Full Patient Summary Object"}),jsxRuntimeExports.jsx("pre",{className:"text-xs bg-gray-100 p-2 mt-1 overflow-auto",children:JSON.stringify(g,null,2)})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-medical-blue-800 leading-relaxed","data-testid":"text-ai-summary",children:rt(g.summary)}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-medical-blue-600",children:["Generated on ",_e(g.created_date)," | Version: ",g.version," | Hash: ",g.hash.substring(0,8),"..."]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:[jsxRuntimeExports.jsx(Bot,{className:"inline h-4 w-4 mr-2"}),"No AI Summary Available"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:`Click "Generate AI Summary" to create an AI-powered summary of this patient's medical records.`})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recent Appointments"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:tt!=null&&tt.length?tt.slice(0,5).map(st=>jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx(Calendar,{className:"text-medical-blue-600 h-5 w-5 mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900","data-testid":`text-appointment-date-${st.id}`,children:_e(st.appointed_date)}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600","data-testid":`text-appointment-status-${st.id}`,children:[st.was_attended?"Attended":"Scheduled"," | Attendant ID: ",st.attendant_id]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400","data-testid":`text-appointment-created-${st.id}`,children:["Created: ",_e(st.creation_date)]})]})]},st.id)):jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"No appointments found"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Clinical Notes"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:et!=null&&et.length?et.slice(0,5).map(st=>jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx(FileText,{className:"text-medical-blue-600 h-5 w-5 mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900","data-testid":`text-note-title-${st.id}`,children:st.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600","data-testid":`text-note-text-${st.id}`,children:st.text.length>200?`${st.text.substring(0,200)}...`:st.text}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400","data-testid":`text-note-date-${st.id}`,children:[_e(st.created_date),st.appointment_id&&` | Appointment: ${st.appointment_id}`]})]})]},st.id)):jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"No clinical notes available"})})]})]})}):jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(User,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Patient"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Choose a patient from the search results to view their medical records, appointments, and clinical notes"})]})})})})]})}function dispatchCallback(o,s){o&&o(s)}function reverseDictionary(o){return Object.fromEntries(Object.entries(o).map(([s,i])=>[i,s]))}function escapeRegExp(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let o=function(...s){return o._call(...s)};return Object.setPrototypeOf(o,new.target.prototype)}_call(...o){throw Error("Must implement _call method in subclass")}};function isTypedArray(o){var s,i,a;return((a=(i=(s=o==null?void 0:o.prototype)==null?void 0:s.__proto__)==null?void 0:i.constructor)==null?void 0:a.name)==="TypedArray"}function isIntegralNumber(o){return Number.isInteger(o)||typeof o=="bigint"}function exists(o){return o!=null}function calculateDimensions(o){const s=[];let i=o;for(;Array.isArray(i);)s.push(i.length),i=i[0];return s}function pop(o,s,i=void 0){const a=o[s];if(a!==void 0)return delete o[s],a;if(i===void 0)throw Error(`Key ${s} does not exist in object.`);return i}function mergeArrays(...o){return Array.prototype.concat.apply([],o)}function product(...o){return o.reduce((s,i)=>s.flatMap(a=>i.map(d=>[a,d])))}function calculateReflectOffset(o,s){return Math.abs((o+s)%(2*s)-s)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(o,s,i)=>{if(s&&typeof s.init=="function"&&typeof s.createSessionHandler=="function"){const a=backends[o];if(a===void 0)backends[o]={backend:s,priority:i};else{if(a.priority>i)return;if(a.priority===i&&a.backend!==s)throw new Error(`cannot register backend "${o}" using priority ${i}`)}if(i>=0){const d=backendsSortedByPriority.indexOf(o);d!==-1&&backendsSortedByPriority.splice(d,1);for(let _=0;_<backendsSortedByPriority.length;_++)if(backends[backendsSortedByPriority[_]].priority<=i){backendsSortedByPriority.splice(_,0,o);return}backendsSortedByPriority.push(o)}return}throw new TypeError("not a valid backend")},resolveBackend=async o=>{const s=o.length===0?backendsSortedByPriority:o,i=[];for(const a of s){const d=backends[a];if(d){if(d.initialized)return d.backend;if(d.aborted)continue;const _=!!d.initPromise;try{return _||(d.initPromise=d.backend.init()),await d.initPromise,d.initialized=!0,d.backend}catch(b){_||i.push({name:a,err:b}),d.aborted=!0}finally{delete d.initPromise}}}throw new Error(`no available backend found. ERR: ${i.map(a=>`[${a.name}] ${a.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(s){if(s!==void 0){if(typeof s!="string"||["verbose","info","warning","error","fatal"].indexOf(s)===-1)throw new Error(`Unsupported logging level: ${s}`);this.logLevelInternal=s}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=o=>{let s=1;for(let i=0;i<o.length;i++){const a=o[i];if(typeof a!="number"||!Number.isSafeInteger(a))throw new TypeError(`dims[${i}] must be an integer, got: ${a}`);if(a<0)throw new RangeError(`dims[${i}] must be a non-negative integer, got: ${a}`);s*=a}return s};let Tensor$2=class kr{constructor(s,i,a){let d,_,b;if(typeof s=="string")if(d=s,b=a,s==="string"){if(!Array.isArray(i))throw new TypeError("A string tensor's data must be a string array.");_=i}else{const nt=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(s);if(nt===void 0)throw new TypeError(`Unsupported tensor type: ${s}.`);if(Array.isArray(i))_=nt.from(i);else if(i instanceof nt)_=i;else throw new TypeError(`A ${d} tensor's data must be type of ${nt}`)}else if(b=i,Array.isArray(s)){if(s.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const nt=typeof s[0];if(nt==="string")d="string",_=s;else if(nt==="boolean")d="bool",_=Uint8Array.from(s);else throw new TypeError(`Invalid element type of data array: ${nt}.`)}else{const nt=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(s.constructor);if(nt===void 0)throw new TypeError(`Unsupported type for tensor data: ${s.constructor}.`);d=nt,_=s}if(b===void 0)b=[_.length];else if(!Array.isArray(b))throw new TypeError("A tensor's dims must be a number array");const $=calculateSize(b);if($!==_.length)throw new Error(`Tensor's size(${$}) does not match data length(${_.length}).`);this.dims=b,this.type=d,this.data=_,this.size=$}static bufferToTensor(s,i){if(s===void 0)throw new Error("Image buffer must be defined");if(i.height===void 0||i.width===void 0)throw new Error("Image height and width must be defined");const{height:a,width:d}=i,_=i.norm;let b,$;_===void 0||_.mean===void 0?b=255:b=_.mean,_===void 0||_.bias===void 0?$=0:$=_.bias;const nt=i.bitmapFormat!==void 0?i.bitmapFormat:"RGBA",tt=i.tensorFormat!==void 0&&i.tensorFormat!==void 0?i.tensorFormat:"RGB",et=a*d,g=tt==="RGBA"?new Float32Array(et*4):new Float32Array(et*3);let c=4,j=0,_e=1,rt=2,st=3,ot=0,it=et,at=et*2,lt=-1;nt==="RGB"&&(c=3,j=0,_e=1,rt=2,st=-1),tt==="RGBA"?lt=et*3:tt==="RBG"?(ot=0,at=et,it=et*2):tt==="BGR"&&(at=0,it=et,ot=et*2);for(let ct=0;ct<et;ct++,j+=c,rt+=c,_e+=c,st+=c)g[ot++]=(s[j]+$)/b,g[it++]=(s[_e]+$)/b,g[at++]=(s[rt]+$)/b,lt!==-1&&st!==-1&&(g[lt++]=(s[st]+$)/b);return tt==="RGBA"?new kr("float32",g,[1,4,a,d]):new kr("float32",g,[1,3,a,d])}static async fromImage(s,i){const a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,d=typeof ImageData<"u"&&s instanceof ImageData,_=typeof ImageBitmap<"u"&&s instanceof ImageBitmap,b=typeof String<"u"&&(s instanceof String||typeof s=="string");let $,nt={};if(a){const tt=document.createElement("canvas"),et=tt.getContext("2d");if(et!=null){let g=s.naturalHeight,c=s.naturalWidth;if(i!==void 0&&i.resizedHeight!==void 0&&i.resizedWidth!==void 0&&(g=i.resizedHeight,c=i.resizedWidth),i!==void 0){if(nt=i,i.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(nt.tensorFormat="RGBA",i.height!==void 0&&i.height!==g)throw new Error("Image input config height doesn't match HTMLImageElement height");if(nt.height=g,i.width!==void 0&&i.width!==c)throw new Error("Image input config width doesn't match HTMLImageElement width");nt.width=c}else nt.tensorFormat="RGBA",nt.height=g,nt.width=c;tt.width=c,tt.height=g,et.drawImage(s,0,0,c,g),$=et.getImageData(0,0,c,g).data}else throw new Error("Can not access image data")}else if(d){const tt="RGBA";let et,g;if(i!==void 0&&i.resizedWidth!==void 0&&i.resizedHeight!==void 0?(et=i.resizedHeight,g=i.resizedWidth):(et=s.height,g=s.width),i!==void 0){if(nt=i,i.bitmapFormat!==void 0&&i.bitmapFormat!==tt)throw new Error("Image input config format must be RGBA for ImageData");nt.bitmapFormat="RGBA"}else nt.bitmapFormat="RGBA";if(nt.height=et,nt.width=g,i!==void 0){const c=document.createElement("canvas");c.width=g,c.height=et;const j=c.getContext("2d");if(j!=null)j.putImageData(s,0,0),$=j.getImageData(0,0,g,et).data;else throw new Error("Can not access image data")}else $=s.data}else if(_){if(i===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(i.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const tt=document.createElement("canvas").getContext("2d");if(tt!=null){const et=s.height,g=s.width;if(tt.drawImage(s,0,0,g,et),$=tt.getImageData(0,0,g,et).data,i!==void 0){if(i.height!==void 0&&i.height!==et)throw new Error("Image input config height doesn't match ImageBitmap height");if(nt.height=et,i.width!==void 0&&i.width!==g)throw new Error("Image input config width doesn't match ImageBitmap width");nt.width=g}else nt.height=et,nt.width=g;return kr.bufferToTensor($,nt)}else throw new Error("Can not access image data")}else{if(b)return new Promise((tt,et)=>{const g=document.createElement("canvas"),c=g.getContext("2d");if(!s||!c)return et();const j=new Image;j.crossOrigin="Anonymous",j.src=s,j.onload=()=>{g.width=j.width,g.height=j.height,c.drawImage(j,0,0,g.width,g.height);const _e=c.getImageData(0,0,g.width,g.height);if(i!==void 0){if(i.height!==void 0&&i.height!==g.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(nt.height=g.height,i.width!==void 0&&i.width!==g.width)throw new Error("Image input config width doesn't match ImageBitmap width");nt.width=g.width}else nt.height=g.height,nt.width=g.width;tt(kr.bufferToTensor(_e.data,nt))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if($!==void 0)return kr.bufferToTensor($,nt);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(s){var i,a;const d=document.createElement("canvas").getContext("2d");let _;if(d!=null){const b=this.dims[3],$=this.dims[2],nt=this.dims[1],tt=s!==void 0&&s.format!==void 0?s.format:"RGB",et=s!==void 0&&((i=s.norm)===null||i===void 0?void 0:i.mean)!==void 0?s.norm.mean:255,g=s!==void 0&&((a=s.norm)===null||a===void 0?void 0:a.bias)!==void 0?s.norm.bias:0,c=$*b;if(s!==void 0){if(s.height!==void 0&&s.height!==$)throw new Error("Image output config height doesn't match tensor height");if(s.width!==void 0&&s.width!==b)throw new Error("Image output config width doesn't match tensor width");if(s.format!==void 0&&nt===4&&s.format!=="RGBA"||nt===3&&s.format!=="RGB"&&s.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const j=4;let _e=0,rt=1,st=2,ot=3,it=0,at=c,lt=c*2,ut=-1;tt==="RGBA"?(it=0,at=c,lt=c*2,ut=c*3):tt==="RGB"?(it=0,at=c,lt=c*2):tt==="RBG"&&(it=0,lt=c,at=c*2),_=d.createImageData(b,$);for(let ct=0;ct<$*b;_e+=j,rt+=j,st+=j,ot+=j,ct++)_.data[_e]=(this.data[it++]-g)*et,_.data[rt]=(this.data[at++]-g)*et,_.data[st]=(this.data[lt++]-g)*et,_.data[ot]=ut===-1?255:(this.data[ut++]-g)*et}else throw new Error("Can not access image data");return _}reshape(s){return new kr(this.type,this.data,s)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Oo{constructor(s){this.handler=s}async run(s,i,a){const d={};let _={};if(typeof s!="object"||s===null||s instanceof Tensor$1||Array.isArray(s))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let b=!0;if(typeof i=="object"){if(i===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(i instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(i)){if(i.length===0)throw new TypeError("'fetches' cannot be an empty array.");b=!1;for(const tt of i){if(typeof tt!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(tt)===-1)throw new RangeError(`'fetches' contains invalid output name: ${tt}.`);d[tt]=null}if(typeof a=="object"&&a!==null)_=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let tt=!1;const et=Object.getOwnPropertyNames(i);for(const g of this.outputNames)if(et.indexOf(g)!==-1){const c=i[g];(c===null||c instanceof Tensor$1)&&(tt=!0,b=!1,d[g]=c)}if(tt){if(typeof a=="object"&&a!==null)_=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else _=i}}else if(typeof i<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const tt of this.inputNames)if(typeof s[tt]>"u")throw new Error(`input '${tt}' is missing in 'feeds'.`);if(b)for(const tt of this.outputNames)d[tt]=null;const $=await this.handler.run(s,d,_),nt={};for(const tt in $)Object.hasOwnProperty.call($,tt)&&(nt[tt]=new Tensor$1($[tt].type,$[tt].data,$[tt].dims));return nt}static async create(s,i,a,d){let _,b={};if(typeof s=="string"){if(_=s,typeof i=="object"&&i!==null)b=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(s instanceof Uint8Array){if(_=s,typeof i=="object"&&i!==null)b=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(s instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&s instanceof SharedArrayBuffer){const g=s;let c=0,j=s.byteLength;if(typeof i=="object"&&i!==null)b=i;else if(typeof i=="number"){if(c=i,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(j=s.byteLength-c,typeof a=="number"){if(j=a,!Number.isSafeInteger(j))throw new RangeError("'byteLength' must be an integer.");if(j<=0||c+j>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-c}].`);if(typeof d=="object"&&d!==null)b=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else if(typeof a<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof i<"u")throw new TypeError("'options' must be an object.");_=new Uint8Array(g,c,j)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const nt=(b.executionProviders||[]).map(g=>typeof g=="string"?g:g.name),et=await(await resolveBackend(nt)).createSessionHandler(_,b);return new Oo(et)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(o,s){module.exports=s(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(o,s,i)=>{var a,d=(a=(a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(_){function b(){return At.buffer!=Bt&&dn(At.buffer),Wt}function $(){return At.buffer!=Bt&&dn(At.buffer),sn}function nt(){return At.buffer!=Bt&&dn(At.buffer),Jt}function tt(){return At.buffer!=Bt&&dn(At.buffer),Kt}function et(){return At.buffer!=Bt&&dn(At.buffer),rn}var g,c,j;_=_||{},g||(g=_!==void 0?_:{}),g.ready=new Promise(function(pt,_t){c=pt,j=_t});var _e,rt,st,ot,it,at,lt=Object.assign({},g),ut="./this.program",ct=(pt,_t)=>{throw _t},dt=typeof window=="object",ft=typeof importScripts=="function",ht=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",mt=g.ENVIRONMENT_IS_PTHREAD||!1,yt="";function Tt(pt){return g.locateFile?g.locateFile(pt,yt):yt+pt}if(ht){let pt;yt=ft?i(908).dirname(yt)+"/":"//",at=()=>{it||(ot=i(1384),it=i(908))},_e=function(_t,Et){return at(),_t=it.normalize(_t),ot.readFileSync(_t,Et?void 0:"utf8")},st=_t=>((_t=_e(_t,!0)).buffer||(_t=new Uint8Array(_t)),_t),rt=(_t,Et,kt)=>{at(),_t=it.normalize(_t),ot.readFile(_t,function(It,jt){It?kt(It):Et(jt.buffer)})},1<process.argv.length&&(ut=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(_t){if(!(_t instanceof ar))throw _t}),process.on("unhandledRejection",function(_t){throw _t}),ct=(_t,Et)=>{if(Xn())throw process.exitCode=_t,Et;Et instanceof ar||vt("exiting due to exception: "+Et),process.exit(_t)},g.inspect=function(){return"[Emscripten Module object]"};try{pt=i(9925)}catch(_t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),_t}i.g.Worker=pt.Worker}else(dt||ft)&&(ft?yt=self.location.href:typeof document<"u"&&document.currentScript&&(yt=document.currentScript.src),a&&(yt=a),yt=yt.indexOf("blob:")!==0?yt.substr(0,yt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ht||(_e=pt=>{var _t=new XMLHttpRequest;return _t.open("GET",pt,!1),_t.send(null),_t.responseText},ft&&(st=pt=>{var _t=new XMLHttpRequest;return _t.open("GET",pt,!1),_t.responseType="arraybuffer",_t.send(null),new Uint8Array(_t.response)}),rt=(pt,_t,Et)=>{var kt=new XMLHttpRequest;kt.open("GET",pt,!0),kt.responseType="arraybuffer",kt.onload=()=>{kt.status==200||kt.status==0&&kt.response?_t(kt.response):Et()},kt.onerror=Et,kt.send(null)}));ht&&typeof performance>"u"&&(i.g.performance=i(6953).performance);var St=console.log.bind(console),xt=console.warn.bind(console);ht&&(at(),St=pt=>ot.writeSync(1,pt+`
`),xt=pt=>ot.writeSync(2,pt+`
`));var wt,gt=g.print||St,vt=g.printErr||xt;Object.assign(g,lt),lt=null,g.thisProgram&&(ut=g.thisProgram),g.quit&&(ct=g.quit),g.wasmBinary&&(wt=g.wasmBinary);var Ot=g.noExitRuntime||!1;typeof WebAssembly!="object"&&bn("no native wasm support detected");var At,Ft,Bt,Wt,sn,Jt,Kt,rn,zt=!1,nn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function wn(pt,_t,Et){var kt=(_t>>>=0)+Et;for(Et=_t;pt[Et]&&!(Et>=kt);)++Et;if(16<Et-_t&&pt.buffer&&nn)return nn.decode(pt.buffer instanceof SharedArrayBuffer?pt.slice(_t,Et):pt.subarray(_t,Et));for(kt="";_t<Et;){var It=pt[_t++];if(128&It){var jt=63&pt[_t++];if((224&It)==192)kt+=String.fromCharCode((31&It)<<6|jt);else{var Gt=63&pt[_t++];65536>(It=(240&It)==224?(15&It)<<12|jt<<6|Gt:(7&It)<<18|jt<<12|Gt<<6|63&pt[_t++])?kt+=String.fromCharCode(It):(It-=65536,kt+=String.fromCharCode(55296|It>>10,56320|1023&It))}}else kt+=String.fromCharCode(It)}return kt}function Qt(pt,_t){return(pt>>>=0)?wn($(),pt,_t):""}function Zt(pt,_t,Et,kt){if(!(0<kt))return 0;var It=Et>>>=0;kt=Et+kt-1;for(var jt=0;jt<pt.length;++jt){var Gt=pt.charCodeAt(jt);if(55296<=Gt&&57343>=Gt&&(Gt=65536+((1023&Gt)<<10)|1023&pt.charCodeAt(++jt)),127>=Gt){if(Et>=kt)break;_t[Et++>>>0]=Gt}else{if(2047>=Gt){if(Et+1>=kt)break;_t[Et++>>>0]=192|Gt>>6}else{if(65535>=Gt){if(Et+2>=kt)break;_t[Et++>>>0]=224|Gt>>12}else{if(Et+3>=kt)break;_t[Et++>>>0]=240|Gt>>18,_t[Et++>>>0]=128|Gt>>12&63}_t[Et++>>>0]=128|Gt>>6&63}_t[Et++>>>0]=128|63&Gt}}return _t[Et>>>0]=0,Et-It}function en(pt){for(var _t=0,Et=0;Et<pt.length;++Et){var kt=pt.charCodeAt(Et);127>=kt?_t++:2047>=kt?_t+=2:55296<=kt&&57343>=kt?(_t+=4,++Et):_t+=3}return _t}function dn(pt){Bt=pt,g.HEAP8=Wt=new Int8Array(pt),g.HEAP16=new Int16Array(pt),g.HEAP32=Jt=new Int32Array(pt),g.HEAPU8=sn=new Uint8Array(pt),g.HEAPU16=new Uint16Array(pt),g.HEAPU32=Kt=new Uint32Array(pt),g.HEAPF32=new Float32Array(pt),g.HEAPF64=rn=new Float64Array(pt)}mt&&(Bt=g.buffer);var hn=g.INITIAL_MEMORY||16777216;if(mt)At=g.wasmMemory,Bt=g.buffer;else if(g.wasmMemory)At=g.wasmMemory;else if(!((At=new WebAssembly.Memory({initial:hn/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw vt("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),ht&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");At&&(Bt=At.buffer),hn=Bt.byteLength,dn(Bt);var Mn,Nn=[],jn=[],Yn=[],zn=[];function Xn(){return Ot||!1}function qn(){var pt=g.preRun.shift();Nn.unshift(pt)}var kn,Vn=0,tr=null;function bn(pt){throw mt?postMessage({cmd:"onAbort",arg:pt}):g.onAbort&&g.onAbort(pt),vt(pt="Aborted("+pt+")"),zt=!0,pt=new WebAssembly.RuntimeError(pt+". Build with -sASSERTIONS for more info."),j(pt),pt}function es(){return kn.startsWith("data:application/octet-stream;base64,")}function Lr(){var pt=kn;try{if(pt==kn&&wt)return new Uint8Array(wt);if(st)return st(pt);throw"both async and sync fetching of the wasm failed"}catch(_t){bn(_t)}}kn="ort-wasm-threaded.wasm",es()||(kn=Tt(kn));var xs={};function ar(pt){this.name="ExitStatus",this.message="Program terminated with exit("+pt+")",this.status=pt}function $r(pt){(pt=on.Vb[pt])||bn(),on.mc(pt)}function Fr(pt){var _t=on.Cc();if(!_t)return 6;on.ac.push(_t),on.Vb[pt.Ub]=_t,_t.Ub=pt.Ub;var Et={cmd:"run",start_routine:pt.Ic,arg:pt.zc,pthread_ptr:pt.Ub};return _t.$b=()=>{Et.time=performance.now(),_t.postMessage(Et,pt.Nc)},_t.loaded&&(_t.$b(),delete _t.$b),0}function $n(pt){if(mt)return Ht(1,1,pt);Xn()||(on.oc(),g.onExit&&g.onExit(pt),zt=!0),ct(pt,new ar(pt))}function Sr(pt,_t){if(!_t&&mt)throw ws(pt),"unwind";Xn()||mt||(Ys(),pr(Yn),Ks(0),ks[1].length&&Cs(1,10),ks[2].length&&Cs(2,10),on.oc()),$n(pt)}var on={Yb:[],ac:[],qc:[],Vb:{},fc:function(){mt&&on.Ec()},Pc:function(){},Ec:function(){on.receiveObjectTransfer=on.Gc,on.threadInitTLS=on.pc,on.setExitStatus=on.nc,Ot=!1},nc:function(){},oc:function(){for(var pt of Object.values(on.Vb))on.mc(pt);for(pt of on.Yb)pt.terminate();on.Yb=[]},mc:function(pt){var _t=pt.Ub;delete on.Vb[_t],on.Yb.push(pt),on.ac.splice(on.ac.indexOf(pt),1),pt.Ub=0,Rs(_t)},Gc:function(){},pc:function(){on.qc.forEach(pt=>pt())},Fc:function(pt,_t){pt.onmessage=Et=>{var kt=(Et=Et.data).cmd;if(pt.Ub&&(on.Bc=pt.Ub),Et.targetThread&&Et.targetThread!=Ts()){var It=on.Vb[Et.Qc];It?It.postMessage(Et,Et.transferList):vt('Internal error! Worker sent a message "'+kt+'" to target pthread '+Et.targetThread+", but that thread no longer exists!")}else kt==="processProxyingQueue"?Mt(Et.queue):kt==="spawnThread"?Fr(Et):kt==="cleanupThread"?$r(Et.thread):kt==="killThread"?(Et=Et.thread,kt=on.Vb[Et],delete on.Vb[Et],kt.terminate(),Rs(Et),on.ac.splice(on.ac.indexOf(kt),1),kt.Ub=0):kt==="cancelThread"?on.Vb[Et.thread].postMessage({cmd:"cancel"}):kt==="loaded"?(pt.loaded=!0,_t&&_t(pt),pt.$b&&(pt.$b(),delete pt.$b)):kt==="print"?gt("Thread "+Et.threadId+": "+Et.text):kt==="printErr"?vt("Thread "+Et.threadId+": "+Et.text):kt==="alert"?alert("Thread "+Et.threadId+": "+Et.text):Et.target==="setimmediate"?pt.postMessage(Et):kt==="onAbort"?g.onAbort&&g.onAbort(Et.arg):kt&&vt("worker sent an unknown command "+kt);on.Bc=void 0},pt.onerror=Et=>{throw vt("worker sent an error! "+Et.filename+":"+Et.lineno+": "+Et.message),Et},ht&&(pt.on("message",function(Et){pt.onmessage({data:Et})}),pt.on("error",function(Et){pt.onerror(Et)}),pt.on("detachedExit",function(){})),pt.postMessage({cmd:"load",urlOrBlob:g.mainScriptUrlOrBlob||a,wasmMemory:At,wasmModule:Ft})},yc:function(){var pt=Tt("ort-wasm-threaded.worker.js");on.Yb.push(new Worker(pt))},Cc:function(){return on.Yb.length==0&&(on.yc(),on.Fc(on.Yb[0])),on.Yb.pop()}};function pr(pt){for(;0<pt.length;)pt.shift()(g)}function vs(pt){var _t=gn();return pt=pt(),pn(_t),pt}function ws(pt){if(mt)return Ht(2,0,pt);try{Sr(pt)}catch(_t){_t instanceof ar||_t=="unwind"||ct(1,_t)}}g.PThread=on,g.establishStackSpace=function(){var pt=Ts(),_t=nt()[pt+44>>2>>>0];pt=nt()[pt+48>>2>>>0],eo(_t,_t-pt),pn(_t)};var lr=[];function Sn(pt){var _t=lr[pt];return _t||(pt>=lr.length&&(lr.length=pt+1),lr[pt]=_t=Mn.get(pt)),_t}g.invokeEntryPoint=function(pt,_t){pt=Sn(pt)(_t),Xn()?on.nc(pt):Zs(pt)};var Pr,ts,Ar=[],un=0,an=0;function ln(pt){this.Zb=pt,this.Sb=pt-24,this.xc=function(_t){tt()[this.Sb+4>>2>>>0]=_t},this.bc=function(){return tt()[this.Sb+4>>2>>>0]},this.wc=function(_t){tt()[this.Sb+8>>2>>>0]=_t},this.Dc=function(){return tt()[this.Sb+8>>2>>>0]},this.rc=function(){nt()[this.Sb>>2>>>0]=0},this.hc=function(_t){_t=_t?1:0,b()[this.Sb+12>>0>>>0]=_t},this.uc=function(){return b()[this.Sb+12>>0>>>0]!=0},this.ic=function(_t){_t=_t?1:0,b()[this.Sb+13>>0>>>0]=_t},this.kc=function(){return b()[this.Sb+13>>0>>>0]!=0},this.fc=function(_t,Et){this.cc(0),this.xc(_t),this.wc(Et),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(nt(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(nt(),this.Sb>>2,1)===1},this.cc=function(_t){tt()[this.Sb+16>>2>>>0]=_t},this.tc=function(){return tt()[this.Sb+16>>2>>>0]},this.vc=function(){if(to(this.bc()))return tt()[this.Zb>>2>>>0];var _t=this.tc();return _t!==0?_t:this.Zb}}function ns(pt){return qs(new ln(pt).Sb)}function Or(pt,_t,Et,kt){return mt?Ht(3,1,pt,_t,Et,kt):rs(pt,_t,Et,kt)}function rs(pt,_t,Et,kt){if(typeof SharedArrayBuffer>"u")return vt("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var It=[];return mt&&It.length===0?Or(pt,_t,Et,kt):(pt={Ic:Et,Ub:pt,zc:kt,Nc:It},mt?(pt.Oc="spawnThread",postMessage(pt,It),0):Fr(pt))}function ss(pt,_t,Et){return mt?Ht(4,1,pt,_t,Et):0}function os(pt,_t){if(mt)return Ht(5,1,pt,_t)}function is(pt,_t){if(mt)return Ht(6,1,pt,_t)}function as(pt,_t,Et){if(mt)return Ht(7,1,pt,_t,Et)}function ls(pt,_t,Et){return mt?Ht(8,1,pt,_t,Et):0}function us(pt,_t){if(mt)return Ht(9,1,pt,_t)}function cs(pt,_t,Et){if(mt)return Ht(10,1,pt,_t,Et)}function ds(pt,_t,Et,kt){if(mt)return Ht(11,1,pt,_t,Et,kt)}function hs(pt,_t,Et,kt){if(mt)return Ht(12,1,pt,_t,Et,kt)}function fs(pt,_t,Et,kt){if(mt)return Ht(13,1,pt,_t,Et,kt)}function ps(pt){if(mt)return Ht(14,1,pt)}function bt(pt,_t){if(mt)return Ht(15,1,pt,_t)}function Pt(pt,_t,Et){if(mt)return Ht(16,1,pt,_t,Et)}function Mt(pt){Atomics.store(nt(),pt>>2,1),Ts()&&Js(pt),Atomics.compareExchange(nt(),pt>>2,1,0)}function Rt(pt){return tt()[pt>>>2]+4294967296*nt()[pt+4>>>2]}function Nt(pt,_t,Et,kt,It,jt){return mt?Ht(17,1,pt,_t,Et,kt,It,jt):-52}function $t(pt,_t,Et,kt,It,jt){if(mt)return Ht(18,1,pt,_t,Et,kt,It,jt)}function Vt(pt){var _t=en(pt)+1,Et=Ms(_t);return Et&&Zt(pt,b(),Et,_t),Et}function Yt(pt,_t,Et){function kt(xn){return(xn=xn.toTimeString().match(/\(([A-Za-z ]+)\)$/))?xn[1]:"GMT"}if(mt)return Ht(19,1,pt,_t,Et);var It=new Date().getFullYear(),jt=new Date(It,0,1),Gt=new Date(It,6,1);It=jt.getTimezoneOffset();var Xt=Gt.getTimezoneOffset(),_n=Math.max(It,Xt);nt()[pt>>2>>>0]=60*_n,nt()[_t>>2>>>0]=+(It!=Xt),pt=kt(jt),_t=kt(Gt),pt=Vt(pt),_t=Vt(_t),Xt<It?(tt()[Et>>2>>>0]=pt,tt()[Et+4>>2>>>0]=_t):(tt()[Et>>2>>>0]=_t,tt()[Et+4>>2>>>0]=pt)}function Ht(pt,_t){var Et=arguments.length-2,kt=arguments;return vs(()=>{for(var It=Is(8*Et),jt=It>>3,Gt=0;Gt<Et;Gt++){var Xt=kt[2+Gt];et()[jt+Gt>>>0]=Xt}return Qs(pt,Et,It,_t)})}g.executeNotifiedProxyingQueue=Mt,ts=ht?()=>{var pt=process.hrtime();return 1e3*pt[0]+pt[1]/1e6}:mt?()=>performance.now()-g.__performance_now_clock_drift:()=>performance.now();var fn,An=[],Ln={};function Dn(){if(!fn){var pt,_t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ut||"./this.program"};for(pt in Ln)Ln[pt]===void 0?delete _t[pt]:_t[pt]=Ln[pt];var Et=[];for(pt in _t)Et.push(pt+"="+_t[pt]);fn=Et}return fn}function Dt(pt,_t){if(mt)return Ht(20,1,pt,_t);var Et=0;return Dn().forEach(function(kt,It){var jt=_t+Et;for(It=tt()[pt+4*It>>2>>>0]=jt,jt=0;jt<kt.length;++jt)b()[It++>>0>>>0]=kt.charCodeAt(jt);b()[It>>0>>>0]=0,Et+=kt.length+1}),0}function vn(pt,_t){if(mt)return Ht(21,1,pt,_t);var Et=Dn();tt()[pt>>2>>>0]=Et.length;var kt=0;return Et.forEach(function(It){kt+=It.length+1}),tt()[_t>>2>>>0]=kt,0}function On(pt){return mt?Ht(22,1,pt):52}function Qn(pt,_t,Et,kt){return mt?Ht(23,1,pt,_t,Et,kt):52}function ur(pt,_t,Et,kt,It){return mt?Ht(24,1,pt,_t,Et,kt,It):70}var ks=[null,[],[]];function Cs(pt,_t){var Et=ks[pt];_t===0||_t===10?((pt===1?gt:vt)(wn(Et,0)),Et.length=0):Et.push(_t)}function Vs(pt,_t,Et,kt){if(mt)return Ht(25,1,pt,_t,Et,kt);for(var It=0,jt=0;jt<Et;jt++){var Gt=tt()[_t>>2>>>0],Xt=tt()[_t+4>>2>>>0];_t+=8;for(var _n=0;_n<Xt;_n++)Cs(pt,$()[Gt+_n>>>0]);It+=Xt}return tt()[kt>>2>>>0]=It,0}var Gn=0;function Es(pt){return pt%4==0&&(pt%100!=0||pt%400==0)}var Gs=[31,29,31,30,31,30,31,31,30,31,30,31],Ws=[31,28,31,30,31,30,31,31,30,31,30,31];function Hs(pt,_t,Et,kt){function It(Lt,En,Cn){for(Lt=typeof Lt=="number"?Lt.toString():Lt||"";Lt.length<En;)Lt=Cn[0]+Lt;return Lt}function jt(Lt,En){return It(Lt,En,"0")}function Gt(Lt,En){function Cn(Br){return 0>Br?-1:0<Br?1:0}var cr;return(cr=Cn(Lt.getFullYear()-En.getFullYear()))===0&&(cr=Cn(Lt.getMonth()-En.getMonth()))===0&&(cr=Cn(Lt.getDate()-En.getDate())),cr}function Xt(Lt){switch(Lt.getDay()){case 0:return new Date(Lt.getFullYear()-1,11,29);case 1:return Lt;case 2:return new Date(Lt.getFullYear(),0,3);case 3:return new Date(Lt.getFullYear(),0,2);case 4:return new Date(Lt.getFullYear(),0,1);case 5:return new Date(Lt.getFullYear()-1,11,31);case 6:return new Date(Lt.getFullYear()-1,11,30)}}function _n(Lt){var En=Lt.Wb;for(Lt=new Date(new Date(Lt.Xb+1900,0,1).getTime());0<En;){var Cn=Lt.getMonth(),cr=(Es(Lt.getFullYear())?Gs:Ws)[Cn];if(!(En>cr-Lt.getDate())){Lt.setDate(Lt.getDate()+En);break}En-=cr-Lt.getDate()+1,Lt.setDate(1),11>Cn?Lt.setMonth(Cn+1):(Lt.setMonth(0),Lt.setFullYear(Lt.getFullYear()+1))}return Cn=new Date(Lt.getFullYear()+1,0,4),En=Xt(new Date(Lt.getFullYear(),0,4)),Cn=Xt(Cn),0>=Gt(En,Lt)?0>=Gt(Cn,Lt)?Lt.getFullYear()+1:Lt.getFullYear():Lt.getFullYear()-1}var xn=nt()[kt+40>>2>>>0];for(var Rn in kt={Lc:nt()[kt>>2>>>0],Kc:nt()[kt+4>>2>>>0],dc:nt()[kt+8>>2>>>0],jc:nt()[kt+12>>2>>>0],ec:nt()[kt+16>>2>>>0],Xb:nt()[kt+20>>2>>>0],Tb:nt()[kt+24>>2>>>0],Wb:nt()[kt+28>>2>>>0],Rc:nt()[kt+32>>2>>>0],Jc:nt()[kt+36>>2>>>0],Mc:xn?Qt(xn):""},Et=Qt(Et),xn={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Et=Et.replace(new RegExp(Rn,"g"),xn[Rn]);var nr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Jn="January February March April May June July August September October November December".split(" ");for(Rn in xn={"%a":function(Lt){return nr[Lt.Tb].substring(0,3)},"%A":function(Lt){return nr[Lt.Tb]},"%b":function(Lt){return Jn[Lt.ec].substring(0,3)},"%B":function(Lt){return Jn[Lt.ec]},"%C":function(Lt){return jt((Lt.Xb+1900)/100|0,2)},"%d":function(Lt){return jt(Lt.jc,2)},"%e":function(Lt){return It(Lt.jc,2," ")},"%g":function(Lt){return _n(Lt).toString().substring(2)},"%G":function(Lt){return _n(Lt)},"%H":function(Lt){return jt(Lt.dc,2)},"%I":function(Lt){return(Lt=Lt.dc)==0?Lt=12:12<Lt&&(Lt-=12),jt(Lt,2)},"%j":function(Lt){for(var En=0,Cn=0;Cn<=Lt.ec-1;En+=(Es(Lt.Xb+1900)?Gs:Ws)[Cn++]);return jt(Lt.jc+En,3)},"%m":function(Lt){return jt(Lt.ec+1,2)},"%M":function(Lt){return jt(Lt.Kc,2)},"%n":function(){return`
`},"%p":function(Lt){return 0<=Lt.dc&&12>Lt.dc?"AM":"PM"},"%S":function(Lt){return jt(Lt.Lc,2)},"%t":function(){return"	"},"%u":function(Lt){return Lt.Tb||7},"%U":function(Lt){return jt(Math.floor((Lt.Wb+7-Lt.Tb)/7),2)},"%V":function(Lt){var En=Math.floor((Lt.Wb+7-(Lt.Tb+6)%7)/7);if(2>=(Lt.Tb+371-Lt.Wb-2)%7&&En++,En)En==53&&((Cn=(Lt.Tb+371-Lt.Wb)%7)==4||Cn==3&&Es(Lt.Xb)||(En=1));else{En=52;var Cn=(Lt.Tb+7-Lt.Wb-1)%7;(Cn==4||Cn==5&&Es(Lt.Xb%400-1))&&En++}return jt(En,2)},"%w":function(Lt){return Lt.Tb},"%W":function(Lt){return jt(Math.floor((Lt.Wb+7-(Lt.Tb+6)%7)/7),2)},"%y":function(Lt){return(Lt.Xb+1900).toString().substring(2)},"%Y":function(Lt){return Lt.Xb+1900},"%z":function(Lt){var En=0<=(Lt=Lt.Jc);return Lt=Math.abs(Lt)/60,(En?"+":"-")+("0000"+(Lt/60*100+Lt%60)).slice(-4)},"%Z":function(Lt){return Lt.Mc},"%%":function(){return"%"}},Et=Et.replace(/%%/g,"\0\0"),xn)Et.includes(Rn)&&(Et=Et.replace(new RegExp(Rn,"g"),xn[Rn](kt)));return Rn=function(Lt){var En=Array(en(Lt)+1);return Zt(Lt,En,0,En.length),En}(Et=Et.replace(/\0\0/g,"%")),Rn.length>_t?0:(function(Lt,En){b().set(Lt,En>>>0)}(Rn,pt),Rn.length-1)}on.fc();var ko=[null,$n,ws,Or,ss,os,is,as,ls,us,cs,ds,hs,fs,ps,bt,Pt,Nt,$t,Yt,Dt,vn,On,Qn,ur,Vs],Co={b:function(pt){return Ms(pt+24)+24},n:function(pt){return(pt=new ln(pt)).uc()||(pt.hc(!0),un--),pt.ic(!1),Ar.push(pt),pt.sc(),pt.vc()},ma:function(pt){throw vt("Unexpected exception thrown, this is not properly supported - aborting"),zt=!0,pt},x:function(){yn(0);var pt=Ar.pop();if(pt.Hc()&&!pt.kc()){var _t=pt.Dc();_t&&Sn(_t)(pt.Zb),ns(pt.Zb)}an=0},e:function(){var pt=an;if(!pt)return Gn=0;var _t=new ln(pt);_t.cc(pt);var Et=_t.bc();if(!Et)return Gn=0,pt;for(var kt=Array.prototype.slice.call(arguments),It=0;It<kt.length;It++){var jt=kt[It];if(jt===0||jt===Et)break;if(Ps(jt,Et,_t.Sb+16))return Gn=jt,pt}return Gn=Et,pt},l:function(){var pt=an;if(!pt)return Gn=0;var _t=new ln(pt);_t.cc(pt);var Et=_t.bc();if(!Et)return Gn=0,pt;for(var kt=Array.prototype.slice.call(arguments),It=0;It<kt.length;It++){var jt=kt[It];if(jt===0||jt===Et)break;if(Ps(jt,Et,_t.Sb+16))return Gn=jt,pt}return Gn=Et,pt},h:function(){var pt=an;if(!pt)return Gn=0;var _t=new ln(pt);_t.cc(pt);var Et=_t.bc();if(!Et)return Gn=0,pt;for(var kt=Array.prototype.slice.call(arguments),It=0;It<kt.length;It++){var jt=kt[It];if(jt===0||jt===Et)break;if(Ps(jt,Et,_t.Sb+16))return Gn=jt,pt}return Gn=Et,pt},t:ns,M:function(){var pt=Ar.pop();pt||bn("no exception to throw");var _t=pt.Zb;throw pt.kc()||(Ar.push(pt),pt.ic(!0),pt.hc(!1),un++),an=_t,_t},c:function(pt,_t,Et){throw new ln(pt).fc(_t,Et),an=pt,un++,pt},pa:function(){return un},Fa:function(pt){Xs(pt,!ft,1,!dt),on.pc()},T:function(pt){mt?postMessage({cmd:"cleanupThread",thread:pt}):$r(pt)},xa:rs,j:function(pt){throw an||(an=pt),pt},H:ss,Ma:os,ua:is,wa:as,oa:ls,Ka:us,Ca:cs,Ja:ds,V:hs,va:fs,sa:ps,La:bt,ta:Pt,Ta:function(){},X:function(){bn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){bn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(pt,_t,Et,kt){if(pt==_t)setTimeout(()=>Mt(kt));else if(mt)postMessage({targetThread:pt,cmd:"processProxyingQueue",queue:kt});else{if(!(pt=on.Vb[pt]))return;pt.postMessage({cmd:"processProxyingQueue",queue:kt})}return 1},Ea:function(){return-1},Pa:function(pt,_t){pt=new Date(1e3*Rt(pt)),nt()[_t>>2>>>0]=pt.getUTCSeconds(),nt()[_t+4>>2>>>0]=pt.getUTCMinutes(),nt()[_t+8>>2>>>0]=pt.getUTCHours(),nt()[_t+12>>2>>>0]=pt.getUTCDate(),nt()[_t+16>>2>>>0]=pt.getUTCMonth(),nt()[_t+20>>2>>>0]=pt.getUTCFullYear()-1900,nt()[_t+24>>2>>>0]=pt.getUTCDay(),pt=(pt.getTime()-Date.UTC(pt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,nt()[_t+28>>2>>>0]=pt},Qa:function(pt,_t){pt=new Date(1e3*Rt(pt)),nt()[_t>>2>>>0]=pt.getSeconds(),nt()[_t+4>>2>>>0]=pt.getMinutes(),nt()[_t+8>>2>>>0]=pt.getHours(),nt()[_t+12>>2>>>0]=pt.getDate(),nt()[_t+16>>2>>>0]=pt.getMonth(),nt()[_t+20>>2>>>0]=pt.getFullYear()-1900,nt()[_t+24>>2>>>0]=pt.getDay();var Et=new Date(pt.getFullYear(),0,1),kt=(pt.getTime()-Et.getTime())/864e5|0;nt()[_t+28>>2>>>0]=kt,nt()[_t+36>>2>>>0]=-60*pt.getTimezoneOffset(),kt=new Date(pt.getFullYear(),6,1).getTimezoneOffset(),pt=0|(kt!=(Et=Et.getTimezoneOffset())&&pt.getTimezoneOffset()==Math.min(Et,kt)),nt()[_t+32>>2>>>0]=pt},Ra:function(pt){var _t=new Date(nt()[pt+20>>2>>>0]+1900,nt()[pt+16>>2>>>0],nt()[pt+12>>2>>>0],nt()[pt+8>>2>>>0],nt()[pt+4>>2>>>0],nt()[pt>>2>>>0],0),Et=nt()[pt+32>>2>>>0],kt=_t.getTimezoneOffset(),It=new Date(_t.getFullYear(),0,1),jt=new Date(_t.getFullYear(),6,1).getTimezoneOffset(),Gt=It.getTimezoneOffset(),Xt=Math.min(Gt,jt);return 0>Et?nt()[pt+32>>2>>>0]=+(jt!=Gt&&Xt==kt):0<Et!=(Xt==kt)&&(jt=Math.max(Gt,jt),_t.setTime(_t.getTime()+6e4*((0<Et?Xt:jt)-kt))),nt()[pt+24>>2>>>0]=_t.getDay(),Et=(_t.getTime()-It.getTime())/864e5|0,nt()[pt+28>>2>>>0]=Et,nt()[pt>>2>>>0]=_t.getSeconds(),nt()[pt+4>>2>>>0]=_t.getMinutes(),nt()[pt+8>>2>>>0]=_t.getHours(),nt()[pt+12>>2>>>0]=_t.getDate(),nt()[pt+16>>2>>>0]=_t.getMonth(),_t.getTime()/1e3|0},Aa:Nt,Ba:$t,Sa:function pt(_t,Et,kt){pt.Ac||(pt.Ac=!0,Yt(_t,Et,kt))},y:function(){bn("")},U:function(){if(!ht&&!ft){var pt="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Pr||(Pr={}),Pr[pt]||(Pr[pt]=1,ht&&(pt="warning: "+pt),vt(pt))}},ra:function(){return 4294901760},B:ts,Ia:function(pt,_t,Et){$().copyWithin(pt>>>0,_t>>>0,_t+Et>>>0)},F:function(){return ht?i(3993).cpus().length:navigator.hardwareConcurrency},Da:function(pt,_t,Et){An.length=_t,Et>>=3;for(var kt=0;kt<_t;kt++)An[kt]=et()[Et+kt>>>0];return(0>pt?xs[-pt-1]:ko[pt]).apply(null,An)},qa:function(pt){var _t=$().length;if((pt>>>=0)<=_t||4294901760<pt)return!1;for(var Et=1;4>=Et;Et*=2){var kt=_t*(1+.2/Et);kt=Math.min(kt,pt+100663296);var It=Math;kt=Math.max(pt,kt),It=It.min.call(It,4294901760,kt+(65536-kt%65536)%65536);e:{try{At.grow(It-Bt.byteLength+65535>>>16),dn(At.buffer);var jt=1;break e}catch{}jt=void 0}if(jt)return!0}return!1},Na:function(){throw"unwind"},Ga:Dt,Ha:vn,J:Sr,I:On,S:Qn,ga:ur,R:Vs,d:function(){return Gn},na:function pt(_t,Et){pt.lc||(pt.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var It=new Uint8Array(1);return()=>(crypto.getRandomValues(It),It[0])}if(ht)try{var jt=i(Object(function(){var Gt=new Error("Cannot find module 'crypto'");throw Gt.code="MODULE_NOT_FOUND",Gt}()));return()=>jt.randomBytes(1)[0]}catch{}return()=>bn("randomDevice")}());for(var kt=0;kt<Et;kt++)b()[_t+kt>>0>>>0]=pt.lc();return 0},ia:function(pt,_t,Et){var kt=gn();try{return Sn(pt)(_t,Et)}catch(It){if(pn(kt),It!==It+0)throw It;yn(1,0)}},ja:function(pt,_t,Et){var kt=gn();try{return Sn(pt)(_t,Et)}catch(It){if(pn(kt),It!==It+0)throw It;yn(1,0)}},K:function(pt){var _t=gn();try{return Sn(pt)()}catch(Et){if(pn(_t),Et!==Et+0)throw Et;yn(1,0)}},f:function(pt,_t){var Et=gn();try{return Sn(pt)(_t)}catch(kt){if(pn(Et),kt!==kt+0)throw kt;yn(1,0)}},P:function(pt,_t,Et){var kt=gn();try{return Sn(pt)(_t,Et)}catch(It){if(pn(kt),It!==It+0)throw It;yn(1,0)}},Q:function(pt,_t,Et){var kt=gn();try{return Sn(pt)(_t,Et)}catch(It){if(pn(kt),It!==It+0)throw It;yn(1,0)}},k:function(pt,_t,Et){var kt=gn();try{return Sn(pt)(_t,Et)}catch(It){if(pn(kt),It!==It+0)throw It;yn(1,0)}},p:function(pt,_t,Et,kt){var It=gn();try{return Sn(pt)(_t,Et,kt)}catch(jt){if(pn(It),jt!==jt+0)throw jt;yn(1,0)}},q:function(pt,_t,Et,kt,It){var jt=gn();try{return Sn(pt)(_t,Et,kt,It)}catch(Gt){if(pn(jt),Gt!==Gt+0)throw Gt;yn(1,0)}},N:function(pt,_t,Et,kt,It,jt){var Gt=gn();try{return Sn(pt)(_t,Et,kt,It,jt)}catch(Xt){if(pn(Gt),Xt!==Xt+0)throw Xt;yn(1,0)}},s:function(pt,_t,Et,kt,It,jt){var Gt=gn();try{return Sn(pt)(_t,Et,kt,It,jt)}catch(Xt){if(pn(Gt),Xt!==Xt+0)throw Xt;yn(1,0)}},w:function(pt,_t,Et,kt,It,jt,Gt){var Xt=gn();try{return Sn(pt)(_t,Et,kt,It,jt,Gt)}catch(_n){if(pn(Xt),_n!==_n+0)throw _n;yn(1,0)}},L:function(pt,_t,Et,kt,It,jt,Gt,Xt){var _n=gn();try{return Sn(pt)(_t,Et,kt,It,jt,Gt,Xt)}catch(xn){if(pn(_n),xn!==xn+0)throw xn;yn(1,0)}},E:function(pt,_t,Et,kt,It,jt,Gt,Xt,_n,xn,Rn,nr){var Jn=gn();try{return Sn(pt)(_t,Et,kt,It,jt,Gt,Xt,_n,xn,Rn,nr)}catch(Lt){if(pn(Jn),Lt!==Lt+0)throw Lt;yn(1,0)}},aa:function(pt,_t,Et,kt,It,jt,Gt,Xt){var _n=gn();try{return co(pt,_t,Et,kt,It,jt,Gt,Xt)}catch(xn){if(pn(_n),xn!==xn+0)throw xn;yn(1,0)}},_:function(pt,_t,Et,kt,It,jt,Gt){var Xt=gn();try{return ro(pt,_t,Et,kt,It,jt,Gt)}catch(_n){if(pn(Xt),_n!==_n+0)throw _n;yn(1,0)}},Z:function(pt,_t,Et,kt,It){var jt=gn();try{return ho(pt,_t,Et,kt,It)}catch(Gt){if(pn(jt),Gt!==Gt+0)throw Gt;yn(1,0)}},ca:function(pt,_t,Et,kt){var It=gn();try{return lo(pt,_t,Et,kt)}catch(jt){if(pn(It),jt!==jt+0)throw jt;yn(1,0)}},$:function(pt){var _t=gn();try{return no(pt)}catch(Et){if(pn(_t),Et!==Et+0)throw Et;yn(1,0)}},ba:function(pt,_t){var Et=gn();try{return uo(pt,_t)}catch(kt){if(pn(Et),kt!==kt+0)throw kt;yn(1,0)}},Y:function(pt,_t,Et){var kt=gn();try{return so(pt,_t,Et)}catch(It){if(pn(kt),It!==It+0)throw It;yn(1,0)}},g:function(pt){var _t=gn();try{Sn(pt)()}catch(Et){if(pn(_t),Et!==Et+0)throw Et;yn(1,0)}},r:function(pt,_t){var Et=gn();try{Sn(pt)(_t)}catch(kt){if(pn(Et),kt!==kt+0)throw kt;yn(1,0)}},i:function(pt,_t,Et){var kt=gn();try{Sn(pt)(_t,Et)}catch(It){if(pn(kt),It!==It+0)throw It;yn(1,0)}},ha:function(pt,_t,Et,kt){var It=gn();try{Sn(pt)(_t,Et,kt)}catch(jt){if(pn(It),jt!==jt+0)throw jt;yn(1,0)}},m:function(pt,_t,Et,kt){var It=gn();try{Sn(pt)(_t,Et,kt)}catch(jt){if(pn(It),jt!==jt+0)throw jt;yn(1,0)}},v:function(pt,_t,Et,kt,It){var jt=gn();try{Sn(pt)(_t,Et,kt,It)}catch(Gt){if(pn(jt),Gt!==Gt+0)throw Gt;yn(1,0)}},u:function(pt,_t,Et,kt,It,jt){var Gt=gn();try{Sn(pt)(_t,Et,kt,It,jt)}catch(Xt){if(pn(Gt),Xt!==Xt+0)throw Xt;yn(1,0)}},O:function(pt,_t,Et,kt,It,jt,Gt){var Xt=gn();try{Sn(pt)(_t,Et,kt,It,jt,Gt)}catch(_n){if(pn(Xt),_n!==_n+0)throw _n;yn(1,0)}},A:function(pt,_t,Et,kt,It,jt,Gt,Xt){var _n=gn();try{Sn(pt)(_t,Et,kt,It,jt,Gt,Xt)}catch(xn){if(pn(_n),xn!==xn+0)throw xn;yn(1,0)}},ka:function(pt,_t,Et,kt,It,jt,Gt,Xt,_n){var xn=gn();try{Sn(pt)(_t,Et,kt,It,jt,Gt,Xt,_n)}catch(Rn){if(pn(xn),Rn!==Rn+0)throw Rn;yn(1,0)}},C:function(pt,_t,Et,kt,It,jt,Gt,Xt,_n,xn,Rn){var nr=gn();try{Sn(pt)(_t,Et,kt,It,jt,Gt,Xt,_n,xn,Rn)}catch(Jn){if(pn(nr),Jn!==Jn+0)throw Jn;yn(1,0)}},D:function(pt,_t,Et,kt,It,jt,Gt,Xt,_n,xn,Rn,nr,Jn,Lt,En,Cn){var cr=gn();try{Sn(pt)(_t,Et,kt,It,jt,Gt,Xt,_n,xn,Rn,nr,Jn,Lt,En,Cn)}catch(Br){if(pn(cr),Br!==Br+0)throw Br;yn(1,0)}},fa:function(pt,_t,Et,kt,It,jt,Gt,Xt){var _n=gn();try{oo(pt,_t,Et,kt,It,jt,Gt,Xt)}catch(xn){if(pn(_n),xn!==xn+0)throw xn;yn(1,0)}},da:function(pt,_t,Et,kt,It,jt,Gt,Xt,_n,xn,Rn,nr){var Jn=gn();try{ao(pt,_t,Et,kt,It,jt,Gt,Xt,_n,xn,Rn,nr)}catch(Lt){if(pn(Jn),Lt!==Lt+0)throw Lt;yn(1,0)}},ea:function(pt,_t,Et,kt,It,jt){var Gt=gn();try{io(pt,_t,Et,kt,It,jt)}catch(Xt){if(pn(Gt),Xt!==Xt+0)throw Xt;yn(1,0)}},o:function(pt){return pt},a:At||g.wasmMemory,G:function(pt){Gn=pt},la:Hs,z:function(pt,_t,Et,kt){return Hs(pt,_t,Et,kt)}};(function(){function pt(It,jt){g.asm=It.exports,on.qc.push(g.asm.sb),Mn=g.asm.ub,jn.unshift(g.asm.Va),Ft=jt,mt||(Vn--,g.monitorRunDependencies&&g.monitorRunDependencies(Vn),Vn==0&&tr&&(It=tr,tr=null,It()))}function _t(It){pt(It.instance,It.module)}function Et(It){return function(){if(!wt&&(dt||ft)){if(typeof fetch=="function"&&!kn.startsWith("file://"))return fetch(kn,{credentials:"same-origin"}).then(function(jt){if(!jt.ok)throw"failed to load wasm binary file at '"+kn+"'";return jt.arrayBuffer()}).catch(function(){return Lr()});if(rt)return new Promise(function(jt,Gt){rt(kn,function(Xt){jt(new Uint8Array(Xt))},Gt)})}return Promise.resolve().then(function(){return Lr()})}().then(function(jt){return WebAssembly.instantiate(jt,kt)}).then(function(jt){return jt}).then(It,function(jt){vt("failed to asynchronously prepare wasm: "+jt),bn(jt)})}var kt={a:Co};if(mt||(Vn++,g.monitorRunDependencies&&g.monitorRunDependencies(Vn)),g.instantiateWasm)try{return g.instantiateWasm(kt,pt)}catch(It){return vt("Module.instantiateWasm callback failed with error: "+It),!1}(wt||typeof WebAssembly.instantiateStreaming!="function"||es()||kn.startsWith("file://")||ht||typeof fetch!="function"?Et(_t):fetch(kn,{credentials:"same-origin"}).then(function(It){return WebAssembly.instantiateStreaming(It,kt).then(_t,function(jt){return vt("wasm streaming compile failed: "+jt),vt("falling back to ArrayBuffer instantiation"),Et(_t)})})).catch(j)})(),g.___wasm_call_ctors=function(){return(g.___wasm_call_ctors=g.asm.Va).apply(null,arguments)},g._OrtInit=function(){return(g._OrtInit=g.asm.Wa).apply(null,arguments)},g._OrtCreateSessionOptions=function(){return(g._OrtCreateSessionOptions=g.asm.Xa).apply(null,arguments)},g._OrtAppendExecutionProvider=function(){return(g._OrtAppendExecutionProvider=g.asm.Ya).apply(null,arguments)},g._OrtAddSessionConfigEntry=function(){return(g._OrtAddSessionConfigEntry=g.asm.Za).apply(null,arguments)},g._OrtReleaseSessionOptions=function(){return(g._OrtReleaseSessionOptions=g.asm._a).apply(null,arguments)},g._OrtCreateSession=function(){return(g._OrtCreateSession=g.asm.$a).apply(null,arguments)},g._OrtReleaseSession=function(){return(g._OrtReleaseSession=g.asm.ab).apply(null,arguments)},g._OrtGetInputCount=function(){return(g._OrtGetInputCount=g.asm.bb).apply(null,arguments)},g._OrtGetOutputCount=function(){return(g._OrtGetOutputCount=g.asm.cb).apply(null,arguments)},g._OrtGetInputName=function(){return(g._OrtGetInputName=g.asm.db).apply(null,arguments)},g._OrtGetOutputName=function(){return(g._OrtGetOutputName=g.asm.eb).apply(null,arguments)},g._OrtFree=function(){return(g._OrtFree=g.asm.fb).apply(null,arguments)},g._OrtCreateTensor=function(){return(g._OrtCreateTensor=g.asm.gb).apply(null,arguments)},g._OrtGetTensorData=function(){return(g._OrtGetTensorData=g.asm.hb).apply(null,arguments)},g._OrtReleaseTensor=function(){return(g._OrtReleaseTensor=g.asm.ib).apply(null,arguments)},g._OrtCreateRunOptions=function(){return(g._OrtCreateRunOptions=g.asm.jb).apply(null,arguments)},g._OrtAddRunConfigEntry=function(){return(g._OrtAddRunConfigEntry=g.asm.kb).apply(null,arguments)},g._OrtReleaseRunOptions=function(){return(g._OrtReleaseRunOptions=g.asm.lb).apply(null,arguments)},g._OrtRun=function(){return(g._OrtRun=g.asm.mb).apply(null,arguments)},g._OrtEndProfiling=function(){return(g._OrtEndProfiling=g.asm.nb).apply(null,arguments)};var Ts=g._pthread_self=function(){return(Ts=g._pthread_self=g.asm.ob).apply(null,arguments)},Ms=g._malloc=function(){return(Ms=g._malloc=g.asm.pb).apply(null,arguments)},qs=g._free=function(){return(qs=g._free=g.asm.qb).apply(null,arguments)},Ks=g._fflush=function(){return(Ks=g._fflush=g.asm.rb).apply(null,arguments)};g.__emscripten_tls_init=function(){return(g.__emscripten_tls_init=g.asm.sb).apply(null,arguments)};var Ys=g.___funcs_on_exit=function(){return(Ys=g.___funcs_on_exit=g.asm.tb).apply(null,arguments)},Xs=g.__emscripten_thread_init=function(){return(Xs=g.__emscripten_thread_init=g.asm.vb).apply(null,arguments)};g.__emscripten_thread_crashed=function(){return(g.__emscripten_thread_crashed=g.asm.wb).apply(null,arguments)};var Ss,Qs=g._emscripten_run_in_main_runtime_thread_js=function(){return(Qs=g._emscripten_run_in_main_runtime_thread_js=g.asm.xb).apply(null,arguments)},Js=g.__emscripten_proxy_execute_task_queue=function(){return(Js=g.__emscripten_proxy_execute_task_queue=g.asm.yb).apply(null,arguments)},Rs=g.__emscripten_thread_free_data=function(){return(Rs=g.__emscripten_thread_free_data=g.asm.zb).apply(null,arguments)},Zs=g.__emscripten_thread_exit=function(){return(Zs=g.__emscripten_thread_exit=g.asm.Ab).apply(null,arguments)},yn=g._setThrew=function(){return(yn=g._setThrew=g.asm.Bb).apply(null,arguments)},eo=g._emscripten_stack_set_limits=function(){return(eo=g._emscripten_stack_set_limits=g.asm.Cb).apply(null,arguments)},gn=g.stackSave=function(){return(gn=g.stackSave=g.asm.Db).apply(null,arguments)},pn=g.stackRestore=function(){return(pn=g.stackRestore=g.asm.Eb).apply(null,arguments)},Is=g.stackAlloc=function(){return(Is=g.stackAlloc=g.asm.Fb).apply(null,arguments)},Ps=g.___cxa_can_catch=function(){return(Ps=g.___cxa_can_catch=g.asm.Gb).apply(null,arguments)},to=g.___cxa_is_pointer_type=function(){return(to=g.___cxa_is_pointer_type=g.asm.Hb).apply(null,arguments)},no=g.dynCall_j=function(){return(no=g.dynCall_j=g.asm.Ib).apply(null,arguments)},ro=g.dynCall_iiiiij=function(){return(ro=g.dynCall_iiiiij=g.asm.Jb).apply(null,arguments)},so=g.dynCall_jii=function(){return(so=g.dynCall_jii=g.asm.Kb).apply(null,arguments)},oo=g.dynCall_viiiiij=function(){return(oo=g.dynCall_viiiiij=g.asm.Lb).apply(null,arguments)},io=g.dynCall_vjji=function(){return(io=g.dynCall_vjji=g.asm.Mb).apply(null,arguments)},ao=g.dynCall_viiijjjii=function(){return(ao=g.dynCall_viiijjjii=g.asm.Nb).apply(null,arguments)},lo=g.dynCall_iij=function(){return(lo=g.dynCall_iij=g.asm.Ob).apply(null,arguments)},uo=g.dynCall_ji=function(){return(uo=g.dynCall_ji=g.asm.Pb).apply(null,arguments)},co=g.dynCall_iiiiiij=function(){return(co=g.dynCall_iiiiiij=g.asm.Qb).apply(null,arguments)},ho=g.dynCall_iiij=function(){return(ho=g.dynCall_iiij=g.asm.Rb).apply(null,arguments)};function fo(){function pt(){if(!Ss&&(Ss=!0,g.calledRun=!0,!zt)&&(mt||pr(jn),c(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),!mt)){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;){var _t=g.postRun.shift();zn.unshift(_t)}pr(zn)}}if(!(0<Vn))if(mt)c(g),mt||pr(jn),postMessage({cmd:"loaded"});else{if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)qn();pr(Nn),0<Vn||(g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1),pt()},1)):pt())}}if(g.UTF8ToString=Qt,g.stringToUTF8=function(pt,_t,Et){return Zt(pt,$(),_t,Et)},g.lengthBytesUTF8=en,g.keepRuntimeAlive=Xn,g.wasmMemory=At,g.stackSave=gn,g.stackRestore=pn,g.stackAlloc=Is,g.ExitStatus=ar,g.PThread=on,tr=function pt(){Ss||fo(),Ss||(tr=pt)},g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();return fo(),_.ready});o.exports=d},932:(o,s,i)=>{var a,d=(a=(a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(_){var b,$,nt;_=_||{},b||(b=_!==void 0?_:{}),b.ready=new Promise(function(bt,Pt){$=bt,nt=Pt});var tt,et,g,c,j,_e,rt=Object.assign({},b),st="./this.program",ot=(bt,Pt)=>{throw Pt},it=typeof window=="object",at=typeof importScripts=="function",lt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ut="";lt?(ut=at?i(908).dirname(ut)+"/":"//",_e=()=>{j||(c=i(1384),j=i(908))},tt=function(bt,Pt){return _e(),bt=j.normalize(bt),c.readFileSync(bt,Pt?void 0:"utf8")},g=bt=>((bt=tt(bt,!0)).buffer||(bt=new Uint8Array(bt)),bt),et=(bt,Pt,Mt)=>{_e(),bt=j.normalize(bt),c.readFile(bt,function(Rt,Nt){Rt?Mt(Rt):Pt(Nt.buffer)})},1<process.argv.length&&(st=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(bt){if(!(bt instanceof jn))throw bt}),process.on("unhandledRejection",function(bt){throw bt}),ot=(bt,Pt)=>{if(ht||0<nn)throw process.exitCode=bt,Pt;Pt instanceof jn||ft("exiting due to exception: "+Pt),process.exit(bt)},b.inspect=function(){return"[Emscripten Module object]"}):(it||at)&&(at?ut=self.location.href:typeof document<"u"&&document.currentScript&&(ut=document.currentScript.src),a&&(ut=a),ut=ut.indexOf("blob:")!==0?ut.substr(0,ut.replace(/[?#].*/,"").lastIndexOf("/")+1):"",tt=bt=>{var Pt=new XMLHttpRequest;return Pt.open("GET",bt,!1),Pt.send(null),Pt.responseText},at&&(g=bt=>{var Pt=new XMLHttpRequest;return Pt.open("GET",bt,!1),Pt.responseType="arraybuffer",Pt.send(null),new Uint8Array(Pt.response)}),et=(bt,Pt,Mt)=>{var Rt=new XMLHttpRequest;Rt.open("GET",bt,!0),Rt.responseType="arraybuffer",Rt.onload=()=>{Rt.status==200||Rt.status==0&&Rt.response?Pt(Rt.response):Mt()},Rt.onerror=Mt,Rt.send(null)});var ct,dt=b.print||console.log.bind(console),ft=b.printErr||console.warn.bind(console);Object.assign(b,rt),rt=null,b.thisProgram&&(st=b.thisProgram),b.quit&&(ot=b.quit),b.wasmBinary&&(ct=b.wasmBinary);var ht=b.noExitRuntime||!1;typeof WebAssembly!="object"&&dn("no native wasm support detected");var mt,yt,Tt,St,xt,wt,gt=!1,vt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ot(bt,Pt,Mt){var Rt=(Pt>>>=0)+Mt;for(Mt=Pt;bt[Mt]&&!(Mt>=Rt);)++Mt;if(16<Mt-Pt&&bt.buffer&&vt)return vt.decode(bt.subarray(Pt,Mt));for(Rt="";Pt<Mt;){var Nt=bt[Pt++];if(128&Nt){var $t=63&bt[Pt++];if((224&Nt)==192)Rt+=String.fromCharCode((31&Nt)<<6|$t);else{var Vt=63&bt[Pt++];65536>(Nt=(240&Nt)==224?(15&Nt)<<12|$t<<6|Vt:(7&Nt)<<18|$t<<12|Vt<<6|63&bt[Pt++])?Rt+=String.fromCharCode(Nt):(Nt-=65536,Rt+=String.fromCharCode(55296|Nt>>10,56320|1023&Nt))}}else Rt+=String.fromCharCode(Nt)}return Rt}function At(bt,Pt){return(bt>>>=0)?Ot(St,bt,Pt):""}function Ft(bt,Pt,Mt,Rt){if(!(0<Rt))return 0;var Nt=Mt>>>=0;Rt=Mt+Rt-1;for(var $t=0;$t<bt.length;++$t){var Vt=bt.charCodeAt($t);if(55296<=Vt&&57343>=Vt&&(Vt=65536+((1023&Vt)<<10)|1023&bt.charCodeAt(++$t)),127>=Vt){if(Mt>=Rt)break;Pt[Mt++>>>0]=Vt}else{if(2047>=Vt){if(Mt+1>=Rt)break;Pt[Mt++>>>0]=192|Vt>>6}else{if(65535>=Vt){if(Mt+2>=Rt)break;Pt[Mt++>>>0]=224|Vt>>12}else{if(Mt+3>=Rt)break;Pt[Mt++>>>0]=240|Vt>>18,Pt[Mt++>>>0]=128|Vt>>12&63}Pt[Mt++>>>0]=128|Vt>>6&63}Pt[Mt++>>>0]=128|63&Vt}}return Pt[Mt>>>0]=0,Mt-Nt}function Bt(bt){for(var Pt=0,Mt=0;Mt<bt.length;++Mt){var Rt=bt.charCodeAt(Mt);127>=Rt?Pt++:2047>=Rt?Pt+=2:55296<=Rt&&57343>=Rt?(Pt+=4,++Mt):Pt+=3}return Pt}function Wt(){var bt=mt.buffer;yt=bt,b.HEAP8=Tt=new Int8Array(bt),b.HEAP16=new Int16Array(bt),b.HEAP32=xt=new Int32Array(bt),b.HEAPU8=St=new Uint8Array(bt),b.HEAPU16=new Uint16Array(bt),b.HEAPU32=wt=new Uint32Array(bt),b.HEAPF32=new Float32Array(bt),b.HEAPF64=new Float64Array(bt)}var sn,Jt=[],Kt=[],rn=[],zt=[],nn=0;function wn(){var bt=b.preRun.shift();Jt.unshift(bt)}var Qt,Zt=0,en=null;function dn(bt){throw b.onAbort&&b.onAbort(bt),ft(bt="Aborted("+bt+")"),gt=!0,bt=new WebAssembly.RuntimeError(bt+". Build with -sASSERTIONS for more info."),nt(bt),bt}function hn(){return Qt.startsWith("data:application/octet-stream;base64,")}if(Qt="ort-wasm.wasm",!hn()){var Mn=Qt;Qt=b.locateFile?b.locateFile(Mn,ut):ut+Mn}function Nn(){var bt=Qt;try{if(bt==Qt&&ct)return new Uint8Array(ct);if(g)return g(bt);throw"both async and sync fetching of the wasm failed"}catch(Pt){dn(Pt)}}function jn(bt){this.name="ExitStatus",this.message="Program terminated with exit("+bt+")",this.status=bt}function Yn(bt){for(;0<bt.length;)bt.shift()(b)}var zn=[],Xn=0,qn=0;function kn(bt){this.Db=bt,this.zb=bt-24,this.Ub=function(Pt){wt[this.zb+4>>2>>>0]=Pt},this.Eb=function(){return wt[this.zb+4>>2>>>0]},this.Sb=function(Pt){wt[this.zb+8>>2>>>0]=Pt},this.Wb=function(){return wt[this.zb+8>>2>>>0]},this.Tb=function(){xt[this.zb>>2>>>0]=0},this.Ib=function(Pt){Tt[this.zb+12>>0>>>0]=Pt?1:0},this.Pb=function(){return Tt[this.zb+12>>0>>>0]!=0},this.Jb=function(Pt){Tt[this.zb+13>>0>>>0]=Pt?1:0},this.Lb=function(){return Tt[this.zb+13>>0>>>0]!=0},this.Rb=function(Pt,Mt){this.Fb(0),this.Ub(Pt),this.Sb(Mt),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){xt[this.zb>>2>>>0]+=1},this.Xb=function(){var Pt=xt[this.zb>>2>>>0];return xt[this.zb>>2>>>0]=Pt-1,Pt===1},this.Fb=function(Pt){wt[this.zb+16>>2>>>0]=Pt},this.Ob=function(){return wt[this.zb+16>>2>>>0]},this.Qb=function(){if(rs(this.Eb()))return wt[this.Db>>2>>>0];var Pt=this.Ob();return Pt!==0?Pt:this.Db}}function Vn(bt){return Pr(new kn(bt).zb)}var tr=[];function bn(bt){var Pt=tr[bt];return Pt||(bt>=tr.length&&(tr.length=bt+1),tr[bt]=Pt=sn.get(bt)),Pt}function es(bt){var Pt=Bt(bt)+1,Mt=Sn(Pt);return Mt&&Ft(bt,Tt,Mt,Pt),Mt}var Lr={};function xs(){if(!ar){var bt,Pt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:st||"./this.program"};for(bt in Lr)Lr[bt]===void 0?delete Pt[bt]:Pt[bt]=Lr[bt];var Mt=[];for(bt in Pt)Mt.push(bt+"="+Pt[bt]);ar=Mt}return ar}var ar,$r=[null,[],[]];function Fr(bt,Pt){var Mt=$r[bt];Pt===0||Pt===10?((bt===1?dt:ft)(Ot(Mt,0)),Mt.length=0):Mt.push(Pt)}var $n=0;function Sr(bt){return bt%4==0&&(bt%100!=0||bt%400==0)}var on=[31,29,31,30,31,30,31,31,30,31,30,31],pr=[31,28,31,30,31,30,31,31,30,31,30,31];function vs(bt,Pt,Mt,Rt){function Nt(Dt,vn,On){for(Dt=typeof Dt=="number"?Dt.toString():Dt||"";Dt.length<vn;)Dt=On[0]+Dt;return Dt}function $t(Dt,vn){return Nt(Dt,vn,"0")}function Vt(Dt,vn){function On(ur){return 0>ur?-1:0<ur?1:0}var Qn;return(Qn=On(Dt.getFullYear()-vn.getFullYear()))===0&&(Qn=On(Dt.getMonth()-vn.getMonth()))===0&&(Qn=On(Dt.getDate()-vn.getDate())),Qn}function Yt(Dt){switch(Dt.getDay()){case 0:return new Date(Dt.getFullYear()-1,11,29);case 1:return Dt;case 2:return new Date(Dt.getFullYear(),0,3);case 3:return new Date(Dt.getFullYear(),0,2);case 4:return new Date(Dt.getFullYear(),0,1);case 5:return new Date(Dt.getFullYear()-1,11,31);case 6:return new Date(Dt.getFullYear()-1,11,30)}}function Ht(Dt){var vn=Dt.Bb;for(Dt=new Date(new Date(Dt.Cb+1900,0,1).getTime());0<vn;){var On=Dt.getMonth(),Qn=(Sr(Dt.getFullYear())?on:pr)[On];if(!(vn>Qn-Dt.getDate())){Dt.setDate(Dt.getDate()+vn);break}vn-=Qn-Dt.getDate()+1,Dt.setDate(1),11>On?Dt.setMonth(On+1):(Dt.setMonth(0),Dt.setFullYear(Dt.getFullYear()+1))}return On=new Date(Dt.getFullYear()+1,0,4),vn=Yt(new Date(Dt.getFullYear(),0,4)),On=Yt(On),0>=Vt(vn,Dt)?0>=Vt(On,Dt)?Dt.getFullYear()+1:Dt.getFullYear():Dt.getFullYear()-1}var fn=xt[Rt+40>>2>>>0];for(var An in Rt={$b:xt[Rt>>2>>>0],Zb:xt[Rt+4>>2>>>0],Gb:xt[Rt+8>>2>>>0],Kb:xt[Rt+12>>2>>>0],Hb:xt[Rt+16>>2>>>0],Cb:xt[Rt+20>>2>>>0],Ab:xt[Rt+24>>2>>>0],Bb:xt[Rt+28>>2>>>0],bc:xt[Rt+32>>2>>>0],Yb:xt[Rt+36>>2>>>0],ac:fn?At(fn):""},Mt=At(Mt),fn={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Mt=Mt.replace(new RegExp(An,"g"),fn[An]);var Ln="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Dn="January February March April May June July August September October November December".split(" ");for(An in fn={"%a":function(Dt){return Ln[Dt.Ab].substring(0,3)},"%A":function(Dt){return Ln[Dt.Ab]},"%b":function(Dt){return Dn[Dt.Hb].substring(0,3)},"%B":function(Dt){return Dn[Dt.Hb]},"%C":function(Dt){return $t((Dt.Cb+1900)/100|0,2)},"%d":function(Dt){return $t(Dt.Kb,2)},"%e":function(Dt){return Nt(Dt.Kb,2," ")},"%g":function(Dt){return Ht(Dt).toString().substring(2)},"%G":function(Dt){return Ht(Dt)},"%H":function(Dt){return $t(Dt.Gb,2)},"%I":function(Dt){return(Dt=Dt.Gb)==0?Dt=12:12<Dt&&(Dt-=12),$t(Dt,2)},"%j":function(Dt){for(var vn=0,On=0;On<=Dt.Hb-1;vn+=(Sr(Dt.Cb+1900)?on:pr)[On++]);return $t(Dt.Kb+vn,3)},"%m":function(Dt){return $t(Dt.Hb+1,2)},"%M":function(Dt){return $t(Dt.Zb,2)},"%n":function(){return`
`},"%p":function(Dt){return 0<=Dt.Gb&&12>Dt.Gb?"AM":"PM"},"%S":function(Dt){return $t(Dt.$b,2)},"%t":function(){return"	"},"%u":function(Dt){return Dt.Ab||7},"%U":function(Dt){return $t(Math.floor((Dt.Bb+7-Dt.Ab)/7),2)},"%V":function(Dt){var vn=Math.floor((Dt.Bb+7-(Dt.Ab+6)%7)/7);if(2>=(Dt.Ab+371-Dt.Bb-2)%7&&vn++,vn)vn==53&&((On=(Dt.Ab+371-Dt.Bb)%7)==4||On==3&&Sr(Dt.Cb)||(vn=1));else{vn=52;var On=(Dt.Ab+7-Dt.Bb-1)%7;(On==4||On==5&&Sr(Dt.Cb%400-1))&&vn++}return $t(vn,2)},"%w":function(Dt){return Dt.Ab},"%W":function(Dt){return $t(Math.floor((Dt.Bb+7-(Dt.Ab+6)%7)/7),2)},"%y":function(Dt){return(Dt.Cb+1900).toString().substring(2)},"%Y":function(Dt){return Dt.Cb+1900},"%z":function(Dt){var vn=0<=(Dt=Dt.Yb);return Dt=Math.abs(Dt)/60,(vn?"+":"-")+("0000"+(Dt/60*100+Dt%60)).slice(-4)},"%Z":function(Dt){return Dt.ac},"%%":function(){return"%"}},Mt=Mt.replace(/%%/g,"\0\0"),fn)Mt.includes(An)&&(Mt=Mt.replace(new RegExp(An,"g"),fn[An](Rt)));return An=function(Dt){var vn=Array(Bt(Dt)+1);return Ft(Dt,vn,0,vn.length),vn}(Mt=Mt.replace(/\0\0/g,"%")),An.length>Pt?0:(Tt.set(An,bt>>>0),An.length-1)}var ws={a:function(bt){return Sn(bt+24)+24},m:function(bt){return(bt=new kn(bt)).Pb()||(bt.Ib(!0),Xn--),bt.Jb(!1),zn.push(bt),bt.Nb(),bt.Qb()},ia:function(bt){throw ft("Unexpected exception thrown, this is not properly supported - aborting"),gt=!0,bt},w:function(){un(0);var bt=zn.pop();if(bt.Xb()&&!bt.Lb()){var Pt=bt.Wb();Pt&&bn(Pt)(bt.Db),Vn(bt.Db)}qn=0},d:function(){var bt=qn;if(!bt)return $n=0;var Pt=new kn(bt);Pt.Fb(bt);var Mt=Pt.Eb();if(!Mt)return $n=0,bt;for(var Rt=Array.prototype.slice.call(arguments),Nt=0;Nt<Rt.length;Nt++){var $t=Rt[Nt];if($t===0||$t===Mt)break;if(Or($t,Mt,Pt.zb+16))return $n=$t,bt}return $n=Mt,bt},k:function(){var bt=qn;if(!bt)return $n=0;var Pt=new kn(bt);Pt.Fb(bt);var Mt=Pt.Eb();if(!Mt)return $n=0,bt;for(var Rt=Array.prototype.slice.call(arguments),Nt=0;Nt<Rt.length;Nt++){var $t=Rt[Nt];if($t===0||$t===Mt)break;if(Or($t,Mt,Pt.zb+16))return $n=$t,bt}return $n=Mt,bt},g:function(){var bt=qn;if(!bt)return $n=0;var Pt=new kn(bt);Pt.Fb(bt);var Mt=Pt.Eb();if(!Mt)return $n=0,bt;for(var Rt=Array.prototype.slice.call(arguments),Nt=0;Nt<Rt.length;Nt++){var $t=Rt[Nt];if($t===0||$t===Mt)break;if(Or($t,Mt,Pt.zb+16))return $n=$t,bt}return $n=Mt,bt},s:Vn,L:function(){var bt=zn.pop();bt||dn("no exception to throw");var Pt=bt.Db;throw bt.Lb()||(zn.push(bt),bt.Jb(!0),bt.Ib(!1),Xn++),qn=Pt,Pt},b:function(bt,Pt,Mt){throw new kn(bt).Rb(Pt,Mt),qn=bt,Xn++,bt},la:function(){return Xn},i:function(bt){throw qn||(qn=bt),bt},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){dn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){dn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(bt,Pt){bt=new Date(1e3*(wt[bt>>>2]+4294967296*xt[bt+4>>>2])),xt[Pt>>2>>>0]=bt.getUTCSeconds(),xt[Pt+4>>2>>>0]=bt.getUTCMinutes(),xt[Pt+8>>2>>>0]=bt.getUTCHours(),xt[Pt+12>>2>>>0]=bt.getUTCDate(),xt[Pt+16>>2>>>0]=bt.getUTCMonth(),xt[Pt+20>>2>>>0]=bt.getUTCFullYear()-1900,xt[Pt+24>>2>>>0]=bt.getUTCDay(),xt[Pt+28>>2>>>0]=(bt.getTime()-Date.UTC(bt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(bt,Pt){bt=new Date(1e3*(wt[bt>>>2]+4294967296*xt[bt+4>>>2])),xt[Pt>>2>>>0]=bt.getSeconds(),xt[Pt+4>>2>>>0]=bt.getMinutes(),xt[Pt+8>>2>>>0]=bt.getHours(),xt[Pt+12>>2>>>0]=bt.getDate(),xt[Pt+16>>2>>>0]=bt.getMonth(),xt[Pt+20>>2>>>0]=bt.getFullYear()-1900,xt[Pt+24>>2>>>0]=bt.getDay();var Mt=new Date(bt.getFullYear(),0,1);xt[Pt+28>>2>>>0]=(bt.getTime()-Mt.getTime())/864e5|0,xt[Pt+36>>2>>>0]=-60*bt.getTimezoneOffset();var Rt=new Date(bt.getFullYear(),6,1).getTimezoneOffset();Mt=Mt.getTimezoneOffset(),xt[Pt+32>>2>>>0]=0|(Rt!=Mt&&bt.getTimezoneOffset()==Math.min(Mt,Rt))},Fa:function(bt){var Pt=new Date(xt[bt+20>>2>>>0]+1900,xt[bt+16>>2>>>0],xt[bt+12>>2>>>0],xt[bt+8>>2>>>0],xt[bt+4>>2>>>0],xt[bt>>2>>>0],0),Mt=xt[bt+32>>2>>>0],Rt=Pt.getTimezoneOffset(),Nt=new Date(Pt.getFullYear(),0,1),$t=new Date(Pt.getFullYear(),6,1).getTimezoneOffset(),Vt=Nt.getTimezoneOffset(),Yt=Math.min(Vt,$t);return 0>Mt?xt[bt+32>>2>>>0]=+($t!=Vt&&Yt==Rt):0<Mt!=(Yt==Rt)&&($t=Math.max(Vt,$t),Pt.setTime(Pt.getTime()+6e4*((0<Mt?Yt:$t)-Rt))),xt[bt+24>>2>>>0]=Pt.getDay(),xt[bt+28>>2>>>0]=(Pt.getTime()-Nt.getTime())/864e5|0,xt[bt>>2>>>0]=Pt.getSeconds(),xt[bt+4>>2>>>0]=Pt.getMinutes(),xt[bt+8>>2>>>0]=Pt.getHours(),xt[bt+12>>2>>>0]=Pt.getDate(),xt[bt+16>>2>>>0]=Pt.getMonth(),Pt.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function bt(Pt,Mt,Rt){bt.Vb||(bt.Vb=!0,function(Nt,$t,Vt){function Yt(Dn){return(Dn=Dn.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Dn[1]:"GMT"}var Ht=new Date().getFullYear(),fn=new Date(Ht,0,1),An=new Date(Ht,6,1);Ht=fn.getTimezoneOffset();var Ln=An.getTimezoneOffset();xt[Nt>>2>>>0]=60*Math.max(Ht,Ln),xt[$t>>2>>>0]=+(Ht!=Ln),Nt=Yt(fn),$t=Yt(An),Nt=es(Nt),$t=es($t),Ln<Ht?(wt[Vt>>2>>>0]=Nt,wt[Vt+4>>2>>>0]=$t):(wt[Vt>>2>>>0]=$t,wt[Vt+4>>2>>>0]=Nt)}(Pt,Mt,Rt))},B:function(){dn("")},ma:function(){return 4294901760},I:lt?()=>{var bt=process.hrtime();return 1e3*bt[0]+bt[1]/1e6}:()=>performance.now(),xa:function(bt,Pt,Mt){St.copyWithin(bt>>>0,Pt>>>0,Pt+Mt>>>0)},G:function(bt){var Pt=St.length;if(4294901760<(bt>>>=0))return!1;for(var Mt=1;4>=Mt;Mt*=2){var Rt=Pt*(1+.2/Mt);Rt=Math.min(Rt,bt+100663296);var Nt=Math;Rt=Math.max(bt,Rt),Nt=Nt.min.call(Nt,4294901760,Rt+(65536-Rt%65536)%65536);e:{try{mt.grow(Nt-yt.byteLength+65535>>>16),Wt();var $t=1;break e}catch{}$t=void 0}if($t)return!0}return!1},va:function(bt,Pt){var Mt=0;return xs().forEach(function(Rt,Nt){var $t=Pt+Mt;for(Nt=wt[bt+4*Nt>>2>>>0]=$t,$t=0;$t<Rt.length;++$t)Tt[Nt++>>0>>>0]=Rt.charCodeAt($t);Tt[Nt>>0>>>0]=0,Mt+=Rt.length+1}),0},wa:function(bt,Pt){var Mt=xs();wt[bt>>2>>>0]=Mt.length;var Rt=0;return Mt.forEach(function(Nt){Rt+=Nt.length+1}),wt[Pt>>2>>>0]=Rt,0},ba:function(bt){ht||0<nn||(Ar(),Yn(rn),ts(0),$r[1].length&&Fr(1,10),$r[2].length&&Fr(2,10)),ht||0<nn||(b.onExit&&b.onExit(bt),gt=!0),ot(bt,new jn(bt))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(bt,Pt,Mt,Rt){for(var Nt=0,$t=0;$t<Mt;$t++){var Vt=wt[Pt>>2>>>0],Yt=wt[Pt+4>>2>>>0];Pt+=8;for(var Ht=0;Ht<Yt;Ht++)Fr(bt,St[Vt+Ht>>>0]);Nt+=Yt}return wt[Rt>>2>>>0]=Nt,0},c:function(){return $n},ja:function bt(Pt,Mt){bt.Mb||(bt.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Nt=new Uint8Array(1);return()=>(crypto.getRandomValues(Nt),Nt[0])}if(lt)try{var $t=i(Object(function(){var Vt=new Error("Cannot find module 'crypto'");throw Vt.code="MODULE_NOT_FOUND",Vt}()));return()=>$t.randomBytes(1)[0]}catch{}return()=>dn("randomDevice")}());for(var Rt=0;Rt<Mt;Rt++)Tt[Pt+Rt>>0>>>0]=bt.Mb();return 0},ea:function(bt,Pt,Mt){var Rt=an();try{return bn(bt)(Pt,Mt)}catch(Nt){if(ln(Rt),Nt!==Nt+0)throw Nt;un(1,0)}},fa:function(bt,Pt,Mt){var Rt=an();try{return bn(bt)(Pt,Mt)}catch(Nt){if(ln(Rt),Nt!==Nt+0)throw Nt;un(1,0)}},J:function(bt){var Pt=an();try{return bn(bt)()}catch(Mt){if(ln(Pt),Mt!==Mt+0)throw Mt;un(1,0)}},e:function(bt,Pt){var Mt=an();try{return bn(bt)(Pt)}catch(Rt){if(ln(Mt),Rt!==Rt+0)throw Rt;un(1,0)}},N:function(bt,Pt,Mt){var Rt=an();try{return bn(bt)(Pt,Mt)}catch(Nt){if(ln(Rt),Nt!==Nt+0)throw Nt;un(1,0)}},O:function(bt,Pt,Mt){var Rt=an();try{return bn(bt)(Pt,Mt)}catch(Nt){if(ln(Rt),Nt!==Nt+0)throw Nt;un(1,0)}},j:function(bt,Pt,Mt){var Rt=an();try{return bn(bt)(Pt,Mt)}catch(Nt){if(ln(Rt),Nt!==Nt+0)throw Nt;un(1,0)}},o:function(bt,Pt,Mt,Rt){var Nt=an();try{return bn(bt)(Pt,Mt,Rt)}catch($t){if(ln(Nt),$t!==$t+0)throw $t;un(1,0)}},p:function(bt,Pt,Mt,Rt,Nt){var $t=an();try{return bn(bt)(Pt,Mt,Rt,Nt)}catch(Vt){if(ln($t),Vt!==Vt+0)throw Vt;un(1,0)}},M:function(bt,Pt,Mt,Rt,Nt,$t){var Vt=an();try{return bn(bt)(Pt,Mt,Rt,Nt,$t)}catch(Yt){if(ln(Vt),Yt!==Yt+0)throw Yt;un(1,0)}},r:function(bt,Pt,Mt,Rt,Nt,$t){var Vt=an();try{return bn(bt)(Pt,Mt,Rt,Nt,$t)}catch(Yt){if(ln(Vt),Yt!==Yt+0)throw Yt;un(1,0)}},v:function(bt,Pt,Mt,Rt,Nt,$t,Vt){var Yt=an();try{return bn(bt)(Pt,Mt,Rt,Nt,$t,Vt)}catch(Ht){if(ln(Yt),Ht!==Ht+0)throw Ht;un(1,0)}},K:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt){var Ht=an();try{return bn(bt)(Pt,Mt,Rt,Nt,$t,Vt,Yt)}catch(fn){if(ln(Ht),fn!==fn+0)throw fn;un(1,0)}},D:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht,fn,An,Ln){var Dn=an();try{return bn(bt)(Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht,fn,An,Ln)}catch(Dt){if(ln(Dn),Dt!==Dt+0)throw Dt;un(1,0)}},X:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt){var Ht=an();try{return hs(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt)}catch(fn){if(ln(Ht),fn!==fn+0)throw fn;un(1,0)}},V:function(bt,Pt,Mt,Rt,Nt,$t,Vt){var Yt=an();try{return os(bt,Pt,Mt,Rt,Nt,$t,Vt)}catch(Ht){if(ln(Yt),Ht!==Ht+0)throw Ht;un(1,0)}},U:function(bt,Pt,Mt,Rt,Nt){var $t=an();try{return fs(bt,Pt,Mt,Rt,Nt)}catch(Vt){if(ln($t),Vt!==Vt+0)throw Vt;un(1,0)}},Z:function(bt,Pt,Mt,Rt){var Nt=an();try{return cs(bt,Pt,Mt,Rt)}catch($t){if(ln(Nt),$t!==$t+0)throw $t;un(1,0)}},W:function(bt){var Pt=an();try{return ss(bt)}catch(Mt){if(ln(Pt),Mt!==Mt+0)throw Mt;un(1,0)}},Y:function(bt,Pt){var Mt=an();try{return ds(bt,Pt)}catch(Rt){if(ln(Mt),Rt!==Rt+0)throw Rt;un(1,0)}},T:function(bt,Pt,Mt){var Rt=an();try{return is(bt,Pt,Mt)}catch(Nt){if(ln(Rt),Nt!==Nt+0)throw Nt;un(1,0)}},f:function(bt){var Pt=an();try{bn(bt)()}catch(Mt){if(ln(Pt),Mt!==Mt+0)throw Mt;un(1,0)}},q:function(bt,Pt){var Mt=an();try{bn(bt)(Pt)}catch(Rt){if(ln(Mt),Rt!==Rt+0)throw Rt;un(1,0)}},h:function(bt,Pt,Mt){var Rt=an();try{bn(bt)(Pt,Mt)}catch(Nt){if(ln(Rt),Nt!==Nt+0)throw Nt;un(1,0)}},da:function(bt,Pt,Mt,Rt){var Nt=an();try{bn(bt)(Pt,Mt,Rt)}catch($t){if(ln(Nt),$t!==$t+0)throw $t;un(1,0)}},l:function(bt,Pt,Mt,Rt){var Nt=an();try{bn(bt)(Pt,Mt,Rt)}catch($t){if(ln(Nt),$t!==$t+0)throw $t;un(1,0)}},t:function(bt,Pt,Mt,Rt,Nt){var $t=an();try{bn(bt)(Pt,Mt,Rt,Nt)}catch(Vt){if(ln($t),Vt!==Vt+0)throw Vt;un(1,0)}},u:function(bt,Pt,Mt,Rt,Nt,$t){var Vt=an();try{bn(bt)(Pt,Mt,Rt,Nt,$t)}catch(Yt){if(ln(Vt),Yt!==Yt+0)throw Yt;un(1,0)}},x:function(bt,Pt,Mt,Rt,Nt,$t,Vt){var Yt=an();try{bn(bt)(Pt,Mt,Rt,Nt,$t,Vt)}catch(Ht){if(ln(Yt),Ht!==Ht+0)throw Ht;un(1,0)}},z:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt){var Ht=an();try{bn(bt)(Pt,Mt,Rt,Nt,$t,Vt,Yt)}catch(fn){if(ln(Ht),fn!==fn+0)throw fn;un(1,0)}},ga:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht){var fn=an();try{bn(bt)(Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht)}catch(An){if(ln(fn),An!==An+0)throw An;un(1,0)}},A:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht,fn,An){var Ln=an();try{bn(bt)(Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht,fn,An)}catch(Dn){if(ln(Ln),Dn!==Dn+0)throw Dn;un(1,0)}},C:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht,fn,An,Ln,Dn,Dt,vn,On){var Qn=an();try{bn(bt)(Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht,fn,An,Ln,Dn,Dt,vn,On)}catch(ur){if(ln(Qn),ur!==ur+0)throw ur;un(1,0)}},aa:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt){var Ht=an();try{as(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt)}catch(fn){if(ln(Ht),fn!==fn+0)throw fn;un(1,0)}},_:function(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht,fn,An,Ln){var Dn=an();try{us(bt,Pt,Mt,Rt,Nt,$t,Vt,Yt,Ht,fn,An,Ln)}catch(Dt){if(ln(Dn),Dt!==Dt+0)throw Dt;un(1,0)}},$:function(bt,Pt,Mt,Rt,Nt,$t){var Vt=an();try{ls(bt,Pt,Mt,Rt,Nt,$t)}catch(Yt){if(ln(Vt),Yt!==Yt+0)throw Yt;un(1,0)}},n:function(bt){return bt},F:function(bt){$n=bt},ha:vs,y:function(bt,Pt,Mt,Rt){return vs(bt,Pt,Mt,Rt)}};(function(){function bt(Nt){b.asm=Nt.exports,mt=b.asm.Ka,Wt(),sn=b.asm.ib,Kt.unshift(b.asm.La),Zt--,b.monitorRunDependencies&&b.monitorRunDependencies(Zt),Zt==0&&en&&(Nt=en,en=null,Nt())}function Pt(Nt){bt(Nt.instance)}function Mt(Nt){return function(){if(!ct&&(it||at)){if(typeof fetch=="function"&&!Qt.startsWith("file://"))return fetch(Qt,{credentials:"same-origin"}).then(function($t){if(!$t.ok)throw"failed to load wasm binary file at '"+Qt+"'";return $t.arrayBuffer()}).catch(function(){return Nn()});if(et)return new Promise(function($t,Vt){et(Qt,function(Yt){$t(new Uint8Array(Yt))},Vt)})}return Promise.resolve().then(function(){return Nn()})}().then(function($t){return WebAssembly.instantiate($t,Rt)}).then(function($t){return $t}).then(Nt,function($t){ft("failed to asynchronously prepare wasm: "+$t),dn($t)})}var Rt={a:ws};if(Zt++,b.monitorRunDependencies&&b.monitorRunDependencies(Zt),b.instantiateWasm)try{return b.instantiateWasm(Rt,bt)}catch(Nt){return ft("Module.instantiateWasm callback failed with error: "+Nt),!1}(ct||typeof WebAssembly.instantiateStreaming!="function"||hn()||Qt.startsWith("file://")||lt||typeof fetch!="function"?Mt(Pt):fetch(Qt,{credentials:"same-origin"}).then(function(Nt){return WebAssembly.instantiateStreaming(Nt,Rt).then(Pt,function($t){return ft("wasm streaming compile failed: "+$t),ft("falling back to ArrayBuffer instantiation"),Mt(Pt)})})).catch(nt)})(),b.___wasm_call_ctors=function(){return(b.___wasm_call_ctors=b.asm.La).apply(null,arguments)},b._OrtInit=function(){return(b._OrtInit=b.asm.Ma).apply(null,arguments)},b._OrtCreateSessionOptions=function(){return(b._OrtCreateSessionOptions=b.asm.Na).apply(null,arguments)},b._OrtAppendExecutionProvider=function(){return(b._OrtAppendExecutionProvider=b.asm.Oa).apply(null,arguments)},b._OrtAddSessionConfigEntry=function(){return(b._OrtAddSessionConfigEntry=b.asm.Pa).apply(null,arguments)},b._OrtReleaseSessionOptions=function(){return(b._OrtReleaseSessionOptions=b.asm.Qa).apply(null,arguments)},b._OrtCreateSession=function(){return(b._OrtCreateSession=b.asm.Ra).apply(null,arguments)},b._OrtReleaseSession=function(){return(b._OrtReleaseSession=b.asm.Sa).apply(null,arguments)},b._OrtGetInputCount=function(){return(b._OrtGetInputCount=b.asm.Ta).apply(null,arguments)},b._OrtGetOutputCount=function(){return(b._OrtGetOutputCount=b.asm.Ua).apply(null,arguments)},b._OrtGetInputName=function(){return(b._OrtGetInputName=b.asm.Va).apply(null,arguments)},b._OrtGetOutputName=function(){return(b._OrtGetOutputName=b.asm.Wa).apply(null,arguments)},b._OrtFree=function(){return(b._OrtFree=b.asm.Xa).apply(null,arguments)},b._OrtCreateTensor=function(){return(b._OrtCreateTensor=b.asm.Ya).apply(null,arguments)},b._OrtGetTensorData=function(){return(b._OrtGetTensorData=b.asm.Za).apply(null,arguments)},b._OrtReleaseTensor=function(){return(b._OrtReleaseTensor=b.asm._a).apply(null,arguments)},b._OrtCreateRunOptions=function(){return(b._OrtCreateRunOptions=b.asm.$a).apply(null,arguments)},b._OrtAddRunConfigEntry=function(){return(b._OrtAddRunConfigEntry=b.asm.ab).apply(null,arguments)},b._OrtReleaseRunOptions=function(){return(b._OrtReleaseRunOptions=b.asm.bb).apply(null,arguments)},b._OrtRun=function(){return(b._OrtRun=b.asm.cb).apply(null,arguments)},b._OrtEndProfiling=function(){return(b._OrtEndProfiling=b.asm.db).apply(null,arguments)};var lr,Sn=b._malloc=function(){return(Sn=b._malloc=b.asm.eb).apply(null,arguments)},Pr=b._free=function(){return(Pr=b._free=b.asm.fb).apply(null,arguments)},ts=b._fflush=function(){return(ts=b._fflush=b.asm.gb).apply(null,arguments)},Ar=b.___funcs_on_exit=function(){return(Ar=b.___funcs_on_exit=b.asm.hb).apply(null,arguments)},un=b._setThrew=function(){return(un=b._setThrew=b.asm.jb).apply(null,arguments)},an=b.stackSave=function(){return(an=b.stackSave=b.asm.kb).apply(null,arguments)},ln=b.stackRestore=function(){return(ln=b.stackRestore=b.asm.lb).apply(null,arguments)},ns=b.stackAlloc=function(){return(ns=b.stackAlloc=b.asm.mb).apply(null,arguments)},Or=b.___cxa_can_catch=function(){return(Or=b.___cxa_can_catch=b.asm.nb).apply(null,arguments)},rs=b.___cxa_is_pointer_type=function(){return(rs=b.___cxa_is_pointer_type=b.asm.ob).apply(null,arguments)},ss=b.dynCall_j=function(){return(ss=b.dynCall_j=b.asm.pb).apply(null,arguments)},os=b.dynCall_iiiiij=function(){return(os=b.dynCall_iiiiij=b.asm.qb).apply(null,arguments)},is=b.dynCall_jii=function(){return(is=b.dynCall_jii=b.asm.rb).apply(null,arguments)},as=b.dynCall_viiiiij=function(){return(as=b.dynCall_viiiiij=b.asm.sb).apply(null,arguments)},ls=b.dynCall_vjji=function(){return(ls=b.dynCall_vjji=b.asm.tb).apply(null,arguments)},us=b.dynCall_viiijjjii=function(){return(us=b.dynCall_viiijjjii=b.asm.ub).apply(null,arguments)},cs=b.dynCall_iij=function(){return(cs=b.dynCall_iij=b.asm.vb).apply(null,arguments)},ds=b.dynCall_ji=function(){return(ds=b.dynCall_ji=b.asm.wb).apply(null,arguments)},hs=b.dynCall_iiiiiij=function(){return(hs=b.dynCall_iiiiiij=b.asm.xb).apply(null,arguments)},fs=b.dynCall_iiij=function(){return(fs=b.dynCall_iiij=b.asm.yb).apply(null,arguments)};function ps(){function bt(){if(!lr&&(lr=!0,b.calledRun=!0,!gt)){if(Yn(Kt),$(b),b.onRuntimeInitialized&&b.onRuntimeInitialized(),b.postRun)for(typeof b.postRun=="function"&&(b.postRun=[b.postRun]);b.postRun.length;){var Pt=b.postRun.shift();zt.unshift(Pt)}Yn(zt)}}if(!(0<Zt)){if(b.preRun)for(typeof b.preRun=="function"&&(b.preRun=[b.preRun]);b.preRun.length;)wn();Yn(Jt),0<Zt||(b.setStatus?(b.setStatus("Running..."),setTimeout(function(){setTimeout(function(){b.setStatus("")},1),bt()},1)):bt())}}if(b.UTF8ToString=At,b.stringToUTF8=function(bt,Pt,Mt){return Ft(bt,St,Pt,Mt)},b.lengthBytesUTF8=Bt,b.stackSave=an,b.stackRestore=ln,b.stackAlloc=ns,en=function bt(){lr||ps(),lr||(en=bt)},b.preInit)for(typeof b.preInit=="function"&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();return ps(),_.ready});o.exports=d},4537:o=>{o.exports=function(s,i){for(var a=new Array(arguments.length-1),d=0,_=2,b=!0;_<arguments.length;)a[d++]=arguments[_++];return new Promise(function($,nt){a[d]=function(tt){if(b)if(b=!1,tt)nt(tt);else{for(var et=new Array(arguments.length-1),g=0;g<et.length;)et[g++]=arguments[g];$.apply(null,et)}};try{s.apply(i||null,a)}catch(tt){b&&(b=!1,nt(tt))}})}},7419:(o,s)=>{var i=s;i.length=function($){var nt=$.length;if(!nt)return 0;for(var tt=0;--nt%4>1&&$.charAt(nt)==="=";)++tt;return Math.ceil(3*$.length)/4-tt};for(var a=new Array(64),d=new Array(123),_=0;_<64;)d[a[_]=_<26?_+65:_<52?_+71:_<62?_-4:_-59|43]=_++;i.encode=function($,nt,tt){for(var et,g=null,c=[],j=0,_e=0;nt<tt;){var rt=$[nt++];switch(_e){case 0:c[j++]=a[rt>>2],et=(3&rt)<<4,_e=1;break;case 1:c[j++]=a[et|rt>>4],et=(15&rt)<<2,_e=2;break;case 2:c[j++]=a[et|rt>>6],c[j++]=a[63&rt],_e=0}j>8191&&((g||(g=[])).push(String.fromCharCode.apply(String,c)),j=0)}return _e&&(c[j++]=a[et],c[j++]=61,_e===1&&(c[j++]=61)),g?(j&&g.push(String.fromCharCode.apply(String,c.slice(0,j))),g.join("")):String.fromCharCode.apply(String,c.slice(0,j))};var b="invalid encoding";i.decode=function($,nt,tt){for(var et,g=tt,c=0,j=0;j<$.length;){var _e=$.charCodeAt(j++);if(_e===61&&c>1)break;if((_e=d[_e])===void 0)throw Error(b);switch(c){case 0:et=_e,c=1;break;case 1:nt[tt++]=et<<2|(48&_e)>>4,et=_e,c=2;break;case 2:nt[tt++]=(15&et)<<4|(60&_e)>>2,et=_e,c=3;break;case 3:nt[tt++]=(3&et)<<6|_e,c=0}}if(c===1)throw Error(b);return tt-g},i.test=function($){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test($)}},9211:o=>{function s(){this._listeners={}}o.exports=s,s.prototype.on=function(i,a,d){return(this._listeners[i]||(this._listeners[i]=[])).push({fn:a,ctx:d||this}),this},s.prototype.off=function(i,a){if(i===void 0)this._listeners={};else if(a===void 0)this._listeners[i]=[];else for(var d=this._listeners[i],_=0;_<d.length;)d[_].fn===a?d.splice(_,1):++_;return this},s.prototype.emit=function(i){var a=this._listeners[i];if(a){for(var d=[],_=1;_<arguments.length;)d.push(arguments[_++]);for(_=0;_<a.length;)a[_].fn.apply(a[_++].ctx,d)}return this}},945:o=>{function s(b){return typeof Float32Array<"u"?function(){var $=new Float32Array([-0]),nt=new Uint8Array($.buffer),tt=nt[3]===128;function et(_e,rt,st){$[0]=_e,rt[st]=nt[0],rt[st+1]=nt[1],rt[st+2]=nt[2],rt[st+3]=nt[3]}function g(_e,rt,st){$[0]=_e,rt[st]=nt[3],rt[st+1]=nt[2],rt[st+2]=nt[1],rt[st+3]=nt[0]}function c(_e,rt){return nt[0]=_e[rt],nt[1]=_e[rt+1],nt[2]=_e[rt+2],nt[3]=_e[rt+3],$[0]}function j(_e,rt){return nt[3]=_e[rt],nt[2]=_e[rt+1],nt[1]=_e[rt+2],nt[0]=_e[rt+3],$[0]}b.writeFloatLE=tt?et:g,b.writeFloatBE=tt?g:et,b.readFloatLE=tt?c:j,b.readFloatBE=tt?j:c}():function(){function $(tt,et,g,c){var j=et<0?1:0;if(j&&(et=-et),et===0)tt(1/et>0?0:2147483648,g,c);else if(isNaN(et))tt(2143289344,g,c);else if(et>34028234663852886e22)tt((j<<31|2139095040)>>>0,g,c);else if(et<11754943508222875e-54)tt((j<<31|Math.round(et/1401298464324817e-60))>>>0,g,c);else{var _e=Math.floor(Math.log(et)/Math.LN2);tt((j<<31|_e+127<<23|8388607&Math.round(et*Math.pow(2,-_e)*8388608))>>>0,g,c)}}function nt(tt,et,g){var c=tt(et,g),j=2*(c>>31)+1,_e=c>>>23&255,rt=8388607&c;return _e===255?rt?NaN:j*(1/0):_e===0?1401298464324817e-60*j*rt:j*Math.pow(2,_e-150)*(rt+8388608)}b.writeFloatLE=$.bind(null,i),b.writeFloatBE=$.bind(null,a),b.readFloatLE=nt.bind(null,d),b.readFloatBE=nt.bind(null,_)}(),typeof Float64Array<"u"?function(){var $=new Float64Array([-0]),nt=new Uint8Array($.buffer),tt=nt[7]===128;function et(_e,rt,st){$[0]=_e,rt[st]=nt[0],rt[st+1]=nt[1],rt[st+2]=nt[2],rt[st+3]=nt[3],rt[st+4]=nt[4],rt[st+5]=nt[5],rt[st+6]=nt[6],rt[st+7]=nt[7]}function g(_e,rt,st){$[0]=_e,rt[st]=nt[7],rt[st+1]=nt[6],rt[st+2]=nt[5],rt[st+3]=nt[4],rt[st+4]=nt[3],rt[st+5]=nt[2],rt[st+6]=nt[1],rt[st+7]=nt[0]}function c(_e,rt){return nt[0]=_e[rt],nt[1]=_e[rt+1],nt[2]=_e[rt+2],nt[3]=_e[rt+3],nt[4]=_e[rt+4],nt[5]=_e[rt+5],nt[6]=_e[rt+6],nt[7]=_e[rt+7],$[0]}function j(_e,rt){return nt[7]=_e[rt],nt[6]=_e[rt+1],nt[5]=_e[rt+2],nt[4]=_e[rt+3],nt[3]=_e[rt+4],nt[2]=_e[rt+5],nt[1]=_e[rt+6],nt[0]=_e[rt+7],$[0]}b.writeDoubleLE=tt?et:g,b.writeDoubleBE=tt?g:et,b.readDoubleLE=tt?c:j,b.readDoubleBE=tt?j:c}():function(){function $(tt,et,g,c,j,_e){var rt=c<0?1:0;if(rt&&(c=-c),c===0)tt(0,j,_e+et),tt(1/c>0?0:2147483648,j,_e+g);else if(isNaN(c))tt(0,j,_e+et),tt(2146959360,j,_e+g);else if(c>17976931348623157e292)tt(0,j,_e+et),tt((rt<<31|2146435072)>>>0,j,_e+g);else{var st;if(c<22250738585072014e-324)tt((st=c/5e-324)>>>0,j,_e+et),tt((rt<<31|st/4294967296)>>>0,j,_e+g);else{var ot=Math.floor(Math.log(c)/Math.LN2);ot===1024&&(ot=1023),tt(4503599627370496*(st=c*Math.pow(2,-ot))>>>0,j,_e+et),tt((rt<<31|ot+1023<<20|1048576*st&1048575)>>>0,j,_e+g)}}}function nt(tt,et,g,c,j){var _e=tt(c,j+et),rt=tt(c,j+g),st=2*(rt>>31)+1,ot=rt>>>20&2047,it=4294967296*(1048575&rt)+_e;return ot===2047?it?NaN:st*(1/0):ot===0?5e-324*st*it:st*Math.pow(2,ot-1075)*(it+4503599627370496)}b.writeDoubleLE=$.bind(null,i,0,4),b.writeDoubleBE=$.bind(null,a,4,0),b.readDoubleLE=nt.bind(null,d,0,4),b.readDoubleBE=nt.bind(null,_,4,0)}(),b}function i(b,$,nt){$[nt]=255&b,$[nt+1]=b>>>8&255,$[nt+2]=b>>>16&255,$[nt+3]=b>>>24}function a(b,$,nt){$[nt]=b>>>24,$[nt+1]=b>>>16&255,$[nt+2]=b>>>8&255,$[nt+3]=255&b}function d(b,$){return(b[$]|b[$+1]<<8|b[$+2]<<16|b[$+3]<<24)>>>0}function _(b,$){return(b[$]<<24|b[$+1]<<16|b[$+2]<<8|b[$+3])>>>0}o.exports=s(s)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(o){}return null}module.exports=inquire},6662:o=>{o.exports=function(s,i,a){var d=a||8192,_=d>>>1,b=null,$=d;return function(nt){if(nt<1||nt>_)return s(nt);$+nt>d&&(b=s(d),$=0);var tt=i.call(b,$,$+=nt);return 7&$&&($=1+(7|$)),tt}}},4997:(o,s)=>{var i=s;i.length=function(a){for(var d=0,_=0,b=0;b<a.length;++b)(_=a.charCodeAt(b))<128?d+=1:_<2048?d+=2:(64512&_)==55296&&(64512&a.charCodeAt(b+1))==56320?(++b,d+=4):d+=3;return d},i.read=function(a,d,_){if(_-d<1)return"";for(var b,$=null,nt=[],tt=0;d<_;)(b=a[d++])<128?nt[tt++]=b:b>191&&b<224?nt[tt++]=(31&b)<<6|63&a[d++]:b>239&&b<365?(b=((7&b)<<18|(63&a[d++])<<12|(63&a[d++])<<6|63&a[d++])-65536,nt[tt++]=55296+(b>>10),nt[tt++]=56320+(1023&b)):nt[tt++]=(15&b)<<12|(63&a[d++])<<6|63&a[d++],tt>8191&&(($||($=[])).push(String.fromCharCode.apply(String,nt)),tt=0);return $?(tt&&$.push(String.fromCharCode.apply(String,nt.slice(0,tt))),$.join("")):String.fromCharCode.apply(String,nt.slice(0,tt))},i.write=function(a,d,_){for(var b,$,nt=_,tt=0;tt<a.length;++tt)(b=a.charCodeAt(tt))<128?d[_++]=b:b<2048?(d[_++]=b>>6|192,d[_++]=63&b|128):(64512&b)==55296&&(64512&($=a.charCodeAt(tt+1)))==56320?(b=65536+((1023&b)<<10)+(1023&$),++tt,d[_++]=b>>18|240,d[_++]=b>>12&63|128,d[_++]=b>>6&63|128,d[_++]=63&b|128):(d[_++]=b>>12|224,d[_++]=b>>6&63|128,d[_++]=63&b|128);return _-nt}},3442:(o,s)=>{s.__esModule=!0;var i=function(){function a(d){if(!d)throw new TypeError("Invalid argument; `value` has no value.");this.value=a.EMPTY,d&&a.isGuid(d)&&(this.value=d)}return a.isGuid=function(d){var _=d.toString();return d&&(d instanceof a||a.validator.test(_))},a.create=function(){return new a([a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-"))},a.createEmpty=function(){return new a("emptyguid")},a.parse=function(d){return new a(d)},a.raw=function(){return[a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-")},a.gen=function(d){for(var _="",b=0;b<d;b++)_+=(65536*(1+Math.random())|0).toString(16).substring(1);return _},a.prototype.equals=function(d){return a.isGuid(d)&&this.value===d.toString()},a.prototype.isEmpty=function(){return this.value===a.EMPTY},a.prototype.toString=function(){return this.value},a.prototype.toJSON=function(){return{value:this.value}},a.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),a.EMPTY="00000000-0000-0000-0000-000000000000",a}();s.Guid=i},3720:o=>{o.exports=i;var s=null;try{s=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function i(ht,mt,yt){this.low=0|ht,this.high=0|mt,this.unsigned=!!yt}function a(ht){return(ht&&ht.__isLong__)===!0}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=a;var d={},_={};function b(ht,mt){var yt,Tt,St;return mt?(St=0<=(ht>>>=0)&&ht<256)&&(Tt=_[ht])?Tt:(yt=nt(ht,(0|ht)<0?-1:0,!0),St&&(_[ht]=yt),yt):(St=-128<=(ht|=0)&&ht<128)&&(Tt=d[ht])?Tt:(yt=nt(ht,ht<0?-1:0,!1),St&&(d[ht]=yt),yt)}function $(ht,mt){if(isNaN(ht))return mt?ot:st;if(mt){if(ht<0)return ot;if(ht>=j)return ct}else{if(ht<=-_e)return dt;if(ht+1>=_e)return ut}return ht<0?$(-ht,mt).neg():nt(ht%c|0,ht/c|0,mt)}function nt(ht,mt,yt){return new i(ht,mt,yt)}i.fromInt=b,i.fromNumber=$,i.fromBits=nt;var tt=Math.pow;function et(ht,mt,yt){if(ht.length===0)throw Error("empty string");if(ht==="NaN"||ht==="Infinity"||ht==="+Infinity"||ht==="-Infinity")return st;if(typeof mt=="number"?(yt=mt,mt=!1):mt=!!mt,(yt=yt||10)<2||36<yt)throw RangeError("radix");var Tt;if((Tt=ht.indexOf("-"))>0)throw Error("interior hyphen");if(Tt===0)return et(ht.substring(1),mt,yt).neg();for(var St=$(tt(yt,8)),xt=st,wt=0;wt<ht.length;wt+=8){var gt=Math.min(8,ht.length-wt),vt=parseInt(ht.substring(wt,wt+gt),yt);if(gt<8){var Ot=$(tt(yt,gt));xt=xt.mul(Ot).add($(vt))}else xt=(xt=xt.mul(St)).add($(vt))}return xt.unsigned=mt,xt}function g(ht,mt){return typeof ht=="number"?$(ht,mt):typeof ht=="string"?et(ht,mt):nt(ht.low,ht.high,typeof mt=="boolean"?mt:ht.unsigned)}i.fromString=et,i.fromValue=g;var c=4294967296,j=c*c,_e=j/2,rt=b(1<<24),st=b(0);i.ZERO=st;var ot=b(0,!0);i.UZERO=ot;var it=b(1);i.ONE=it;var at=b(1,!0);i.UONE=at;var lt=b(-1);i.NEG_ONE=lt;var ut=nt(-1,2147483647,!1);i.MAX_VALUE=ut;var ct=nt(-1,-1,!0);i.MAX_UNSIGNED_VALUE=ct;var dt=nt(0,-2147483648,!1);i.MIN_VALUE=dt;var ft=i.prototype;ft.toInt=function(){return this.unsigned?this.low>>>0:this.low},ft.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},ft.toString=function(ht){if((ht=ht||10)<2||36<ht)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(dt)){var mt=$(ht),yt=this.div(mt),Tt=yt.mul(mt).sub(this);return yt.toString(ht)+Tt.toInt().toString(ht)}return"-"+this.neg().toString(ht)}for(var St=$(tt(ht,6),this.unsigned),xt=this,wt="";;){var gt=xt.div(St),vt=(xt.sub(gt.mul(St)).toInt()>>>0).toString(ht);if((xt=gt).isZero())return vt+wt;for(;vt.length<6;)vt="0"+vt;wt=""+vt+wt}},ft.getHighBits=function(){return this.high},ft.getHighBitsUnsigned=function(){return this.high>>>0},ft.getLowBits=function(){return this.low},ft.getLowBitsUnsigned=function(){return this.low>>>0},ft.getNumBitsAbs=function(){if(this.isNegative())return this.eq(dt)?64:this.neg().getNumBitsAbs();for(var ht=this.high!=0?this.high:this.low,mt=31;mt>0&&!(ht&1<<mt);mt--);return this.high!=0?mt+33:mt+1},ft.isZero=function(){return this.high===0&&this.low===0},ft.eqz=ft.isZero,ft.isNegative=function(){return!this.unsigned&&this.high<0},ft.isPositive=function(){return this.unsigned||this.high>=0},ft.isOdd=function(){return(1&this.low)==1},ft.isEven=function(){return(1&this.low)==0},ft.equals=function(ht){return a(ht)||(ht=g(ht)),(this.unsigned===ht.unsigned||this.high>>>31!=1||ht.high>>>31!=1)&&this.high===ht.high&&this.low===ht.low},ft.eq=ft.equals,ft.notEquals=function(ht){return!this.eq(ht)},ft.neq=ft.notEquals,ft.ne=ft.notEquals,ft.lessThan=function(ht){return this.comp(ht)<0},ft.lt=ft.lessThan,ft.lessThanOrEqual=function(ht){return this.comp(ht)<=0},ft.lte=ft.lessThanOrEqual,ft.le=ft.lessThanOrEqual,ft.greaterThan=function(ht){return this.comp(ht)>0},ft.gt=ft.greaterThan,ft.greaterThanOrEqual=function(ht){return this.comp(ht)>=0},ft.gte=ft.greaterThanOrEqual,ft.ge=ft.greaterThanOrEqual,ft.compare=function(ht){if(a(ht)||(ht=g(ht)),this.eq(ht))return 0;var mt=this.isNegative(),yt=ht.isNegative();return mt&&!yt?-1:!mt&&yt?1:this.unsigned?ht.high>>>0>this.high>>>0||ht.high===this.high&&ht.low>>>0>this.low>>>0?-1:1:this.sub(ht).isNegative()?-1:1},ft.comp=ft.compare,ft.negate=function(){return!this.unsigned&&this.eq(dt)?dt:this.not().add(it)},ft.neg=ft.negate,ft.add=function(ht){a(ht)||(ht=g(ht));var mt=this.high>>>16,yt=65535&this.high,Tt=this.low>>>16,St=65535&this.low,xt=ht.high>>>16,wt=65535&ht.high,gt=ht.low>>>16,vt=0,Ot=0,At=0,Ft=0;return At+=(Ft+=St+(65535&ht.low))>>>16,Ot+=(At+=Tt+gt)>>>16,vt+=(Ot+=yt+wt)>>>16,vt+=mt+xt,nt((At&=65535)<<16|(Ft&=65535),(vt&=65535)<<16|(Ot&=65535),this.unsigned)},ft.subtract=function(ht){return a(ht)||(ht=g(ht)),this.add(ht.neg())},ft.sub=ft.subtract,ft.multiply=function(ht){if(this.isZero())return st;if(a(ht)||(ht=g(ht)),s)return nt(s.mul(this.low,this.high,ht.low,ht.high),s.get_high(),this.unsigned);if(ht.isZero())return st;if(this.eq(dt))return ht.isOdd()?dt:st;if(ht.eq(dt))return this.isOdd()?dt:st;if(this.isNegative())return ht.isNegative()?this.neg().mul(ht.neg()):this.neg().mul(ht).neg();if(ht.isNegative())return this.mul(ht.neg()).neg();if(this.lt(rt)&&ht.lt(rt))return $(this.toNumber()*ht.toNumber(),this.unsigned);var mt=this.high>>>16,yt=65535&this.high,Tt=this.low>>>16,St=65535&this.low,xt=ht.high>>>16,wt=65535&ht.high,gt=ht.low>>>16,vt=65535&ht.low,Ot=0,At=0,Ft=0,Bt=0;return Ft+=(Bt+=St*vt)>>>16,At+=(Ft+=Tt*vt)>>>16,Ft&=65535,At+=(Ft+=St*gt)>>>16,Ot+=(At+=yt*vt)>>>16,At&=65535,Ot+=(At+=Tt*gt)>>>16,At&=65535,Ot+=(At+=St*wt)>>>16,Ot+=mt*vt+yt*gt+Tt*wt+St*xt,nt((Ft&=65535)<<16|(Bt&=65535),(Ot&=65535)<<16|(At&=65535),this.unsigned)},ft.mul=ft.multiply,ft.divide=function(ht){if(a(ht)||(ht=g(ht)),ht.isZero())throw Error("division by zero");var mt,yt,Tt;if(s)return this.unsigned||this.high!==-2147483648||ht.low!==-1||ht.high!==-1?nt((this.unsigned?s.div_u:s.div_s)(this.low,this.high,ht.low,ht.high),s.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ot:st;if(this.unsigned){if(ht.unsigned||(ht=ht.toUnsigned()),ht.gt(this))return ot;if(ht.gt(this.shru(1)))return at;Tt=ot}else{if(this.eq(dt))return ht.eq(it)||ht.eq(lt)?dt:ht.eq(dt)?it:(mt=this.shr(1).div(ht).shl(1)).eq(st)?ht.isNegative()?it:lt:(yt=this.sub(ht.mul(mt)),Tt=mt.add(yt.div(ht)));if(ht.eq(dt))return this.unsigned?ot:st;if(this.isNegative())return ht.isNegative()?this.neg().div(ht.neg()):this.neg().div(ht).neg();if(ht.isNegative())return this.div(ht.neg()).neg();Tt=st}for(yt=this;yt.gte(ht);){mt=Math.max(1,Math.floor(yt.toNumber()/ht.toNumber()));for(var St=Math.ceil(Math.log(mt)/Math.LN2),xt=St<=48?1:tt(2,St-48),wt=$(mt),gt=wt.mul(ht);gt.isNegative()||gt.gt(yt);)gt=(wt=$(mt-=xt,this.unsigned)).mul(ht);wt.isZero()&&(wt=it),Tt=Tt.add(wt),yt=yt.sub(gt)}return Tt},ft.div=ft.divide,ft.modulo=function(ht){return a(ht)||(ht=g(ht)),s?nt((this.unsigned?s.rem_u:s.rem_s)(this.low,this.high,ht.low,ht.high),s.get_high(),this.unsigned):this.sub(this.div(ht).mul(ht))},ft.mod=ft.modulo,ft.rem=ft.modulo,ft.not=function(){return nt(~this.low,~this.high,this.unsigned)},ft.and=function(ht){return a(ht)||(ht=g(ht)),nt(this.low&ht.low,this.high&ht.high,this.unsigned)},ft.or=function(ht){return a(ht)||(ht=g(ht)),nt(this.low|ht.low,this.high|ht.high,this.unsigned)},ft.xor=function(ht){return a(ht)||(ht=g(ht)),nt(this.low^ht.low,this.high^ht.high,this.unsigned)},ft.shiftLeft=function(ht){return a(ht)&&(ht=ht.toInt()),(ht&=63)==0?this:ht<32?nt(this.low<<ht,this.high<<ht|this.low>>>32-ht,this.unsigned):nt(0,this.low<<ht-32,this.unsigned)},ft.shl=ft.shiftLeft,ft.shiftRight=function(ht){return a(ht)&&(ht=ht.toInt()),(ht&=63)==0?this:ht<32?nt(this.low>>>ht|this.high<<32-ht,this.high>>ht,this.unsigned):nt(this.high>>ht-32,this.high>=0?0:-1,this.unsigned)},ft.shr=ft.shiftRight,ft.shiftRightUnsigned=function(ht){if(a(ht)&&(ht=ht.toInt()),(ht&=63)==0)return this;var mt=this.high;return ht<32?nt(this.low>>>ht|mt<<32-ht,mt>>>ht,this.unsigned):nt(ht===32?mt:mt>>>ht-32,0,this.unsigned)},ft.shru=ft.shiftRightUnsigned,ft.shr_u=ft.shiftRightUnsigned,ft.toSigned=function(){return this.unsigned?nt(this.low,this.high,!1):this},ft.toUnsigned=function(){return this.unsigned?this:nt(this.low,this.high,!0)},ft.toBytes=function(ht){return ht?this.toBytesLE():this.toBytesBE()},ft.toBytesLE=function(){var ht=this.high,mt=this.low;return[255&mt,mt>>>8&255,mt>>>16&255,mt>>>24,255&ht,ht>>>8&255,ht>>>16&255,ht>>>24]},ft.toBytesBE=function(){var ht=this.high,mt=this.low;return[ht>>>24,ht>>>16&255,ht>>>8&255,255&ht,mt>>>24,mt>>>16&255,mt>>>8&255,255&mt]},i.fromBytes=function(ht,mt,yt){return yt?i.fromBytesLE(ht,mt):i.fromBytesBE(ht,mt)},i.fromBytesLE=function(ht,mt){return new i(ht[0]|ht[1]<<8|ht[2]<<16|ht[3]<<24,ht[4]|ht[5]<<8|ht[6]<<16|ht[7]<<24,mt)},i.fromBytesBE=function(ht,mt){return new i(ht[4]<<24|ht[5]<<16|ht[6]<<8|ht[7],ht[0]<<24|ht[1]<<16|ht[2]<<8|ht[3],mt)}},1446:(o,s,i)=>{var a,d,_,b=i(2100),$=b.Reader,nt=b.Writer,tt=b.util,et=b.roots.default||(b.roots.default={});et.onnx=((_={}).Version=(a={},(d=Object.create(a))[a[0]="_START_VERSION"]=0,d[a[1]="IR_VERSION_2017_10_10"]=1,d[a[2]="IR_VERSION_2017_10_30"]=2,d[a[3]="IR_VERSION_2017_11_3"]=3,d[a[4]="IR_VERSION_2019_1_22"]=4,d[a[5]="IR_VERSION"]=5,d),_.AttributeProto=function(){function g(c){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.name="",g.prototype.refAttrName="",g.prototype.docString="",g.prototype.type=0,g.prototype.f=0,g.prototype.i=tt.Long?tt.Long.fromBits(0,0,!1):0,g.prototype.s=tt.newBuffer([]),g.prototype.t=null,g.prototype.g=null,g.prototype.floats=tt.emptyArray,g.prototype.ints=tt.emptyArray,g.prototype.strings=tt.emptyArray,g.prototype.tensors=tt.emptyArray,g.prototype.graphs=tt.emptyArray,g.create=function(c){return new g(c)},g.encode=function(c,j){if(j||(j=nt.create()),c.name!=null&&c.hasOwnProperty("name")&&j.uint32(10).string(c.name),c.f!=null&&c.hasOwnProperty("f")&&j.uint32(21).float(c.f),c.i!=null&&c.hasOwnProperty("i")&&j.uint32(24).int64(c.i),c.s!=null&&c.hasOwnProperty("s")&&j.uint32(34).bytes(c.s),c.t!=null&&c.hasOwnProperty("t")&&et.onnx.TensorProto.encode(c.t,j.uint32(42).fork()).ldelim(),c.g!=null&&c.hasOwnProperty("g")&&et.onnx.GraphProto.encode(c.g,j.uint32(50).fork()).ldelim(),c.floats!=null&&c.floats.length){j.uint32(58).fork();for(var _e=0;_e<c.floats.length;++_e)j.float(c.floats[_e]);j.ldelim()}if(c.ints!=null&&c.ints.length){for(j.uint32(66).fork(),_e=0;_e<c.ints.length;++_e)j.int64(c.ints[_e]);j.ldelim()}if(c.strings!=null&&c.strings.length)for(_e=0;_e<c.strings.length;++_e)j.uint32(74).bytes(c.strings[_e]);if(c.tensors!=null&&c.tensors.length)for(_e=0;_e<c.tensors.length;++_e)et.onnx.TensorProto.encode(c.tensors[_e],j.uint32(82).fork()).ldelim();if(c.graphs!=null&&c.graphs.length)for(_e=0;_e<c.graphs.length;++_e)et.onnx.GraphProto.encode(c.graphs[_e],j.uint32(90).fork()).ldelim();return c.docString!=null&&c.hasOwnProperty("docString")&&j.uint32(106).string(c.docString),c.type!=null&&c.hasOwnProperty("type")&&j.uint32(160).int32(c.type),c.refAttrName!=null&&c.hasOwnProperty("refAttrName")&&j.uint32(170).string(c.refAttrName),j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.AttributeProto;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:rt.name=c.string();break;case 21:rt.refAttrName=c.string();break;case 13:rt.docString=c.string();break;case 20:rt.type=c.int32();break;case 2:rt.f=c.float();break;case 3:rt.i=c.int64();break;case 4:rt.s=c.bytes();break;case 5:rt.t=et.onnx.TensorProto.decode(c,c.uint32());break;case 6:rt.g=et.onnx.GraphProto.decode(c,c.uint32());break;case 7:if(rt.floats&&rt.floats.length||(rt.floats=[]),(7&st)==2)for(var ot=c.uint32()+c.pos;c.pos<ot;)rt.floats.push(c.float());else rt.floats.push(c.float());break;case 8:if(rt.ints&&rt.ints.length||(rt.ints=[]),(7&st)==2)for(ot=c.uint32()+c.pos;c.pos<ot;)rt.ints.push(c.int64());else rt.ints.push(c.int64());break;case 9:rt.strings&&rt.strings.length||(rt.strings=[]),rt.strings.push(c.bytes());break;case 10:rt.tensors&&rt.tensors.length||(rt.tensors=[]),rt.tensors.push(et.onnx.TensorProto.decode(c,c.uint32()));break;case 11:rt.graphs&&rt.graphs.length||(rt.graphs=[]),rt.graphs.push(et.onnx.GraphProto.decode(c,c.uint32()));break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!tt.isString(c.name))return"name: string expected";if(c.refAttrName!=null&&c.hasOwnProperty("refAttrName")&&!tt.isString(c.refAttrName))return"refAttrName: string expected";if(c.docString!=null&&c.hasOwnProperty("docString")&&!tt.isString(c.docString))return"docString: string expected";if(c.type!=null&&c.hasOwnProperty("type"))switch(c.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(c.f!=null&&c.hasOwnProperty("f")&&typeof c.f!="number")return"f: number expected";if(c.i!=null&&c.hasOwnProperty("i")&&!(tt.isInteger(c.i)||c.i&&tt.isInteger(c.i.low)&&tt.isInteger(c.i.high)))return"i: integer|Long expected";if(c.s!=null&&c.hasOwnProperty("s")&&!(c.s&&typeof c.s.length=="number"||tt.isString(c.s)))return"s: buffer expected";if(c.t!=null&&c.hasOwnProperty("t")&&(_e=et.onnx.TensorProto.verify(c.t)))return"t."+_e;if(c.g!=null&&c.hasOwnProperty("g")&&(_e=et.onnx.GraphProto.verify(c.g)))return"g."+_e;if(c.floats!=null&&c.hasOwnProperty("floats")){if(!Array.isArray(c.floats))return"floats: array expected";for(var j=0;j<c.floats.length;++j)if(typeof c.floats[j]!="number")return"floats: number[] expected"}if(c.ints!=null&&c.hasOwnProperty("ints")){if(!Array.isArray(c.ints))return"ints: array expected";for(j=0;j<c.ints.length;++j)if(!(tt.isInteger(c.ints[j])||c.ints[j]&&tt.isInteger(c.ints[j].low)&&tt.isInteger(c.ints[j].high)))return"ints: integer|Long[] expected"}if(c.strings!=null&&c.hasOwnProperty("strings")){if(!Array.isArray(c.strings))return"strings: array expected";for(j=0;j<c.strings.length;++j)if(!(c.strings[j]&&typeof c.strings[j].length=="number"||tt.isString(c.strings[j])))return"strings: buffer[] expected"}if(c.tensors!=null&&c.hasOwnProperty("tensors")){if(!Array.isArray(c.tensors))return"tensors: array expected";for(j=0;j<c.tensors.length;++j)if(_e=et.onnx.TensorProto.verify(c.tensors[j]))return"tensors."+_e}if(c.graphs!=null&&c.hasOwnProperty("graphs")){if(!Array.isArray(c.graphs))return"graphs: array expected";for(j=0;j<c.graphs.length;++j){var _e;if(_e=et.onnx.GraphProto.verify(c.graphs[j]))return"graphs."+_e}}return null},g.fromObject=function(c){if(c instanceof et.onnx.AttributeProto)return c;var j=new et.onnx.AttributeProto;switch(c.name!=null&&(j.name=String(c.name)),c.refAttrName!=null&&(j.refAttrName=String(c.refAttrName)),c.docString!=null&&(j.docString=String(c.docString)),c.type){case"UNDEFINED":case 0:j.type=0;break;case"FLOAT":case 1:j.type=1;break;case"INT":case 2:j.type=2;break;case"STRING":case 3:j.type=3;break;case"TENSOR":case 4:j.type=4;break;case"GRAPH":case 5:j.type=5;break;case"FLOATS":case 6:j.type=6;break;case"INTS":case 7:j.type=7;break;case"STRINGS":case 8:j.type=8;break;case"TENSORS":case 9:j.type=9;break;case"GRAPHS":case 10:j.type=10}if(c.f!=null&&(j.f=Number(c.f)),c.i!=null&&(tt.Long?(j.i=tt.Long.fromValue(c.i)).unsigned=!1:typeof c.i=="string"?j.i=parseInt(c.i,10):typeof c.i=="number"?j.i=c.i:typeof c.i=="object"&&(j.i=new tt.LongBits(c.i.low>>>0,c.i.high>>>0).toNumber())),c.s!=null&&(typeof c.s=="string"?tt.base64.decode(c.s,j.s=tt.newBuffer(tt.base64.length(c.s)),0):c.s.length&&(j.s=c.s)),c.t!=null){if(typeof c.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");j.t=et.onnx.TensorProto.fromObject(c.t)}if(c.g!=null){if(typeof c.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");j.g=et.onnx.GraphProto.fromObject(c.g)}if(c.floats){if(!Array.isArray(c.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");j.floats=[];for(var _e=0;_e<c.floats.length;++_e)j.floats[_e]=Number(c.floats[_e])}if(c.ints){if(!Array.isArray(c.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(j.ints=[],_e=0;_e<c.ints.length;++_e)tt.Long?(j.ints[_e]=tt.Long.fromValue(c.ints[_e])).unsigned=!1:typeof c.ints[_e]=="string"?j.ints[_e]=parseInt(c.ints[_e],10):typeof c.ints[_e]=="number"?j.ints[_e]=c.ints[_e]:typeof c.ints[_e]=="object"&&(j.ints[_e]=new tt.LongBits(c.ints[_e].low>>>0,c.ints[_e].high>>>0).toNumber())}if(c.strings){if(!Array.isArray(c.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(j.strings=[],_e=0;_e<c.strings.length;++_e)typeof c.strings[_e]=="string"?tt.base64.decode(c.strings[_e],j.strings[_e]=tt.newBuffer(tt.base64.length(c.strings[_e])),0):c.strings[_e].length&&(j.strings[_e]=c.strings[_e])}if(c.tensors){if(!Array.isArray(c.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(j.tensors=[],_e=0;_e<c.tensors.length;++_e){if(typeof c.tensors[_e]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");j.tensors[_e]=et.onnx.TensorProto.fromObject(c.tensors[_e])}}if(c.graphs){if(!Array.isArray(c.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(j.graphs=[],_e=0;_e<c.graphs.length;++_e){if(typeof c.graphs[_e]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");j.graphs[_e]=et.onnx.GraphProto.fromObject(c.graphs[_e])}}return j},g.toObject=function(c,j){j||(j={});var _e={};if((j.arrays||j.defaults)&&(_e.floats=[],_e.ints=[],_e.strings=[],_e.tensors=[],_e.graphs=[]),j.defaults){if(_e.name="",_e.f=0,tt.Long){var rt=new tt.Long(0,0,!1);_e.i=j.longs===String?rt.toString():j.longs===Number?rt.toNumber():rt}else _e.i=j.longs===String?"0":0;j.bytes===String?_e.s="":(_e.s=[],j.bytes!==Array&&(_e.s=tt.newBuffer(_e.s))),_e.t=null,_e.g=null,_e.docString="",_e.type=j.enums===String?"UNDEFINED":0,_e.refAttrName=""}if(c.name!=null&&c.hasOwnProperty("name")&&(_e.name=c.name),c.f!=null&&c.hasOwnProperty("f")&&(_e.f=j.json&&!isFinite(c.f)?String(c.f):c.f),c.i!=null&&c.hasOwnProperty("i")&&(typeof c.i=="number"?_e.i=j.longs===String?String(c.i):c.i:_e.i=j.longs===String?tt.Long.prototype.toString.call(c.i):j.longs===Number?new tt.LongBits(c.i.low>>>0,c.i.high>>>0).toNumber():c.i),c.s!=null&&c.hasOwnProperty("s")&&(_e.s=j.bytes===String?tt.base64.encode(c.s,0,c.s.length):j.bytes===Array?Array.prototype.slice.call(c.s):c.s),c.t!=null&&c.hasOwnProperty("t")&&(_e.t=et.onnx.TensorProto.toObject(c.t,j)),c.g!=null&&c.hasOwnProperty("g")&&(_e.g=et.onnx.GraphProto.toObject(c.g,j)),c.floats&&c.floats.length){_e.floats=[];for(var st=0;st<c.floats.length;++st)_e.floats[st]=j.json&&!isFinite(c.floats[st])?String(c.floats[st]):c.floats[st]}if(c.ints&&c.ints.length)for(_e.ints=[],st=0;st<c.ints.length;++st)typeof c.ints[st]=="number"?_e.ints[st]=j.longs===String?String(c.ints[st]):c.ints[st]:_e.ints[st]=j.longs===String?tt.Long.prototype.toString.call(c.ints[st]):j.longs===Number?new tt.LongBits(c.ints[st].low>>>0,c.ints[st].high>>>0).toNumber():c.ints[st];if(c.strings&&c.strings.length)for(_e.strings=[],st=0;st<c.strings.length;++st)_e.strings[st]=j.bytes===String?tt.base64.encode(c.strings[st],0,c.strings[st].length):j.bytes===Array?Array.prototype.slice.call(c.strings[st]):c.strings[st];if(c.tensors&&c.tensors.length)for(_e.tensors=[],st=0;st<c.tensors.length;++st)_e.tensors[st]=et.onnx.TensorProto.toObject(c.tensors[st],j);if(c.graphs&&c.graphs.length)for(_e.graphs=[],st=0;st<c.graphs.length;++st)_e.graphs[st]=et.onnx.GraphProto.toObject(c.graphs[st],j);return c.docString!=null&&c.hasOwnProperty("docString")&&(_e.docString=c.docString),c.type!=null&&c.hasOwnProperty("type")&&(_e.type=j.enums===String?et.onnx.AttributeProto.AttributeType[c.type]:c.type),c.refAttrName!=null&&c.hasOwnProperty("refAttrName")&&(_e.refAttrName=c.refAttrName),_e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g.AttributeType=function(){var c={},j=Object.create(c);return j[c[0]="UNDEFINED"]=0,j[c[1]="FLOAT"]=1,j[c[2]="INT"]=2,j[c[3]="STRING"]=3,j[c[4]="TENSOR"]=4,j[c[5]="GRAPH"]=5,j[c[6]="FLOATS"]=6,j[c[7]="INTS"]=7,j[c[8]="STRINGS"]=8,j[c[9]="TENSORS"]=9,j[c[10]="GRAPHS"]=10,j}(),g}(),_.ValueInfoProto=function(){function g(c){if(c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.name="",g.prototype.type=null,g.prototype.docString="",g.create=function(c){return new g(c)},g.encode=function(c,j){return j||(j=nt.create()),c.name!=null&&c.hasOwnProperty("name")&&j.uint32(10).string(c.name),c.type!=null&&c.hasOwnProperty("type")&&et.onnx.TypeProto.encode(c.type,j.uint32(18).fork()).ldelim(),c.docString!=null&&c.hasOwnProperty("docString")&&j.uint32(26).string(c.docString),j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.ValueInfoProto;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:rt.name=c.string();break;case 2:rt.type=et.onnx.TypeProto.decode(c,c.uint32());break;case 3:rt.docString=c.string();break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.name!=null&&c.hasOwnProperty("name")&&!tt.isString(c.name))return"name: string expected";if(c.type!=null&&c.hasOwnProperty("type")){var j=et.onnx.TypeProto.verify(c.type);if(j)return"type."+j}return c.docString!=null&&c.hasOwnProperty("docString")&&!tt.isString(c.docString)?"docString: string expected":null},g.fromObject=function(c){if(c instanceof et.onnx.ValueInfoProto)return c;var j=new et.onnx.ValueInfoProto;if(c.name!=null&&(j.name=String(c.name)),c.type!=null){if(typeof c.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");j.type=et.onnx.TypeProto.fromObject(c.type)}return c.docString!=null&&(j.docString=String(c.docString)),j},g.toObject=function(c,j){j||(j={});var _e={};return j.defaults&&(_e.name="",_e.type=null,_e.docString=""),c.name!=null&&c.hasOwnProperty("name")&&(_e.name=c.name),c.type!=null&&c.hasOwnProperty("type")&&(_e.type=et.onnx.TypeProto.toObject(c.type,j)),c.docString!=null&&c.hasOwnProperty("docString")&&(_e.docString=c.docString),_e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g}(),_.NodeProto=function(){function g(c){if(this.input=[],this.output=[],this.attribute=[],c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.input=tt.emptyArray,g.prototype.output=tt.emptyArray,g.prototype.name="",g.prototype.opType="",g.prototype.domain="",g.prototype.attribute=tt.emptyArray,g.prototype.docString="",g.create=function(c){return new g(c)},g.encode=function(c,j){if(j||(j=nt.create()),c.input!=null&&c.input.length)for(var _e=0;_e<c.input.length;++_e)j.uint32(10).string(c.input[_e]);if(c.output!=null&&c.output.length)for(_e=0;_e<c.output.length;++_e)j.uint32(18).string(c.output[_e]);if(c.name!=null&&c.hasOwnProperty("name")&&j.uint32(26).string(c.name),c.opType!=null&&c.hasOwnProperty("opType")&&j.uint32(34).string(c.opType),c.attribute!=null&&c.attribute.length)for(_e=0;_e<c.attribute.length;++_e)et.onnx.AttributeProto.encode(c.attribute[_e],j.uint32(42).fork()).ldelim();return c.docString!=null&&c.hasOwnProperty("docString")&&j.uint32(50).string(c.docString),c.domain!=null&&c.hasOwnProperty("domain")&&j.uint32(58).string(c.domain),j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.NodeProto;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:rt.input&&rt.input.length||(rt.input=[]),rt.input.push(c.string());break;case 2:rt.output&&rt.output.length||(rt.output=[]),rt.output.push(c.string());break;case 3:rt.name=c.string();break;case 4:rt.opType=c.string();break;case 7:rt.domain=c.string();break;case 5:rt.attribute&&rt.attribute.length||(rt.attribute=[]),rt.attribute.push(et.onnx.AttributeProto.decode(c,c.uint32()));break;case 6:rt.docString=c.string();break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.input!=null&&c.hasOwnProperty("input")){if(!Array.isArray(c.input))return"input: array expected";for(var j=0;j<c.input.length;++j)if(!tt.isString(c.input[j]))return"input: string[] expected"}if(c.output!=null&&c.hasOwnProperty("output")){if(!Array.isArray(c.output))return"output: array expected";for(j=0;j<c.output.length;++j)if(!tt.isString(c.output[j]))return"output: string[] expected"}if(c.name!=null&&c.hasOwnProperty("name")&&!tt.isString(c.name))return"name: string expected";if(c.opType!=null&&c.hasOwnProperty("opType")&&!tt.isString(c.opType))return"opType: string expected";if(c.domain!=null&&c.hasOwnProperty("domain")&&!tt.isString(c.domain))return"domain: string expected";if(c.attribute!=null&&c.hasOwnProperty("attribute")){if(!Array.isArray(c.attribute))return"attribute: array expected";for(j=0;j<c.attribute.length;++j){var _e=et.onnx.AttributeProto.verify(c.attribute[j]);if(_e)return"attribute."+_e}}return c.docString!=null&&c.hasOwnProperty("docString")&&!tt.isString(c.docString)?"docString: string expected":null},g.fromObject=function(c){if(c instanceof et.onnx.NodeProto)return c;var j=new et.onnx.NodeProto;if(c.input){if(!Array.isArray(c.input))throw TypeError(".onnx.NodeProto.input: array expected");j.input=[];for(var _e=0;_e<c.input.length;++_e)j.input[_e]=String(c.input[_e])}if(c.output){if(!Array.isArray(c.output))throw TypeError(".onnx.NodeProto.output: array expected");for(j.output=[],_e=0;_e<c.output.length;++_e)j.output[_e]=String(c.output[_e])}if(c.name!=null&&(j.name=String(c.name)),c.opType!=null&&(j.opType=String(c.opType)),c.domain!=null&&(j.domain=String(c.domain)),c.attribute){if(!Array.isArray(c.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(j.attribute=[],_e=0;_e<c.attribute.length;++_e){if(typeof c.attribute[_e]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");j.attribute[_e]=et.onnx.AttributeProto.fromObject(c.attribute[_e])}}return c.docString!=null&&(j.docString=String(c.docString)),j},g.toObject=function(c,j){j||(j={});var _e={};if((j.arrays||j.defaults)&&(_e.input=[],_e.output=[],_e.attribute=[]),j.defaults&&(_e.name="",_e.opType="",_e.docString="",_e.domain=""),c.input&&c.input.length){_e.input=[];for(var rt=0;rt<c.input.length;++rt)_e.input[rt]=c.input[rt]}if(c.output&&c.output.length)for(_e.output=[],rt=0;rt<c.output.length;++rt)_e.output[rt]=c.output[rt];if(c.name!=null&&c.hasOwnProperty("name")&&(_e.name=c.name),c.opType!=null&&c.hasOwnProperty("opType")&&(_e.opType=c.opType),c.attribute&&c.attribute.length)for(_e.attribute=[],rt=0;rt<c.attribute.length;++rt)_e.attribute[rt]=et.onnx.AttributeProto.toObject(c.attribute[rt],j);return c.docString!=null&&c.hasOwnProperty("docString")&&(_e.docString=c.docString),c.domain!=null&&c.hasOwnProperty("domain")&&(_e.domain=c.domain),_e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g}(),_.ModelProto=function(){function g(c){if(this.opsetImport=[],this.metadataProps=[],c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.irVersion=tt.Long?tt.Long.fromBits(0,0,!1):0,g.prototype.opsetImport=tt.emptyArray,g.prototype.producerName="",g.prototype.producerVersion="",g.prototype.domain="",g.prototype.modelVersion=tt.Long?tt.Long.fromBits(0,0,!1):0,g.prototype.docString="",g.prototype.graph=null,g.prototype.metadataProps=tt.emptyArray,g.create=function(c){return new g(c)},g.encode=function(c,j){if(j||(j=nt.create()),c.irVersion!=null&&c.hasOwnProperty("irVersion")&&j.uint32(8).int64(c.irVersion),c.producerName!=null&&c.hasOwnProperty("producerName")&&j.uint32(18).string(c.producerName),c.producerVersion!=null&&c.hasOwnProperty("producerVersion")&&j.uint32(26).string(c.producerVersion),c.domain!=null&&c.hasOwnProperty("domain")&&j.uint32(34).string(c.domain),c.modelVersion!=null&&c.hasOwnProperty("modelVersion")&&j.uint32(40).int64(c.modelVersion),c.docString!=null&&c.hasOwnProperty("docString")&&j.uint32(50).string(c.docString),c.graph!=null&&c.hasOwnProperty("graph")&&et.onnx.GraphProto.encode(c.graph,j.uint32(58).fork()).ldelim(),c.opsetImport!=null&&c.opsetImport.length)for(var _e=0;_e<c.opsetImport.length;++_e)et.onnx.OperatorSetIdProto.encode(c.opsetImport[_e],j.uint32(66).fork()).ldelim();if(c.metadataProps!=null&&c.metadataProps.length)for(_e=0;_e<c.metadataProps.length;++_e)et.onnx.StringStringEntryProto.encode(c.metadataProps[_e],j.uint32(114).fork()).ldelim();return j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.ModelProto;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:rt.irVersion=c.int64();break;case 8:rt.opsetImport&&rt.opsetImport.length||(rt.opsetImport=[]),rt.opsetImport.push(et.onnx.OperatorSetIdProto.decode(c,c.uint32()));break;case 2:rt.producerName=c.string();break;case 3:rt.producerVersion=c.string();break;case 4:rt.domain=c.string();break;case 5:rt.modelVersion=c.int64();break;case 6:rt.docString=c.string();break;case 7:rt.graph=et.onnx.GraphProto.decode(c,c.uint32());break;case 14:rt.metadataProps&&rt.metadataProps.length||(rt.metadataProps=[]),rt.metadataProps.push(et.onnx.StringStringEntryProto.decode(c,c.uint32()));break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.irVersion!=null&&c.hasOwnProperty("irVersion")&&!(tt.isInteger(c.irVersion)||c.irVersion&&tt.isInteger(c.irVersion.low)&&tt.isInteger(c.irVersion.high)))return"irVersion: integer|Long expected";if(c.opsetImport!=null&&c.hasOwnProperty("opsetImport")){if(!Array.isArray(c.opsetImport))return"opsetImport: array expected";for(var j=0;j<c.opsetImport.length;++j)if(_e=et.onnx.OperatorSetIdProto.verify(c.opsetImport[j]))return"opsetImport."+_e}if(c.producerName!=null&&c.hasOwnProperty("producerName")&&!tt.isString(c.producerName))return"producerName: string expected";if(c.producerVersion!=null&&c.hasOwnProperty("producerVersion")&&!tt.isString(c.producerVersion))return"producerVersion: string expected";if(c.domain!=null&&c.hasOwnProperty("domain")&&!tt.isString(c.domain))return"domain: string expected";if(c.modelVersion!=null&&c.hasOwnProperty("modelVersion")&&!(tt.isInteger(c.modelVersion)||c.modelVersion&&tt.isInteger(c.modelVersion.low)&&tt.isInteger(c.modelVersion.high)))return"modelVersion: integer|Long expected";if(c.docString!=null&&c.hasOwnProperty("docString")&&!tt.isString(c.docString))return"docString: string expected";if(c.graph!=null&&c.hasOwnProperty("graph")&&(_e=et.onnx.GraphProto.verify(c.graph)))return"graph."+_e;if(c.metadataProps!=null&&c.hasOwnProperty("metadataProps")){if(!Array.isArray(c.metadataProps))return"metadataProps: array expected";for(j=0;j<c.metadataProps.length;++j){var _e;if(_e=et.onnx.StringStringEntryProto.verify(c.metadataProps[j]))return"metadataProps."+_e}}return null},g.fromObject=function(c){if(c instanceof et.onnx.ModelProto)return c;var j=new et.onnx.ModelProto;if(c.irVersion!=null&&(tt.Long?(j.irVersion=tt.Long.fromValue(c.irVersion)).unsigned=!1:typeof c.irVersion=="string"?j.irVersion=parseInt(c.irVersion,10):typeof c.irVersion=="number"?j.irVersion=c.irVersion:typeof c.irVersion=="object"&&(j.irVersion=new tt.LongBits(c.irVersion.low>>>0,c.irVersion.high>>>0).toNumber())),c.opsetImport){if(!Array.isArray(c.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");j.opsetImport=[];for(var _e=0;_e<c.opsetImport.length;++_e){if(typeof c.opsetImport[_e]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");j.opsetImport[_e]=et.onnx.OperatorSetIdProto.fromObject(c.opsetImport[_e])}}if(c.producerName!=null&&(j.producerName=String(c.producerName)),c.producerVersion!=null&&(j.producerVersion=String(c.producerVersion)),c.domain!=null&&(j.domain=String(c.domain)),c.modelVersion!=null&&(tt.Long?(j.modelVersion=tt.Long.fromValue(c.modelVersion)).unsigned=!1:typeof c.modelVersion=="string"?j.modelVersion=parseInt(c.modelVersion,10):typeof c.modelVersion=="number"?j.modelVersion=c.modelVersion:typeof c.modelVersion=="object"&&(j.modelVersion=new tt.LongBits(c.modelVersion.low>>>0,c.modelVersion.high>>>0).toNumber())),c.docString!=null&&(j.docString=String(c.docString)),c.graph!=null){if(typeof c.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");j.graph=et.onnx.GraphProto.fromObject(c.graph)}if(c.metadataProps){if(!Array.isArray(c.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(j.metadataProps=[],_e=0;_e<c.metadataProps.length;++_e){if(typeof c.metadataProps[_e]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");j.metadataProps[_e]=et.onnx.StringStringEntryProto.fromObject(c.metadataProps[_e])}}return j},g.toObject=function(c,j){j||(j={});var _e={};if((j.arrays||j.defaults)&&(_e.opsetImport=[],_e.metadataProps=[]),j.defaults){if(tt.Long){var rt=new tt.Long(0,0,!1);_e.irVersion=j.longs===String?rt.toString():j.longs===Number?rt.toNumber():rt}else _e.irVersion=j.longs===String?"0":0;_e.producerName="",_e.producerVersion="",_e.domain="",tt.Long?(rt=new tt.Long(0,0,!1),_e.modelVersion=j.longs===String?rt.toString():j.longs===Number?rt.toNumber():rt):_e.modelVersion=j.longs===String?"0":0,_e.docString="",_e.graph=null}if(c.irVersion!=null&&c.hasOwnProperty("irVersion")&&(typeof c.irVersion=="number"?_e.irVersion=j.longs===String?String(c.irVersion):c.irVersion:_e.irVersion=j.longs===String?tt.Long.prototype.toString.call(c.irVersion):j.longs===Number?new tt.LongBits(c.irVersion.low>>>0,c.irVersion.high>>>0).toNumber():c.irVersion),c.producerName!=null&&c.hasOwnProperty("producerName")&&(_e.producerName=c.producerName),c.producerVersion!=null&&c.hasOwnProperty("producerVersion")&&(_e.producerVersion=c.producerVersion),c.domain!=null&&c.hasOwnProperty("domain")&&(_e.domain=c.domain),c.modelVersion!=null&&c.hasOwnProperty("modelVersion")&&(typeof c.modelVersion=="number"?_e.modelVersion=j.longs===String?String(c.modelVersion):c.modelVersion:_e.modelVersion=j.longs===String?tt.Long.prototype.toString.call(c.modelVersion):j.longs===Number?new tt.LongBits(c.modelVersion.low>>>0,c.modelVersion.high>>>0).toNumber():c.modelVersion),c.docString!=null&&c.hasOwnProperty("docString")&&(_e.docString=c.docString),c.graph!=null&&c.hasOwnProperty("graph")&&(_e.graph=et.onnx.GraphProto.toObject(c.graph,j)),c.opsetImport&&c.opsetImport.length){_e.opsetImport=[];for(var st=0;st<c.opsetImport.length;++st)_e.opsetImport[st]=et.onnx.OperatorSetIdProto.toObject(c.opsetImport[st],j)}if(c.metadataProps&&c.metadataProps.length)for(_e.metadataProps=[],st=0;st<c.metadataProps.length;++st)_e.metadataProps[st]=et.onnx.StringStringEntryProto.toObject(c.metadataProps[st],j);return _e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g}(),_.StringStringEntryProto=function(){function g(c){if(c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.key="",g.prototype.value="",g.create=function(c){return new g(c)},g.encode=function(c,j){return j||(j=nt.create()),c.key!=null&&c.hasOwnProperty("key")&&j.uint32(10).string(c.key),c.value!=null&&c.hasOwnProperty("value")&&j.uint32(18).string(c.value),j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.StringStringEntryProto;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:rt.key=c.string();break;case 2:rt.value=c.string();break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){return typeof c!="object"||c===null?"object expected":c.key!=null&&c.hasOwnProperty("key")&&!tt.isString(c.key)?"key: string expected":c.value!=null&&c.hasOwnProperty("value")&&!tt.isString(c.value)?"value: string expected":null},g.fromObject=function(c){if(c instanceof et.onnx.StringStringEntryProto)return c;var j=new et.onnx.StringStringEntryProto;return c.key!=null&&(j.key=String(c.key)),c.value!=null&&(j.value=String(c.value)),j},g.toObject=function(c,j){j||(j={});var _e={};return j.defaults&&(_e.key="",_e.value=""),c.key!=null&&c.hasOwnProperty("key")&&(_e.key=c.key),c.value!=null&&c.hasOwnProperty("value")&&(_e.value=c.value),_e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g}(),_.TensorAnnotation=function(){function g(c){if(this.quantParameterTensorNames=[],c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.tensorName="",g.prototype.quantParameterTensorNames=tt.emptyArray,g.create=function(c){return new g(c)},g.encode=function(c,j){if(j||(j=nt.create()),c.tensorName!=null&&c.hasOwnProperty("tensorName")&&j.uint32(10).string(c.tensorName),c.quantParameterTensorNames!=null&&c.quantParameterTensorNames.length)for(var _e=0;_e<c.quantParameterTensorNames.length;++_e)et.onnx.StringStringEntryProto.encode(c.quantParameterTensorNames[_e],j.uint32(18).fork()).ldelim();return j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.TensorAnnotation;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:rt.tensorName=c.string();break;case 2:rt.quantParameterTensorNames&&rt.quantParameterTensorNames.length||(rt.quantParameterTensorNames=[]),rt.quantParameterTensorNames.push(et.onnx.StringStringEntryProto.decode(c,c.uint32()));break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.tensorName!=null&&c.hasOwnProperty("tensorName")&&!tt.isString(c.tensorName))return"tensorName: string expected";if(c.quantParameterTensorNames!=null&&c.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(c.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var j=0;j<c.quantParameterTensorNames.length;++j){var _e=et.onnx.StringStringEntryProto.verify(c.quantParameterTensorNames[j]);if(_e)return"quantParameterTensorNames."+_e}}return null},g.fromObject=function(c){if(c instanceof et.onnx.TensorAnnotation)return c;var j=new et.onnx.TensorAnnotation;if(c.tensorName!=null&&(j.tensorName=String(c.tensorName)),c.quantParameterTensorNames){if(!Array.isArray(c.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");j.quantParameterTensorNames=[];for(var _e=0;_e<c.quantParameterTensorNames.length;++_e){if(typeof c.quantParameterTensorNames[_e]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");j.quantParameterTensorNames[_e]=et.onnx.StringStringEntryProto.fromObject(c.quantParameterTensorNames[_e])}}return j},g.toObject=function(c,j){j||(j={});var _e={};if((j.arrays||j.defaults)&&(_e.quantParameterTensorNames=[]),j.defaults&&(_e.tensorName=""),c.tensorName!=null&&c.hasOwnProperty("tensorName")&&(_e.tensorName=c.tensorName),c.quantParameterTensorNames&&c.quantParameterTensorNames.length){_e.quantParameterTensorNames=[];for(var rt=0;rt<c.quantParameterTensorNames.length;++rt)_e.quantParameterTensorNames[rt]=et.onnx.StringStringEntryProto.toObject(c.quantParameterTensorNames[rt],j)}return _e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g}(),_.GraphProto=function(){function g(c){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.node=tt.emptyArray,g.prototype.name="",g.prototype.initializer=tt.emptyArray,g.prototype.docString="",g.prototype.input=tt.emptyArray,g.prototype.output=tt.emptyArray,g.prototype.valueInfo=tt.emptyArray,g.prototype.quantizationAnnotation=tt.emptyArray,g.create=function(c){return new g(c)},g.encode=function(c,j){if(j||(j=nt.create()),c.node!=null&&c.node.length)for(var _e=0;_e<c.node.length;++_e)et.onnx.NodeProto.encode(c.node[_e],j.uint32(10).fork()).ldelim();if(c.name!=null&&c.hasOwnProperty("name")&&j.uint32(18).string(c.name),c.initializer!=null&&c.initializer.length)for(_e=0;_e<c.initializer.length;++_e)et.onnx.TensorProto.encode(c.initializer[_e],j.uint32(42).fork()).ldelim();if(c.docString!=null&&c.hasOwnProperty("docString")&&j.uint32(82).string(c.docString),c.input!=null&&c.input.length)for(_e=0;_e<c.input.length;++_e)et.onnx.ValueInfoProto.encode(c.input[_e],j.uint32(90).fork()).ldelim();if(c.output!=null&&c.output.length)for(_e=0;_e<c.output.length;++_e)et.onnx.ValueInfoProto.encode(c.output[_e],j.uint32(98).fork()).ldelim();if(c.valueInfo!=null&&c.valueInfo.length)for(_e=0;_e<c.valueInfo.length;++_e)et.onnx.ValueInfoProto.encode(c.valueInfo[_e],j.uint32(106).fork()).ldelim();if(c.quantizationAnnotation!=null&&c.quantizationAnnotation.length)for(_e=0;_e<c.quantizationAnnotation.length;++_e)et.onnx.TensorAnnotation.encode(c.quantizationAnnotation[_e],j.uint32(114).fork()).ldelim();return j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.GraphProto;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:rt.node&&rt.node.length||(rt.node=[]),rt.node.push(et.onnx.NodeProto.decode(c,c.uint32()));break;case 2:rt.name=c.string();break;case 5:rt.initializer&&rt.initializer.length||(rt.initializer=[]),rt.initializer.push(et.onnx.TensorProto.decode(c,c.uint32()));break;case 10:rt.docString=c.string();break;case 11:rt.input&&rt.input.length||(rt.input=[]),rt.input.push(et.onnx.ValueInfoProto.decode(c,c.uint32()));break;case 12:rt.output&&rt.output.length||(rt.output=[]),rt.output.push(et.onnx.ValueInfoProto.decode(c,c.uint32()));break;case 13:rt.valueInfo&&rt.valueInfo.length||(rt.valueInfo=[]),rt.valueInfo.push(et.onnx.ValueInfoProto.decode(c,c.uint32()));break;case 14:rt.quantizationAnnotation&&rt.quantizationAnnotation.length||(rt.quantizationAnnotation=[]),rt.quantizationAnnotation.push(et.onnx.TensorAnnotation.decode(c,c.uint32()));break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.node!=null&&c.hasOwnProperty("node")){if(!Array.isArray(c.node))return"node: array expected";for(var j=0;j<c.node.length;++j)if(_e=et.onnx.NodeProto.verify(c.node[j]))return"node."+_e}if(c.name!=null&&c.hasOwnProperty("name")&&!tt.isString(c.name))return"name: string expected";if(c.initializer!=null&&c.hasOwnProperty("initializer")){if(!Array.isArray(c.initializer))return"initializer: array expected";for(j=0;j<c.initializer.length;++j)if(_e=et.onnx.TensorProto.verify(c.initializer[j]))return"initializer."+_e}if(c.docString!=null&&c.hasOwnProperty("docString")&&!tt.isString(c.docString))return"docString: string expected";if(c.input!=null&&c.hasOwnProperty("input")){if(!Array.isArray(c.input))return"input: array expected";for(j=0;j<c.input.length;++j)if(_e=et.onnx.ValueInfoProto.verify(c.input[j]))return"input."+_e}if(c.output!=null&&c.hasOwnProperty("output")){if(!Array.isArray(c.output))return"output: array expected";for(j=0;j<c.output.length;++j)if(_e=et.onnx.ValueInfoProto.verify(c.output[j]))return"output."+_e}if(c.valueInfo!=null&&c.hasOwnProperty("valueInfo")){if(!Array.isArray(c.valueInfo))return"valueInfo: array expected";for(j=0;j<c.valueInfo.length;++j)if(_e=et.onnx.ValueInfoProto.verify(c.valueInfo[j]))return"valueInfo."+_e}if(c.quantizationAnnotation!=null&&c.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(c.quantizationAnnotation))return"quantizationAnnotation: array expected";for(j=0;j<c.quantizationAnnotation.length;++j){var _e;if(_e=et.onnx.TensorAnnotation.verify(c.quantizationAnnotation[j]))return"quantizationAnnotation."+_e}}return null},g.fromObject=function(c){if(c instanceof et.onnx.GraphProto)return c;var j=new et.onnx.GraphProto;if(c.node){if(!Array.isArray(c.node))throw TypeError(".onnx.GraphProto.node: array expected");j.node=[];for(var _e=0;_e<c.node.length;++_e){if(typeof c.node[_e]!="object")throw TypeError(".onnx.GraphProto.node: object expected");j.node[_e]=et.onnx.NodeProto.fromObject(c.node[_e])}}if(c.name!=null&&(j.name=String(c.name)),c.initializer){if(!Array.isArray(c.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(j.initializer=[],_e=0;_e<c.initializer.length;++_e){if(typeof c.initializer[_e]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");j.initializer[_e]=et.onnx.TensorProto.fromObject(c.initializer[_e])}}if(c.docString!=null&&(j.docString=String(c.docString)),c.input){if(!Array.isArray(c.input))throw TypeError(".onnx.GraphProto.input: array expected");for(j.input=[],_e=0;_e<c.input.length;++_e){if(typeof c.input[_e]!="object")throw TypeError(".onnx.GraphProto.input: object expected");j.input[_e]=et.onnx.ValueInfoProto.fromObject(c.input[_e])}}if(c.output){if(!Array.isArray(c.output))throw TypeError(".onnx.GraphProto.output: array expected");for(j.output=[],_e=0;_e<c.output.length;++_e){if(typeof c.output[_e]!="object")throw TypeError(".onnx.GraphProto.output: object expected");j.output[_e]=et.onnx.ValueInfoProto.fromObject(c.output[_e])}}if(c.valueInfo){if(!Array.isArray(c.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(j.valueInfo=[],_e=0;_e<c.valueInfo.length;++_e){if(typeof c.valueInfo[_e]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");j.valueInfo[_e]=et.onnx.ValueInfoProto.fromObject(c.valueInfo[_e])}}if(c.quantizationAnnotation){if(!Array.isArray(c.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(j.quantizationAnnotation=[],_e=0;_e<c.quantizationAnnotation.length;++_e){if(typeof c.quantizationAnnotation[_e]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");j.quantizationAnnotation[_e]=et.onnx.TensorAnnotation.fromObject(c.quantizationAnnotation[_e])}}return j},g.toObject=function(c,j){j||(j={});var _e={};if((j.arrays||j.defaults)&&(_e.node=[],_e.initializer=[],_e.input=[],_e.output=[],_e.valueInfo=[],_e.quantizationAnnotation=[]),j.defaults&&(_e.name="",_e.docString=""),c.node&&c.node.length){_e.node=[];for(var rt=0;rt<c.node.length;++rt)_e.node[rt]=et.onnx.NodeProto.toObject(c.node[rt],j)}if(c.name!=null&&c.hasOwnProperty("name")&&(_e.name=c.name),c.initializer&&c.initializer.length)for(_e.initializer=[],rt=0;rt<c.initializer.length;++rt)_e.initializer[rt]=et.onnx.TensorProto.toObject(c.initializer[rt],j);if(c.docString!=null&&c.hasOwnProperty("docString")&&(_e.docString=c.docString),c.input&&c.input.length)for(_e.input=[],rt=0;rt<c.input.length;++rt)_e.input[rt]=et.onnx.ValueInfoProto.toObject(c.input[rt],j);if(c.output&&c.output.length)for(_e.output=[],rt=0;rt<c.output.length;++rt)_e.output[rt]=et.onnx.ValueInfoProto.toObject(c.output[rt],j);if(c.valueInfo&&c.valueInfo.length)for(_e.valueInfo=[],rt=0;rt<c.valueInfo.length;++rt)_e.valueInfo[rt]=et.onnx.ValueInfoProto.toObject(c.valueInfo[rt],j);if(c.quantizationAnnotation&&c.quantizationAnnotation.length)for(_e.quantizationAnnotation=[],rt=0;rt<c.quantizationAnnotation.length;++rt)_e.quantizationAnnotation[rt]=et.onnx.TensorAnnotation.toObject(c.quantizationAnnotation[rt],j);return _e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g}(),_.TensorProto=function(){function g(c){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.dims=tt.emptyArray,g.prototype.dataType=0,g.prototype.segment=null,g.prototype.floatData=tt.emptyArray,g.prototype.int32Data=tt.emptyArray,g.prototype.stringData=tt.emptyArray,g.prototype.int64Data=tt.emptyArray,g.prototype.name="",g.prototype.docString="",g.prototype.rawData=tt.newBuffer([]),g.prototype.externalData=tt.emptyArray,g.prototype.dataLocation=0,g.prototype.doubleData=tt.emptyArray,g.prototype.uint64Data=tt.emptyArray,g.create=function(c){return new g(c)},g.encode=function(c,j){if(j||(j=nt.create()),c.dims!=null&&c.dims.length){j.uint32(10).fork();for(var _e=0;_e<c.dims.length;++_e)j.int64(c.dims[_e]);j.ldelim()}if(c.dataType!=null&&c.hasOwnProperty("dataType")&&j.uint32(16).int32(c.dataType),c.segment!=null&&c.hasOwnProperty("segment")&&et.onnx.TensorProto.Segment.encode(c.segment,j.uint32(26).fork()).ldelim(),c.floatData!=null&&c.floatData.length){for(j.uint32(34).fork(),_e=0;_e<c.floatData.length;++_e)j.float(c.floatData[_e]);j.ldelim()}if(c.int32Data!=null&&c.int32Data.length){for(j.uint32(42).fork(),_e=0;_e<c.int32Data.length;++_e)j.int32(c.int32Data[_e]);j.ldelim()}if(c.stringData!=null&&c.stringData.length)for(_e=0;_e<c.stringData.length;++_e)j.uint32(50).bytes(c.stringData[_e]);if(c.int64Data!=null&&c.int64Data.length){for(j.uint32(58).fork(),_e=0;_e<c.int64Data.length;++_e)j.int64(c.int64Data[_e]);j.ldelim()}if(c.name!=null&&c.hasOwnProperty("name")&&j.uint32(66).string(c.name),c.rawData!=null&&c.hasOwnProperty("rawData")&&j.uint32(74).bytes(c.rawData),c.doubleData!=null&&c.doubleData.length){for(j.uint32(82).fork(),_e=0;_e<c.doubleData.length;++_e)j.double(c.doubleData[_e]);j.ldelim()}if(c.uint64Data!=null&&c.uint64Data.length){for(j.uint32(90).fork(),_e=0;_e<c.uint64Data.length;++_e)j.uint64(c.uint64Data[_e]);j.ldelim()}if(c.docString!=null&&c.hasOwnProperty("docString")&&j.uint32(98).string(c.docString),c.externalData!=null&&c.externalData.length)for(_e=0;_e<c.externalData.length;++_e)et.onnx.StringStringEntryProto.encode(c.externalData[_e],j.uint32(106).fork()).ldelim();return c.dataLocation!=null&&c.hasOwnProperty("dataLocation")&&j.uint32(112).int32(c.dataLocation),j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.TensorProto;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:if(rt.dims&&rt.dims.length||(rt.dims=[]),(7&st)==2)for(var ot=c.uint32()+c.pos;c.pos<ot;)rt.dims.push(c.int64());else rt.dims.push(c.int64());break;case 2:rt.dataType=c.int32();break;case 3:rt.segment=et.onnx.TensorProto.Segment.decode(c,c.uint32());break;case 4:if(rt.floatData&&rt.floatData.length||(rt.floatData=[]),(7&st)==2)for(ot=c.uint32()+c.pos;c.pos<ot;)rt.floatData.push(c.float());else rt.floatData.push(c.float());break;case 5:if(rt.int32Data&&rt.int32Data.length||(rt.int32Data=[]),(7&st)==2)for(ot=c.uint32()+c.pos;c.pos<ot;)rt.int32Data.push(c.int32());else rt.int32Data.push(c.int32());break;case 6:rt.stringData&&rt.stringData.length||(rt.stringData=[]),rt.stringData.push(c.bytes());break;case 7:if(rt.int64Data&&rt.int64Data.length||(rt.int64Data=[]),(7&st)==2)for(ot=c.uint32()+c.pos;c.pos<ot;)rt.int64Data.push(c.int64());else rt.int64Data.push(c.int64());break;case 8:rt.name=c.string();break;case 12:rt.docString=c.string();break;case 9:rt.rawData=c.bytes();break;case 13:rt.externalData&&rt.externalData.length||(rt.externalData=[]),rt.externalData.push(et.onnx.StringStringEntryProto.decode(c,c.uint32()));break;case 14:rt.dataLocation=c.int32();break;case 10:if(rt.doubleData&&rt.doubleData.length||(rt.doubleData=[]),(7&st)==2)for(ot=c.uint32()+c.pos;c.pos<ot;)rt.doubleData.push(c.double());else rt.doubleData.push(c.double());break;case 11:if(rt.uint64Data&&rt.uint64Data.length||(rt.uint64Data=[]),(7&st)==2)for(ot=c.uint32()+c.pos;c.pos<ot;)rt.uint64Data.push(c.uint64());else rt.uint64Data.push(c.uint64());break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.dims!=null&&c.hasOwnProperty("dims")){if(!Array.isArray(c.dims))return"dims: array expected";for(var j=0;j<c.dims.length;++j)if(!(tt.isInteger(c.dims[j])||c.dims[j]&&tt.isInteger(c.dims[j].low)&&tt.isInteger(c.dims[j].high)))return"dims: integer|Long[] expected"}if(c.dataType!=null&&c.hasOwnProperty("dataType")&&!tt.isInteger(c.dataType))return"dataType: integer expected";if(c.segment!=null&&c.hasOwnProperty("segment")&&(_e=et.onnx.TensorProto.Segment.verify(c.segment)))return"segment."+_e;if(c.floatData!=null&&c.hasOwnProperty("floatData")){if(!Array.isArray(c.floatData))return"floatData: array expected";for(j=0;j<c.floatData.length;++j)if(typeof c.floatData[j]!="number")return"floatData: number[] expected"}if(c.int32Data!=null&&c.hasOwnProperty("int32Data")){if(!Array.isArray(c.int32Data))return"int32Data: array expected";for(j=0;j<c.int32Data.length;++j)if(!tt.isInteger(c.int32Data[j]))return"int32Data: integer[] expected"}if(c.stringData!=null&&c.hasOwnProperty("stringData")){if(!Array.isArray(c.stringData))return"stringData: array expected";for(j=0;j<c.stringData.length;++j)if(!(c.stringData[j]&&typeof c.stringData[j].length=="number"||tt.isString(c.stringData[j])))return"stringData: buffer[] expected"}if(c.int64Data!=null&&c.hasOwnProperty("int64Data")){if(!Array.isArray(c.int64Data))return"int64Data: array expected";for(j=0;j<c.int64Data.length;++j)if(!(tt.isInteger(c.int64Data[j])||c.int64Data[j]&&tt.isInteger(c.int64Data[j].low)&&tt.isInteger(c.int64Data[j].high)))return"int64Data: integer|Long[] expected"}if(c.name!=null&&c.hasOwnProperty("name")&&!tt.isString(c.name))return"name: string expected";if(c.docString!=null&&c.hasOwnProperty("docString")&&!tt.isString(c.docString))return"docString: string expected";if(c.rawData!=null&&c.hasOwnProperty("rawData")&&!(c.rawData&&typeof c.rawData.length=="number"||tt.isString(c.rawData)))return"rawData: buffer expected";if(c.externalData!=null&&c.hasOwnProperty("externalData")){if(!Array.isArray(c.externalData))return"externalData: array expected";for(j=0;j<c.externalData.length;++j){var _e;if(_e=et.onnx.StringStringEntryProto.verify(c.externalData[j]))return"externalData."+_e}}if(c.dataLocation!=null&&c.hasOwnProperty("dataLocation"))switch(c.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(c.doubleData!=null&&c.hasOwnProperty("doubleData")){if(!Array.isArray(c.doubleData))return"doubleData: array expected";for(j=0;j<c.doubleData.length;++j)if(typeof c.doubleData[j]!="number")return"doubleData: number[] expected"}if(c.uint64Data!=null&&c.hasOwnProperty("uint64Data")){if(!Array.isArray(c.uint64Data))return"uint64Data: array expected";for(j=0;j<c.uint64Data.length;++j)if(!(tt.isInteger(c.uint64Data[j])||c.uint64Data[j]&&tt.isInteger(c.uint64Data[j].low)&&tt.isInteger(c.uint64Data[j].high)))return"uint64Data: integer|Long[] expected"}return null},g.fromObject=function(c){if(c instanceof et.onnx.TensorProto)return c;var j=new et.onnx.TensorProto;if(c.dims){if(!Array.isArray(c.dims))throw TypeError(".onnx.TensorProto.dims: array expected");j.dims=[];for(var _e=0;_e<c.dims.length;++_e)tt.Long?(j.dims[_e]=tt.Long.fromValue(c.dims[_e])).unsigned=!1:typeof c.dims[_e]=="string"?j.dims[_e]=parseInt(c.dims[_e],10):typeof c.dims[_e]=="number"?j.dims[_e]=c.dims[_e]:typeof c.dims[_e]=="object"&&(j.dims[_e]=new tt.LongBits(c.dims[_e].low>>>0,c.dims[_e].high>>>0).toNumber())}if(c.dataType!=null&&(j.dataType=0|c.dataType),c.segment!=null){if(typeof c.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");j.segment=et.onnx.TensorProto.Segment.fromObject(c.segment)}if(c.floatData){if(!Array.isArray(c.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(j.floatData=[],_e=0;_e<c.floatData.length;++_e)j.floatData[_e]=Number(c.floatData[_e])}if(c.int32Data){if(!Array.isArray(c.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(j.int32Data=[],_e=0;_e<c.int32Data.length;++_e)j.int32Data[_e]=0|c.int32Data[_e]}if(c.stringData){if(!Array.isArray(c.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(j.stringData=[],_e=0;_e<c.stringData.length;++_e)typeof c.stringData[_e]=="string"?tt.base64.decode(c.stringData[_e],j.stringData[_e]=tt.newBuffer(tt.base64.length(c.stringData[_e])),0):c.stringData[_e].length&&(j.stringData[_e]=c.stringData[_e])}if(c.int64Data){if(!Array.isArray(c.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(j.int64Data=[],_e=0;_e<c.int64Data.length;++_e)tt.Long?(j.int64Data[_e]=tt.Long.fromValue(c.int64Data[_e])).unsigned=!1:typeof c.int64Data[_e]=="string"?j.int64Data[_e]=parseInt(c.int64Data[_e],10):typeof c.int64Data[_e]=="number"?j.int64Data[_e]=c.int64Data[_e]:typeof c.int64Data[_e]=="object"&&(j.int64Data[_e]=new tt.LongBits(c.int64Data[_e].low>>>0,c.int64Data[_e].high>>>0).toNumber())}if(c.name!=null&&(j.name=String(c.name)),c.docString!=null&&(j.docString=String(c.docString)),c.rawData!=null&&(typeof c.rawData=="string"?tt.base64.decode(c.rawData,j.rawData=tt.newBuffer(tt.base64.length(c.rawData)),0):c.rawData.length&&(j.rawData=c.rawData)),c.externalData){if(!Array.isArray(c.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(j.externalData=[],_e=0;_e<c.externalData.length;++_e){if(typeof c.externalData[_e]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");j.externalData[_e]=et.onnx.StringStringEntryProto.fromObject(c.externalData[_e])}}switch(c.dataLocation){case"DEFAULT":case 0:j.dataLocation=0;break;case"EXTERNAL":case 1:j.dataLocation=1}if(c.doubleData){if(!Array.isArray(c.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(j.doubleData=[],_e=0;_e<c.doubleData.length;++_e)j.doubleData[_e]=Number(c.doubleData[_e])}if(c.uint64Data){if(!Array.isArray(c.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(j.uint64Data=[],_e=0;_e<c.uint64Data.length;++_e)tt.Long?(j.uint64Data[_e]=tt.Long.fromValue(c.uint64Data[_e])).unsigned=!0:typeof c.uint64Data[_e]=="string"?j.uint64Data[_e]=parseInt(c.uint64Data[_e],10):typeof c.uint64Data[_e]=="number"?j.uint64Data[_e]=c.uint64Data[_e]:typeof c.uint64Data[_e]=="object"&&(j.uint64Data[_e]=new tt.LongBits(c.uint64Data[_e].low>>>0,c.uint64Data[_e].high>>>0).toNumber(!0))}return j},g.toObject=function(c,j){j||(j={});var _e={};if((j.arrays||j.defaults)&&(_e.dims=[],_e.floatData=[],_e.int32Data=[],_e.stringData=[],_e.int64Data=[],_e.doubleData=[],_e.uint64Data=[],_e.externalData=[]),j.defaults&&(_e.dataType=0,_e.segment=null,_e.name="",j.bytes===String?_e.rawData="":(_e.rawData=[],j.bytes!==Array&&(_e.rawData=tt.newBuffer(_e.rawData))),_e.docString="",_e.dataLocation=j.enums===String?"DEFAULT":0),c.dims&&c.dims.length){_e.dims=[];for(var rt=0;rt<c.dims.length;++rt)typeof c.dims[rt]=="number"?_e.dims[rt]=j.longs===String?String(c.dims[rt]):c.dims[rt]:_e.dims[rt]=j.longs===String?tt.Long.prototype.toString.call(c.dims[rt]):j.longs===Number?new tt.LongBits(c.dims[rt].low>>>0,c.dims[rt].high>>>0).toNumber():c.dims[rt]}if(c.dataType!=null&&c.hasOwnProperty("dataType")&&(_e.dataType=c.dataType),c.segment!=null&&c.hasOwnProperty("segment")&&(_e.segment=et.onnx.TensorProto.Segment.toObject(c.segment,j)),c.floatData&&c.floatData.length)for(_e.floatData=[],rt=0;rt<c.floatData.length;++rt)_e.floatData[rt]=j.json&&!isFinite(c.floatData[rt])?String(c.floatData[rt]):c.floatData[rt];if(c.int32Data&&c.int32Data.length)for(_e.int32Data=[],rt=0;rt<c.int32Data.length;++rt)_e.int32Data[rt]=c.int32Data[rt];if(c.stringData&&c.stringData.length)for(_e.stringData=[],rt=0;rt<c.stringData.length;++rt)_e.stringData[rt]=j.bytes===String?tt.base64.encode(c.stringData[rt],0,c.stringData[rt].length):j.bytes===Array?Array.prototype.slice.call(c.stringData[rt]):c.stringData[rt];if(c.int64Data&&c.int64Data.length)for(_e.int64Data=[],rt=0;rt<c.int64Data.length;++rt)typeof c.int64Data[rt]=="number"?_e.int64Data[rt]=j.longs===String?String(c.int64Data[rt]):c.int64Data[rt]:_e.int64Data[rt]=j.longs===String?tt.Long.prototype.toString.call(c.int64Data[rt]):j.longs===Number?new tt.LongBits(c.int64Data[rt].low>>>0,c.int64Data[rt].high>>>0).toNumber():c.int64Data[rt];if(c.name!=null&&c.hasOwnProperty("name")&&(_e.name=c.name),c.rawData!=null&&c.hasOwnProperty("rawData")&&(_e.rawData=j.bytes===String?tt.base64.encode(c.rawData,0,c.rawData.length):j.bytes===Array?Array.prototype.slice.call(c.rawData):c.rawData),c.doubleData&&c.doubleData.length)for(_e.doubleData=[],rt=0;rt<c.doubleData.length;++rt)_e.doubleData[rt]=j.json&&!isFinite(c.doubleData[rt])?String(c.doubleData[rt]):c.doubleData[rt];if(c.uint64Data&&c.uint64Data.length)for(_e.uint64Data=[],rt=0;rt<c.uint64Data.length;++rt)typeof c.uint64Data[rt]=="number"?_e.uint64Data[rt]=j.longs===String?String(c.uint64Data[rt]):c.uint64Data[rt]:_e.uint64Data[rt]=j.longs===String?tt.Long.prototype.toString.call(c.uint64Data[rt]):j.longs===Number?new tt.LongBits(c.uint64Data[rt].low>>>0,c.uint64Data[rt].high>>>0).toNumber(!0):c.uint64Data[rt];if(c.docString!=null&&c.hasOwnProperty("docString")&&(_e.docString=c.docString),c.externalData&&c.externalData.length)for(_e.externalData=[],rt=0;rt<c.externalData.length;++rt)_e.externalData[rt]=et.onnx.StringStringEntryProto.toObject(c.externalData[rt],j);return c.dataLocation!=null&&c.hasOwnProperty("dataLocation")&&(_e.dataLocation=j.enums===String?et.onnx.TensorProto.DataLocation[c.dataLocation]:c.dataLocation),_e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g.DataType=function(){var c={},j=Object.create(c);return j[c[0]="UNDEFINED"]=0,j[c[1]="FLOAT"]=1,j[c[2]="UINT8"]=2,j[c[3]="INT8"]=3,j[c[4]="UINT16"]=4,j[c[5]="INT16"]=5,j[c[6]="INT32"]=6,j[c[7]="INT64"]=7,j[c[8]="STRING"]=8,j[c[9]="BOOL"]=9,j[c[10]="FLOAT16"]=10,j[c[11]="DOUBLE"]=11,j[c[12]="UINT32"]=12,j[c[13]="UINT64"]=13,j[c[14]="COMPLEX64"]=14,j[c[15]="COMPLEX128"]=15,j[c[16]="BFLOAT16"]=16,j}(),g.Segment=function(){function c(j){if(j)for(var _e=Object.keys(j),rt=0;rt<_e.length;++rt)j[_e[rt]]!=null&&(this[_e[rt]]=j[_e[rt]])}return c.prototype.begin=tt.Long?tt.Long.fromBits(0,0,!1):0,c.prototype.end=tt.Long?tt.Long.fromBits(0,0,!1):0,c.create=function(j){return new c(j)},c.encode=function(j,_e){return _e||(_e=nt.create()),j.begin!=null&&j.hasOwnProperty("begin")&&_e.uint32(8).int64(j.begin),j.end!=null&&j.hasOwnProperty("end")&&_e.uint32(16).int64(j.end),_e},c.encodeDelimited=function(j,_e){return this.encode(j,_e).ldelim()},c.decode=function(j,_e){j instanceof $||(j=$.create(j));for(var rt=_e===void 0?j.len:j.pos+_e,st=new et.onnx.TensorProto.Segment;j.pos<rt;){var ot=j.uint32();switch(ot>>>3){case 1:st.begin=j.int64();break;case 2:st.end=j.int64();break;default:j.skipType(7&ot)}}return st},c.decodeDelimited=function(j){return j instanceof $||(j=new $(j)),this.decode(j,j.uint32())},c.verify=function(j){return typeof j!="object"||j===null?"object expected":j.begin!=null&&j.hasOwnProperty("begin")&&!(tt.isInteger(j.begin)||j.begin&&tt.isInteger(j.begin.low)&&tt.isInteger(j.begin.high))?"begin: integer|Long expected":j.end!=null&&j.hasOwnProperty("end")&&!(tt.isInteger(j.end)||j.end&&tt.isInteger(j.end.low)&&tt.isInteger(j.end.high))?"end: integer|Long expected":null},c.fromObject=function(j){if(j instanceof et.onnx.TensorProto.Segment)return j;var _e=new et.onnx.TensorProto.Segment;return j.begin!=null&&(tt.Long?(_e.begin=tt.Long.fromValue(j.begin)).unsigned=!1:typeof j.begin=="string"?_e.begin=parseInt(j.begin,10):typeof j.begin=="number"?_e.begin=j.begin:typeof j.begin=="object"&&(_e.begin=new tt.LongBits(j.begin.low>>>0,j.begin.high>>>0).toNumber())),j.end!=null&&(tt.Long?(_e.end=tt.Long.fromValue(j.end)).unsigned=!1:typeof j.end=="string"?_e.end=parseInt(j.end,10):typeof j.end=="number"?_e.end=j.end:typeof j.end=="object"&&(_e.end=new tt.LongBits(j.end.low>>>0,j.end.high>>>0).toNumber())),_e},c.toObject=function(j,_e){_e||(_e={});var rt={};if(_e.defaults){if(tt.Long){var st=new tt.Long(0,0,!1);rt.begin=_e.longs===String?st.toString():_e.longs===Number?st.toNumber():st}else rt.begin=_e.longs===String?"0":0;tt.Long?(st=new tt.Long(0,0,!1),rt.end=_e.longs===String?st.toString():_e.longs===Number?st.toNumber():st):rt.end=_e.longs===String?"0":0}return j.begin!=null&&j.hasOwnProperty("begin")&&(typeof j.begin=="number"?rt.begin=_e.longs===String?String(j.begin):j.begin:rt.begin=_e.longs===String?tt.Long.prototype.toString.call(j.begin):_e.longs===Number?new tt.LongBits(j.begin.low>>>0,j.begin.high>>>0).toNumber():j.begin),j.end!=null&&j.hasOwnProperty("end")&&(typeof j.end=="number"?rt.end=_e.longs===String?String(j.end):j.end:rt.end=_e.longs===String?tt.Long.prototype.toString.call(j.end):_e.longs===Number?new tt.LongBits(j.end.low>>>0,j.end.high>>>0).toNumber():j.end),rt},c.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},c}(),g.DataLocation=function(){var c={},j=Object.create(c);return j[c[0]="DEFAULT"]=0,j[c[1]="EXTERNAL"]=1,j}(),g}(),_.TensorShapeProto=function(){function g(c){if(this.dim=[],c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.dim=tt.emptyArray,g.create=function(c){return new g(c)},g.encode=function(c,j){if(j||(j=nt.create()),c.dim!=null&&c.dim.length)for(var _e=0;_e<c.dim.length;++_e)et.onnx.TensorShapeProto.Dimension.encode(c.dim[_e],j.uint32(10).fork()).ldelim();return j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.TensorShapeProto;c.pos<_e;){var st=c.uint32();st>>>3==1?(rt.dim&&rt.dim.length||(rt.dim=[]),rt.dim.push(et.onnx.TensorShapeProto.Dimension.decode(c,c.uint32()))):c.skipType(7&st)}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){if(typeof c!="object"||c===null)return"object expected";if(c.dim!=null&&c.hasOwnProperty("dim")){if(!Array.isArray(c.dim))return"dim: array expected";for(var j=0;j<c.dim.length;++j){var _e=et.onnx.TensorShapeProto.Dimension.verify(c.dim[j]);if(_e)return"dim."+_e}}return null},g.fromObject=function(c){if(c instanceof et.onnx.TensorShapeProto)return c;var j=new et.onnx.TensorShapeProto;if(c.dim){if(!Array.isArray(c.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");j.dim=[];for(var _e=0;_e<c.dim.length;++_e){if(typeof c.dim[_e]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");j.dim[_e]=et.onnx.TensorShapeProto.Dimension.fromObject(c.dim[_e])}}return j},g.toObject=function(c,j){j||(j={});var _e={};if((j.arrays||j.defaults)&&(_e.dim=[]),c.dim&&c.dim.length){_e.dim=[];for(var rt=0;rt<c.dim.length;++rt)_e.dim[rt]=et.onnx.TensorShapeProto.Dimension.toObject(c.dim[rt],j)}return _e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g.Dimension=function(){function c(_e){if(_e)for(var rt=Object.keys(_e),st=0;st<rt.length;++st)_e[rt[st]]!=null&&(this[rt[st]]=_e[rt[st]])}var j;return c.prototype.dimValue=tt.Long?tt.Long.fromBits(0,0,!1):0,c.prototype.dimParam="",c.prototype.denotation="",Object.defineProperty(c.prototype,"value",{get:tt.oneOfGetter(j=["dimValue","dimParam"]),set:tt.oneOfSetter(j)}),c.create=function(_e){return new c(_e)},c.encode=function(_e,rt){return rt||(rt=nt.create()),_e.dimValue!=null&&_e.hasOwnProperty("dimValue")&&rt.uint32(8).int64(_e.dimValue),_e.dimParam!=null&&_e.hasOwnProperty("dimParam")&&rt.uint32(18).string(_e.dimParam),_e.denotation!=null&&_e.hasOwnProperty("denotation")&&rt.uint32(26).string(_e.denotation),rt},c.encodeDelimited=function(_e,rt){return this.encode(_e,rt).ldelim()},c.decode=function(_e,rt){_e instanceof $||(_e=$.create(_e));for(var st=rt===void 0?_e.len:_e.pos+rt,ot=new et.onnx.TensorShapeProto.Dimension;_e.pos<st;){var it=_e.uint32();switch(it>>>3){case 1:ot.dimValue=_e.int64();break;case 2:ot.dimParam=_e.string();break;case 3:ot.denotation=_e.string();break;default:_e.skipType(7&it)}}return ot},c.decodeDelimited=function(_e){return _e instanceof $||(_e=new $(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";var rt={};if(_e.dimValue!=null&&_e.hasOwnProperty("dimValue")&&(rt.value=1,!(tt.isInteger(_e.dimValue)||_e.dimValue&&tt.isInteger(_e.dimValue.low)&&tt.isInteger(_e.dimValue.high))))return"dimValue: integer|Long expected";if(_e.dimParam!=null&&_e.hasOwnProperty("dimParam")){if(rt.value===1)return"value: multiple values";if(rt.value=1,!tt.isString(_e.dimParam))return"dimParam: string expected"}return _e.denotation!=null&&_e.hasOwnProperty("denotation")&&!tt.isString(_e.denotation)?"denotation: string expected":null},c.fromObject=function(_e){if(_e instanceof et.onnx.TensorShapeProto.Dimension)return _e;var rt=new et.onnx.TensorShapeProto.Dimension;return _e.dimValue!=null&&(tt.Long?(rt.dimValue=tt.Long.fromValue(_e.dimValue)).unsigned=!1:typeof _e.dimValue=="string"?rt.dimValue=parseInt(_e.dimValue,10):typeof _e.dimValue=="number"?rt.dimValue=_e.dimValue:typeof _e.dimValue=="object"&&(rt.dimValue=new tt.LongBits(_e.dimValue.low>>>0,_e.dimValue.high>>>0).toNumber())),_e.dimParam!=null&&(rt.dimParam=String(_e.dimParam)),_e.denotation!=null&&(rt.denotation=String(_e.denotation)),rt},c.toObject=function(_e,rt){rt||(rt={});var st={};return rt.defaults&&(st.denotation=""),_e.dimValue!=null&&_e.hasOwnProperty("dimValue")&&(typeof _e.dimValue=="number"?st.dimValue=rt.longs===String?String(_e.dimValue):_e.dimValue:st.dimValue=rt.longs===String?tt.Long.prototype.toString.call(_e.dimValue):rt.longs===Number?new tt.LongBits(_e.dimValue.low>>>0,_e.dimValue.high>>>0).toNumber():_e.dimValue,rt.oneofs&&(st.value="dimValue")),_e.dimParam!=null&&_e.hasOwnProperty("dimParam")&&(st.dimParam=_e.dimParam,rt.oneofs&&(st.value="dimParam")),_e.denotation!=null&&_e.hasOwnProperty("denotation")&&(st.denotation=_e.denotation),st},c.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},c}(),g}(),_.TypeProto=function(){function g(j){if(j)for(var _e=Object.keys(j),rt=0;rt<_e.length;++rt)j[_e[rt]]!=null&&(this[_e[rt]]=j[_e[rt]])}var c;return g.prototype.tensorType=null,g.prototype.denotation="",Object.defineProperty(g.prototype,"value",{get:tt.oneOfGetter(c=["tensorType"]),set:tt.oneOfSetter(c)}),g.create=function(j){return new g(j)},g.encode=function(j,_e){return _e||(_e=nt.create()),j.tensorType!=null&&j.hasOwnProperty("tensorType")&&et.onnx.TypeProto.Tensor.encode(j.tensorType,_e.uint32(10).fork()).ldelim(),j.denotation!=null&&j.hasOwnProperty("denotation")&&_e.uint32(50).string(j.denotation),_e},g.encodeDelimited=function(j,_e){return this.encode(j,_e).ldelim()},g.decode=function(j,_e){j instanceof $||(j=$.create(j));for(var rt=_e===void 0?j.len:j.pos+_e,st=new et.onnx.TypeProto;j.pos<rt;){var ot=j.uint32();switch(ot>>>3){case 1:st.tensorType=et.onnx.TypeProto.Tensor.decode(j,j.uint32());break;case 6:st.denotation=j.string();break;default:j.skipType(7&ot)}}return st},g.decodeDelimited=function(j){return j instanceof $||(j=new $(j)),this.decode(j,j.uint32())},g.verify=function(j){if(typeof j!="object"||j===null)return"object expected";if(j.tensorType!=null&&j.hasOwnProperty("tensorType")){var _e=et.onnx.TypeProto.Tensor.verify(j.tensorType);if(_e)return"tensorType."+_e}return j.denotation!=null&&j.hasOwnProperty("denotation")&&!tt.isString(j.denotation)?"denotation: string expected":null},g.fromObject=function(j){if(j instanceof et.onnx.TypeProto)return j;var _e=new et.onnx.TypeProto;if(j.tensorType!=null){if(typeof j.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");_e.tensorType=et.onnx.TypeProto.Tensor.fromObject(j.tensorType)}return j.denotation!=null&&(_e.denotation=String(j.denotation)),_e},g.toObject=function(j,_e){_e||(_e={});var rt={};return _e.defaults&&(rt.denotation=""),j.tensorType!=null&&j.hasOwnProperty("tensorType")&&(rt.tensorType=et.onnx.TypeProto.Tensor.toObject(j.tensorType,_e),_e.oneofs&&(rt.value="tensorType")),j.denotation!=null&&j.hasOwnProperty("denotation")&&(rt.denotation=j.denotation),rt},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g.Tensor=function(){function j(_e){if(_e)for(var rt=Object.keys(_e),st=0;st<rt.length;++st)_e[rt[st]]!=null&&(this[rt[st]]=_e[rt[st]])}return j.prototype.elemType=0,j.prototype.shape=null,j.create=function(_e){return new j(_e)},j.encode=function(_e,rt){return rt||(rt=nt.create()),_e.elemType!=null&&_e.hasOwnProperty("elemType")&&rt.uint32(8).int32(_e.elemType),_e.shape!=null&&_e.hasOwnProperty("shape")&&et.onnx.TensorShapeProto.encode(_e.shape,rt.uint32(18).fork()).ldelim(),rt},j.encodeDelimited=function(_e,rt){return this.encode(_e,rt).ldelim()},j.decode=function(_e,rt){_e instanceof $||(_e=$.create(_e));for(var st=rt===void 0?_e.len:_e.pos+rt,ot=new et.onnx.TypeProto.Tensor;_e.pos<st;){var it=_e.uint32();switch(it>>>3){case 1:ot.elemType=_e.int32();break;case 2:ot.shape=et.onnx.TensorShapeProto.decode(_e,_e.uint32());break;default:_e.skipType(7&it)}}return ot},j.decodeDelimited=function(_e){return _e instanceof $||(_e=new $(_e)),this.decode(_e,_e.uint32())},j.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.elemType!=null&&_e.hasOwnProperty("elemType")&&!tt.isInteger(_e.elemType))return"elemType: integer expected";if(_e.shape!=null&&_e.hasOwnProperty("shape")){var rt=et.onnx.TensorShapeProto.verify(_e.shape);if(rt)return"shape."+rt}return null},j.fromObject=function(_e){if(_e instanceof et.onnx.TypeProto.Tensor)return _e;var rt=new et.onnx.TypeProto.Tensor;if(_e.elemType!=null&&(rt.elemType=0|_e.elemType),_e.shape!=null){if(typeof _e.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");rt.shape=et.onnx.TensorShapeProto.fromObject(_e.shape)}return rt},j.toObject=function(_e,rt){rt||(rt={});var st={};return rt.defaults&&(st.elemType=0,st.shape=null),_e.elemType!=null&&_e.hasOwnProperty("elemType")&&(st.elemType=_e.elemType),_e.shape!=null&&_e.hasOwnProperty("shape")&&(st.shape=et.onnx.TensorShapeProto.toObject(_e.shape,rt)),st},j.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},j}(),g}(),_.OperatorSetIdProto=function(){function g(c){if(c)for(var j=Object.keys(c),_e=0;_e<j.length;++_e)c[j[_e]]!=null&&(this[j[_e]]=c[j[_e]])}return g.prototype.domain="",g.prototype.version=tt.Long?tt.Long.fromBits(0,0,!1):0,g.create=function(c){return new g(c)},g.encode=function(c,j){return j||(j=nt.create()),c.domain!=null&&c.hasOwnProperty("domain")&&j.uint32(10).string(c.domain),c.version!=null&&c.hasOwnProperty("version")&&j.uint32(16).int64(c.version),j},g.encodeDelimited=function(c,j){return this.encode(c,j).ldelim()},g.decode=function(c,j){c instanceof $||(c=$.create(c));for(var _e=j===void 0?c.len:c.pos+j,rt=new et.onnx.OperatorSetIdProto;c.pos<_e;){var st=c.uint32();switch(st>>>3){case 1:rt.domain=c.string();break;case 2:rt.version=c.int64();break;default:c.skipType(7&st)}}return rt},g.decodeDelimited=function(c){return c instanceof $||(c=new $(c)),this.decode(c,c.uint32())},g.verify=function(c){return typeof c!="object"||c===null?"object expected":c.domain!=null&&c.hasOwnProperty("domain")&&!tt.isString(c.domain)?"domain: string expected":c.version!=null&&c.hasOwnProperty("version")&&!(tt.isInteger(c.version)||c.version&&tt.isInteger(c.version.low)&&tt.isInteger(c.version.high))?"version: integer|Long expected":null},g.fromObject=function(c){if(c instanceof et.onnx.OperatorSetIdProto)return c;var j=new et.onnx.OperatorSetIdProto;return c.domain!=null&&(j.domain=String(c.domain)),c.version!=null&&(tt.Long?(j.version=tt.Long.fromValue(c.version)).unsigned=!1:typeof c.version=="string"?j.version=parseInt(c.version,10):typeof c.version=="number"?j.version=c.version:typeof c.version=="object"&&(j.version=new tt.LongBits(c.version.low>>>0,c.version.high>>>0).toNumber())),j},g.toObject=function(c,j){j||(j={});var _e={};if(j.defaults)if(_e.domain="",tt.Long){var rt=new tt.Long(0,0,!1);_e.version=j.longs===String?rt.toString():j.longs===Number?rt.toNumber():rt}else _e.version=j.longs===String?"0":0;return c.domain!=null&&c.hasOwnProperty("domain")&&(_e.domain=c.domain),c.version!=null&&c.hasOwnProperty("version")&&(typeof c.version=="number"?_e.version=j.longs===String?String(c.version):c.version:_e.version=j.longs===String?tt.Long.prototype.toString.call(c.version):j.longs===Number?new tt.LongBits(c.version.low>>>0,c.version.high>>>0).toNumber():c.version),_e},g.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},g}(),_),o.exports=et},2100:(o,s,i)=>{o.exports=i(9482)},9482:(o,s,i)=>{var a=s;function d(){a.util._configure(),a.Writer._configure(a.BufferWriter),a.Reader._configure(a.BufferReader)}a.build="minimal",a.Writer=i(1173),a.BufferWriter=i(3155),a.Reader=i(1408),a.BufferReader=i(593),a.util=i(9693),a.rpc=i(5994),a.roots=i(5054),a.configure=d,d()},1408:(o,s,i)=>{o.exports=nt;var a,d=i(9693),_=d.LongBits,b=d.utf8;function $(rt,st){return RangeError("index out of range: "+rt.pos+" + "+(st||1)+" > "+rt.len)}function nt(rt){this.buf=rt,this.pos=0,this.len=rt.length}var tt,et=typeof Uint8Array<"u"?function(rt){if(rt instanceof Uint8Array||Array.isArray(rt))return new nt(rt);throw Error("illegal buffer")}:function(rt){if(Array.isArray(rt))return new nt(rt);throw Error("illegal buffer")},g=function(){return d.Buffer?function(rt){return(nt.create=function(st){return d.Buffer.isBuffer(st)?new a(st):et(st)})(rt)}:et};function c(){var rt=new _(0,0),st=0;if(!(this.len-this.pos>4)){for(;st<3;++st){if(this.pos>=this.len)throw $(this);if(rt.lo=(rt.lo|(127&this.buf[this.pos])<<7*st)>>>0,this.buf[this.pos++]<128)return rt}return rt.lo=(rt.lo|(127&this.buf[this.pos++])<<7*st)>>>0,rt}for(;st<4;++st)if(rt.lo=(rt.lo|(127&this.buf[this.pos])<<7*st)>>>0,this.buf[this.pos++]<128)return rt;if(rt.lo=(rt.lo|(127&this.buf[this.pos])<<28)>>>0,rt.hi=(rt.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return rt;if(st=0,this.len-this.pos>4){for(;st<5;++st)if(rt.hi=(rt.hi|(127&this.buf[this.pos])<<7*st+3)>>>0,this.buf[this.pos++]<128)return rt}else for(;st<5;++st){if(this.pos>=this.len)throw $(this);if(rt.hi=(rt.hi|(127&this.buf[this.pos])<<7*st+3)>>>0,this.buf[this.pos++]<128)return rt}throw Error("invalid varint encoding")}function j(rt,st){return(rt[st-4]|rt[st-3]<<8|rt[st-2]<<16|rt[st-1]<<24)>>>0}function _e(){if(this.pos+8>this.len)throw $(this,8);return new _(j(this.buf,this.pos+=4),j(this.buf,this.pos+=4))}nt.create=g(),nt.prototype._slice=d.Array.prototype.subarray||d.Array.prototype.slice,nt.prototype.uint32=(tt=4294967295,function(){if(tt=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(tt=(tt|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(tt=(tt|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(tt=(tt|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(tt=(tt|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return tt;if((this.pos+=5)>this.len)throw this.pos=this.len,$(this,10);return tt}),nt.prototype.int32=function(){return 0|this.uint32()},nt.prototype.sint32=function(){var rt=this.uint32();return rt>>>1^-(1&rt)|0},nt.prototype.bool=function(){return this.uint32()!==0},nt.prototype.fixed32=function(){if(this.pos+4>this.len)throw $(this,4);return j(this.buf,this.pos+=4)},nt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw $(this,4);return 0|j(this.buf,this.pos+=4)},nt.prototype.float=function(){if(this.pos+4>this.len)throw $(this,4);var rt=d.float.readFloatLE(this.buf,this.pos);return this.pos+=4,rt},nt.prototype.double=function(){if(this.pos+8>this.len)throw $(this,4);var rt=d.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,rt},nt.prototype.bytes=function(){var rt=this.uint32(),st=this.pos,ot=this.pos+rt;if(ot>this.len)throw $(this,rt);return this.pos+=rt,Array.isArray(this.buf)?this.buf.slice(st,ot):st===ot?new this.buf.constructor(0):this._slice.call(this.buf,st,ot)},nt.prototype.string=function(){var rt=this.bytes();return b.read(rt,0,rt.length)},nt.prototype.skip=function(rt){if(typeof rt=="number"){if(this.pos+rt>this.len)throw $(this,rt);this.pos+=rt}else do if(this.pos>=this.len)throw $(this);while(128&this.buf[this.pos++]);return this},nt.prototype.skipType=function(rt){switch(rt){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(rt=7&this.uint32())!=4;)this.skipType(rt);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+rt+" at offset "+this.pos)}return this},nt._configure=function(rt){a=rt,nt.create=g(),a._configure();var st=d.Long?"toLong":"toNumber";d.merge(nt.prototype,{int64:function(){return c.call(this)[st](!1)},uint64:function(){return c.call(this)[st](!0)},sint64:function(){return c.call(this).zzDecode()[st](!1)},fixed64:function(){return _e.call(this)[st](!0)},sfixed64:function(){return _e.call(this)[st](!1)}})}},593:(o,s,i)=>{o.exports=_;var a=i(1408);(_.prototype=Object.create(a.prototype)).constructor=_;var d=i(9693);function _(b){a.call(this,b)}_._configure=function(){d.Buffer&&(_.prototype._slice=d.Buffer.prototype.slice)},_.prototype.string=function(){var b=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+b,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+b,this.len))},_._configure()},5054:o=>{o.exports={}},5994:(o,s,i)=>{s.Service=i(7948)},7948:(o,s,i)=>{o.exports=d;var a=i(9693);function d(_,b,$){if(typeof _!="function")throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=_,this.requestDelimited=!!b,this.responseDelimited=!!$}(d.prototype=Object.create(a.EventEmitter.prototype)).constructor=d,d.prototype.rpcCall=function _(b,$,nt,tt,et){if(!tt)throw TypeError("request must be specified");var g=this;if(!et)return a.asPromise(_,g,b,$,nt,tt);if(g.rpcImpl)try{return g.rpcImpl(b,$[g.requestDelimited?"encodeDelimited":"encode"](tt).finish(),function(c,j){if(c)return g.emit("error",c,b),et(c);if(j!==null){if(!(j instanceof nt))try{j=nt[g.responseDelimited?"decodeDelimited":"decode"](j)}catch(_e){return g.emit("error",_e,b),et(_e)}return g.emit("data",j,b),et(null,j)}g.end(!0)})}catch(c){return g.emit("error",c,b),void setTimeout(function(){et(c)},0)}else setTimeout(function(){et(Error("already ended"))},0)},d.prototype.end=function(_){return this.rpcImpl&&(_||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(o,s,i)=>{o.exports=d;var a=i(9693);function d(nt,tt){this.lo=nt>>>0,this.hi=tt>>>0}var _=d.zero=new d(0,0);_.toNumber=function(){return 0},_.zzEncode=_.zzDecode=function(){return this},_.length=function(){return 1};var b=d.zeroHash="\0\0\0\0\0\0\0\0";d.fromNumber=function(nt){if(nt===0)return _;var tt=nt<0;tt&&(nt=-nt);var et=nt>>>0,g=(nt-et)/4294967296>>>0;return tt&&(g=~g>>>0,et=~et>>>0,++et>4294967295&&(et=0,++g>4294967295&&(g=0))),new d(et,g)},d.from=function(nt){if(typeof nt=="number")return d.fromNumber(nt);if(a.isString(nt)){if(!a.Long)return d.fromNumber(parseInt(nt,10));nt=a.Long.fromString(nt)}return nt.low||nt.high?new d(nt.low>>>0,nt.high>>>0):_},d.prototype.toNumber=function(nt){if(!nt&&this.hi>>>31){var tt=1+~this.lo>>>0,et=~this.hi>>>0;return tt||(et=et+1>>>0),-(tt+4294967296*et)}return this.lo+4294967296*this.hi},d.prototype.toLong=function(nt){return a.Long?new a.Long(0|this.lo,0|this.hi,!!nt):{low:0|this.lo,high:0|this.hi,unsigned:!!nt}};var $=String.prototype.charCodeAt;d.fromHash=function(nt){return nt===b?_:new d(($.call(nt,0)|$.call(nt,1)<<8|$.call(nt,2)<<16|$.call(nt,3)<<24)>>>0,($.call(nt,4)|$.call(nt,5)<<8|$.call(nt,6)<<16|$.call(nt,7)<<24)>>>0)},d.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},d.prototype.zzEncode=function(){var nt=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^nt)>>>0,this.lo=(this.lo<<1^nt)>>>0,this},d.prototype.zzDecode=function(){var nt=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^nt)>>>0,this.hi=(this.hi>>>1^nt)>>>0,this},d.prototype.length=function(){var nt=this.lo,tt=(this.lo>>>28|this.hi<<4)>>>0,et=this.hi>>>24;return et===0?tt===0?nt<16384?nt<128?1:2:nt<2097152?3:4:tt<16384?tt<128?5:6:tt<2097152?7:8:et<128?9:10}},9693:function(o,s,i){var a=s;function d(b,$,nt){for(var tt=Object.keys($),et=0;et<tt.length;++et)b[tt[et]]!==void 0&&nt||(b[tt[et]]=$[tt[et]]);return b}function _(b){function $(nt,tt){if(!(this instanceof $))return new $(nt,tt);Object.defineProperty(this,"message",{get:function(){return nt}}),Error.captureStackTrace?Error.captureStackTrace(this,$):Object.defineProperty(this,"stack",{value:new Error().stack||""}),tt&&d(this,tt)}return($.prototype=Object.create(Error.prototype)).constructor=$,Object.defineProperty($.prototype,"name",{get:function(){return b}}),$.prototype.toString=function(){return this.name+": "+this.message},$}a.asPromise=i(4537),a.base64=i(7419),a.EventEmitter=i(9211),a.float=i(945),a.inquire=i(7199),a.utf8=i(4997),a.pool=i(6662),a.LongBits=i(1945),a.isNode=!!(i.g!==void 0&&i.g&&i.g.process&&i.g.process.versions&&i.g.process.versions.node),a.global=a.isNode&&i.g||typeof window<"u"&&window||typeof self<"u"&&self||this,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isInteger=Number.isInteger||function(b){return typeof b=="number"&&isFinite(b)&&Math.floor(b)===b},a.isString=function(b){return typeof b=="string"||b instanceof String},a.isObject=function(b){return b&&typeof b=="object"},a.isset=a.isSet=function(b,$){var nt=b[$];return!(nt==null||!b.hasOwnProperty($))&&(typeof nt!="object"||(Array.isArray(nt)?nt.length:Object.keys(nt).length)>0)},a.Buffer=function(){try{var b=a.inquire("buffer").Buffer;return b.prototype.utf8Write?b:null}catch{return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(b){return typeof b=="number"?a.Buffer?a._Buffer_allocUnsafe(b):new a.Array(b):a.Buffer?a._Buffer_from(b):typeof Uint8Array>"u"?b:new Uint8Array(b)},a.Array=typeof Uint8Array<"u"?Uint8Array:Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(b){return b?a.LongBits.from(b).toHash():a.LongBits.zeroHash},a.longFromHash=function(b,$){var nt=a.LongBits.fromHash(b);return a.Long?a.Long.fromBits(nt.lo,nt.hi,$):nt.toNumber(!!$)},a.merge=d,a.lcFirst=function(b){return b.charAt(0).toLowerCase()+b.substring(1)},a.newError=_,a.ProtocolError=_("ProtocolError"),a.oneOfGetter=function(b){for(var $={},nt=0;nt<b.length;++nt)$[b[nt]]=1;return function(){for(var tt=Object.keys(this),et=tt.length-1;et>-1;--et)if($[tt[et]]===1&&this[tt[et]]!==void 0&&this[tt[et]]!==null)return tt[et]}},a.oneOfSetter=function(b){return function($){for(var nt=0;nt<b.length;++nt)b[nt]!==$&&delete this[b[nt]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var b=a.Buffer;b?(a._Buffer_from=b.from!==Uint8Array.from&&b.from||function($,nt){return new b($,nt)},a._Buffer_allocUnsafe=b.allocUnsafe||function($){return new b($)}):a._Buffer_from=a._Buffer_allocUnsafe=null}},1173:(o,s,i)=>{o.exports=g;var a,d=i(9693),_=d.LongBits,b=d.base64,$=d.utf8;function nt(it,at,lt){this.fn=it,this.len=at,this.next=void 0,this.val=lt}function tt(){}function et(it){this.head=it.head,this.tail=it.tail,this.len=it.len,this.next=it.states}function g(){this.len=0,this.head=new nt(tt,0,0),this.tail=this.head,this.states=null}var c=function(){return d.Buffer?function(){return(g.create=function(){return new a})()}:function(){return new g}};function j(it,at,lt){at[lt]=255&it}function _e(it,at){this.len=it,this.next=void 0,this.val=at}function rt(it,at,lt){for(;it.hi;)at[lt++]=127&it.lo|128,it.lo=(it.lo>>>7|it.hi<<25)>>>0,it.hi>>>=7;for(;it.lo>127;)at[lt++]=127&it.lo|128,it.lo=it.lo>>>7;at[lt++]=it.lo}function st(it,at,lt){at[lt]=255&it,at[lt+1]=it>>>8&255,at[lt+2]=it>>>16&255,at[lt+3]=it>>>24}g.create=c(),g.alloc=function(it){return new d.Array(it)},d.Array!==Array&&(g.alloc=d.pool(g.alloc,d.Array.prototype.subarray)),g.prototype._push=function(it,at,lt){return this.tail=this.tail.next=new nt(it,at,lt),this.len+=at,this},_e.prototype=Object.create(nt.prototype),_e.prototype.fn=function(it,at,lt){for(;it>127;)at[lt++]=127&it|128,it>>>=7;at[lt]=it},g.prototype.uint32=function(it){return this.len+=(this.tail=this.tail.next=new _e((it>>>=0)<128?1:it<16384?2:it<2097152?3:it<268435456?4:5,it)).len,this},g.prototype.int32=function(it){return it<0?this._push(rt,10,_.fromNumber(it)):this.uint32(it)},g.prototype.sint32=function(it){return this.uint32((it<<1^it>>31)>>>0)},g.prototype.uint64=function(it){var at=_.from(it);return this._push(rt,at.length(),at)},g.prototype.int64=g.prototype.uint64,g.prototype.sint64=function(it){var at=_.from(it).zzEncode();return this._push(rt,at.length(),at)},g.prototype.bool=function(it){return this._push(j,1,it?1:0)},g.prototype.fixed32=function(it){return this._push(st,4,it>>>0)},g.prototype.sfixed32=g.prototype.fixed32,g.prototype.fixed64=function(it){var at=_.from(it);return this._push(st,4,at.lo)._push(st,4,at.hi)},g.prototype.sfixed64=g.prototype.fixed64,g.prototype.float=function(it){return this._push(d.float.writeFloatLE,4,it)},g.prototype.double=function(it){return this._push(d.float.writeDoubleLE,8,it)};var ot=d.Array.prototype.set?function(it,at,lt){at.set(it,lt)}:function(it,at,lt){for(var ut=0;ut<it.length;++ut)at[lt+ut]=it[ut]};g.prototype.bytes=function(it){var at=it.length>>>0;if(!at)return this._push(j,1,0);if(d.isString(it)){var lt=g.alloc(at=b.length(it));b.decode(it,lt,0),it=lt}return this.uint32(at)._push(ot,at,it)},g.prototype.string=function(it){var at=$.length(it);return at?this.uint32(at)._push($.write,at,it):this._push(j,1,0)},g.prototype.fork=function(){return this.states=new et(this),this.head=this.tail=new nt(tt,0,0),this.len=0,this},g.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new nt(tt,0,0),this.len=0),this},g.prototype.ldelim=function(){var it=this.head,at=this.tail,lt=this.len;return this.reset().uint32(lt),lt&&(this.tail.next=it.next,this.tail=at,this.len+=lt),this},g.prototype.finish=function(){for(var it=this.head.next,at=this.constructor.alloc(this.len),lt=0;it;)it.fn(it.val,at,lt),lt+=it.len,it=it.next;return at},g._configure=function(it){a=it,g.create=c(),a._configure()}},3155:(o,s,i)=>{o.exports=_;var a=i(1173);(_.prototype=Object.create(a.prototype)).constructor=_;var d=i(9693);function _(){a.call(this)}function b($,nt,tt){$.length<40?d.utf8.write($,nt,tt):nt.utf8Write?nt.utf8Write($,tt):nt.write($,tt)}_._configure=function(){_.alloc=d._Buffer_allocUnsafe,_.writeBytesBuffer=d.Buffer&&d.Buffer.prototype instanceof Uint8Array&&d.Buffer.prototype.set.name==="set"?function($,nt,tt){nt.set($,tt)}:function($,nt,tt){if($.copy)$.copy(nt,tt,0,$.length);else for(var et=0;et<$.length;)nt[tt++]=$[et++]}},_.prototype.bytes=function($){d.isString($)&&($=d._Buffer_from($,"base64"));var nt=$.length>>>0;return this.uint32(nt),nt&&this._push(_.writeBytesBuffer,nt,$),this},_.prototype.string=function($){var nt=d.Buffer.byteLength($);return this.uint32(nt),nt&&this._push(b,nt,$),this},_._configure()},7714:(o,s,i)=>{s.R=void 0;const a=i(6919),d=i(7448);s.R=new class{async init(){}async createSessionHandler(_,b){const $=new a.Session(b);return await $.loadModel(_),new d.OnnxjsSessionHandler($)}}},4200:(o,s,i)=>{s.c8=s.rX=void 0;const a=i(1670),d=i(5381),_=i(2157),b=i(2306);s.rX=()=>{if((typeof a.env.wasm.initTimeout!="number"||a.env.wasm.initTimeout<0)&&(a.env.wasm.initTimeout=0),typeof a.env.wasm.simd!="boolean"&&(a.env.wasm.simd=!0),typeof a.env.wasm.proxy!="boolean"&&(a.env.wasm.proxy=!1),typeof a.env.wasm.numThreads!="number"||!Number.isInteger(a.env.wasm.numThreads)||a.env.wasm.numThreads<=0){const $=typeof navigator>"u"?(0,d.cpus)().length:navigator.hardwareConcurrency;a.env.wasm.numThreads=Math.min(4,Math.ceil(($||1)/2))}},s.c8=new class{async init(){(0,s.rX)(),await(0,_.initWasm)()}async createSessionHandler($,nt){const tt=new b.OnnxruntimeWebAssemblySessionHandler;return await tt.loadModel($,nt),Promise.resolve(tt)}}},6018:function(o,s,i){var a=this&&this.__createBinding||(Object.create?function(b,$,nt,tt){tt===void 0&&(tt=nt);var et=Object.getOwnPropertyDescriptor($,nt);et&&!("get"in et?!$.__esModule:et.writable||et.configurable)||(et={enumerable:!0,get:function(){return $[nt]}}),Object.defineProperty(b,tt,et)}:function(b,$,nt,tt){tt===void 0&&(tt=nt),b[tt]=$[nt]}),d=this&&this.__exportStar||function(b,$){for(var nt in b)nt==="default"||Object.prototype.hasOwnProperty.call($,nt)||a($,b,nt)};Object.defineProperty(s,"__esModule",{value:!0}),d(i(1670),s);const _=i(1670);{const b=i(7714).R;(0,_.registerBackend)("webgl",b,-10)}{const b=i(4200).c8;(0,_.registerBackend)("cpu",b,10),(0,_.registerBackend)("wasm",b,10),(0,_.registerBackend)("xnnpack",b,9)}},246:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createAttributeWithCacheKey=void 0;class i{constructor(d){Object.assign(this,d)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(d=>`${this[d]}`).join(";")),this._cacheKey}}s.createAttributeWithCacheKey=a=>new i(a)},7778:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Attribute=void 0;const a=i(1446),d=i(9395),_=i(9162),b=i(2517);var $=d.onnxruntime.experimental.fbs;class nt{constructor(et){if(this._attributes=new Map,et!=null){for(const g of et)g instanceof a.onnx.AttributeProto?this._attributes.set(g.name,[nt.getValue(g),nt.getType(g)]):g instanceof $.Attribute&&this._attributes.set(g.name(),[nt.getValue(g),nt.getType(g)]);if(this._attributes.size<et.length)throw new Error("duplicated attribute names")}}set(et,g,c){this._attributes.set(et,[c,g])}delete(et){this._attributes.delete(et)}getFloat(et,g){return this.get(et,"float",g)}getInt(et,g){return this.get(et,"int",g)}getString(et,g){return this.get(et,"string",g)}getTensor(et,g){return this.get(et,"tensor",g)}getFloats(et,g){return this.get(et,"floats",g)}getInts(et,g){return this.get(et,"ints",g)}getStrings(et,g){return this.get(et,"strings",g)}getTensors(et,g){return this.get(et,"tensors",g)}get(et,g,c){const j=this._attributes.get(et);if(j===void 0){if(c!==void 0)return c;throw new Error(`required attribute not found: ${et}`)}if(j[1]!==g)throw new Error(`type mismatch: expected ${g} but got ${j[1]}`);return j[0]}static getType(et){const g=et instanceof a.onnx.AttributeProto?et.type:et.type();switch(g){case a.onnx.AttributeProto.AttributeType.FLOAT:return"float";case a.onnx.AttributeProto.AttributeType.INT:return"int";case a.onnx.AttributeProto.AttributeType.STRING:return"string";case a.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case a.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case a.onnx.AttributeProto.AttributeType.INTS:return"ints";case a.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case a.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${a.onnx.AttributeProto.AttributeType[g]}`)}}static getValue(et){const g=et instanceof a.onnx.AttributeProto?et.type:et.type();if(g===a.onnx.AttributeProto.AttributeType.GRAPH||g===a.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const c=this.getValueNoCheck(et);if(g===a.onnx.AttributeProto.AttributeType.INT&&b.LongUtil.isLong(c))return b.LongUtil.longToNumber(c);if(g===a.onnx.AttributeProto.AttributeType.INTS){const j=c,_e=new Array(j.length);for(let rt=0;rt<j.length;rt++){const st=j[rt];_e[rt]=b.LongUtil.longToNumber(st)}return _e}if(g===a.onnx.AttributeProto.AttributeType.TENSOR)return et instanceof a.onnx.AttributeProto?_.Tensor.fromProto(c):_.Tensor.fromOrtTensor(c);if(g===a.onnx.AttributeProto.AttributeType.TENSORS){if(et instanceof a.onnx.AttributeProto)return c.map(j=>_.Tensor.fromProto(j));if(et instanceof $.Attribute)return c.map(j=>_.Tensor.fromOrtTensor(j))}if(g===a.onnx.AttributeProto.AttributeType.STRING&&et instanceof a.onnx.AttributeProto){const j=c;return(0,b.decodeUtf8String)(j)}return g===a.onnx.AttributeProto.AttributeType.STRINGS&&et instanceof a.onnx.AttributeProto?c.map(b.decodeUtf8String):c}static getValueNoCheck(et){return et instanceof a.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(et):this.getValueNoCheckFromOrtFormat(et)}static getValueNoCheckFromOnnxFormat(et){switch(et.type){case a.onnx.AttributeProto.AttributeType.FLOAT:return et.f;case a.onnx.AttributeProto.AttributeType.INT:return et.i;case a.onnx.AttributeProto.AttributeType.STRING:return et.s;case a.onnx.AttributeProto.AttributeType.TENSOR:return et.t;case a.onnx.AttributeProto.AttributeType.GRAPH:return et.g;case a.onnx.AttributeProto.AttributeType.FLOATS:return et.floats;case a.onnx.AttributeProto.AttributeType.INTS:return et.ints;case a.onnx.AttributeProto.AttributeType.STRINGS:return et.strings;case a.onnx.AttributeProto.AttributeType.TENSORS:return et.tensors;case a.onnx.AttributeProto.AttributeType.GRAPHS:return et.graphs;default:throw new Error(`unsupported attribute type: ${a.onnx.AttributeProto.AttributeType[et.type]}`)}}static getValueNoCheckFromOrtFormat(et){switch(et.type()){case $.AttributeType.FLOAT:return et.f();case $.AttributeType.INT:return et.i();case $.AttributeType.STRING:return et.s();case $.AttributeType.TENSOR:return et.t();case $.AttributeType.GRAPH:return et.g();case $.AttributeType.FLOATS:return et.floatsArray();case $.AttributeType.INTS:{const g=[];for(let c=0;c<et.intsLength();c++)g.push(et.ints(c));return g}case $.AttributeType.STRINGS:{const g=[];for(let c=0;c<et.stringsLength();c++)g.push(et.strings(c));return g}case $.AttributeType.TENSORS:{const g=[];for(let c=0;c<et.tensorsLength();c++)g.push(et.tensors(c));return g}default:throw new Error(`unsupported attribute type: ${$.AttributeType[et.type()]}`)}}}s.Attribute=nt},7091:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.resolveBackend=s.backend=void 0;const a=i(5038),d=new Map;async function _(b){const $=s.backend;if($[b]!==void 0&&function(nt){const tt=nt;return"initialize"in tt&&typeof tt.initialize=="function"&&"createSessionHandler"in tt&&typeof tt.createSessionHandler=="function"&&"dispose"in tt&&typeof tt.dispose=="function"}($[b])){const nt=$[b];let tt=nt.initialize();if(typeof tt=="object"&&"then"in tt&&(tt=await tt),tt)return d.set(b,nt),nt}}s.backend={webgl:new a.WebGLBackend},s.resolveBackend=async function b($){if(!$)return b(["webgl"]);{const nt=typeof $=="string"?[$]:$;for(const tt of nt){const et=d.get(tt);if(et)return et;const g=await _(tt);if(g)return g}}throw new Error("no available backend to use")}},5038:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLBackend=void 0;const a=i(1670),d=i(6231),_=i(6416),b=i(7305);s.WebGLBackend=class{get contextId(){return a.env.webgl.contextId}set contextId($){a.env.webgl.contextId=$}get matmulMaxBatchSize(){return a.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize($){a.env.webgl.matmulMaxBatchSize=$}get textureCacheMode(){return a.env.webgl.textureCacheMode}set textureCacheMode($){a.env.webgl.textureCacheMode=$}get pack(){return a.env.webgl.pack}set pack($){a.env.webgl.pack=$}get async(){return a.env.webgl.async}set async($){a.env.webgl.async=$}initialize(){try{return this.glContext=(0,b.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),d.Logger.setWithEnv(a.env),d.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch($){return d.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${$}`),!1}}createSessionHandler($){return new _.WebGLSessionHandler(this,$)}dispose(){this.glContext.dispose()}}},5107:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoordsGlslLib=void 0;const a=i(2517),d=i(8520),_=i(5060),b=i(7859),$=i(9390);class nt extends d.GlslLib{constructor(et){super(et)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new d.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new d.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const et=this.context.outputTextureLayout;return et.isPacked?this.getPackedOutputSamplingSnippet(et):this.getUnpackedOutputSamplingSnippet(et)}getPackedOutputSamplingSnippet(et){const g=et.unpackedShape,c=[et.width,et.height],j={},_e="getOutputCoords";switch(g.length){case 0:j[_e]=this.getOutputScalarCoords();break;case 1:j[_e]=this.getOutputPacked1DCoords(g,c);break;case 2:j[_e]=this.getOutputPacked2DCoords(g,c);break;case 3:j[_e]=this.getOutputPacked3DCoords(g,c);break;default:j[_e]=this.getOutputPackedNDCoords(g,c)}const rt=`
      void setOutput(vec4 val) {
        ${(0,_.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return j.floatTextureSetRGBA=new d.GlslLibRoutine(rt),j}getUnpackedOutputSamplingSnippet(et){const g=et.unpackedShape,c=[et.width,et.height],j={},_e="getOutputCoords";switch(g.length){case 0:j[_e]=this.getOutputScalarCoords();break;case 1:j[_e]=this.getOutputUnpacked1DCoords(g,c);break;case 2:j[_e]=this.getOutputUnpacked2DCoords(g,c);break;case 3:j[_e]=this.getOutputUnpacked3DCoords(g,c);break;case 4:j[_e]=this.getOutputUnpacked4DCoords(g,c);break;case 5:j[_e]=this.getOutputUnpacked5DCoords(g,c);break;case 6:j[_e]=this.getOutputUnpacked6DCoords(g,c);break;default:throw new Error(`Unsupported output dimensionality: ${g.length}`)}const rt=`
        void setOutput(float val) {
          ${(0,_.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return j.floatTextureSetR=new d.GlslLibRoutine(rt),j}getOutputScalarCoords(){return new d.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(et,g){const c=g;let j="";return c[0]===1?(j=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${c[1]}.0);
          }
        `,new d.GlslLibRoutine(j)):c[1]===1?(j=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${c[0]}.0);
          }
        `,new d.GlslLibRoutine(j)):(j=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${c[0]}, ${c[1]}));
          return 2 * (resTexRC.y * ${c[0]} + resTexRC.x);
        }
      `,new d.GlslLibRoutine(j))}getOutputPacked2DCoords(et,g){let c="";if(a.ArrayUtil.arraysEqual(et,g))return c=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${g[0]}, ${g[1]}));
        }
      `,new d.GlslLibRoutine(c);const j=g,_e=Math.ceil(et[1]/2);return c=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${j[0]}, ${j[1]}));

          int index = resTexRC.y * ${j[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${_e}) * 2;
          int c = 2 * (index / ${_e});

          return ivec2(r, c);
        }
      `,new d.GlslLibRoutine(c)}getOutputPacked3DCoords(et,g){const c=[g[0],g[1]],j=Math.ceil(et[2]/2),_e=j*Math.ceil(et[1]/2),rt=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${c[0]}, ${c[1]}));
          int index = resTexRC.y * ${c[0]} + resTexRC.x;

          int b = index / ${_e};
          index -= b * ${_e};

          // reverse r and c order for packed texture
          int r = imod(index, ${j}) * 2;
          int c = 2 * (index / ${j});

          return ivec3(b, r, c);
        }
      `;return new d.GlslLibRoutine(rt)}getOutputPackedNDCoords(et,g){const c=[g[0],g[1]],j=Math.ceil(et[et.length-1]/2),_e=j*Math.ceil(et[et.length-2]/2);let rt=_e,st="",ot="b, r, c";for(let at=2;at<et.length-1;at++)rt*=et[et.length-at-1],st=`
      int b${at} = index / ${rt};
      index -= b${at} * ${rt};
    `+st,ot=`b${at}, `+ot;const it=`
      ivec${et.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${c[0]}, ${c[1]}));
        int index = resTexRC.y * ${c[0]} + resTexRC.x;

        ${st}

        int b = index / ${_e};
        index -= b * ${_e};

        // reverse r and c order for packed texture
        int r = imod(index, ${j}) * 2;
        int c = 2 * (index / ${j});

        return ivec${et.length}(${ot});
      }
    `;return new d.GlslLibRoutine(it)}getOutputUnpacked1DCoords(et,g){const c=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${g[0]}, ${g[1]}));
          return resTexRC.y * ${g[0]} + resTexRC.x;
        }
      `;return new d.GlslLibRoutine(c)}getOutputUnpacked2DCoords(et,g){const c=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${g[0]}, ${g[1]}));
          int index = resTexRC.y * ${g[0]} + resTexRC.x;
          int r = index / ${et[1]};
          int c = index - r * ${et[1]};
          return ivec2(r, c);
        }
      `;return new d.GlslLibRoutine(c)}getOutputUnpacked3DCoords(et,g){let c="";const j=et.length;let _e=null;j<2&&(_e=[]),_e=new Array(j-1),_e[j-2]=et[j-1];for(let ot=j-3;ot>=0;--ot)_e[ot]=_e[ot+1]*et[ot+1];const rt=["r","c","d"],st=_e.map((ot,it)=>`int ${rt[it]} = index / ${ot}; ${it===_e.length-1?`int ${rt[it+1]} = index - ${rt[it]} * ${ot}`:`index -= ${rt[it]} * ${ot}`};`).join("");return c=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${g[0]}, ${g[1]}));
          int index = resTexRC.y * ${g[0]} + resTexRC.x;
          ${st}
          return ivec3(r, c, d);
        }
      `,new d.GlslLibRoutine(c)}getOutputUnpacked4DCoords(et,g){let c="";const j=et.length;let _e=null;j<2&&(_e=[]),_e=new Array(j-1),_e[j-2]=et[j-1];for(let ot=j-3;ot>=0;--ot)_e[ot]=_e[ot+1]*et[ot+1];const rt=["r","c","d","d2"],st=_e.map((ot,it)=>`int ${rt[it]} = index / ${ot}; ${it===_e.length-1?`int ${rt[it+1]} = index - ${rt[it]} * ${ot}`:`index -= ${rt[it]} * ${ot}`};`).join("");return c=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${g[0]}, ${g[1]}));
          int index = resTexRC.y * ${g[0]} + resTexRC.x;
          ${st}
          return ivec4(r, c, d, d2);
        }
      `,new d.GlslLibRoutine(c)}getOutputUnpacked5DCoords(et,g){let c="";const j=et.length;let _e=null;j<2&&(_e=[]),_e=new Array(j-1),_e[j-2]=et[j-1];for(let ot=j-3;ot>=0;--ot)_e[ot]=_e[ot+1]*et[ot+1];const rt=["r","c","d","d2","d3"],st=_e.map((ot,it)=>`int ${rt[it]} = index / ${ot}; ${it===_e.length-1?`int ${rt[it+1]} = index - ${rt[it]} * ${ot}`:`index -= ${rt[it]} * ${ot}`};`).join("");return c=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${g[0]}, ${g[1]}));
          int index = resTexRC.y * ${g[0]} + resTexRC.x;
          ${st}
          return ivec5(r, c, d, d2, d3);
        }
      `,new d.GlslLibRoutine(c)}getOutputUnpacked6DCoords(et,g){let c="";const j=et.length;let _e=null;j<2&&(_e=[]),_e=new Array(j-1),_e[j-2]=et[j-1];for(let ot=j-3;ot>=0;--ot)_e[ot]=_e[ot+1]*et[ot+1];const rt=["r","c","d","d2","d3","d4"],st=_e.map((ot,it)=>`int ${rt[it]} = index / ${ot}; ${it===_e.length-1?`int ${rt[it+1]} = index - ${rt[it]} * ${ot}`:`index -= ${rt[it]} * ${ot}`};`).join("");return c=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${g[0]}, ${g[1]}));
         int index = resTexRC.y * ${g[0]} + resTexRC.x;
         ${st}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new d.GlslLibRoutine(c)}getCommonUtilFuncs(){const et={};let g="uvFromFlat";et[g]=new d.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),g="packedUVfrom1D",et[g]=new d.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),g="packedUVfrom2D",et[g]=new d.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),g="packedUVfrom3D",et[g]=new d.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),g="sampleTexture";const c=(0,_.getGlsl)(this.context.glContext.version);return et[g]=new d.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${c.texture2D}(textureSampler, uv).r;
        }`),et}getInputsSamplingSnippets(){const et={},g=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((c,j)=>{const _e=this.context.inputTextureLayouts[j],rt=(0,$.generateShaderFuncNameFromInputSamplerName)(c);_e.isPacked?et[rt]=this.getPackedSamplerFromInput(rt,c,_e):et[rt]=this.getUnpackedSamplerFromInput(rt,c,_e);const st=(0,$.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(c);_e.unpackedShape.length<=g.unpackedShape.length&&(_e.isPacked?et[st]=this.getPackedSamplerAtOutputCoords(st,_e,g,c):et[st]=this.getUnpackedSamplerAtOutputCoords(st,_e,g,c))}),et}getPackedSamplerAtOutputCoords(et,g,c,j){const _e=g.unpackedShape,rt=c.unpackedShape,st=j,ot=(0,$.generateShaderFuncNameFromInputSamplerName)(st),it=_e.length,at=rt.length,lt=a.BroadcastUtil.getBroadcastDims(_e,rt),ut=(0,$.getCoordsDataType)(at),ct=at-it;let dt;const ft=(0,$.getGlChannels)();dt=it===0?"":at<2&&lt.length>=1?"coords = 0;":lt.map(xt=>`coords.${ft[xt+ct]} = 0;`).join(`
`);let ht="";ht=at<2&&it>0?"coords":_e.map((xt,wt)=>`coords.${ft[wt+ct]}`).join(", ");let mt="return outputValue;";const yt=a.ShapeUtil.size(_e)===1,Tt=a.ShapeUtil.size(rt)===1;if(it!==1||yt||Tt){if(yt&&!Tt)mt=at===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(lt.length){const xt=it-2,wt=it-1;lt.indexOf(xt)>-1&&lt.indexOf(wt)>-1?mt="return vec4(outputValue.x);":lt.indexOf(xt)>-1?mt="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":lt.indexOf(wt)>-1&&(mt="return vec4(outputValue.xx, outputValue.zz);")}}else mt=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const St=`
      vec4 ${et}() {
        ${ut} coords = getOutputCoords();
        
        int lastDim = coords.${ft[at-1]};
        coords.${ft[at-1]} = coords.${ft[at-2]};
        coords.${ft[at-2]} = lastDim;
      
        ${dt}
        vec4 outputValue = ${ot}(${ht});
        ${mt}
      }
    `;return new d.GlslLibRoutine(St,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(et,g,c,j){const _e=[c.width,c.height],rt=[g.width,g.height],st=g.unpackedShape.length,ot=c.unpackedShape.length,it=g.unpackedShape,at=c.unpackedShape,lt=(0,$.generateShaderFuncNameFromInputSamplerName)(j);if(st===ot&&a.ArrayUtil.arraysEqual(rt,_e)){const Tt=`
          float ${et}() {
            return sampleTexture(${j}, TexCoords);
          }
        `;return new d.GlslLibRoutine(Tt,["coordinates.sampleTexture"])}const ut=(0,$.getCoordsDataType)(ot),ct=a.BroadcastUtil.getBroadcastDims(it,at),dt=ot-st;let ft;const ht=(0,$.getGlChannels)();ft=st===0?"":ot<2&&ct.length>=1?"coords = 0;":ct.map(Tt=>`coords.${ht[Tt+dt]} = 0;`).join(`
`);let mt="";mt=ot<2&&st>0?"coords":g.unpackedShape.map((Tt,St)=>`coords.${ht[St+dt]}`).join(", ");const yt=`
        float ${et}() {
          ${ut} coords = getOutputCoords();
          ${ft}
          return ${lt}(${mt});
        }
      `;return new d.GlslLibRoutine(yt,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(et,g,c){switch(c.unpackedShape.length){case 0:return this.getPackedSamplerScalar(et,g);case 1:return this.getPackedSampler1D(et,g,c);case 2:return this.getPackedSampler2D(et,g,c);case 3:return this.getPackedSampler3D(et,g,c);default:return this.getPackedSamplerND(et,g,c)}}getUnpackedSamplerFromInput(et,g,c){const j=c.unpackedShape;switch(j.length){case 0:return this.getUnpackedSamplerScalar(et,g,c);case 1:return this.getUnpackedSampler1D(et,g,c);case 2:return this.getUnpackedSampler2D(et,g,c);case 3:return this.getUnpackedSampler3D(et,g,c);case 4:return this.getUnpackedSampler4D(et,g,c);case 5:return this.getUnpackedSampler5D(et,g,c);case 6:return this.getUnpackedSampler6D(et,g,c);default:throw new Error(`Unsupported dimension ${j.length}-D`)}}getPackedSamplerScalar(et,g){const c=`
          vec4 ${et}() {
            return ${(0,_.getGlsl)(this.context.glContext.version).texture2D}(${g}, halfCR);
          }
        `;return new d.GlslLibRoutine(c)}getPackedSampler1D(et,g,c){const j=[c.width,c.height],_e=[j[1],j[0]],rt=(0,_.getGlsl)(this.context.glContext.version),st=`vec4 ${et}(int index) {
      vec2 uv = packedUVfrom1D(
      ${_e[0]}, ${_e[1]}, index);
      return ${rt.texture2D}(${g}, uv);
    }`;return new d.GlslLibRoutine(st,["coordinates.packedUVfrom1D"])}getPackedSampler2D(et,g,c){const j=c.unpackedShape,_e=[c.width,c.height],rt=(0,_.getGlsl)(this.context.glContext.version),st=_e[0],ot=_e[1];if(_e!=null&&a.ArrayUtil.arraysEqual(j,_e)){const ut=`vec4 ${et}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${ot}.0, ${st}.0);
        return ${rt.texture2D}(${g}, uv);
      }`;return new d.GlslLibRoutine(ut)}const it=_e,at=Math.ceil(j[1]/2),lt=`vec4 ${et}(int row, int col) {
      vec2 uv = packedUVfrom2D(${it[1]}, ${it[0]}, ${at}, row, col);
      return ${rt.texture2D}(${g}, uv);
    }`;return new d.GlslLibRoutine(lt,["coordinates.packedUVfrom2D"])}getPackedSampler3D(et,g,c){const j=c.unpackedShape,_e=[c.width,c.height],rt=[_e[0],_e[1]],st=(0,_.getGlsl)(this.context.glContext.version);if(j[0]===1){const ut=j.slice(1),ct=[1,2],dt=(0,$.squeezeInputShape)(j,ut),ft=["b","row","col"],ht=JSON.parse(JSON.stringify(c));ht.unpackedShape=dt;const mt=this.getPackedSamplerFromInput(et,g,ht),yt=`${mt.routineBody}
      vec4 ${et}(int b, int row, int col) {
        return ${et}(${(0,$.getSqueezedParams)(ft,ct)});
      } `;return new d.GlslLibRoutine(yt,mt.dependencies)}const ot=rt[0],it=rt[1],at=Math.ceil(j[2]/2),lt=`vec4 ${et}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${it}, ${ot}, ${at*Math.ceil(j[1]/2)}, ${at}, b, row, col);
      return ${st.texture2D}(${g}, uv);}`;return new d.GlslLibRoutine(lt,["coordinates.packedUVfrom3D"])}getPackedSamplerND(et,g,c){const j=c.unpackedShape,_e=j.length,rt=[c.width,c.height],st=(0,_.getGlsl)(this.context.glContext.version),ot=[rt[0],rt[1]],it=ot[1],at=ot[0],lt=Math.ceil(j[_e-1]/2);let ut=lt*Math.ceil(j[_e-2]/2),ct="int b, int row, int col",dt=`b * ${ut} + (row / 2) * ${lt} + (col / 2)`;for(let ht=2;ht<_e-1;ht++)ct=`int b${ht}, `+ct,ut*=j[_e-ht-1],dt=`b${ht} * ${ut} + `+dt;const ft=`vec4 ${et}(${ct}) {
      int index = ${dt};
      int texR = index / ${at};
      int texC = index - texR * ${at};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${at}, ${it});
      return ${st.texture2D}(${g}, uv);
    }`;return new d.GlslLibRoutine(ft)}getUnpackedSamplerScalar(et,g,c){const[j,_e]=[c.width,c.height];if(j===1&&_e===1){const st=`
          float ${et}() {
            return sampleTexture(${g}, halfCR);
          }
        `;return new d.GlslLibRoutine(st,["coordinates.sampleTexture"])}const rt=`
        float ${et}() {
          int offset_${g} = coordsToOffset(TexCoords, ${j}, ${_e});
          vec2 uv = uvFromFlat(${j}, ${_e}, offset_${g});
          return sampleTexture(${g}, uv);
        }
      `;return new d.GlslLibRoutine(rt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(et,g,c){const j=c.width,_e=c.height;if(_e===1&&j===1){const st=`
        float ${et}(int index) {
          return sampleTexture(${g}, halfCR);
        }
      `;return new d.GlslLibRoutine(st,["coordinates.sampleTexture"])}if(_e===1){const st=`
          float ${et}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${j}.0, 0.5);
            return sampleTexture(${g}, uv);
          }
        `;return new d.GlslLibRoutine(st,["coordinates.sampleTexture"])}if(j===1){const st=`
          float ${et}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${_e}.0);
            return sampleTexture(${g}, uv);
          }
        `;return new d.GlslLibRoutine(st,["coordinates.sampleTexture"])}const rt=`
        float ${et}(int index) {
          vec2 uv = uvFromFlat(${j}, ${_e}, index);
          return sampleTexture(${g}, uv);
        }
      `;return new d.GlslLibRoutine(rt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(et,g,c){const j=c.unpackedShape,_e=[c.height,c.width];if(_e!=null&&a.ArrayUtil.arraysEqual(j,_e)){const ut=`
          float ${et}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${_e[1]}.0, ${_e[0]}.0);
            return sampleTexture(${g}, uv);
          }
        `;return new d.GlslLibRoutine(ut,["coordinates.sampleTexture"])}const{newShape:rt,keptDims:st}=(0,b.squeezeShape)(j),ot=rt;if(ot.length<j.length){const ut=(0,$.squeezeInputShape)(j,ot),ct=JSON.parse(JSON.stringify(c));ct.unpackedShape=ut;const dt=["col","row"],ft=`
          ${this.getUnpackedSamplerFromInput(et,g,ct).routineBody}
          float ${et}(int row, int col) {
            return ${et}(${(0,$.getSqueezedParams)(dt,st)});
          }
        `;return new d.GlslLibRoutine(ft,["coordinates.sampleTexture"])}const it=_e[1],at=_e[0];if(at===1){const ut=`
          float ${et}(int row, int col) {
            int offset_${g} = coordsToOffset(TexCoords, ${it}, ${at});
            float index = dot(vec3(row, col, offset_${g}), vec3(${j[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${it}.0);
            return sampleTexture(${g}, uv);
          }
        `;return new d.GlslLibRoutine(ut,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(it===1){const ut=`
          float ${et}(int row, int col) {
            int offset_${g} = coordsToOffset(TexCoords, ${it}, ${at});
            float index = dot(vec3(row, col, offset_${g}), vec3(${j[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${at}.0, 0.5);
            return sampleTexture(${g}, uv);
          }
        `;return new d.GlslLibRoutine(ut,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const lt=`
        float ${et}(int row, int col) {
          int index = col * ${j[1]} + row;
          vec2 uv = uvFromFlat(${it}, ${at}, index);
          return sampleTexture(${g}, uv);
        }
      `;return new d.GlslLibRoutine(lt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(et,g,c){const j=c.unpackedShape,_e=j[1]*j[2],rt=j[2],{newShape:st,keptDims:ot}=(0,b.squeezeShape)(j),it=st;if(it.length<j.length){const lt=(0,$.squeezeInputShape)(j,it),ut=["batch","col","row"],ct=JSON.parse(JSON.stringify(c));ct.unpackedShape=lt;const dt=this.getUnpackedSamplerFromInput(et,g,ct),ft=ot.reverse(),ht=`
          ${dt.routineBody}
          float ${et}(int batch, int row, int col) {
            return ${et}(${(0,$.getSqueezedParams)(ut,ft)});
          }
        `;return new d.GlslLibRoutine(ht,dt.dependencies)}const at=`
          float ${et}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${_e} + col * ${rt} + row;
            vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);
            return sampleTexture(${g}, uv);
          }
      `;return new d.GlslLibRoutine(at,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(et,g,c){const j=c.unpackedShape,_e=j[3],rt=j[2]*_e,st=`
        float ${et}(int row, int col, int depth, int depth2) {
          int index = row * ${j[1]*rt} + col * ${rt} +
              depth2 * ${_e} + depth;
          vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);
          return sampleTexture(${g}, uv);
        }
      `;return new d.GlslLibRoutine(st,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(et,g,c){const j=c.unpackedShape,_e=j[4],rt=j[3]*_e,st=j[2]*rt,ot=j[1]*st,{newShape:it,keptDims:at}=(0,b.squeezeShape)(j);if(it.length<j.length){const ut=(0,$.squeezeInputShape)(j,it),ct=["row","col","depth","depth2","depth3"],dt=JSON.parse(JSON.stringify(c));dt.unpackedShape=ut;const ft=`
          ${this.getUnpackedSamplerFromInput(et,g,dt).routineBody}
          float ${et}(int row, int col, int depth, int depth2, int depth3) {
            return ${et}(${(0,$.getSqueezedParams)(ct,at)});
          }
        `;return new d.GlslLibRoutine(ft,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const lt=`
        float ${et}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${ot} + col * ${st} + depth * ${rt} +
          depth3 * ${_e} + depth2;
          vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);
          return sampleTexture(${g}, uv);
        }
      `;return new d.GlslLibRoutine(lt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(et,g,c){const j=c.unpackedShape,_e=j[5],rt=j[4]*_e,st=j[3]*rt,ot=j[2]*st,it=j[1]*ot,{newShape:at,keptDims:lt}=(0,b.squeezeShape)(j);if(at.length<j.length){const ct=(0,$.squeezeInputShape)(j,at),dt=["row","col","depth","depth2","depth3","depth4"],ft=JSON.parse(JSON.stringify(c));ft.unpackedShape=ct;const ht=`
            ${this.getUnpackedSamplerFromInput(et,g,ft).routineBody}
            float ${et}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${et}(${(0,$.getSqueezedParams)(dt,lt)});
            }
          `;return new d.GlslLibRoutine(ht,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const ut=`
          float ${et}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${it} + col * ${ot} + depth * ${st} +
            depth2 * ${rt} + depth3 * ${_e} + depth4;
            vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);
            return sampleTexture(${g}, uv);
          }
        `;return new d.GlslLibRoutine(ut,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const et=this.context.outputTextureLayout,g=et.shape.length,c=et.strides,j=et.width,_e=et.height,rt=[];for(let ot=0;ot<g-1;++ot)rt.push(`
        c[${ot}] = offset / ${c[ot]};`),rt.push(`
        offset -= c[${ot}] * ${c[ot]};`);rt.push(`
        c[${g-1}] = offset;`);const st=`
      void toVec(vec2 texCoords, out int c[${g}]) {
        int offset = coordsToOffset(texCoords, ${j}, ${_e});
        ${rt.join("")}
      }
      void toVec(int offset, out int c[${g}]) {
        ${rt.join("")}
      }
    `;return{toVec:new d.GlslLibRoutine(st,["coordinates.coordsToOffset"])}}valueFrom(){const et={};return this.context.programInfo.inputNames.forEach((g,c)=>{const j=this.context.inputTextureLayouts[c],_e=(j.unpackedShape.length>0?j.unpackedShape:j.shape).length;let rt=`_${g}`;et[rt]=new d.GlslLibRoutine(this.getValueFromSingle(g,_e,j.width,j.height,!1),[`shapeUtils.indicesToOffset${rt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),rt+="_T",et[rt]=new d.GlslLibRoutine(this.getValueFromSingle(g,_e,j.width,j.height,!0),[`shapeUtils.indicesToOffset${rt}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),et}getValueFromSingle(et,g,c,j,_e){let rt=`_${et}`;return _e&&(rt+="_T"),`
        float ${rt}(int m[${g}]) {
          int offset = indicesToOffset${rt}(m);
          vec2 coords = offsetToCoords(offset, ${c}, ${j});
          float value = getColorAsFloat(${(0,_.getGlsl)(this.context.glContext.version).texture2D}(${et}, coords));
          return value;
        }
        `}getPackedValueFrom(et,g,c,j,_e){let rt=`_${et}_Pack`;return _e&&(rt+="_T"),`
        vec4 ${rt}(int m[${g}]) {
          int offset = indicesToOffset_${et}(m);
          vec2 coords = offsetToCoords(offset, ${c}, ${j});
          return ${(0,_.getGlsl)(this.context.glContext.version).texture2D}(${et}, coords);
        }
        `}}s.CoordsGlslLib=nt},8520:(o,s)=>{var i;Object.defineProperty(s,"__esModule",{value:!0}),s.TopologicalSortGlslRoutines=s.GlslLibRoutineNode=s.GlslLibRoutine=s.GlslLib=s.GlslContext=s.FunctionType=void 0,(i=s.FunctionType||(s.FunctionType={}))[i.ValueBased=0]="ValueBased",i[i.Positional=1]="Positional",s.GlslContext=class{constructor(a,d,_,b){this.glContext=a,this.programInfo=d,this.inputTextureLayouts=_,this.outputTextureLayout=b}},s.GlslLib=class{constructor(a){this.context=a}},s.GlslLibRoutine=class{constructor(a,d){this.routineBody=a,this.dependencies=d}},s.GlslLibRoutineNode=class{constructor(a,d,_){this.name=a,this.dependencies=_||[],d&&(this.routineBody=d)}addDependency(a){a&&this.dependencies.push(a)}},s.TopologicalSortGlslRoutines=class{static returnOrderedNodes(a){if(!a||a.length===0)return[];if(a.length===1)return a;const d=new Set,_=new Set,b=new Array;return this.createOrderedNodes(a,d,_,b),b}static createOrderedNodes(a,d,_,b){for(let $=0;$<a.length;++$)this.dfsTraverse(a[$],d,_,b)}static dfsTraverse(a,d,_,b){if(!a||_.has(a.name))return;if(d.has(a.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");d.add(a.name);const $=a.dependencies;if($&&$.length>0)for(let nt=0;nt<$.length;++nt)this.dfsTraverse($[nt],d,_,b);b.push(a),_.add(a.name),d.delete(a.name)}}},7341:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EncodingGlslLib=void 0;const a=i(8520);class d extends a.GlslLib{constructor(b){super(b)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new a.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new a.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const b=d.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new a.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${b}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const b=d.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new a.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${b}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const b=new ArrayBuffer(4),$=new Uint32Array(b),nt=new Uint8Array(b);if($[0]=3735928559,nt[0]===239)return!0;if(nt[0]===222)return!1;throw new Error("unknown endianness")}}s.EncodingGlslLib=d},9894:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FragColorGlslLib=void 0;const a=i(8520),d=i(5060);class _ extends a.GlslLib{constructor($){super($)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const $=(0,d.getGlsl)(this.context.glContext.version);return{setFragColor:new a.GlslLibRoutine(`
        void setFragColor(float value) {
            ${$.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new a.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}s.FragColorGlslLib=_},2848:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.replaceInlines=void 0;const i=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;s.replaceInlines=function(a){const d={};let _;for(;(_=i.exec(a))!==null;){const b=_[3].split(",").map($=>{const nt=$.trim().split(" ");return nt&&nt.length===2?{type:nt[0],name:nt[1]}:null}).filter($=>$!==null);d[_[2]]={params:b,body:_[4]}}for(const b in d){const $="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",b),nt=new RegExp($,"gm");for(;(_=nt.exec(a))!==null;){const tt=_[1],et=_[2],g=_[3].split(","),c=tt?`${tt} ${et};`:"";let j=d[b].body,_e="";d[b].params.forEach((st,ot)=>{st&&(_e+=`${st.type} ${st.name} = ${g[ot]};
`)}),j=`${_e}
 ${j}`,j=j.replace("return",`${et} = `);const rt=`
      ${c}
      {
        ${j}
      }
      `;a=a.replace(_[0],rt)}}return a.replace(i,"")}},8879:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlslPreprocessor=void 0;const a=i(8520),d=i(2848),_=i(5483),b=i(5060);s.GlslPreprocessor=class{constructor($,nt,tt,et){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new a.GlslContext($,nt,tt,et),Object.keys(_.glslRegistry).forEach(c=>{const j=new _.glslRegistry[c](this.context);this.libs[c]=j});const g=this.glslLibRoutineDependencyGraph;for(const c in this.libs){const j=this.libs[c].getFunctions();for(const _e in j){const rt=c+"."+_e;let st;g[rt]?(st=g[rt],st.routineBody=j[_e].routineBody):(st=new a.GlslLibRoutineNode(rt,j[_e].routineBody),g[rt]=st);const ot=j[_e].dependencies;if(ot)for(let it=0;it<ot.length;++it)if(g[ot[it]])st.addDependency(g[ot[it]]);else{const at=new a.GlslLibRoutineNode(ot[it]);g[ot[it]]=at,st.addDependency(at)}}}}preprocess(){const $=this.context.programInfo;let nt=$.shaderSource;return this.context.programInfo.hasMain||(nt=`${nt}
      ${(0,b.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),nt=(0,d.replaceInlines)(nt),`${(0,b.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms($.inputNames,$.variables)}
    ${this.getImports(nt)}
    ${nt}`}getImports($){const nt=this.selectGlslLibRoutinesToBeIncluded($);if(nt.length===0)return"";let tt="";for(let et=0;et<nt.length;++et){if(!nt[et].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${nt[et].name}`);tt+=nt[et].routineBody+`
`}return tt}selectGlslLibRoutinesToBeIncluded($){const nt=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(tt=>{const et=tt.split(".")[1];$.indexOf(et)!==-1&&nt.push(this.glslLibRoutineDependencyGraph[tt])}),a.TopologicalSortGlslRoutines.returnOrderedNodes(nt)}getUniforms($,nt){const tt=[];if($)for(const et of $)tt.push(`uniform sampler2D ${et};`);if(nt)for(const et of nt)tt.push(`uniform ${et.type} ${et.name}${et.arrayLength?`[${et.arrayLength}]`:""};`);return tt.join(`
`)}}},5483:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.glslRegistry=void 0;const a=i(5107),d=i(7341),_=i(9894),b=i(2655),$=i(3891);s.glslRegistry={encoding:d.EncodingGlslLib,fragcolor:_.FragColorGlslLib,vec:$.VecGlslLib,shapeUtils:b.ShapeUtilsGlslLib,coordinates:a.CoordsGlslLib}},2655:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ShapeUtilsGlslLib=void 0;const a=i(8520);class d extends a.GlslLib{constructor(b){super(b)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const b=this.context.outputTextureLayout.shape.length,$={};return this.context.programInfo.inputNames.forEach((nt,tt)=>{const et=this.context.inputTextureLayouts[tt].unpackedShape;if(et.length<=b){const g=et.length,c=b-g,j=`bcastIndices_${nt}`;let _e="";for(let st=0;st<g;++st)_e+=`
          realIndices[${st}] = int( mod(float(bcastedIndices[${c+st}]), ${et[st]}.0) );
          `;const rt=`
        void ${j} (int bcastedIndices[${b}], out int realIndices[${g}]) {
          ${_e}
        }
        `;$[j]=new a.GlslLibRoutine(rt)}}),$}bcastMatmulIndex(){const b=this.context.outputTextureLayout.shape.length,$={};return this.context.programInfo.inputNames.forEach((nt,tt)=>{const et=this.context.inputTextureLayouts[tt].shape;if(!(et.length<2||et.length>b)){const g=et.length,c=b-g,j=`bcastMatmulIndices_${nt}`;let _e="";for(let st=0;st<g-2;++st)_e+=`
          realIndices[${st}] = int( mod(float(bcastedIndices[${c+st}]), ${et[st]}.0) );
          `;const rt=`
        void ${j}(int bcastedIndices[${b}], out int realIndices[${g}]) {
          ${_e}
          realIndices[${g-1}] = bcastedIndices[${b-1}];
          realIndices[${g-2}] = bcastedIndices[${b-2}];
        }
        `;$[j]=new a.GlslLibRoutine(rt)}}),$}indicesToOffset(){const b={};return this.context.programInfo.inputNames.forEach(($,nt)=>{const tt=this.context.inputTextureLayouts[nt].shape,et=this.context.inputTextureLayouts[nt].strides,g=tt.length;let c=`indicesToOffset_${$}`;b[c]=new a.GlslLibRoutine(d.indexToOffsetSingle(c,g,et)),c=`indicesToOffset_${$}_T`,b[c]=new a.GlslLibRoutine(d.indexToOffsetSingle(c,g,et.slice().reverse()))}),b}static indexToOffsetSingle(b,$,nt){let tt="";for(let et=$-1;et>=0;--et)tt+=`
        offset += indices[${et}] * ${nt[et]};
        `;return`
      int ${b}(int indices[${$}]) {
        int offset = 0;
        ${tt}
        return offset;
      }
      `}offsetToIndices(){const b={};return this.context.programInfo.inputNames.forEach(($,nt)=>{const tt=this.context.inputTextureLayouts[nt].shape,et=this.context.inputTextureLayouts[nt].strides,g=tt.length;let c=`offsetToIndices_${$}`;b[c]=new a.GlslLibRoutine(d.offsetToIndicesSingle(c,g,et)),c=`offsetToIndices_${$}_T`,b[c]=new a.GlslLibRoutine(d.offsetToIndicesSingle(c,g,et.slice().reverse()))}),b}static offsetToIndicesSingle(b,$,nt){const tt=[];for(let et=0;et<$-1;++et)tt.push(`
      indices[${et}] = offset / ${nt[et]};`),tt.push(`
        offset -= indices[${et}] * ${nt[et]};`);return tt.push(`
      indices[${$-1}] = offset;`),`
      void ${b}(int offset, out int indices[${$}]) {
        ${tt.join("")}
      }
      `}incrementIndices(){const b={};return this.context.programInfo.inputNames.forEach(($,nt)=>{const tt=this.context.inputTextureLayouts[nt].shape,et=tt.length,g=`incrementIndices_${$}`;let c="";for(let _e=0;_e<et;++_e)c+=`
        shape[${_e}] = ${tt[_e]};`;const j=`
        void ${g}(int axis, out int indices[${et}]) {
          int shape[${et}];
          ${c};
          for(int i = ${et} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;b[g]=new a.GlslLibRoutine(j)}),b}}s.ShapeUtilsGlslLib=d},5060:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getDefaultFragShaderMain=s.getFragShaderPreamble=s.getVertexShaderSource=s.getGlsl=void 0;const i={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},a={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function d(_){return _===1?i:a}s.getGlsl=d,s.getVertexShaderSource=function(_){const b=d(_);return`${b.version}
      precision highp float;
      ${b.attribute} vec3 position;
      ${b.attribute} vec2 textureCoord;

      ${b.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},s.getFragShaderPreamble=function(_){const b=d(_);return`${b.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${b.varyingFrag} vec2 TexCoords;
    ${b.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},s.getDefaultFragShaderMain=function(_,b){return`
  void main() {
    int indices[${b}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${d(_).output} = result;
  }
  `}},3891:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.VecGlslLib=void 0;const a=i(8520);class d extends a.GlslLib{constructor(b){super(b)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const b=this.context.outputTextureLayout.shape.length,$={add:"+=",sub:"-=",mul:"*=",div:"/="},nt={};for(const tt in $){const et=`${tt}Vec`;let g="";for(let j=0;j<b;++j)g+=`
          dest[${j}] ${$[tt]} src[${j}];
          `;const c=`
        void ${et}(int src[${b}], out int dest[${b}]) {
          ${g}
        }
        `;nt[et]=new a.GlslLibRoutine(c)}return nt}copyVec(){const b=this.context.outputTextureLayout.shape.length;let $="";for(let tt=0;tt<b;++tt)$+=`
        dest[${tt}] = src[${tt}];
        `;const nt=`
      void copyVec(int src[${b}], out int dest[${b}]) {
        ${$}
      }
      `;return{copyVec:new a.GlslLibRoutine(nt)}}setVecItem(){const b=this.context.outputTextureLayout.shape.length;let $=`
        if(index < 0)
            index =${b} + index;
        if (index == 0)
            m[0] = value;
        `;for(let tt=1;tt<b-1;++tt)$+=`
        else if (index == ${tt})
            m[${tt}] = value;
            `;$+=`
        else
            m[${b-1}] = value;
        `;const nt=`
      void setVecItem(out int m[${b}], int index, int value) {
        ${$}
      }
        `;return{setVecItem:new a.GlslLibRoutine(nt)}}getVecItem(){const b=this.context.outputTextureLayout.shape.length;let $=`
        if(index < 0)
            index = ${b} + index;
        if (index == 0)
            return m[0];
      `;for(let tt=1;tt<b-1;++tt)$+=`
        else if (index == ${tt})
            return m[${tt}];
      `;$+=`
        else
            return m[${b-1}];
        `;const nt=`
      int getVecItem(int m[${b}], int index) {
        ${$}
      }
    `;return{getVecItem:new a.GlslLibRoutine(nt)}}}s.VecGlslLib=d},8316:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLInferenceHandler=void 0;const a=i(6231),d=i(9162),_=i(2517),b=i(2403),$=i(7019),nt=i(8710),tt=i(5611),et=i(4057),g=i(2039);s.WebGLInferenceHandler=class{constructor(c){this.session=c,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(c,j){return(0,et.calculateTextureWidthAndHeight)(this.session.layoutStrategy,c,j)}executeProgram(c,j){if(j.length<c.inputNames.length)throw new Error(`Input size mustn't be less than ${c.inputNames.length}.`);if(c.inputNames.length!==c.inputTypes.length)throw new Error("input names size does not match input types");const _e=[];for(let lt=0;lt<c.inputNames.length;++lt)_e[lt]=this.getOrCreateTextureData(j[lt],c.inputTypes[lt]);const rt=((lt,ut)=>{const ct=ut.map(ft=>`${ft.unpackedShape.join(",")};${ft.width}x${ft.height}`).join("_");let dt=lt.name;return lt.cacheHint&&(dt+="["+lt.cacheHint+"]"),dt+=":"+ct,dt})(c,_e);let st=this.session.programManager.getArtifact(rt);const ot=st?st.programInfo:typeof c.get=="function"?c.get():c,it=(0,et.createTextureLayoutFromTextureType)(this.session.layoutStrategy,ot.output.dims,ot.output.textureType),at=this.createTextureData(it,ot.output.type);return st||(st=this.session.programManager.build(ot,_e,at),this.session.programManager.setArtifact(rt,st)),this.runProgram(st,_e,at),at}run(c,j){return this.executeProgram(c,j).tensor}runProgram(c,j,_e){for(let rt=0;rt<j.length;++rt)if(!!j[rt].isPacked!=(c.programInfo.inputTypes[rt]===g.TextureType.packed))throw new Error(`input[${rt}] property packed inconsistent`);if(!!_e.isPacked!=(c.programInfo.output.textureType===g.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(c,j,_e)}getOrCreateTextureData(c,j){let _e=this.getTextureData(c.dataId,j===g.TextureType.packed);if(!_e&&(_e=this.getTextureData(c.dataId,j!==g.TextureType.packed),_e))return j===g.TextureType.packed?this.pack(_e):this.unpack(_e);if(!_e){const rt=(0,et.createTextureLayoutFromTextureType)(this.session.layoutStrategy,c.dims,j);if(j===g.TextureType.packedLastDimension){const it=c.dims;if(it.length===4){const at=[it[0],Math.ceil(it[1]*it[2]*it[3]/4)],lt=(0,et.createTextureLayoutFromTextureType)(this.session.layoutStrategy,at,j);let ut=c.numberData;if(it[1]*it[2]*it[3]%4!=0){const ct=it[0],dt=it[1]*it[2]*it[3],ft=Math.ceil(dt*1/4)*4;ut=new Float32Array(ct*ft);for(let ht=0;ht<ct;++ht){const mt=ht*dt,yt=ht*ft+ht%1*dt;ut.set(c.numberData.subarray(mt,mt+dt),yt)}}return this.createTextureData(lt,c.type,ut,c,1)}}if(j===g.TextureType.packed){const st=(0,et.createTextureLayoutFromShape)(this.session.layoutStrategy,c.dims,1,[],{reverseWH:!0}),ot=this.createTextureData(st,c.type,c.numberData,c,1);_e=this.pack(ot)}else _e=this.createTextureData(rt,c.type,c.numberData,c,1)}return _e}createTextureDataFromLayoutBindTensor(c,j,_e,rt){return this.createTextureData(c,j,_e,rt,1)}createTextureData(c,j,_e,rt,st){a.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(c)}]`);const ot=this.session.textureManager.createTextureFromLayout(j,c,_e,st);return this.createTextureDataFromTexture(c,j,ot,rt)}reshapeUnpacked(c,j){const _e=this.getOrCreateTextureData(c,g.TextureType.unpacked),rt={channels:_e.channels,height:_e.height,width:_e.width,shape:j.length!==0?j:[1],strides:_.ShapeUtil.computeStrides(j),unpackedShape:j};return this.createTextureDataFromTexture(rt,c.type,_e.texture).tensor}reshapePacked(c,j){const _e=this.getOrCreateTextureData(c,g.TextureType.packed);if((0,$.isReshapeCheap)(c.dims,j)){const at={channels:_e.channels,height:_e.height,width:_e.width,shape:j.length!==0?j:[1],strides:_.ShapeUtil.computeStrides(j),unpackedShape:j,isPacked:!0};return this.createTextureDataFromTexture(at,c.type,_e.texture).tensor}const rt=(0,$.processDims3D)(c.dims),st=(0,$.processDims3D)(j),ot=this.reshapePacked(c,rt),it=this.run((0,$.createPackedReshape3DProgramInfoLoader)(this,ot,st),[ot]);return this.reshapePacked(it,j)}cast(c,j){const _e=this.getOrCreateTextureData(c,g.TextureType.unpacked);return this.createTextureDataFromTexture(_e,j,_e.texture).tensor}createTextureDataFromTexture(c,j,_e,rt,st){const ot=Object.assign(Object.assign({},c),{tensor:rt||new d.Tensor(c.unpackedShape,j,it=>this.readTexture(ot),async it=>this.readTextureAsync(ot),void 0,st),texture:_e});return this.setTextureData(ot.tensor.dataId,ot,c.isPacked),ot}getTextureData(c,j=!1){return this.session.isInitializer(c)?this.session.getTextureData(c,j):j?this.packedTextureDataCache.get(c):this.unpackedTextureDataCache.get(c)}setTextureData(c,j,_e=!1){this.session.isInitializer(c)?this.session.setTextureData(c,j,_e):(_e?this.packedTextureDataCache:this.unpackedTextureDataCache).set(c,j)}isTextureLayoutCached(c,j=!1){return!!this.getTextureData(c.dataId,j)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(c=>this.session.textureManager.releaseTexture(c)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(c=>this.session.textureManager.releaseTexture(c)),this.unpackedTextureDataCache=new Map}readTexture(c){return c.isPacked?this.readTexture(this.unpack(c)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(c,c.tensor.type,c.channels):this.session.textureManager.readUint8TextureAsFloat((0,nt.encodeAsUint8)(this,c))}async readTextureAsync(c){return c.isPacked?this.readTextureAsync(this.unpack(c)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(c,c.tensor.type,c.channels):this.session.textureManager.readUint8TextureAsFloat((0,nt.encodeAsUint8)(this,c))}pack(c){return this.executeProgram((0,b.createPackProgramInfoLoader)(this,c.tensor),[c.tensor])}unpack(c){return this.executeProgram((0,tt.createUnpackProgramInfoLoader)(this,c.tensor),[c.tensor])}}},1640:function(o,s,i){var a=this&&this.__createBinding||(Object.create?function(At,Ft,Bt,Wt){Wt===void 0&&(Wt=Bt);var sn=Object.getOwnPropertyDescriptor(Ft,Bt);sn&&!("get"in sn?!Ft.__esModule:sn.writable||sn.configurable)||(sn={enumerable:!0,get:function(){return Ft[Bt]}}),Object.defineProperty(At,Wt,sn)}:function(At,Ft,Bt,Wt){Wt===void 0&&(Wt=Bt),At[Wt]=Ft[Bt]}),d=this&&this.__setModuleDefault||(Object.create?function(At,Ft){Object.defineProperty(At,"default",{enumerable:!0,value:Ft})}:function(At,Ft){At.default=Ft}),_=this&&this.__importStar||function(At){if(At&&At.__esModule)return At;var Ft={};if(At!=null)for(var Bt in At)Bt!=="default"&&Object.prototype.hasOwnProperty.call(At,Bt)&&a(Ft,At,Bt);return d(Ft,At),Ft};Object.defineProperty(s,"__esModule",{value:!0}),s.WEBGL_OP_RESOLVE_RULES=void 0;const b=i(2898),$=_(i(7839)),nt=i(4196),tt=i(2069),et=i(8138),g=i(9663),c=i(5193),j=i(7992),_e=i(1253),rt=i(4776),st=i(6572),ot=i(3346),it=i(5623),at=i(2870),lt=i(2143),ut=i(4939),ct=i(718),dt=i(2268),ft=i(8117),ht=i(2278),mt=i(5524),yt=i(5975),Tt=i(3933),St=i(6558),xt=i(5723),wt=i(3738),gt=_(i(4909)),vt=i(8428),Ot=i(9793);s.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",gt.abs],["Acos","","7+",gt.acos],["Add","","7+",$.add],["And","","7+",$.and],["Asin","","7+",gt.asin],["Atan","","7+",gt.atan],["AveragePool","","7+",lt.averagePool,lt.parseAveragePoolAttributes],["BatchNormalization","","7+",b.batchNormalization,b.parseBatchNormalizationAttributes],["Cast","","6+",nt.cast,nt.parseCastAttributes],["Ceil","","6+",gt.ceil],["Clip","","6-10",gt.clip,gt.parseClipAttributes],["Clip","","11+",gt.clipV11],["Concat","","4+",tt.concat,tt.parseConcatAttributes],["Conv","","1+",et.conv,et.parseConvAttributes],["ConvTranspose","","1+",g.convTranspose,g.parseConvTransposeAttributes],["Cos","","7+",gt.cos],["Div","","7+",$.div],["Dropout","","7+",gt.identity],["DepthToSpace","","1+",c.depthToSpace,c.parseDepthToSpaceAttributes],["Equal","","7+",$.equal],["Elu","","6+",gt.elu,gt.parseEluAttributes],["Exp","","6+",gt.exp],["Flatten","","1+",j.flatten,j.parseFlattenAttributes],["Floor","","6+",gt.floor],["FusedConv","com.microsoft","1+",et.conv,et.parseConvAttributes],["Gather","","1+",_e.gather,_e.parseGatherAttributes],["Gemm","","7-10",rt.gemm,rt.parseGemmAttributesV7],["Gemm","","11+",rt.gemm,rt.parseGemmAttributesV11],["GlobalAveragePool","","1+",lt.globalAveragePool,lt.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",lt.globalMaxPool],["Greater","","7+",$.greater],["Identity","","1+",gt.identity],["ImageScaler","","1+",st.imageScaler,st.parseImageScalerAttributes],["InstanceNormalization","","6+",ot.instanceNormalization,ot.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",gt.leakyRelu,gt.parseLeakyReluAttributes],["Less","","7+",$.less],["Log","","6+",gt.log],["MatMul","","1+",it.matMul,it.parseMatMulAttributes],["MaxPool","","1+",lt.maxPool,lt.parseMaxPoolAttributes],["Mul","","7+",$.mul],["Neg","","6+",gt.neg],["Not","","1+",gt.not],["Or","","7+",$.or],["Pad","","2-10",at.padV2,at.parsePadAttributesV2],["Pad","","11+",at.padV11,at.parsePadAttributesV11],["Pow","","7+",$.pow],["PRelu","","7+",$.pRelu],["ReduceLogSum","","1+",ut.reduceLogSum,ut.parseReduceAttributes],["ReduceMax","","1+",ut.reduceMax,ut.parseReduceAttributes],["ReduceMean","","1+",ut.reduceMean,ut.parseReduceAttributes],["ReduceMin","","1+",ut.reduceMin,ut.parseReduceAttributes],["ReduceProd","","1+",ut.reduceProd,ut.parseReduceAttributes],["ReduceSum","","1-12",ut.reduceSum,ut.parseReduceAttributes],["ReduceSumSquare","","1+",ut.reduceLogSumSquare,ut.parseReduceAttributes],["Relu","","6+",gt.relu],["Reshape","","5+",ct.reshape],["Resize","","10",dt.resize,dt.parseResizeAttributesV10],["Resize","","11+",dt.resize,dt.parseResizeAttributesV11],["Shape","","1+",ft.shape],["Sigmoid","","6+",gt.sigmoid],["Sin","","7+",gt.sin],["Slice","","10+",ht.sliceV10],["Slice","","1-9",ht.slice,ht.parseSliceAttributes],["Softmax","","1-12",mt.softmax,mt.parseSoftmaxAttributes],["Softmax","","13+",mt.softmaxV13,mt.parseSoftmaxAttributesV13],["Split","","2-12",yt.split,yt.parseSplitAttributes],["Sqrt","","6+",gt.sqrt],["Squeeze","","1-12",Tt.squeeze,Tt.parseSqueezeAttributes],["Squeeze","","13+",Tt.squeezeV13],["Sub","","7+",$.sub],["Sum","","6+",St.sum],["Tan","","7+",gt.tan],["Tanh","","6+",gt.tanh],["Tile","","6+",xt.tile],["Transpose","","1+",wt.transpose,wt.parseTransposeAttributes],["Upsample","","7-8",Ot.upsample,Ot.parseUpsampleAttributesV7],["Upsample","","9",Ot.upsample,Ot.parseUpsampleAttributesV9],["Unsqueeze","","1-12",vt.unsqueeze,vt.parseUnsqueezeAttributes],["Unsqueeze","","13+",vt.unsqueezeV13],["Xor","","7+",$.xor]]},2898:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseBatchNormalizationAttributes=s.batchNormalization=void 0;const a=i(246),d=i(5060),_=i(2039),b={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[_.TextureType.unpacked,_.TextureType.unpacked,_.TextureType.unpacked,_.TextureType.unpacked,_.TextureType.unpacked]};s.batchNormalization=(tt,et,g)=>(nt(et),[tt.run(Object.assign(Object.assign({},b),{cacheHint:g.cacheKey,get:()=>$(tt,et,g)}),et)]),s.parseBatchNormalizationAttributes=tt=>{const et=tt.attributes.getFloat("epsilon",1e-5),g=tt.attributes.getFloat("momentum",.9),c=tt.attributes.getInt("spatial",1);return(0,a.createAttributeWithCacheKey)({epsilon:et,momentum:g,spatial:c})};const $=(tt,et,g)=>{const c=(0,d.getGlsl)(tt.session.backend.glContext.version),j=et[0].dims.length,[_e,rt]=tt.calculateTextureWidthAndHeight(et[1].dims,_.TextureType.unpacked),st=`
  float process(int[${j}] indices) {
    vec2 position = offsetToCoords(indices[1], ${_e}, ${rt});
    float scale = getColorAsFloat(${c.texture2D}(Scale, position));
    float mean = getColorAsFloat(${c.texture2D}(Mean, position));
    float variance = getColorAsFloat(${c.texture2D}(Variance, position));
    float b = getColorAsFloat(${c.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${g.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},b),{output:{dims:et[0].dims,type:et[0].type,textureType:_.TextureType.unpacked},shaderSource:st})},nt=tt=>{if(!tt||tt.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const et=tt[0],g=tt[1],c=tt[2],j=tt[3],_e=tt[4];if(et.dims.length<3||g.dims.length!==1||c.dims.length!==1||j.dims.length!==1||_e.dims.length!==1)throw new Error("invalid input shape.");if(g.dims[0]!==et.dims[1]||c.dims[0]!==et.dims[1]||j.dims[0]!==et.dims[1]||_e.dims[0]!==et.dims[1])throw new Error("invalid input shape.");if(et.type!=="float32"&&et.type!=="float64"||g.type!=="float32"&&g.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||j.type!=="float32"&&j.type!=="float64"||_e.type!=="float32"&&_e.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.xor=s.sub=s.pRelu=s.pow=s.or=s.mul=s.less=s.greater=s.equal=s.div=s.and=s.add=s.glslPRelu=s.glslPow=s.glslXor=s.glslOr=s.glslAnd=s.glslLess=s.glslGreater=s.glslEqual=s.glslSub=s.glslMul=s.glslDiv=s.glslAdd=void 0;const a=i(2517),d=i(8520),_=i(5060),b=i(2039);function $(){const ut="add_";return{body:`
  float ${ut}(float a, float b) {
    return a + b;
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function nt(){const ut="div_";return{body:`
  float ${ut}(float a, float b) {
    return a / b;
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function tt(){const ut="mul_";return{body:`
  float ${ut}(float a, float b) {
    return a * b;
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function et(){const ut="sub_";return{body:`
  float ${ut}(float a, float b) {
    return a - b;
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function g(){const ut="equal_";return{body:`
  float ${ut}(float a, float b) {
    return float(a == b);
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function c(){const ut="greater_";return{body:`
  float ${ut}(float a, float b) {
    return float(a > b);
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function j(){const ut="less_";return{body:`
  float ${ut}(float a, float b) {
    return float(a < b);
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function _e(){const ut="and_";return{body:`
  float ${ut}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function rt(){const ut="or_";return{body:`
  float ${ut}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function st(){const ut="xor_";return{body:`
  float ${ut}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:ut,type:d.FunctionType.ValueBased}}function ot(){return function(ut){const ct=`${ut}_`;return{body:`
  float ${ct}(float a, float b) {
    return ${ut}(a, b);
  }
  vec4 ${ct}(vec4 v1, vec4 v2) {
    return ${ut}(v1, v2);
  }
  `,name:ct,type:d.FunctionType.ValueBased}}("pow")}function it(){const ut="prelu_";return{body:`
  float ${ut}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${ut}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:ut,type:d.FunctionType.ValueBased}}s.glslAdd=$,s.glslDiv=nt,s.glslMul=tt,s.glslSub=et,s.glslEqual=g,s.glslGreater=c,s.glslLess=j,s.glslAnd=_e,s.glslOr=rt,s.glslXor=st,s.glslPow=ot,s.glslPRelu=it;const at=(ut,ct,dt,ft=ct[0].type,ht)=>{const mt=ut.session.pack?b.TextureType.packed:b.TextureType.unpacked;return{name:dt.name,inputNames:["A","B"],inputTypes:[mt,mt],cacheHint:ht,get:()=>lt(ut,ct,dt,ft)}},lt=(ut,ct,dt,ft=ct[0].type)=>{const ht=ut.session.pack?b.TextureType.packed:b.TextureType.unpacked,mt=!a.ShapeUtil.areEqual(ct[0].dims,ct[1].dims);let yt=ct[0].dims;const Tt=ut.session.pack;if(mt){const wt=a.BroadcastUtil.calcShape(ct[0].dims,ct[1].dims,!1);if(!wt)throw new Error("Can't perform binary op on the given tensors");yt=wt;const gt=yt.length,vt=ct[0].dims.length!==0?ct[0].dims.length:1,Ot=ct[1].dims.length!==0?ct[1].dims.length:1,At=ct[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Ft=ct[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Bt=(0,_.getGlsl)(ut.session.backend.glContext.version),Wt=Tt?`
      ${dt.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${dt.name}(a, b);
        ${Bt.output} = result;
      }`:`
      ${dt.body}
      float process(int indices[${gt}]) {
        int aindices[${vt}];
        int bindices[${Ot}];
        ${At}
        ${Ft}
        return ${dt.name}(_A(aindices), _B(bindices));
      }`;return{name:dt.name,inputNames:["A","B"],inputTypes:[ht,ht],output:{dims:yt,type:ft,textureType:ht},shaderSource:Wt,hasMain:Tt}}const St=(0,_.getGlsl)(ut.session.backend.glContext.version),xt=`
    ${dt.body}
    void main() {
      vec4 v1 = ${St.texture2D}(A, TexCoords);
      vec4 v2 = ${St.texture2D}(B, TexCoords);
      vec4 result = ${dt.name}(v1, v2);
      ${St.output} = result;
    }
    `;return{name:dt.name,inputNames:["A","B"],inputTypes:[ht,ht],output:{dims:ct[0].dims,type:ft,textureType:ht},shaderSource:xt,hasMain:!0}};s.add=(ut,ct)=>[ut.run(at(ut,ct,$()),ct)],s.and=(ut,ct)=>[ut.run(at(ut,ct,_e(),"bool"),ct)],s.div=(ut,ct)=>[ut.run(at(ut,ct,nt()),ct)],s.equal=(ut,ct)=>[ut.run(at(ut,ct,g(),"bool"),ct)],s.greater=(ut,ct)=>[ut.run(at(ut,ct,c(),"bool"),ct)],s.less=(ut,ct)=>[ut.run(at(ut,ct,j(),"bool"),ct)],s.mul=(ut,ct)=>[ut.run(at(ut,ct,tt()),ct)],s.or=(ut,ct)=>[ut.run(at(ut,ct,rt(),"bool"),ct)],s.pow=(ut,ct)=>[ut.run(at(ut,ct,ot()),ct)],s.pRelu=(ut,ct)=>[ut.run(at(ut,ct,it()),ct)],s.sub=(ut,ct)=>[ut.run(at(ut,ct,et()),ct)],s.xor=(ut,ct)=>[ut.run(at(ut,ct,st(),"bool"),ct)]},4196:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseCastAttributes=s.cast=void 0;const a=i(2517);s.cast=(_,b,$)=>(d(b),[_.cast(b[0],$)]),s.parseCastAttributes=_=>a.ProtoUtil.tensorDataTypeFromProto(_.attributes.getInt("to"));const d=_=>{if(!_||_.length!==1)throw new Error("Cast requires 1 input.");if(_[0].type==="string")throw new Error("Invalid input type.")}},1163:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createPackedConcatProgramInfoLoader=void 0;const a=i(5060),d=i(2039),_=i(9390),b=i(2827);s.createPackedConcatProgramInfoLoader=(nt,tt,et)=>{const g=(c=tt.length,j=et.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:c},(_e,rt)=>`X${rt}`),inputTypes:Array(c).fill(d.TextureType.packed),cacheHint:j});var c,j;return Object.assign(Object.assign({},g),{get:()=>((_e,rt,st,ot)=>{const it=st[0].dims.slice();if(ot>=it.length||ot<-1*it.length)throw new Error("axis specified for concat doesn't match input dimensionality");ot<0&&(ot=it.length+ot);const at=it.slice(0);for(let At=1;At<st.length;At++){const Ft=st[At].dims.slice();for(let Bt=0;Bt<it.length;Bt++)if(Bt===ot)at[ot]+=Ft[Bt];else if(it[Bt]!==Ft[Bt])throw new Error("non concat dimensions must match")}const lt=at.length,ut=(0,b.getChannels)("coords",lt),ct=(0,_.getCoordsDataType)(lt),dt=(0,b.unpackFromChannel)(),ft=st.map(At=>At.dims),ht=(0,_.getGlChannels)(lt),mt=new Array(ft.length-1);mt[0]=ft[0][ot];for(let At=1;At<mt.length;At++)mt[At]=mt[At-1]+ft[At][ot];const yt=ht[ot],Tt=ht.slice(-2),St=ht.join();let xt=`if (${yt} < ${mt[0]}) {
        return getChannel(
            getX0(${St}), vec2(${Tt.join()}));
        }`;for(let At=1;At<mt.length;At++){const Ft=mt[At-1];xt+=`
            if (${yt} < ${mt[At]}  && ${yt} >= ${mt[At-1]}) {
              return getChannel(
                getX${At}(${$(ht,yt,Ft)}),
                vec2(${$(Tt,yt,Ft)}));
            }`}const wt=mt.length,gt=mt[mt.length-1];xt+=`
            return getChannel(
              getX${wt}(${$(ht,yt,gt)}),
              vec2(${$(Tt,yt,gt)}));`;const vt=(0,a.getGlsl)(_e.session.backend.glContext.version),Ot=`
          ${dt}
          float getValue(${ht.map(At=>"int "+At)}) {
            ${xt}
          }

          void main() {
            ${ct} coords = getOutputCoords();
            int lastDim = coords.${ht[lt-1]};
            coords.${ht[lt-1]} = coords.${ht[lt-2]};
            coords.${ht[lt-2]} = lastDim;

            vec4 result = vec4(getValue(${ut}), 0., 0., 0.);

            ${ut[lt-1]} = ${ut[lt-1]} + 1;
            if (${ut[lt-1]} < ${at[lt-1]}) {
              result.g = getValue(${ut});
            }

            ${ut[lt-2]} = ${ut[lt-2]} + 1;
            if (${ut[lt-2]} < ${at[lt-2]}) {
              result.a = getValue(${ut});
            }

            ${ut[lt-1]} = ${ut[lt-1]} - 1;
            if (${ut[lt-2]} < ${at[lt-2]} &&
                ${ut[lt-1]} < ${at[lt-1]}) {
              result.b = getValue(${ut});
            }
            ${vt.output} = result;
          }
        `;return Object.assign(Object.assign({},rt),{output:{dims:at,type:st[0].type,textureType:d.TextureType.packed},shaderSource:Ot,hasMain:!0})})(nt,g,tt,et.axis)})};const $=(nt,tt,et)=>{const g=nt.indexOf(tt);return nt.map((c,j)=>j===g?`${c} - ${et}`:c).join()}},2069:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseConcatAttributes=s.concat=void 0;const a=i(246),d=i(2039),_=i(1163);s.concat=(c,j,_e)=>(g(j),c.session.pack&&j[0].dims.length>1?[c.run((0,_.createPackedConcatProgramInfoLoader)(c,j,_e),j)]:[c.run(b(c,j,_e),j)]);const b=(c,j,_e)=>{const rt=(st=j.length,ot=_e.cacheKey,{name:"Concat",inputNames:Array.from({length:st},(it,at)=>`X${at}`),inputTypes:Array(st).fill(d.TextureType.unpacked),cacheHint:ot});var st,ot;return Object.assign(Object.assign({},rt),{get:()=>((it,at,lt,ut)=>{const ct=lt[0].dims.slice();if(ut>=ct.length||ut<-1*ct.length)throw new Error("axis specified for concat doesn't match input dimensionality");ut<0&&(ut=ct.length+ut);const dt=ct.slice(0);for(let St=1;St<lt.length;St++){const xt=lt[St].dims.slice();for(let wt=0;wt<ct.length;wt++)if(wt===ut)dt[ut]+=xt[wt];else if(ct[wt]!==xt[wt])throw new Error("non concat dimensions must match")}const ft=dt.length,ht=new Array(lt.length);let mt=0;for(let St=0;St<ht.length;++St)mt+=lt[St].dims[ut],ht[St]=mt;let yt="";yt=lt.length<5?$(ht):nt(ht);const Tt=`
        ${tt(lt.length,ft)}
        ${et(ht)}
        ${yt}
        float process(int indices[${ft}]) {
          int textureIndex = getTextureWhereDataResides (indices[${ut}]);

          if(textureIndex != 0) {
            indices[${ut}] = indices[${ut}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},at),{output:{dims:dt,type:lt[0].type,textureType:d.TextureType.unpacked},shaderSource:Tt})})(0,rt,j,_e.axis)})},$=c=>`int getTextureWhereDataResides(int index) {
      ${c.map((j,_e)=>`if(index<${j}) {return ${_e};}
`).join("")}
    }`,nt=c=>$(c),tt=(c,j)=>{const _e=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${j}]) {`];for(let rt=0;rt<c;++rt)rt===0?_e.push(`	if (textureIndex == ${rt}) { return _X${rt}(indices); }`):rt===c-1?_e.push(`	else { return _X${rt}(indices); }`):_e.push(`	else if (textureIndex == ${rt}) { return _X${rt}(indices); }`);return _e.push("	}"),_e.join(`
`)},et=c=>{const j=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let _e=0;_e<c.length;++_e)_e===0?j.push(`	if (index == ${_e}) { return ${c[_e]}; }`):_e===c.length-1?j.push(`	else { return ${c[_e]}; }`):j.push(`	else if (index == ${_e}) { return ${c[_e]}; }`);return j.push("	}"),j.join(`
`)};s.parseConcatAttributes=c=>(0,a.createAttributeWithCacheKey)({axis:c.attributes.getInt("axis")});const g=c=>{if(!c||c.length<1)throw new Error("too few inputs");const j=c[0].type,_e=c[0].dims.length;if(j==="string")throw new Error("string tensor is not supported yet");for(const rt of c){if(rt.type!==j)throw new Error("input tensors should be one type");if(rt.dims.length!==_e)throw new Error("input tensors should have the same shape")}}},4770:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createUnpackedGroupedConvProgramInfoLoader=void 0;const a=i(6231),d=i(5060),_=i(2039),b=i(8138),$=i(2823);s.createUnpackedGroupedConvProgramInfoLoader=(nt,tt,et)=>{const g=(c=tt.length>2,j=et.cacheKey,{name:"GroupedConv",inputNames:c?["X","W","Bias"]:["X","W"],inputTypes:c?[_.TextureType.unpacked,_.TextureType.unpacked,_.TextureType.unpacked]:[_.TextureType.unpacked,_.TextureType.unpacked],cacheHint:j});var c,j;return Object.assign(Object.assign({},g),{get:()=>((_e,rt,st,ot)=>{const it=rt.length>2?"value += getBias(output_channel);":"",at=rt[0].dims.slice(),lt=rt[1].dims.slice(),ut=lt[0]/ot.group;a.Logger.verbose("GroupedConv",`autpPad:${ot.autoPad}, dilations:${ot.dilations}, group:${ot.group}, kernelShape:${ot.kernelShape}, pads:${ot.pads}, strides:${ot.strides}`);const ct=(0,b.calculateOutputShape)(at,lt,ot.dilations,ot.pads,ot.strides),dt=(0,d.getGlsl)(_e.session.backend.glContext.version),{activationFunction:ft,applyActivation:ht}=(0,$.getActivationSnippet)(ot),mt=`
  const ivec2 strides = ivec2(${ot.strides[0]}, ${ot.strides[1]});
  const ivec2 pads = ivec2(${ot.pads[0]}, ${ot.pads[1]});
  ${ft}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${ut};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${lt[1]}; wInChannel++) {
      int input_channel = group_id * ${lt[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${lt[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${ot.dilations[0]};

        if (xHeight < 0 || xHeight >= ${at[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${lt[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${ot.dilations[1]};
          if (xWidth < 0 || xWidth >= ${at[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${it}
    ${ht}
    ${dt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},st),{output:{dims:ct,type:rt[0].type,textureType:_.TextureType.unpacked},shaderSource:mt,hasMain:!0})})(nt,tt,g,et)})}},1386:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.conv2DPacked=s.conv2DPackedPointwise=void 0;const a=i(8138),d=i(8555),_=i(708);s.conv2DPackedPointwise=(b,$,nt)=>{const tt=$[0].dims,et=$[1].dims,g=(0,a.calculateOutputShape)(tt,et,nt.dilations,nt.pads,nt.strides),c=b.reshapePacked($[0],[tt[1],tt[2]*tt[3]]),j=b.reshapePacked($[1],[et[0],et[1]]),_e=$.length>2?[j,c,$[2]]:[j,c],rt=b.run((0,_.createPackedMatmulProgramInfoLoader)(b,_e,nt),_e);return b.reshapePacked(rt,g)},s.conv2DPacked=(b,$,nt)=>{const tt=$[0].dims,et=$[1].dims,g=(0,a.calculateOutputShape)(tt,et,nt.dilations,nt.pads,nt.strides),c=b.run((0,d.createPackedIm2ColProgramInfoLoader)(b,$[0],$[1],g,nt),[$[0]]),j=b.reshapePacked($[1],[et[0],et[1]*et[2]*et[3]]),_e=$.length===3?[j,c,$[2]]:[j,c],rt=b.run((0,_.createPackedMatmulProgramInfoLoader)(b,_e,nt),_e);return b.reshapePacked(rt,g)}},9663:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseConvTransposeAttributes=s.convTranspose=void 0;const a=i(246),d=i(5060),_=i(2039),b=i(2823),$=(j,_e,rt,st,ot,it)=>(j-1)*_e+rt+(st-1)*ot+1-it,nt=(j,_e,rt,st,ot)=>{const it=Math.floor(j/2);_e==="SAME_UPPER"?(rt[st]=it,rt[ot]=j-it):_e==="SAME_LOWER"&&(rt[st]=j-it,rt[ot]=it)};s.convTranspose=(j,_e,rt)=>(c(_e,rt),tt(j,_e,rt));const tt=(j,_e,rt)=>{const st=g(rt,_e);return[et(j,_e,st)]},et=(j,_e,rt)=>j.run(((st,ot,it)=>{const at=(lt=ot.length>2,ut=it.cacheKey,{name:"ConvTranspose",inputNames:lt?["X","W","B"]:["X","W"],inputTypes:lt?[_.TextureType.unpacked,_.TextureType.unpacked,_.TextureType.unpacked]:[_.TextureType.unpacked,_.TextureType.unpacked],cacheHint:ut});var lt,ut;return Object.assign(Object.assign({},at),{get:()=>((ct,dt,ft,ht)=>{const mt=dt.length>2?"getB(output_channel)":"0.0",yt=dt[0].dims,Tt=dt[1].dims,St=Tt[1],xt=Tt[0]/ht.group,wt=[dt[0].dims[0],dt[1].dims[1]*ht.group,...ht.outputShape],gt=(0,d.getGlsl)(ct.session.backend.glContext.version),{activationFunction:vt,applyActivation:Ot}=(0,b.getActivationSnippet)(ht),At=`
  const ivec2 strides = ivec2(${ht.strides[0]}, ${ht.strides[1]});
  const ivec2 pads = ivec2(${ht.pads[0]}, ${ht.pads[1]});
  ${vt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${St};
    int wOutChannel = output_channel - group_id * ${St};

    float value = ${mt};
    for (int inChannelOffset = 0; inChannelOffset < ${xt}; inChannelOffset++) {
      int input_channel = group_id * ${xt} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Tt[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Tt[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${ht.dilations[0]}, wHOff * ${ht.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${yt[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${yt[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Ot}
    ${gt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},ft),{output:{dims:wt,type:dt[0].type,textureType:_.TextureType.unpacked},shaderSource:At,hasMain:!0})})(st,ot,at,it)})})(j,_e,rt),_e),g=(j,_e)=>{const rt=j.kernelShape.slice();if(j.kernelShape.length===0)for(let at=2;at<_e[1].dims.length;++at)rt.push(_e[1].dims[at]);const st=j.pads.slice(),ot=j.outputShape.slice();((at,lt,ut,ct,dt,ft,ht,mt)=>{const yt=at.length-2,Tt=mt.length===0;for(let St=0;St<yt;++St){const xt=Tt?at[St+2]*ft[St]:mt[St],wt=$(at[St+2],ft[St],dt[St],lt[St],ut[St],xt);nt(wt,ct,dt,St,St+yt),Tt&&mt.push(ft[St]*(at[St+2]-1)+ht[St]+(lt[St]-1)*ut[St]+1-dt[St]-dt[St+yt])}})(_e[0].dims,rt,j.dilations,j.autoPad,st,j.strides,j.outputPadding,ot);const it=Object.assign({},j);return Object.assign(it,{kernelShape:rt,pads:st,outputShape:ot,cacheKey:j.cacheKey}),it};s.parseConvTransposeAttributes=j=>{const _e=j.attributes,rt=(0,b.parseInternalActivationAttributes)(_e),st=_e.getString("auto_pad","NOTSET"),ot=_e.getInts("dilations",[1,1]),it=_e.getInt("group",1),at=_e.getInts("kernel_shape",[]),lt=_e.getInts("output_padding",[0,0]),ut=_e.getInts("output_shape",[]),ct=_e.getInts("pads",[0,0,0,0]),dt=_e.getInts("strides",[1,1]);return(0,a.createAttributeWithCacheKey)(Object.assign({autoPad:st,dilations:ot,group:it,kernelShape:at,outputPadding:lt,outputShape:ut,pads:ct,strides:dt},rt))};const c=(j,_e)=>{if(!j||j.length!==2&&j.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(j[0].dims.length!==4||j[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(j[0].dims[1]!==j[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const rt=j[1].dims[1]*_e.group;if(j.length===3&&(j[2].dims.length!==1||j[2].dims[0]!==rt))throw new Error("invalid bias");const st=j[0].dims.length-2;if(_e.dilations.length!==st)throw new Error(`dilations should be ${st}D`);if(_e.strides.length!==st)throw new Error(`strides should be ${st}D`);if(_e.pads.length!==2*st)throw new Error(`pads should be ${2*st}D`);if(_e.outputPadding.length!==st)throw new Error(`output_padding should be ${st}D`);if(_e.kernelShape.length!==0&&_e.kernelShape.length!==j[1].dims.length-2)throw new Error("invalid kernel shape");if(_e.outputShape.length!==0&&_e.outputShape.length!==j[0].dims.length-2)throw new Error("invalid output shape");if(j[0].type!=="float32"||j[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(j.length===3&&j[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseConvAttributes=s.conv=s.calculateOutputShape=void 0;const a=i(246),d=i(2517),_=i(4770),b=i(1386),$=i(9828),nt=i(2823),tt=i(3248),et=i(5623);s.calculateOutputShape=(st,ot,it,at,lt)=>{const ut=st[0],ct=st.slice(2),dt=ct.length,ft=ot[0],ht=ot.slice(2).map((yt,Tt)=>yt+(yt-1)*(it[Tt]-1)),mt=ct.map((yt,Tt)=>yt+at[Tt]+at[Tt+dt]).map((yt,Tt)=>Math.floor((yt-ht[Tt]+lt[Tt])/lt[Tt]));return[ut,ft].concat(...mt)},s.conv=(st,ot,it)=>(rt(ot,it),g(st,ot,it));const g=(st,ot,it)=>{const at=_e(it,ot),lt=st.session.pack,ut=at.kernelShape[0]===1&&at.kernelShape[1]===1;return at.group>1?[st.run((0,_.createUnpackedGroupedConvProgramInfoLoader)(st,ot,at),ot)]:ut&&lt?[c(st,ot,at)]:lt&&ot[0].dims.length===4&&ot[0].dims[0]===1&&!ut?[(0,b.conv2DPacked)(st,ot,at)]:[j(st,ot,at)]},c=(st,ot,it)=>{const at=ot[0].dims,lt=ot[1].dims,ut=(0,s.calculateOutputShape)(at,lt,it.dilations,it.pads,it.strides),ct=st.reshapeUnpacked(ot[0],[at[1],at[2]*at[3]]),dt=st.reshapeUnpacked(ot[1],[lt[0],lt[1]]),ft=ot.length>2?[dt,ct,ot[2]]:[dt,ct],ht=st.run((0,et.createMatmulProgramInfoLoader)(ft,it),ft);return st.reshapeUnpacked(ht,ut)},j=(st,ot,it)=>{const at=ot[0].dims,lt=ot[1].dims,ut=(0,s.calculateOutputShape)(at,lt,it.dilations,it.pads,it.strides),ct=st.run((0,tt.createIm2ColProgramInfoLoader)(st,ot[0],ot[1],ut,it),[ot[0]]),dt=ot.length===3?[ct,ot[1],ot[2]]:[ct,ot[1]];return st.run((0,$.createDotProductProgramInfoLoader)(st,ot,ut,it),dt)},_e=(st,ot)=>{const it=st.kernelShape.slice();if(st.kernelShape.length===0)for(let ut=2;ut<ot[1].dims.length;++ut)it.push(ot[1].dims[ut]);const at=st.pads.slice();d.PoolConvUtil.adjustPadsBasedOnAutoPad(ot[0].dims,st.strides,st.dilations,it,at,st.autoPad);const lt=Object.assign({},st);return Object.assign(lt,{kernelShape:it,pads:at,cacheKey:st.cacheKey}),lt};s.parseConvAttributes=st=>{const ot=st.attributes,it=(0,nt.parseInternalActivationAttributes)(ot),at=ot.getString("auto_pad","NOTSET"),lt=ot.getInts("dilations",[1,1]),ut=ot.getInt("group",1),ct=ot.getInts("kernel_shape",[]),dt=ot.getInts("pads",[0,0,0,0]),ft=ot.getInts("strides",[1,1]);return(0,a.createAttributeWithCacheKey)(Object.assign({autoPad:at,dilations:lt,group:ut,kernelShape:ct,pads:dt,strides:ft},it))};const rt=(st,ot)=>{if(!st||st.length!==2&&st.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(st[0].dims.length!==4||st[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(st[0].dims[1]!==st[1].dims[1]*ot.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(st.length===3&&(st[2].dims.length!==1||st[1].dims[0]!==st[2].dims[0]))throw new Error("invalid bias");const it=st[0].dims.length-2;if(ot.dilations.length!==it)throw new Error(`dilations should be ${it}D`);if(ot.strides.length!==it)throw new Error(`strides should be ${it}D`);if(ot.pads.length!==2*it)throw new Error(`pads should be ${2*it}D`);if(ot.kernelShape.length!==0&&ot.kernelShape.length!==st[1].dims.length-2)throw new Error("invalid kernel shape");if(st[0].type!=="float32"||st[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(st.length===3&&st[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseDepthToSpaceAttributes=s.depthToSpace=void 0;const a=i(3738);s.depthToSpace=(_,b,$)=>{d(b);const nt=$.blocksize,tt=nt*nt,et=$.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],g=$.mode==="DCR"?[b[0].dims[0],nt,nt,b[0].dims[1]/tt,b[0].dims[2],b[0].dims[3]]:[b[0].dims[0],b[0].dims[1]/tt,nt,nt,b[0].dims[2],b[0].dims[3]],c=_.reshapeUnpacked(b[0],g),j={perm:et,cacheKey:`${et}`},[_e]=(0,a.transpose)(_,[c],j),rt=[b[0].dims[0],b[0].dims[1]/tt,b[0].dims[2]*nt,b[0].dims[3]*nt];return[_.reshapeUnpacked(_e,rt)]},s.parseDepthToSpaceAttributes=_=>{const b=_.attributes.getInt("blocksize");if(b<1)throw new Error(`blocksize must be >= 1, but got : ${b} for DepthToSpace`);const $=_.attributes.getString("mode","DCR");if($!=="DCR"&&$!=="CRD")throw new Error(`unrecognized mode: ${$} for DepthToSpace`);return{mode:$,blocksize:b}};const d=_=>{if(_.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${_.length}`);if(_[0].type==="string"||_[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDotProductProgramInfoLoader=void 0;const a=i(2517),d=i(5060),_=i(2039),b=i(2823),$=i(3248);s.createDotProductProgramInfoLoader=(nt,tt,et,g)=>{const c=((j,_e)=>({name:"ConvDotProduct",inputNames:j?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:j?[_.TextureType.unpacked,_.TextureType.packedLastDimension,_.TextureType.unpacked]:[_.TextureType.unpacked,_.TextureType.packedLastDimension],cacheKey:_e.activationCacheKey}))(tt.length>2,g);return Object.assign(Object.assign({},c),{get:()=>((j,_e,rt,st,ot)=>{const it=rt[0].dims,at=rt[1].dims,lt=[at[0],Math.ceil(it[1]*at[2]*at[3]/4)],ut=(0,$.calculateIm2ColDims)(it,at,st),[ct,dt]=j.calculateTextureWidthAndHeight(lt,_.TextureType.packedLastDimension),ft=a.ShapeUtil.computeStrides(ut),[ht,mt]=j.calculateTextureWidthAndHeight(ut,_.TextureType.packedLastDimension),yt=st.length,Tt=rt.length<3?"0.0":"_B(b)",St=Math.ceil(it[1]*at[2]*at[3]/4),{activationFunction:xt,applyActivation:wt}=(0,b.getActivationSnippet)(ot),gt=(0,d.getGlsl)(j.session.backend.glContext.version),vt=`
${xt}
float process(int indices[${yt}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${ft[0]} + im2col[1] * ${ft[1]} + im2col[2] * ${ft[2]};
  int kernelOffset = indices[1] * ${lt[1]};
  float value = ${Tt};
  for (int i = 0; i < ${St}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${ht}, ${mt});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${ct}, ${dt});
    value += dot(${gt.texture2D}(Im2Col, im2colCoords), ${gt.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${wt}
  return value;
}`;return Object.assign(Object.assign({},_e),{output:{dims:st,type:rt[0].type,textureType:_.TextureType.unpacked},shaderSource:vt})})(nt,c,tt,et,g)})}},7992:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseFlattenAttributes=s.flatten=void 0;const a=i(2517);s.flatten=(_,b,$)=>{d(b,$);const nt=a.ShapeUtil.flattenShape(b[0].dims,$);return[_.reshapeUnpacked(b[0],nt)]},s.parseFlattenAttributes=_=>_.attributes.getInt("axis",1);const d=(_,b)=>{if(!_||_.length!==1)throw new Error("Flatten requires 1 input.");const $=_[0].dims.length;if($===0)throw new Error("scalar tensor is not supported.");if(b<-$||b>$)throw new Error("Invalid axis");if(_[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseInternalActivationAttributes=s.getActivationSnippet=void 0;const a=i(2517),d=i(4909);s.getActivationSnippet=function(_){let b;switch(_.activation){case"Relu":b=(0,d.glslRelu)();break;case"Sigmoid":b=(0,d.glslSigmoid)();break;case"Clip":b=(0,d.glslClip)(_.clipMin,_.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const $=b.name;return{activationFunction:b.body,applyActivation:`value = ${$}_(value);`}},s.parseInternalActivationAttributes=_=>{const b=_.getString("activation","");if(b==="Clip"){const[$,nt]=_.getFloats("activation_params",[a.MIN_CLIP,a.MAX_CLIP]);return{activation:b,clipMax:nt,clipMin:$,activationCacheKey:`${b}:${$},${nt}`}}return{activation:b,activationCacheKey:b}}},1253:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseGatherAttributes=s.gather=void 0;const a=i(246),d=i(782),_=i(2517),b=i(2039);s.gather=(et,g,c)=>(tt(g,c.axis),[et.run(nt(et,g,c),g)]),s.parseGatherAttributes=et=>(0,a.createAttributeWithCacheKey)({axis:et.attributes.getInt("axis",0)});const $={name:"Gather",inputNames:["A","B"],inputTypes:[b.TextureType.unpacked,b.TextureType.unpacked]},nt=(et,g,c)=>{const j=Object.assign(Object.assign({},$),{cacheHint:c.cacheKey});return Object.assign(Object.assign({},j),{get:()=>((_e,rt,st,ot)=>{const it=st[0].dims.slice(),at=st[1].dims.slice(),lt=new Array(it.length+at.length-1);ot=_.ShapeUtil.normalizeAxis(ot,it.length);const ut=[];for(let dt=0;dt<lt.length;dt++)dt<ot?(lt[dt]=it[dt],ut.push(`inputIdx[${dt}] = outputIdx[${dt}];`)):dt<ot+at.length?(lt[dt]=at[dt-ot],ut.push(`indexDataIdx[${dt-ot}] = outputIdx[${dt}];`)):(lt[dt]=it[dt-at.length+1],ut.push(`inputIdx[${dt-at.length+1}] = outputIdx[${dt}];`));const ct=`
      float process(int outputIdx[${lt.length||1}]) {
        int inputIdx[${it.length}];
        int indexDataIdx[${at.length||1}];
        indexDataIdx[0] = 0;
        ${ut.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${ot}] = idx < 0 ? idx + ${it[ot]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},rt),{output:{dims:lt,type:st[0].type,textureType:b.TextureType.unpacked},shaderSource:ct})})(0,j,g,c.axis)})},tt=(et,g)=>{if(!et||et.length!==2)throw new Error("Gather requires 2 inputs.");const c=et[0].dims.length;if(c<1)throw new Error("Invalid input shape.");if(g<-c||g>c-1)throw new Error("Invalid axis.");if(d.NUMBER_TYPES.indexOf(et[0].type)===-1)throw new Error("Invaid input type.");if(et[1].type!=="int32"&&et[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseGemmAttributesV11=s.parseGemmAttributesV7=s.gemm=void 0;const a=i(246),d=i(2517),_=i(2039);s.gemm=(et,g,c)=>(tt(g,c),[et.run($(g,c),g)]);const b=(et,g)=>{const c=et.attributes.getInt("transA",0)!==0,j=et.attributes.getInt("transB",0)!==0,_e=et.attributes.getFloat("alpha",1),rt=et.attributes.getFloat("beta",1);return(0,a.createAttributeWithCacheKey)({transA:c,transB:j,alpha:_e,beta:rt,isOptionalC:g})};s.parseGemmAttributesV7=et=>b(et,!1),s.parseGemmAttributesV11=et=>b(et,!0);const $=(et,g)=>{const c={name:"Gemm",inputNames:et.length===3?["A","B","C"]:["A","B"],inputTypes:et.length===3?[_.TextureType.unpacked,_.TextureType.unpacked,_.TextureType.unpacked]:[_.TextureType.unpacked,_.TextureType.unpacked],key:g.cacheKey};return Object.assign(Object.assign({},c),{get:()=>nt(c,et,g)})},nt=(et,g,c)=>{const j=g[0].dims.slice(),_e=g[1].dims.slice(),[rt,st]=d.GemmUtil.getShapeOfGemmResult(j,c.transA,_e,c.transB,g.length===3?g[2].dims:void 0),ot=[rt,st];if(!ot)throw new Error("Can't use gemm on the given tensors");let it=j[j.length-1],at="";c.transA&&(it=j[0]),c.transA&&c.transB?at="value += _A_T(a) * _B_T(b);":c.transA&&!c.transB?at="value += _A_T(a) * _B(b);":!c.transA&&c.transB?at="value += _A(a) * _B_T(b);":c.transA||c.transB||(at="value += _A(a) * _B(b);");const lt=ot.length,ut=`
      float process(int indices[${lt}]) {
          int a[${lt}];
          int b[${lt}];
          ${g.length===3?`int c[${g[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${g.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${it}; ++k) {
              a[${lt-1}] = k;
              b[${lt-2}] = k;
              ${at}
          }

          value = value * alpha;
          ${g.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},et),{output:{dims:ot,type:g[0].type,textureType:_.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:c.alpha},{name:"beta",type:"float",data:c.beta}],shaderSource:ut})},tt=(et,g)=>{if(!et)throw new Error("Input is missing");if(g.isOptionalC&&(et.length<2||et.length>3))throw new Error("Invaid input shape.");if(!g.isOptionalC&&et.length!==3)throw new Error("Gemm requires 3 inputs");if(et.length===3&&et[2].dims.length!==1&&et[2].dims.length!==2)throw new Error("Invalid input shape of C");if(et[0].type!=="float32"&&et[0].type!=="float64"||et[1].type!=="float32"&&et[1].type!=="float64"||et.length===3&&et[2].type!=="float32"&&et[2].type!=="float64")throw new Error("Invalid input type.");if(et[0].type!==et[1].type||et.length===3&&et[0].type!==et[2].type)throw new Error("Input types are mismatched")}},8555:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createPackedIm2ColProgramInfoLoader=void 0;const a=i(5060),d=i(2039),_=i(2827);s.createPackedIm2ColProgramInfoLoader=(b,$,nt,tt,et)=>{const g=(c=et.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[d.TextureType.packed],cacheHint:c});var c;return Object.assign(Object.assign({},g),{get:()=>((j,_e,rt,st,ot,it)=>{const at=rt.dims,lt=st.dims,ut=ot.length,ct=[lt[1]*lt[2]*lt[3],ot[2]*ot[3]],dt=lt[2]*lt[3],ft=(0,_.unpackFromChannel)(),ht=(0,a.getGlsl)(j.session.backend.glContext.version);let mt="";for(let Tt=0;Tt<=1;Tt++)for(let St=0;St<=1;St++)mt+=`
            blockIndex = rc.x + ${St};
            pos = rc.y + ${Tt};

            if(blockIndex < ${ct[1]} && pos < ${ct[0]}) {
              offsetY = int(blockIndex / (${ot[ut-1]})) * ${it.strides[0]} -
                ${it.pads[0]};
              d0 = offsetY + ${it.dilations[0]} * (imod(pos, ${dt}) / ${lt[2]});

              if(d0 < ${at[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${ot[ut-1]}) * ${it.strides[1]} -
                  ${it.pads[1]};
                d1 = offsetX + ${it.dilations[1]} * imod(imod(pos, ${dt}), ${lt[2]});

                if(d1 < ${at[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${dt}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Tt+St}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const yt=`
      ${ft}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${mt}
          ${ht.output} = result;
      }
            `;return Object.assign(Object.assign({},_e),{output:{dims:ct,type:rt.type,textureType:d.TextureType.packed},shaderSource:yt,hasMain:!0})})(b,g,$,nt,tt,et)})}},3248:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.calculateIm2ColDims=s.createIm2ColProgramInfoLoader=void 0;const a=i(2039);s.createIm2ColProgramInfoLoader=(d,_,b,$,nt)=>{const tt=(et=nt.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[a.TextureType.unpacked],cacheHint:et});var et;return Object.assign(Object.assign({},tt),{get:()=>((g,c,j,_e,rt,st)=>{const ot=j.dims,it=_e.dims,at=rt.length,lt=(0,s.calculateIm2ColDims)(ot,it,rt,4),ut=`
        const int XC = ${ot[1]};
        const int XH = ${ot[2]};
        const int XW = ${ot[3]};
        const int KH = ${st.kernelShape[0]};
        const int KW = ${st.kernelShape[1]};
        const int dilationH = ${st.dilations[0]};
        const int dilationW = ${st.dilations[1]};
        const int strideH = ${st.strides[0]};
        const int strideW = ${st.strides[1]};
        const int padH = ${st.pads[0]};
        const int padW = ${st.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${at}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${ot.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},c),{output:{dims:lt,type:j.type,textureType:a.TextureType.packedLastDimension},shaderSource:ut})})(0,tt,_,b,$,nt)})},s.calculateIm2ColDims=(d,_,b,$=4)=>[b[0],b[2],b[3],Math.ceil(d[1]*_[2]*_[3]/$)]},6572:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseImageScalerAttributes=s.imageScaler=void 0;const a=i(246),d=i(2039);s.imageScaler=(tt,et,g)=>(nt(et),[tt.run(b(tt,et,g),et)]),s.parseImageScalerAttributes=tt=>{const et=tt.attributes.getFloat("scale"),g=tt.attributes.getFloats("bias");return(0,a.createAttributeWithCacheKey)({scale:et,bias:g})};const _={name:"ImageScaler",inputNames:["X"],inputTypes:[d.TextureType.unpacked]},b=(tt,et,g)=>{const c=Object.assign(Object.assign({},_),{cacheHint:g.cacheKey});return Object.assign(Object.assign({},c),{get:()=>((j,_e,rt,st)=>{const ot=rt[0].dims.slice(),it=ot.length,at=`
      ${$(st.bias.length)}
      float process(int indices[${it}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},_e),{output:{dims:ot,type:rt[0].type,textureType:d.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:st.bias.length,data:st.bias},{name:"scale",type:"float",data:st.scale}],shaderSource:at})})(0,c,et,g)})},$=tt=>{const et=[`float getBias(float bias[${tt}], int channel) {`];for(let g=0;g<tt;++g)g===0?et.push(`	if (channel == ${g}) { return bias[${g}]; }`):g===tt-1?et.push(`	else { return bias[${g}]; }`):et.push(`	else if (channel == ${g}) { return bias[${g}]; }`);return et.push("	}"),et.join(`
`)},nt=tt=>{if(!tt||tt.length!==1)throw new Error("ImageScaler requires 1 input.");if(tt[0].dims.length!==4)throw new Error("Invalid input shape.");if(tt[0].type!=="float32"&&tt[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseInstanceNormalizationAttributes=s.instanceNormalization=void 0;const a=i(5060),d=i(2039);s.instanceNormalization=(et,g,c)=>{tt(g);const j=et.run(b(g[0]),g);return[et.run(nt(et,g[0],c,j.dims),[g[0],j,g[1],g[2]])]},s.parseInstanceNormalizationAttributes=et=>et.attributes.getFloat("epsilon",1e-5);const _={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[d.TextureType.unpacked]},b=et=>Object.assign(Object.assign({},_),{get:()=>((g,c)=>{const j=c.dims.slice(),_e=j[1],rt=j[2]*j[3],st=[j[0],_e],ot=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${j[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${j[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${rt});
        temp = 0.0;
        for(int a2=0; a2<${j[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${j[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${rt});

        return v;
      }`;return Object.assign(Object.assign({},g),{output:{dims:st,type:c.type,textureType:d.TextureType.packedLastDimension},shaderSource:ot})})(_,et)}),$={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[d.TextureType.unpacked,d.TextureType.packedLastDimension,d.TextureType.unpacked,d.TextureType.unpacked]},nt=(et,g,c,j)=>{const _e=Object.assign(Object.assign({},$),{cacheHint:`${c}`});return Object.assign(Object.assign({},_e),{get:()=>((rt,st,ot,it,at)=>{const lt=(0,a.getGlsl)(rt.session.backend.glContext.version),[ut,ct]=rt.calculateTextureWidthAndHeight(at,d.TextureType.packedLastDimension),[dt,ft]=[ut/4,ct],ht=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${dt}, ${ft});
        return ${lt.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},st),{output:{dims:ot.dims,type:ot.type,textureType:d.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:it}],shaderSource:ht})})(et,_e,g,c,j)})},tt=et=>{if(!et||et.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const g=et[0],c=et[1],j=et[2];if(g.dims.length<3||c.dims.length!==1||j.dims.length!==1)throw new Error("Invalid input shape.");if(c.dims[0]!==g.dims[1]||j.dims[0]!==g.dims[1])throw new Error("Input shapes are mismatched.");if(g.type!=="float32"&&g.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||j.type!=="float32"&&j.type!=="float64")throw new Error("Invalid input type.");if(et[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createPackedMatmulProgramInfoLoader=void 0;const a=i(2517),d=i(5060),_=i(2039),b=i(9390),$=i(2823),nt=i(5623);s.createPackedMatmulProgramInfoLoader=(tt,et,g)=>{const c=(j=et.length>2,_e=g.activationCacheKey,{name:"MatMul (packed)",inputNames:j?["A","B","Bias"]:["A","B"],inputTypes:j?[_.TextureType.packed,_.TextureType.packed,_.TextureType.packed]:[_.TextureType.packed,_.TextureType.packed],cacheHint:_e});var j,_e;return Object.assign(Object.assign({},c),{get:()=>((rt,st,ot,it)=>{const at=ot.length>2,lt=at?"value += getBiasForMatmul();":"",ut=ot[0].dims,ct=ot[1].dims,dt=a.BroadcastUtil.calcShape(ut,ct,!0),ft=!a.ShapeUtil.areEqual(ot[0].dims,ot[1].dims);if(!dt)throw new Error("Can't use matmul on the given tensors");const ht=ut[ut.length-1],mt=Math.ceil(ht/2),yt=ut.length,Tt=ct.length,St=(0,d.getGlsl)(rt.session.backend.glContext.version),xt=(0,b.getCoordsDataType)(dt.length),wt=dt.length,gt=(0,b.getGlChannels)(),{activationFunction:vt,applyActivation:Ot}=(0,$.getActivationSnippet)(it),At=at?`${(0,nt.getBiasForMatmul)(xt,gt,ot[2].dims,dt,!0)}`:"",Ft=ft?`${function(Jt,Kt,rn,zt){let nn=[],wn=[];const Qt=rn[0].dims,Zt=rn[1].dims,en=Qt.length,dn=Zt.length,hn=zt.length,Mn=hn-en,Nn=hn-dn;nn=Qt.map((kn,Vn)=>`coords.${Kt[Vn+Mn]}`),nn[en-1]="i*2",nn.join(", "),wn=Zt.map((kn,Vn)=>`coords.${Kt[Vn+Nn]}`),wn[dn-2]="i*2",wn.join(", ");const jn=a.BroadcastUtil.getBroadcastDims(Qt,zt),Yn=a.BroadcastUtil.getBroadcastDims(Zt,zt),zn=jn.map(kn=>`coords.${Kt[kn+Mn]} = 0;`).join(`
`),Xn=Yn.map(kn=>`coords.${Kt[kn+Nn]} = 0;`).join(`
`),qn=`int lastDim = coords.${Kt[hn-1]};
  coords.${Kt[hn-1]} = coords.${Kt[hn-2]};
  coords.${Kt[hn-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Jt} coords = getOutputCoords();
  ${qn}
  ${zn}
  vec4 outputValue = getA(${nn});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Jt} coords = getOutputCoords();
  ${qn}
  ${Xn}
  vec4 outputValue = getB(${wn});
  return outputValue;
}`}(xt,gt,ot,dt)}`:"",Bt=ft?"getAAtOutCoordsMatmul(i)":`getA(${function(Jt,Kt){let rn="";for(let zt=0;zt<Kt-2;zt++)rn+=`rc.${Jt[zt]}, `;return rn+=`rc.${Jt[Kt-2]}, i*2`,rn}(gt,yt)})`,Wt=ft?"getBAtOutCoordsMatmul(i)":`getB(${function(Jt,Kt){let rn="";for(let zt=0;zt<Kt-2;zt++)rn+=`rc.${Jt[zt]}, `;return rn+=`i*2, rc.${Jt[Kt-1]}`,rn}(gt,Tt)})`,sn=`
            ${Ft}
            ${At}
            ${vt}
            void main() {
              ${ft?"":`${xt} rc =
          getOutputCoords(); int lastDim = rc.${gt[wt-1]}; rc.${gt[wt-1]} =
          rc.${gt[wt-2]}; rc.${gt[wt-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${mt}; i++) {
                vec4 a = ${Bt};
                vec4 b = ${Wt};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${lt}
              ${Ot}
              ${St.output} = value;
            }`;return Object.assign(Object.assign({},st),{output:{dims:dt,type:ot[0].type,textureType:_.TextureType.packed},shaderSource:sn,hasMain:!0})})(tt,c,et,g)})}},5623:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getBiasForMatmul=s.createMatmulProgramInfoLoader=s.parseMatMulAttributes=s.matMul=void 0;const a=i(2517),d=i(2039),_=i(9390),b=i(2823),$=i(708);function nt(g,c){const j=(_e=g.length>2,rt=c.activationCacheKey,{name:"MatMul",inputNames:_e?["A","B","Bias"]:["A","B"],inputTypes:_e?[d.TextureType.unpacked,d.TextureType.unpacked,d.TextureType.unpacked]:[d.TextureType.unpacked,d.TextureType.unpacked],cacheHint:rt});var _e,rt;return Object.assign(Object.assign({},j),{get:()=>function(st,ot,it){const at=ot[0].dims,lt=ot[1].dims,ut=a.BroadcastUtil.calcShape(at,lt,!0);if(!ut)throw new Error("Can't use matmul on the given tensors");const ct=(0,_.getCoordsDataType)(ut.length),dt=(0,_.getGlChannels)(),{activationFunction:ft,applyActivation:ht}=(0,b.getActivationSnippet)(it),mt=ot.length>2,yt=mt?"value += getBiasForMatmul();":"",Tt=mt?`${et(ct,dt,ot[2].dims,ut,!1)}`:"",St=ut.length,xt=at.length,wt=lt.length,gt=`
    ${ft}
    ${Tt}
    float process(int indices[${St}]) {
        int a[${xt}];
        int b[${wt}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${at[at.length-1]}; ++k) {
            a[${xt-1}] = k;
            b[${wt-2}] = k;
            value += _A(a) * _B(b);
        }
        ${yt}
        ${ht}
        return value;
    }`;return Object.assign(Object.assign({},st),{output:{dims:ut,type:ot[0].type,textureType:d.TextureType.unpacked},shaderSource:gt})}(j,g,c)})}s.matMul=(g,c,j)=>(tt(c),g.session.pack?[g.run((0,$.createPackedMatmulProgramInfoLoader)(g,c,j),c)]:[g.run(nt(c,j),c)]),s.parseMatMulAttributes=g=>(0,b.parseInternalActivationAttributes)(g.attributes),s.createMatmulProgramInfoLoader=nt;const tt=g=>{if(!g||g.length!==2)throw new Error("MatMul requires 2 inputs.");if(g[0].dims[g[0].dims.length-1]!==g[1].dims[g[1].dims.length-2])throw new Error("shared dimension does not match.");if(g[0].type!=="float32"&&g[0].type!=="float64"||g[1].type!=="float32"&&g[1].type!=="float64")throw new Error("inputs should be float type");if(g[0].type!==g[1].type)throw new Error("inputs types should match")};function et(g,c,j,_e,rt){let st="";const ot=j.length,it=_e.length,at=it-ot;st=it<2&&ot>0?"coords":j.map((ct,dt)=>`coords.${c[dt+at]}`).join(", ");const lt=a.BroadcastUtil.getBroadcastDims(j,_e).map(ct=>`coords.${c[ct+at]} = 0;`).join(`
`);let ut="vec4(outputValue.xx, outputValue.yy)";return a.ShapeUtil.size(j)===1&&(ut="vec4(outputValue.x)"),rt?`
vec4 getBiasForMatmul() {
  ${g} coords = getOutputCoords();
  ${lt}
  vec4 outputValue = getBias(${st});
  return ${ut};
}`:`
float getBiasForMatmul() {
  ${g} coords = getOutputCoords();
  ${lt}
  return getBias(coords.x);
}`}s.getBiasForMatmul=et},2403:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createPackProgramInfoLoader=void 0;const a=i(5060),d=i(2039),_=i(9390),b=i(2827),$={name:"pack",inputNames:["A"],inputTypes:[d.TextureType.unpackedReversed]};s.createPackProgramInfoLoader=(nt,tt)=>Object.assign(Object.assign({},$),{get:()=>((et,g)=>{const c=(0,a.getGlsl)(et.session.backend.glContext.version),j=g.dims,_e=j.length,rt=g.dims.length,st=(0,_.getCoordsDataType)(rt),ot=(0,b.getChannels)("rc",rt),it=(at=rt,lt=ot,ut=j[j.length-2],ct=j[j.length-1],at===0||at===1?"":`
    int r = ${lt[at-2]};
    int c = ${lt[at-1]};
    int rp1 = ${lt[at-2]} + 1;
    int cp1 = ${lt[at-1]} + 1;
    bool rEdge = rp1 >= ${ct};
    bool cEdge = cp1 >= ${ut};
    `);var at,lt,ut,ct;let dt;dt=_e===0?[1,1]:_e===1?[j[0],1]:[j[rt-1],j[rt-2]];const ft=function(yt,Tt,St){if(yt===0)return"false";if(yt===1)return`rc > ${Tt[0]}`;let xt="";for(let wt=yt-2;wt<yt;wt++)xt+=`${St[wt]} >= ${Tt[wt-yt+2]}`,wt<yt-1&&(xt+="||");return xt}(rt,dt,ot),ht=function(yt,Tt){const St=yt.length;if(St===0)return"getA(), 0, 0, 0";if(St===1)return`getA(rc),
            rc + 1 >= ${yt[0]} ? 0. : getA(rc + 1),
            0, 0`;let xt="";if(St>2)for(let wt=0;wt<St-2;++wt)xt+=`${Tt[wt]},`;return`getA(${xt}r, c),
          rEdge ? 0. : getA(${xt}rp1, c),
          cEdge ? 0. : getA(${xt}r, cp1),
          rEdge || cEdge ? 0. : getA(${xt}rp1, cp1)`}(j,ot),mt=`
        void main() {
          ${st} rc = getOutputCoords();

          if(${ft}) {
            ${c.output} = vec4(0);
          } else {
            ${it}

            ${c.output} = vec4(${ht});
          }
        }
      `;return Object.assign(Object.assign({},$),{hasMain:!0,output:{dims:g.dims,type:g.type,textureType:d.TextureType.packed},shaderSource:mt})})(nt,tt)})},2827:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.unpackFromChannel=s.getChannels=s.getVecChannels=void 0;const a=i(9390);function d(_,b){return(0,a.getGlChannels)(b).map($=>`${_}.${$}`)}s.getVecChannels=d,s.getChannels=function(_,b){return b===1?[_]:d(_,b)},s.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parsePadAttributesV11=s.padV11=s.parsePadAttributesV2=s.padV2=void 0;const a=i(246),d=i(2517),_=i(5060),b=i(2039),$={name:"Pad",inputNames:["A"],inputTypes:[b.TextureType.unpacked]};s.padV2=(st,ot,it)=>(et(ot),[st.run(Object.assign(Object.assign({},$),{cacheHint:it.cacheKey,get:()=>tt(st,ot[0],it)}),ot)]),s.parsePadAttributesV2=st=>{const ot=st.attributes.getString("mode","constant"),it=st.attributes.getFloat("value",0),at=st.attributes.getInts("pads");return(0,a.createAttributeWithCacheKey)({mode:ot,value:it,pads:at})},s.padV11=(st,ot,it)=>{g(ot);const at=nt(st,ot,it);return(0,s.padV2)(st,[ot[0]],at)},s.parsePadAttributesV11=st=>st.attributes.getString("mode","constant");const nt=(st,ot,it)=>{if(!st.session.isInitializer(ot[1].dataId)||ot.length>=3&&!st.session.isInitializer(ot[2].dataId))throw new Error("dynamic pad attributes are not allowed");const at=Array.from(ot[1].integerData),lt=ot.length>=3?ot[2].floatData[0]:0;return(0,a.createAttributeWithCacheKey)({mode:it,pads:at,value:lt})},tt=(st,ot,it)=>{const at=d.ShapeUtil.padShape(ot.dims.slice(),it.pads),lt=at.length,ut=`
      ${c(st,ot,it)}
      float process(int[${lt}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[b.TextureType.unpacked],output:{dims:at,type:ot.type,textureType:b.TextureType.unpacked},shaderSource:ut}},et=st=>{if(!st||st.length!==1)throw new Error("Pad requires 1 input");if(st[0].type!=="float32"&&st[0].type!=="float64")throw new Error("Invalid input type.")},g=st=>{if(!st||st.length!==2&&st.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(st[1].type!=="int32")throw new Error("Invalid input type.");if(st.length>=3&&st[2].type==="string")throw new Error("Invalid input type.")},c=(st,ot,it)=>{const at=(0,_.getGlsl)(st.session.backend.glContext.version),[lt,ut]=st.calculateTextureWidthAndHeight(ot.dims,b.TextureType.unpacked),ct=d.ShapeUtil.computeStrides(ot.dims);switch(it.mode){case"constant":return j(at,ot.dims,ct,lt,ut,it.pads,it.value);case"reflect":return _e(at,ot.dims,ct,lt,ut,it.pads);case"edge":return rt(at,ot.dims,ct,lt,ut,it.pads);default:throw new Error("Invalid mode")}},j=(st,ot,it,at,lt,ut,ct)=>{const dt=ot.length;let ft="";for(let ht=dt-1;ht>=0;--ht)ft+=`
        k = m[${ht}] - ${ut[ht]};
        if (k < 0)  return constant;
        if (k >= ${ot[ht]}) return constant;
        offset += k * ${it[ht]};
        `;return`
      float padA(int m[${dt}]) {
        const float constant = float(${ct});
        int offset = 0;
        int k = 0;
        ${ft}
        vec2 coords = offsetToCoords(offset, ${at}, ${lt});
        float value = getColorAsFloat(${st.texture2D}(A, coords));
        return value;
      }
      `},_e=(st,ot,it,at,lt,ut)=>{const ct=ot.length;let dt="";for(let ft=ct-1;ft>=0;--ft)dt+=`
        k = m[${ft}] - ${ut[ft]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(ot[ft]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${ot[ft]}) { k = _2n_1 - k; }
        }
        offset += k * ${it[ft]};
        `;return`
      float padA(int m[${ct}]) {
        int offset = 0;
        int k = 0;
        ${dt}
        vec2 coords = offsetToCoords(offset, ${at}, ${lt});
        float value = getColorAsFloat(${st.texture2D}(A, coords));
        return value;
      }
      `},rt=(st,ot,it,at,lt,ut)=>{const ct=ot.length;let dt="";for(let ft=ct-1;ft>=0;--ft)dt+=`
        k = m[${ft}] - ${ut[ft]};
        if (k < 0)  k = 0;
        if (k >= ${ot[ft]}) k = ${ot[ft]-1};
        offset += k * ${it[ft]};
      `;return`
      float padA(int m[${ct}]) {
        int offset = 0;
        int k = 0;
        ${dt}
        vec2 coords = offsetToCoords(offset, ${at}, ${lt});
        float value = getColorAsFloat(${st.texture2D}(A, coords));
        return value;
      }
      `}},2143:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.globalMaxPool=s.parseMaxPoolAttributes=s.maxPool=s.parseGlobalAveragePoolAttributes=s.globalAveragePool=s.parseAveragePoolAttributes=s.averagePool=void 0;const a=i(246),d=i(2517),_=i(2039);s.averagePool=(rt,st,ot)=>{g(st);const it={name:"AveragePool",inputNames:["X"],inputTypes:[_.TextureType.unpacked],cacheHint:ot.cacheKey};return[rt.run(Object.assign(Object.assign({},it),{get:()=>b(st,it,!1,ot)}),st)]},s.parseAveragePoolAttributes=rt=>{const st=rt.attributes.getString("auto_pad","NOTSET"),ot=rt.attributes.getInt("ceil_mode",0),it=rt.attributes.getInt("count_include_pad",0)!==0,at=rt.attributes.getInts("kernel_shape"),lt=rt.attributes.getInts("strides",[]),ut=rt.attributes.getInts("pads",[]);if(ot!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,a.createAttributeWithCacheKey)({autoPad:st,ceilMode:ot,countIncludePad:it,kernelShape:at,strides:lt,pads:ut})};const b=(rt,st,ot,it)=>{const[at,lt]=nt(rt,it,ot),ut=d.ShapeUtil.size(at.kernelShape);let ct="";at.countIncludePad?ct+=`value /= float(${ut});`:ct+=`value /= float(${ut} - pad);`;const dt=`
        ${c(rt[0].dims,at,"value += _X(x);",ct,"0.0")}
      `;return Object.assign(Object.assign({},st),{output:{dims:lt,type:rt[0].type,textureType:_.TextureType.unpacked},shaderSource:dt})};s.globalAveragePool=(rt,st,ot)=>{g(st);const it={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[_.TextureType.unpacked],cacheHint:`${ot.countIncludePad}`};return[rt.run(Object.assign(Object.assign({},it),{get:()=>b(st,it,!0,ot)}),st)]},s.parseGlobalAveragePoolAttributes=rt=>{const st=rt.attributes.getInt("count_include_pad",0)!==0;return(0,a.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:st,kernelShape:[],strides:[],pads:[]})},s.maxPool=(rt,st,ot)=>{g(st);const it={name:"MaxPool",inputNames:["X"],inputTypes:[_.TextureType.unpacked],cacheHint:ot.cacheKey};return[rt.run(Object.assign(Object.assign({},it),{get:()=>$(st,it,!1,ot)}),st)]},s.parseMaxPoolAttributes=rt=>{const st=rt.attributes.getString("auto_pad","NOTSET"),ot=rt.attributes.getInt("ceil_mode",0),it=rt.attributes.getInts("kernel_shape"),at=rt.attributes.getInts("strides",[]),lt=rt.attributes.getInts("pads",[]),ut=rt.attributes.getInt("storage_order",0),ct=rt.attributes.getInts("dilations",[]);if(ut!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(ot!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,a.createAttributeWithCacheKey)({autoPad:st,ceilMode:ot,countIncludePad:!1,kernelShape:it,strides:at,pads:lt,storageOrder:ut,dilations:ct})};const $=(rt,st,ot,it)=>{const[at,lt]=nt(rt,it,ot),ut=`
      ${c(rt[0].dims,at,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},st),{output:{dims:lt,type:rt[0].type,textureType:_.TextureType.unpacked},shaderSource:ut})},nt=(rt,st,ot)=>{const it=rt[0].dims.slice(),at=Object.hasOwnProperty.call(st,"dilations"),lt=st.kernelShape.slice(),ut=st.strides.slice(),ct=at?st.dilations.slice():[],dt=st.pads.slice();d.PoolConvUtil.adjustPoolAttributes(ot,it,lt,ut,ct,dt);const ft=d.PoolConvUtil.computePoolOutputShape(ot,it,ut,ct,lt,dt,st.autoPad),ht=Object.assign({},st);return at?Object.assign(ht,{kernelShape:lt,strides:ut,pads:dt,dilations:ct,cacheKey:st.cacheKey}):Object.assign(ht,{kernelShape:lt,strides:ut,pads:dt,cacheKey:st.cacheKey}),[ht,ft]},tt={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},et={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[_.TextureType.unpacked]};s.globalMaxPool=(rt,st)=>(g(st),[rt.run(Object.assign(Object.assign({},et),{get:()=>$(st,et,!0,tt)}),st)]);const g=rt=>{if(!rt||rt.length!==1)throw new Error("Pool ops requires 1 input.");if(rt[0].type!=="float32"&&rt[0].type!=="float64")throw new Error("Invalid input type.")},c=(rt,st,ot,it,at)=>{const lt=rt.length;if(st.kernelShape.length<=2){const ut=st.kernelShape[st.kernelShape.length-1],ct=st.strides[st.strides.length-1],dt=st.pads[st.pads.length/2-1],ft=st.pads[st.pads.length-1],ht=rt[lt-1];let mt="",yt="",Tt="";if(mt=dt+ft!==0?`
          for (int i = 0; i < ${ut}; i++) {
            x[${lt} - 1] = indices[${lt} - 1] * ${ct} - ${dt} + i;
            if (x[${lt} - 1] < 0 || x[${lt} - 1] >= ${ht}) {
              pad++;
              continue;
            }
            ${ot}
          }`:`
          for (int i = 0; i < ${ut}; i++) {
            x[${lt} - 1] = indices[${lt} - 1] * ${ct} - ${dt} + i;
            ${ot}
          }`,st.kernelShape.length===2){const St=st.kernelShape[st.kernelShape.length-2],xt=st.strides[st.strides.length-2],wt=st.pads[st.pads.length/2-2],gt=st.pads[st.pads.length-2],vt=rt[lt-2];yt=wt+gt!==0?`
            for (int j = 0; j < ${St}; j++) {
              x[${lt} - 2] = indices[${lt} - 2] * ${xt} - ${wt} + j;
              if (x[${lt} - 2] < 0 || x[${lt} - 2] >= ${vt}) {
                pad+= ${ut};
                continue;
              }
          `:`
            for (int j = 0; j < ${St}; j++) {
              x[${lt} - 2] = indices[${lt} - 2] * ${xt} - ${wt} + j;
            `,Tt=`
          }
        `}return`
        float process(int indices[${lt}]) {
          int x[${lt}];
          copyVec(indices, x);

          float value = ${at};
          int pad = 0;
          ${yt}
          ${mt}
          ${Tt}
          ${it}
          return value;
        }
      `}{const ut=d.ShapeUtil.size(st.kernelShape),ct=d.ShapeUtil.computeStrides(st.kernelShape),dt=ct.length,ft=st.pads.length,ht=_e(dt),mt=j(rt,"inputDims"),yt=j(st.pads,"pads"),Tt=j(ct,"kernelStrides"),St=j(st.strides,"strides");let xt="";return xt=st.pads.reduce((wt,gt)=>wt+gt)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${ot}
          }`:`
          }
          ${ot}
        `,`
        ${ht}
        float process(int indices[${lt}]) {
          int x[${lt}];
          copyVec(indices, x);
          int offset[${dt}];
          int pads[${ft}];
          int inputDims[${lt}];
          int kernelStrides[${dt}];
          int strides[${dt}];
          ${yt}
          ${mt}
          ${St}
          ${Tt}

          float value = ${at};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${ut}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${lt} - ${dt}; j < ${lt}; j++) {
              x[j] = indices[j] * strides[j - ${lt} + ${dt}]
                + offset[j - ${lt} + ${dt}] - pads[j - 2];
              ${xt}
          }
          ${it}

          return value;
        }
      `}},j=(rt,st)=>{let ot="";for(let it=0;it<rt.length;it++)ot+=`
      ${st}[${it}] = ${rt[it]};
    `;return ot},_e=rt=>`
  void offsetToIndices(int offset, int[${rt}] strides, out int[${rt}] indices) {
    if (${rt} == 0) {
      return;
    }
    for (int i = 0; i < ${rt} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${rt} - 1] = offset;
  }`},4939:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.reduceLogSumSquare=s.reduceLogSum=s.reduceProd=s.reduceMin=s.reduceMax=s.reduceMean=s.reduceSum=s.parseReduceAttributes=void 0;const a=i(246),d=i(782),_=i(2517),b=i(2039),$=(et,g,c,j,_e)=>{tt(g);const rt={name:j,inputNames:["A"],inputTypes:[b.TextureType.unpacked]};return[et.run(Object.assign(Object.assign({},rt),{cacheHint:c.cacheKey,get:()=>nt(et,g,c,j,_e,rt)}),g)]};s.parseReduceAttributes=et=>{const g=et.attributes.getInts("axes",[]),c=et.attributes.getInt("keepdims",1)===1;return(0,a.createAttributeWithCacheKey)({axes:g,keepDims:c})};const nt=(et,g,c,j,_e,rt)=>{const st=[],ot=g[0].dims.length||1,it=[],at=_.ShapeUtil.normalizeAxes(c.axes,g[0].dims.length),lt=_e(g,at);let ut=lt[1];for(let dt=0;dt<g[0].dims.length;dt++)at.indexOf(dt)>=0||at.length===0?(c.keepDims&&st.push(1),ut=`
          for(int j${dt} = 0; j${dt} < ${g[0].dims[dt]}; j${dt}++) {
            inputIdx[${dt}] = j${dt};
            ${ut}
          }`):(it.push(`inputIdx[${dt}] = outputIdx[${st.length}];`),st.push(g[0].dims[dt]));const ct=`
      float process(int outputIdx[${st.length||1}]) {
        float value;                 // final result
        int inputIdx[${ot}];      // addressing input data
        ${it.join(`
`)}
        ${lt[0]}       // init ops for reduce max/min
        ${ut}
        ${lt[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},rt),{output:{dims:st,type:g[0].type,textureType:b.TextureType.unpacked},shaderSource:ct})},tt=et=>{if(!et||et.length!==1)throw new Error("Reduce op requires 1 input.");if(d.NUMBER_TYPES.indexOf(et[0].type)===-1)throw new Error("Invalid input type.")};s.reduceSum=(et,g,c)=>$(et,g,c,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),s.reduceMean=(et,g,c)=>$(et,g,c,"ReduceMean",(j,_e)=>{let rt=1;for(let st=0;st<j[0].dims.length;st++)(_e.indexOf(st)>=0||_e.length===0)&&(rt*=j[0].dims[st]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${rt}.;`]}),s.reduceMax=(et,g,c)=>$(et,g,c,"ReduceMax",(j,_e)=>{const rt=[];for(let st=0;st<j[0].dims.length;st++)(_e.indexOf(st)>=0||_e.length===0)&&rt.push(`inputIdx[${st}] = 0;`);return[`${rt.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),s.reduceMin=(et,g,c)=>$(et,g,c,"ReduceMin",(j,_e)=>{const rt=[];for(let st=0;st<j[0].dims.length;st++)(_e.indexOf(st)>=0||_e.length===0)&&rt.push(`inputIdx[${st}] = 0;`);return[`${rt.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),s.reduceProd=(et,g,c)=>$(et,g,c,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),s.reduceLogSum=(et,g,c)=>$(et,g,c,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),s.reduceLogSumSquare=(et,g,c)=>$(et,g,c,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isReshapeCheap=s.processDims3D=s.createPackedReshape3DProgramInfoLoader=void 0;const a=i(2517),d=i(5060),_=i(2039),b=i(2827);s.createPackedReshape3DProgramInfoLoader=($,nt,tt)=>{const et=(g=>({name:"Reshape (packed)",inputTypes:[_.TextureType.packed],inputNames:["A"],cacheHint:`${g}`}))(tt);return Object.assign(Object.assign({},et),{get:()=>((g,c,j,_e)=>{const rt=c.dims,st=_e;let ot="";for(let lt=0;lt<4;lt++){let ut="";switch(lt){case 0:ut="outputCoords = rc;";break;case 1:ut="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:ut="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:ut="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}ot+=`
        ${ut}
        ${lt>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${lt}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${lt>0?"}":""}
      `}const it=(0,d.getGlsl)(g.session.backend.glContext.version),at=`
      ${function(lt){const ut=a.ShapeUtil.computeStrides(lt),ct=["b","r","c"],dt="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${ut.map((ft,ht)=>`int ${ct[ht]} = ${dt} / ${ft}; ${ht===ut.length-1?`int ${ct[ht+1]} = ${dt} - ${ct[ht]} * ${ft}`:`index -= ${ct[ht]} * ${ft}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(rt)}
      ${function(lt){const ut=a.ShapeUtil.computeStrides(lt);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${ut[0]} + coords.z * ${ut[1]} + coords.y;
  }
`}(st)}
      ${(0,b.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${st[2]};
        int cols = ${st[1]};

        ${ot}
        ${it.output} = result;
      }
    `;return Object.assign(Object.assign({},j),{output:{dims:st,type:c.type,textureType:_.TextureType.packed},shaderSource:at,hasMain:!0})})($,nt,et,tt)})},s.processDims3D=function($){if($.length===0)return[1,1,1];let nt=1;for(let tt=0;tt<$.length-2;++tt)nt*=$[tt];return[nt,$.length>1?$[$.length-2]:1,$[$.length-1]]},s.isReshapeCheap=function($,nt){let tt=!1;return tt=$.length===0||nt.length===0||($.length<2||nt.length<2?$[$.length-1]===nt[nt.length-1]:$[$.length-1]===nt[nt.length-1]&&$[$.length-2]===nt[nt.length-2]),tt}},718:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.reshape=void 0;const a=i(2517);s.reshape=(d,_)=>{const b=a.ShapeUtil.calculateReshapedDims(_[0].dims,_[1].integerData);return d.session.pack?[d.reshapePacked(_[0],b)]:[d.reshapeUnpacked(_[0],b)]}},2268:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseResizeAttributesV11=s.parseResizeAttributesV10=s.resize=void 0;const a=i(5060),d=i(2039),_=i(9390),b=i(2827),$=i(9793),nt={name:"Resize",inputNames:["A"],inputTypes:[d.TextureType.packed]};s.resize=(j,_e,rt)=>((0,$.validateInputs)(_e,rt),[j.run(Object.assign(Object.assign({},nt),{cacheHint:rt.cacheKey,get:()=>tt(j,_e,rt)}),_e)]),s.parseResizeAttributesV10=j=>(0,$.parseUpsampleAttributes)(j,10),s.parseResizeAttributesV11=j=>(0,$.parseUpsampleAttributes)(j,11);const tt=(j,_e,rt)=>{const st=(0,a.getGlsl)(j.session.backend.glContext.version),[ot,it]=et(_e,rt);if(ot.every(xt=>xt===1)&&rt.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},nt),{output:{dims:it,type:_e[0].type,textureType:d.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${st.texture2D}(X, TexCoords);
                    ${st.output} = v;
                }`});const at=it.length;if(at<2)throw new Error(`output dimension should be at least 2, but got ${at}`);const lt=it[at-2],ut=it[at-1],ct=_e[0].dims;if(at!==ct.length)throw new Error(`output dimension should match input ${ct.length}, but got ${at}`);const dt=ct[at-2],ft=ct[at-1],ht=ot[at-2],mt=ot[at-1];let yt="";if(rt.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${rt.mode}'`);switch(rt.coordinateTransformMode){case"asymmetric":yt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":yt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":yt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${ut}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${lt}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${ut}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${lt}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":yt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${ut}.0 - 1.0, ${lt}.0 - 1.0, ${ut}.0 - 1.0,
                            ${lt}.0 - 1.0);
                        vec4 original = vec4(${ft}.0 - 1.0, ${dt}.0 - 1.0, ${ft}.0 - 1.0,
                            ${dt}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${rt.coordinateTransformMode}'`)}const Tt=(0,_.getCoordsDataType)(at),St=`
            const vec2 inputWH = vec2(${dt}.0, ${ft}.0);
            const vec4 scaleWHWH = vec4(float(${ht}), float(${mt}), float(${ht}), float(${mt}));
            ${(0,b.unpackFromChannel)()}
            ${yt}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Tt} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${lt-1};
                bool hasNextCol = rc.z < ${ut-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${st.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},nt),{output:{dims:it,type:_e[0].type,textureType:d.TextureType.packed},hasMain:!0,shaderSource:St})},et=(j,_e)=>{const rt=j[0].dims;let st,ot=_e.scales;if(ot.length===0){const at=j[_e.scalesInputIdx];if(at&&at.size!==0){if(j[_e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");ot=g(at,_e.mode,_e.isResize)}else{const lt=j[_e.sizesInputIdx];if(!lt||lt.size===0)throw new Error("Either scales or sizes MUST be provided as input.");st=Array.from(lt.integerData),ot=c(st,rt,_e.mode,_e.isResize)}}else if(j[_e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const it=st||rt.map((at,lt)=>Math.floor(at*ot[lt]));return[ot,it]},g=(j,_e,rt)=>{const st=Array.from(j.floatData);return(0,$.scalesValidation)(st,_e,rt),st},c=(j,_e,rt,st)=>{const ot=_e.length,it=new Array(ot);for(let at=0,lt=ot;at<lt;at++)if(_e[at]===0){if(j[at]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");it[at]=1}else it[at]=j[at]/_e[at];return(0,$.scalesValidation)(it,rt,st),it}},8117:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.shape=void 0;const a=i(9162);s.shape=(_,b)=>(d(b),[new a.Tensor([b[0].dims.length],"int32",void 0,void 0,new Int32Array(b[0].dims))]);const d=_=>{if(!_||_.length!==1)throw new Error("Shape requires 1 input.")}},2278:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.sliceV10=s.parseSliceAttributes=s.slice=void 0;const a=i(246),d=i(782),_=i(2517),b=i(2039),$={name:"Slice",inputNames:["A"],inputTypes:[b.TextureType.unpacked]};s.slice=(c,j,_e)=>(tt(j),[c.run(Object.assign(Object.assign({},$),{cacheHint:_e.cacheKey,get:()=>nt(c,j[0],_e)}),j)]),s.parseSliceAttributes=c=>{const j=c.attributes.getInts("starts"),_e=c.attributes.getInts("ends"),rt=c.attributes.getInts("axes",[]);return(0,a.createAttributeWithCacheKey)({starts:j,ends:_e,axes:rt})};const nt=(c,j,_e)=>{const rt=_e.axes.length===0?j.dims.slice(0).map((ct,dt)=>dt):_e.axes,st=_.ShapeUtil.normalizeAxes(rt,j.dims.length),ot=_e.starts.map((ct,dt)=>ct>j.dims[st[dt]]-1?j.dims[st[dt]]:_.ShapeUtil.normalizeAxis(ct,j.dims[st[dt]])),it=_e.ends.map((ct,dt)=>ct>j.dims[st[dt]]-1?j.dims[st[dt]]:_.ShapeUtil.normalizeAxis(ct,j.dims[st[dt]])),at=j.dims.slice(),lt=[];for(let ct=0;ct<st.length;ct++)at[st[ct]]=it[ct]-ot[ct],ot[ct]>0&&lt.push(`outputIdx[${st[ct]}] += ${ot[ct]};`);const ut=`
      float process(int outputIdx[${at.length}]) {
        ${lt.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},$),{output:{dims:at,type:j.type,textureType:b.TextureType.unpacked},shaderSource:ut})},tt=c=>{if(!c||c.length!==1)throw new Error("Slice requires 1 input.");if(d.NUMBER_TYPES.indexOf(c[0].type)===-1)throw new Error("Invalid input type.")};s.sliceV10=(c,j)=>{g(j);const _e=et(c,j);return[c.run(Object.assign(Object.assign({},$),{cacheHint:_e.cacheKey,get:()=>nt(c,j[0],_e)}),[j[0]])]};const et=(c,j)=>{if(!c.session.isInitializer(j[1].dataId)||!c.session.isInitializer(j[2].dataId)||j.length>=4&&!c.session.isInitializer(j[3].dataId)||j.length>=5&&!c.session.isInitializer(j[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(j.length>=5&&j[4].integerData.some(ot=>ot!==1))throw new Error("currently non-1 steps is not supported for Slice");const _e=Array.from(j[1].integerData),rt=Array.from(j[2].integerData),st=j.length>=4?Array.from(j[3].integerData):[];return{starts:_e,ends:rt,axes:st,cacheKey:`${st};${_e};${rt}`}},g=c=>{if(!c||c.length<3||c.length>5)throw new Error("Invalid input number.");if(c[1].type!=="int32"||c[1].dims.length!==1)throw new Error("Invalid input type.");if(c[2].type!=="int32"||c[2].dims.length!==1)throw new Error("Invalid input type.");if(c.length>=4&&(c[3].type!=="int32"||c[3].dims.length!==1))throw new Error("Invalid input type.");if(c.length>=5&&(c[4].type!=="int32"||c[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.softmaxV13=s.parseSoftmaxAttributesV13=s.parseSoftmaxAttributes=s.softmax=void 0;const a=i(246),d=i(2517),_=i(5060),b=i(2039),$=i(3738),nt={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[b.TextureType.unpacked]},tt={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[b.TextureType.unpacked,b.TextureType.unpacked]},et={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[b.TextureType.unpacked,b.TextureType.unpacked,b.TextureType.unpacked]};s.softmax=(st,ot,it)=>{rt(ot);const at=ot[0].dims.slice(),lt=d.ShapeUtil.normalizeAxis(it.axis,at.length),ut=d.ShapeUtil.sizeToDimension(at,lt),ct=d.ShapeUtil.sizeFromDimension(at,lt);return g(st,ot,it,ut,ct)},s.parseSoftmaxAttributes=st=>(0,a.createAttributeWithCacheKey)({axis:st.attributes.getInt("axis",1)}),s.parseSoftmaxAttributesV13=st=>(0,a.createAttributeWithCacheKey)({axis:st.attributes.getInt("axis",-1)}),s.softmaxV13=(st,ot,it)=>{rt(ot);const at=ot[0].dims.slice(),lt=d.ShapeUtil.normalizeAxis(it.axis,at.length),ut=at.length,ct=lt!==ut-1,dt=[];let ft,ht=[],mt=[];ct&&(ht=Array.from({length:ut}).map((xt,wt)=>wt),ht[lt]=ut-1,ht[ut-1]=lt,ht.map(xt=>dt.push(at[xt])),ft=(0,a.createAttributeWithCacheKey)({perm:ht}),mt=(0,$.transpose)(st,ot,ft));const yt=ct?d.ShapeUtil.sizeToDimension(dt,ut-1):d.ShapeUtil.sizeToDimension(at,ut-1),Tt=ct?d.ShapeUtil.sizeFromDimension(dt,ut-1):d.ShapeUtil.sizeFromDimension(at,ut-1),St=g(st,ct?mt:ot,it,yt,Tt);return ct?(0,$.transpose)(st,St,ft):St};const g=(st,ot,it,at,lt)=>{const ut=c(st,ot[0],at,lt,[at]),ct=st.run(Object.assign(Object.assign({},nt),{cacheHint:it.cacheKey,get:()=>ut}),ot),dt=j(st,ot[0],at,lt,ut.output.dims,[at]),ft=st.run(Object.assign(Object.assign({},tt),{cacheHint:it.cacheKey,get:()=>dt}),[ot[0],ct]),ht=_e(st,ot[0],at,lt,ut.output.dims,dt.output.dims);return[st.run(Object.assign(Object.assign({},et),{cacheHint:it.cacheKey,get:()=>ht}),[ot[0],ct,ft])]},c=(st,ot,it,at,lt)=>{const[ut,ct]=st.calculateTextureWidthAndHeight(ot.dims,b.TextureType.unpacked),dt=lt.length;if(it<1||at<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(lt.length!==1)throw new Error("Dimensionality of the output should be 1");if(lt[0]!==it)throw new Error("Shape of the output should be equal to logical row count");const ft=(0,_.getGlsl)(st.session.backend.glContext.version),ht=`
      float process(int[${dt}] indices) {
        int logical_row_start_offset = indices[0] * ${at};

        float max = getColorAsFloat(${ft.texture2D}(A, offsetToCoords(logical_row_start_offset, ${ut},
        ${ct} )));
        for(int i=1; i<${at}; ++i)
        {
          float current = getColorAsFloat(${ft.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${ut}, ${ct})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},nt),{output:{dims:lt,type:ot.type,textureType:b.TextureType.unpacked},shaderSource:ht})},j=(st,ot,it,at,lt,ut)=>{const[ct,dt]=st.calculateTextureWidthAndHeight(ot.dims,b.TextureType.unpacked),ft=ut.length;if(it<1||at<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ut.length!==1)throw new Error("Dimensionality of the output should be 1");if(ut[0]!==it)throw new Error("Shape of the output should be equal to logical row count");if(lt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(lt[0]!==it)throw new Error("Shape of the intermediate results should be equal to logical row count");const ht=`
      float process(int[${ft}] indices) {
        int logical_row_start_offset = indices[0] * ${at};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${at}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,_.getGlsl)(st.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${ct}, ${dt}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},tt),{output:{dims:ut,type:ot.type,textureType:b.TextureType.unpacked},shaderSource:ht})},_e=(st,ot,it,at,lt,ut)=>{const[ct,dt]=st.calculateTextureWidthAndHeight(ot.dims,b.TextureType.unpacked),ft=ot.dims.length;if(it<1||at<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(lt.length!==1||ut.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(lt[0]!==it||ut[0]!==it)throw new Error("Shape of the intermediate results should be equal to logical row count");const ht=`
      float process(int[${ft}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${ct}, ${dt});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${at};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},et),{output:{dims:ot.dims,type:ot.type,textureType:b.TextureType.unpacked},shaderSource:ht})},rt=st=>{if(!st||st.length!==1)throw new Error("Softmax requires 1 input.");if(st[0].type!=="float32"&&st[0].type!=="float64")throw new Error("Invalid input type")}},5975:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseSplitAttributes=s.split=void 0;const a=i(246),d=i(2517),_=i(2039),b={name:"Split",inputNames:["A"],inputTypes:[_.TextureType.unpacked]};s.split=(et,g,c)=>{tt(g);const j=d.ShapeUtil.normalizeAxis(c.axis,g[0].dims.length),_e=$(et,g,j,c),rt=[];for(let st=0;st<_e;++st)rt.push(et.run(Object.assign(Object.assign({},b),{cacheHint:`${c.cacheKey};${st}`,get:()=>nt(et,g[0],c,j,st)}),g));return rt},s.parseSplitAttributes=et=>{const g=et.attributes.getInt("axis",0),c=et.attributes.getInts("split",[]),j=et.outputs.length;return(0,a.createAttributeWithCacheKey)({axis:g,split:c,numOutputs:j})};const $=(et,g,c,j)=>{const[,_e]=d.SplitUtil.splitShape(g[0].dims,c,j.split,j.numOutputs);return _e.length},nt=(et,g,c,j,_e)=>{const[rt,st]=d.SplitUtil.splitShape(g.dims,j,c.split,c.numOutputs),ot=st[_e],it=rt[_e],at=`
      float process(int indices[${it.length}]) {
        indices[${j}] += ${ot};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},b),{cacheHint:`${c.cacheKey}:${_e}`,output:{dims:it,type:g.type,textureType:_.TextureType.unpacked},shaderSource:at})},tt=et=>{if(!et||et.length!==1)throw new Error("Split requires one input.");if(et[0].type!=="int8"&&et[0].type!=="uint8"&&et[0].type!=="int16"&&et[0].type!=="uint16"&&et[0].type!=="int32"&&et[0].type!=="uint32"&&et[0].type!=="float32"&&et[0].type!=="float64"&&et[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseSqueezeAttributes=s.squeezeV13=s.squeeze=void 0;const a=i(2517);s.squeeze=(b,$,nt)=>{d($);const tt=a.ShapeUtil.squeezeShape($[0].dims,nt);return[b.reshapeUnpacked($[0],tt)]},s.squeezeV13=(b,$)=>(_($),(0,s.squeeze)(b,[$[0]],Array.from($[1].integerData))),s.parseSqueezeAttributes=b=>b.attributes.getInts("axes");const d=b=>{if(!b||b.length!==1)throw new Error("Squeeze requires 1 input.");if(b[0].type==="string")throw new Error("invalid input tensor types.")},_=b=>{if(!b||b.length!==2)throw new Error("Squeeze requires 2 inputs.");if(b[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.sum=void 0;const a=i(5060),d=i(2039);s.sum=($,nt)=>{b(nt);const tt={name:"Sum",inputNames:nt.map((et,g)=>`X${g}`),inputTypes:new Array(nt.length).fill(d.TextureType.unpacked)};return[$.run(Object.assign(Object.assign({},tt),{get:()=>_($,nt,tt)}),nt)]};const _=($,nt,tt)=>{const et=(0,a.getGlsl)($.session.backend.glContext.version),g=nt[0].dims.slice(),c=`
      void main() {
        vec4 result = ${nt.map((j,_e)=>`${et.texture2D}(X${_e},TexCoords)`).join(" + ")};
        ${et.output} = result;
      }
    `;return Object.assign(Object.assign({},tt),{output:{dims:g,type:nt[0].type,textureType:d.TextureType.unpacked},hasMain:!0,shaderSource:c})},b=$=>{if(!$||$.length===0)throw new Error("Sum requires inputs.");const nt=$[0].dims.length;for(let tt=1;tt<$.length;tt++){if(nt!==$[tt].dims.length)throw new Error("Input shapes are mismatched.");for(let et=0;et<nt;et++)if($[0].dims[et]!==$[tt].dims[et])throw new Error("Input shapes are not matched.")}if($[0].type!=="float32"&&$[0].type!=="float64")throw new Error("Invalid input type.");for(let tt=1;tt<$.length;tt++)if($[0].type!==$[tt].type)throw new Error("Input types are not matched.")}},5723:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tile=void 0;const a=i(782),d=i(2039);s.tile=($,nt)=>{b(nt);const tt={name:"Tile",inputNames:["A"],inputTypes:[d.TextureType.unpacked]};return[$.run(Object.assign(Object.assign({},tt),{get:()=>_($,nt,tt)}),nt)]};const _=($,nt,tt)=>{const et=nt[0].dims.slice(),g=new Array(et.length),c=[];for(let rt=0;rt<et.length;rt++)g[rt]=et[rt]*nt[1].numberData[rt],c.push(`inputIdx[${rt}] = int(mod(float(outputIdx[${rt}]), ${et[rt]}.));`);const j=g.length,_e=`
      float process(int outputIdx[${j}]) {
        int inputIdx[${j}];
        ${c.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},tt),{output:{dims:g,type:nt[0].type,textureType:d.TextureType.unpacked},shaderSource:_e})},b=$=>{if(!$||$.length!==2)throw new Error("Tile requires 2 input.");if($[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if($[1].dims[0]!==$[0].dims.length)throw new Error("Invalid input shape.");if(a.NUMBER_TYPES.indexOf($[0].type)===-1)throw new Error("Invalid input type.");if($[1].type!=="int32"&&$[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseTransposeAttributes=s.transpose=void 0;const a=i(246),d=i(2517),_=i(2039),b={name:"Transpose",inputNames:["A"],inputTypes:[_.TextureType.unpacked]};s.transpose=(c,j,_e)=>(g(j),[c.run(Object.assign(Object.assign({},b),{cacheHint:_e.cacheKey,get:()=>$(c,j[0],_e.perm)}),j)]),s.parseTransposeAttributes=c=>(0,a.createAttributeWithCacheKey)({perm:c.attributes.getInts("perm",[])});const $=(c,j,_e)=>{const rt=j.dims;_e=nt(rt,_e);const st=tt(rt,_e),ot=rt.length,it=`
      ${et("perm",_e,ot)}
      float process(int indices[${ot}]) {
        int a[${ot}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},b),{output:{dims:st,type:j.type,textureType:_.TextureType.unpacked},shaderSource:it})},nt=(c,j)=>(j&&j.length!==c.length&&(j=[...c.keys()].reverse()),j),tt=(c,j)=>(j=nt(c,j),d.ShapeUtil.sortBasedOnPerm(c,j)),et=(c,j,_e)=>{const rt=[];rt.push(`void ${c}(out int a[${_e}], int src[${_e}]) {`);for(let st=0;st<_e;++st)rt.push(`	a[${j[st]}]=src[${st}];`);return rt.push("	}"),rt.join(`
`)},g=c=>{if(!c||c.length!==1)throw new Error("Transpose requires 1 input.");if(c[0].type!=="float32"&&c[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.encodeAsUint8=void 0;const a=i(5060),d=i(2039);s.encodeAsUint8=(_,b)=>{const $=b.shape,nt=(0,a.getGlsl)(_.session.backend.glContext.version),tt=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${nt.texture2D}(X,TexCoords).r;
      ${nt.output} = encodeAsUint8(value);
    }`,et={name:"Uint8Encode",inputTypes:[d.TextureType.unpacked],inputNames:["X"],output:{dims:$,type:b.tensor.type,textureType:d.TextureType.downloadUint8AsFloat},shaderSource:tt,hasMain:!0};return _.executeProgram(et,[b.tensor])}},4909:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tanh=s.tan=s.sqrt=s.sin=s.sigmoid=s.relu=s.not=s.neg=s.log=s.parseLeakyReluAttributes=s.leakyRelu=s.identity=s.floor=s.exp=s.parseEluAttributes=s.elu=s.cos=s.ceil=s.clipV11=s.parseClipAttributes=s.clip=s.atan=s.asin=s.acos=s.abs=s.glslTanh=s.glslTan=s.glslSqrt=s.glslSigmoid=s.glslRelu=s.glslSin=s.glslNot=s.glslNeg=s.glslLog=s.glslLeakyRelu=s.glslIdentity=s.glslClip=s.glslFloor=s.glslExp=s.glslElu=s.glslCos=s.glslCeil=s.glslAtan=s.glslAsin=s.glslAcos=s.glslAbs=void 0;const a=i(246),d=i(2517),_=i(8520),b=i(5060),$=i(2039);function nt(){return St("abs")}function tt(){return St("acos")}function et(){return St("asin")}function g(){return St("atan")}function c(){return St("ceil")}function j(){return St("cos")}function _e(gt){const vt="elu";return{body:`
  const float alpha = float(${gt});

  float ${vt}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${vt}_(vec4 v) {
    return vec4(${vt}_(v.x), ${vt}_(v.y), ${vt}_(v.z), ${vt}_(v.w));
  }
  `,name:vt,type:_.FunctionType.ValueBased}}function rt(){return St("exp")}function st(){return St("floor")}function ot(gt,vt){const Ot="clip";return{body:`
  const float min = float(${gt});
  const float max = float(${vt});

  float ${Ot}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Ot}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Ot,type:_.FunctionType.ValueBased}}function it(){const gt="indentity";return{body:`
  float ${gt}_(float a) {
    return a;
  }
  vec4 ${gt}_(vec4 v) {
    return v;
  }
  `,name:gt,type:_.FunctionType.ValueBased}}function at(gt){const vt="leakyRelu";return{body:`
  const float alpha = float(${gt});

  float ${vt}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${vt}_(vec4 v) {
    return vec4(${vt}_(v.x), ${vt}_(v.y), ${vt}_(v.z), ${vt}_(v.w));
  }
  `,name:vt,type:_.FunctionType.ValueBased}}function lt(){return St("log")}function ut(){const gt="neg";return{body:`
  float ${gt}_(float a) {
    return -a;
  }
  vec4 ${gt}_(vec4 v) {
    return -v;
  }
  `,name:gt,type:_.FunctionType.ValueBased}}function ct(){const gt="not";return{body:`
  float ${gt}_(float a) {
    return float( ! bool(a) );
  }
  bool ${gt}_(bool a) {
    return !a;
  }
  vec4 ${gt}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${gt}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:gt,type:_.FunctionType.ValueBased}}function dt(){return St("sin")}function ft(){const gt="relu";return{body:`
  float ${gt}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${gt}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:gt,type:_.FunctionType.ValueBased}}function ht(){const gt="sigmoid";return{body:`
  float ${gt}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${gt}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:gt,type:_.FunctionType.ValueBased}}function mt(){return St("sqrt")}function yt(){return St("tan")}function Tt(){const gt="tanh";return{body:`
  float ${gt}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${gt}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:gt,type:_.FunctionType.ValueBased}}function St(gt){return{body:`
  float ${gt}_(float a) {
    return ${gt}(a);
  }
  vec4 ${gt}_(vec4 v) {
    return ${gt}(v);
  }
  `,name:gt,type:_.FunctionType.ValueBased}}s.glslAbs=nt,s.glslAcos=tt,s.glslAsin=et,s.glslAtan=g,s.glslCeil=c,s.glslCos=j,s.glslElu=_e,s.glslExp=rt,s.glslFloor=st,s.glslClip=ot,s.glslIdentity=it,s.glslLeakyRelu=at,s.glslLog=lt,s.glslNeg=ut,s.glslNot=ct,s.glslSin=dt,s.glslRelu=ft,s.glslSigmoid=ht,s.glslSqrt=mt,s.glslTan=yt,s.glslTanh=Tt;const xt=(gt,vt,Ot,At)=>{const Ft=gt.session.pack?$.TextureType.packed:$.TextureType.unpacked,Bt={name:Ot.name,inputTypes:[Ft],inputNames:["A"],cacheHint:At};return Object.assign(Object.assign({},Bt),{get:()=>((Wt,sn,Jt,Kt)=>{const rn=Wt.session.pack?$.TextureType.packed:$.TextureType.unpacked,zt=(0,b.getGlsl)(Wt.session.backend.glContext.version);return Object.assign(Object.assign({},sn),{output:{dims:Jt.dims,type:Jt.type,textureType:rn},shaderSource:`
     ${Kt.body}
     void main() {
       vec4 v = ${zt.texture2D}(A, TexCoords);
       v = ${Kt.name}_(v);
       ${zt.output} = v;
     }
     `,hasMain:!0})})(gt,Bt,vt,Ot)})};s.abs=(gt,vt)=>[gt.run(xt(gt,vt[0],nt()),vt)],s.acos=(gt,vt)=>[gt.run(xt(gt,vt[0],tt()),vt)],s.asin=(gt,vt)=>[gt.run(xt(gt,vt[0],et()),vt)],s.atan=(gt,vt)=>[gt.run(xt(gt,vt[0],g()),vt)],s.clip=(gt,vt,Ot)=>[gt.run(xt(gt,vt[0],ot(Ot.min,Ot.max),Ot.cacheKey),vt)],s.parseClipAttributes=gt=>(0,a.createAttributeWithCacheKey)({min:gt.attributes.getFloat("min",d.MIN_CLIP),max:gt.attributes.getFloat("max",d.MAX_CLIP)}),s.clipV11=(gt,vt)=>{const Ot=wt(gt,vt);return(0,s.clip)(gt,[vt[0]],Ot)};const wt=(gt,vt)=>{if(vt.length>=3&&(!gt.session.isInitializer(vt[1].dataId)||!gt.session.isInitializer(vt[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Ot=vt.length>=3?vt[1].numberData[0]:d.MIN_CLIP,At=vt.length>=3?vt[2].numberData[0]:d.MAX_CLIP;return(0,a.createAttributeWithCacheKey)({min:Ot,max:At})};s.ceil=(gt,vt)=>[gt.run(xt(gt,vt[0],c()),vt)],s.cos=(gt,vt)=>[gt.run(xt(gt,vt[0],j()),vt)],s.elu=(gt,vt,Ot)=>[gt.run(xt(gt,vt[0],_e(Ot.alpha),Ot.cacheKey),vt)],s.parseEluAttributes=gt=>(0,a.createAttributeWithCacheKey)({alpha:gt.attributes.getFloat("alpha",1)}),s.exp=(gt,vt)=>[gt.run(xt(gt,vt[0],rt()),vt)],s.floor=(gt,vt)=>[gt.run(xt(gt,vt[0],st()),vt)],s.identity=(gt,vt)=>[gt.run(xt(gt,vt[0],it()),vt)],s.leakyRelu=(gt,vt,Ot)=>[gt.run(xt(gt,vt[0],at(Ot.alpha),Ot.cacheKey),vt)],s.parseLeakyReluAttributes=gt=>(0,a.createAttributeWithCacheKey)({alpha:gt.attributes.getFloat("alpha",.01)}),s.log=(gt,vt)=>[gt.run(xt(gt,vt[0],lt()),vt)],s.neg=(gt,vt)=>[gt.run(xt(gt,vt[0],ut()),vt)],s.not=(gt,vt)=>[gt.run(xt(gt,vt[0],ct()),vt)],s.relu=(gt,vt)=>[gt.run(xt(gt,vt[0],ft()),vt)],s.sigmoid=(gt,vt)=>[gt.run(xt(gt,vt[0],ht()),vt)],s.sin=(gt,vt)=>[gt.run(xt(gt,vt[0],dt()),vt)],s.sqrt=(gt,vt)=>[gt.run(xt(gt,vt[0],mt()),vt)],s.tan=(gt,vt)=>[gt.run(xt(gt,vt[0],yt()),vt)],s.tanh=(gt,vt)=>[gt.run(xt(gt,vt[0],Tt()),vt)]},5611:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createUnpackProgramInfoLoader=s.createUnpackProgramInfo=void 0;const a=i(5060),d=i(2039),_=i(9390),b=i(2827),$={name:"unpack",inputNames:["A"],inputTypes:[d.TextureType.packed]};s.createUnpackProgramInfo=(nt,tt)=>{const et=tt.dims.length,g=(0,b.getChannels)("rc",et),c=g.slice(-2),j=(0,_.getCoordsDataType)(et),_e=(0,b.unpackFromChannel)(),rt=tt.dims.length===0?"":function(it,at){if(it===1)return"rc";let lt="";for(let ut=0;ut<it;ut++)lt+=at[ut],ut<it-1&&(lt+=",");return lt}(et,g),st=et<=1?"rc":`vec2(${c.join(",")})`,ot=`
    ${_e}
    void main() {
      ${j} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${rt});

       ${(0,a.getGlsl)(nt.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${st}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},$),{hasMain:!0,output:{dims:tt.dims,type:tt.type,textureType:d.TextureType.unpacked},shaderSource:ot})},s.createUnpackProgramInfoLoader=(nt,tt)=>Object.assign(Object.assign({},$),{get:()=>(0,s.createUnpackProgramInfo)(nt,tt)})},8428:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseUnsqueezeAttributes=s.unsqueezeV13=s.unsqueeze=void 0;const a=i(2517);s.unsqueeze=(b,$,nt)=>{d($);const tt=a.ShapeUtil.unsqueezeShape($[0].dims,nt);return[b.reshapeUnpacked($[0],tt)]},s.unsqueezeV13=(b,$)=>(_($),(0,s.unsqueeze)(b,[$[0]],Array.from($[1].integerData))),s.parseUnsqueezeAttributes=b=>b.attributes.getInts("axes");const d=b=>{if(!b||b.length!==1)throw new Error("Unsqueeze requires 1 input.");if(b[0].type==="string")throw new Error("invalid input tensor types.")},_=b=>{if(!b||b.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(b[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.scalesValidation=s.validateInputs=s.parseUpsampleAttributes=s.parseUpsampleAttributesV9=s.parseUpsampleAttributesV7=s.upsample=void 0;const a=i(246),d=i(5060),_=i(2039),b={name:"Upsample",inputNames:["X"],inputTypes:[_.TextureType.unpacked]};s.upsample=(nt,tt,et)=>((0,s.validateInputs)(tt,et),[nt.run(Object.assign(Object.assign({},b),{cacheHint:et.cacheKey,get:()=>$(nt,tt,et)}),tt)]),s.parseUpsampleAttributesV7=nt=>(0,s.parseUpsampleAttributes)(nt,7),s.parseUpsampleAttributesV9=nt=>(0,s.parseUpsampleAttributes)(nt,9),s.parseUpsampleAttributes=(nt,tt)=>{const et=tt>=10,g=nt.attributes.getString("mode","nearest");if(g!=="nearest"&&g!=="linear"&&(tt<11||g!=="cubic"))throw new Error(`unrecognized mode: ${g}`);let c=[];tt<9&&(c=nt.attributes.getFloats("scales"),(0,s.scalesValidation)(c,g,et));const j=nt.attributes.getFloat("extrapolation_value",0),_e=tt>10?nt.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(_e)===-1)throw new Error(`coordinate_transform_mode '${_e}' is not supported`);const rt=_e==="tf_crop_and_resize",st=rt,ot=g==="nearest"&&tt>=11?nt.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(ot)===-1)throw new Error(`nearest_mode '${ot}' is not supported`);const it=nt.attributes.getFloat("cubic_coeff_a",-.75),at=nt.attributes.getInt("exclude_outside",0)!==0;if(at&&g!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const lt=tt<11||g==="nearest"&&_e==="asymmetric"&&ot==="floor";let ut=0,ct=0,dt=0;return tt>10?nt.inputs.length>2?(ut=1,ct=2,dt=3):(ct=1,dt=2):tt===9&&(ct=1),(0,a.createAttributeWithCacheKey)({opset:tt,isResize:et,mode:g,scales:c,extrapolationValue:j,coordinateTransformMode:_e,useExtrapolation:st,needRoiInput:rt,nearestMode:ot,cubicCoefficientA:it,excludeOutside:at,useNearest2xOptimization:lt,roiInputIdx:ut,scalesInputIdx:ct,sizesInputIdx:dt})};const $=(nt,tt,et)=>{const g=(0,d.getGlsl)(nt.session.backend.glContext.version),[c,j]=nt.calculateTextureWidthAndHeight(tt[0].dims,_.TextureType.unpacked),_e=tt[0].dims.map((dt,ft)=>Math.floor(dt*et.scales[ft])),[rt,st]=nt.calculateTextureWidthAndHeight(_e,_.TextureType.unpacked),ot=_e.length,it=new Array(ot),at=new Array(ot);let lt=`
      int output_pitches[${ot}];
      int input_pitches[${ot}];
      `;for(let dt=ot-1;dt>=0;dt--)it[dt]=dt===ot-1?1:it[dt+1]*_e[dt+1],at[dt]=dt===ot-1?1:at[dt+1]*tt[0].dims[dt+1],lt+=`
        output_pitches[${dt}] = ${it[dt]};
        input_pitches[${dt}] = ${at[dt]};
        `;const ut=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${c}, ${j});
        float value = getColorAsFloat(${g.texture2D}(X, coords));
        return value;
      }
      `,ct=et.mode==="nearest"?`
    ${ut}
    float process(int indices[${ot}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${rt}, ${st});

      ${lt}

      int d, m;
      for (int dim = 0; dim < ${ot}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:ot===4?`
    ${ut}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${rt}, ${st});

      ${lt}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${tt[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${ut}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${rt}, ${st});

      ${lt}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${tt[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},b),{output:{dims:_e,type:tt[0].type,textureType:_.TextureType.unpacked},shaderSource:ct,variables:[{name:"scales",type:"int",arrayLength:et.scales.length,data:et.scales.map(dt=>Math.ceil(dt))}]})};s.validateInputs=(nt,tt)=>{if(!nt||tt.opset<9&&nt.length!==1||tt.opset>=9&&tt.opset<11&&nt.length!==2||tt.opset>=11&&nt.length<2)throw new Error("invalid inputs.");if(tt.scales.length>0&&nt[0].dims.length!==tt.scales.length)throw new Error("Invalid input shape.");if(nt[0].type==="string")throw new Error("Invalid input tensor types.")},s.scalesValidation=(nt,tt,et)=>{if(et){for(const g of nt)if(g<=0)throw new Error("Scale value should be greater than 0.")}else for(const g of nt)if(g<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(tt!=="linear"&&tt!=="cubic"||nt.length===2||nt.length===4&&nt[0]===1&&nt[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${et?"Resize":"Upsample"} opeartor.`)}},1958:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ProgramManager=void 0;const a=i(1670),d=i(6231),_=i(8879),b=i(5060);s.ProgramManager=class{constructor($,nt,tt){this.profiler=$,this.glContext=nt,this.textureLayoutStrategy=tt,this.repo=new Map,this.attributesBound=!1}getArtifact($){return this.repo.get($)}setArtifact($,nt){this.repo.set($,nt)}run($,nt,tt){var et;this.profiler.event("op",`ProgramManager.run ${(et=$.programInfo.name)!==null&&et!==void 0?et:"unknown kernel"}`,()=>{var g;const c=this.glContext.gl,j=$.program;c.useProgram(j);try{this.bindOutput(tt),this.attributesBound||this.bindAttributes($.attribLocations),this.bindUniforms($.uniformLocations,(g=$.programInfo.variables)!==null&&g!==void 0?g:[],nt)}catch(_e){throw d.Logger.error("ProgramManager",$.programInfo.shaderSource),_e}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach($=>this.glContext.deleteProgram($.program))}build($,nt,tt){return this.profiler.event("backend","ProgramManager.build",()=>{const et=new _.GlslPreprocessor(this.glContext,$,nt,tt),g=et.preprocess(),c=this.compile(g);return{programInfo:$,program:c,uniformLocations:this.getUniformLocations(c,et.context.programInfo.inputNames,et.context.programInfo.variables),attribLocations:this.getAttribLocations(c)}})}compile($){if(!this.vertexShader){d.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const et=(0,b.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(et,this.glContext.gl.VERTEX_SHADER)}a.env.debug&&d.Logger.verbose("ProrgramManager",`FragShader:
${$}
`);const nt=this.glContext.compileShader($,this.glContext.gl.FRAGMENT_SHADER),tt=this.glContext.createProgram(this.vertexShader,nt);return this.glContext.deleteShader(nt),tt}bindOutput($){const nt=$.width,tt=$.height;d.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${nt}/${tt}, shape=${$.shape}, type=${$.tensor.type}`),this.glContext.attachFramebuffer($.texture,nt,tt)}bindAttributes($){const nt=$.position,tt=$.textureCoord;this.glContext.setVertexAttributes(nt,tt),this.attributesBound=!0}bindUniforms($,nt,tt){var et;const g=this.glContext.gl;let c=0;for(const{name:j,type:_e,location:rt,arrayLength:st}of $){const ot=(et=nt.find(it=>it.name===j))===null||et===void 0?void 0:et.data;if(_e!=="sampler2D"&&!ot)throw new Error(`variable '${j}' does not have data defined in program info`);switch(_e){case"sampler2D":this.bindTexture(tt[c],rt,c),c++;break;case"float":st?g.uniform1fv(rt,ot):g.uniform1f(rt,ot);break;case"int":st?g.uniform1iv(rt,ot):g.uniform1i(rt,ot);break;default:throw new Error(`Uniform not implemented: ${_e}`)}}}bindTexture($,nt,tt){this.glContext.bindTextureToUniform($.texture,tt,nt)}getAttribLocations($){return{position:this.getAttribLocation($,"position"),textureCoord:this.getAttribLocation($,"textureCoord")}}getUniformLocations($,nt,tt){const et=[];if(nt)for(const g of nt)et.push({name:g,type:"sampler2D",location:this.getUniformLocation($,g)});if(tt)for(const g of tt)et.push(Object.assign(Object.assign({},g),{location:this.getUniformLocation($,g.name)}));return et}getUniformLocation($,nt){const tt=this.glContext.gl.getUniformLocation($,nt);if(tt===null)throw new Error(`Uniform ${nt} not found.`);return tt}getAttribLocation($,nt){return this.glContext.gl.getAttribLocation($,nt)}}},6416:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLSessionHandler=void 0;const a=i(6231),d=i(1047),_=i(8316),b=i(1640),$=i(1958),nt=i(7859),tt=i(5702);s.WebGLSessionHandler=class{constructor(et,g){this.backend=et,this.context=g,this.layoutStrategy=new nt.PreferLogicalStrategy(et.glContext.maxTextureSize),this.programManager=new $.ProgramManager(this.context.profiler,et.glContext,this.layoutStrategy),this.textureManager=new tt.TextureManager(et.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:et.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=et.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new _.WebGLInferenceHandler(this)}onGraphInitialized(et){const g=et.getValues().filter(c=>c.from===-1&&c.tensor).map(c=>c.tensor.dataId);this.initializers=new Set(g)}isInitializer(et){return!!this.initializers&&this.initializers.has(et)}addInitializer(et){this.initializers.add(et)}getTextureData(et,g){return g?this.packedTextureDataCache.get(et):this.unpackedTextureDataCache.get(et)}setTextureData(et,g,c=!1){a.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),c?this.packedTextureDataCache.set(et,g):this.unpackedTextureDataCache.set(et,g)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(et=>this.textureManager.releaseTexture(et,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(et=>this.textureManager.releaseTexture(et,!0)),this.unpackedTextureDataCache=new Map}resolve(et,g,c){const j=(0,d.resolveOperator)(et,g,b.WEBGL_OP_RESOLVE_RULES);return{impl:j.opImpl,context:j.opInit?j.opInit(et,c):et}}}},7769:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Uint8DataEncoder=s.RGBAFloatDataEncoder=s.RedFloat32DataEncoder=void 0;const a=i(6231);s.RedFloat32DataEncoder=class{constructor(d,_=1){if(_===1)this.internalFormat=d.R32F,this.format=d.RED,this.textureType=d.FLOAT,this.channelSize=_;else{if(_!==4)throw new Error(`Invalid number of channels: ${_}`);this.internalFormat=d.RGBA32F,this.format=d.RGBA,this.textureType=d.FLOAT,this.channelSize=_}}encode(d,_){let b,$;return d.constructor!==Float32Array&&(a.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),$=new Float32Array(d)),_*this.channelSize>d.length?(a.Logger.warning("Encoder","Source data too small. Allocating larger array"),$=d,b=this.allocate(_*this.channelSize),$.forEach((nt,tt)=>b[tt]=nt)):($=d,b=$),b}allocate(d){return new Float32Array(4*d)}decode(d,_){return this.channelSize===1?d.filter((b,$)=>$%4==0).subarray(0,_):d.subarray(0,_)}},s.RGBAFloatDataEncoder=class{constructor(d,_=1,b){if(_!==1&&_!==4)throw new Error(`Invalid number of channels: ${_}`);this.internalFormat=d.RGBA,this.format=d.RGBA,this.channelSize=_,this.textureType=b||d.FLOAT}encode(d,_){let b=d;return this.channelSize===1&&(a.Logger.verbose("Encoder","Exploding into a larger array"),b=this.allocate(_),d.forEach(($,nt)=>b[4*nt]=$)),b}allocate(d){return new Float32Array(4*d)}decode(d,_){return this.channelSize===1?d.filter((b,$)=>$%4==0).subarray(0,_):d.subarray(0,_)}},s.Uint8DataEncoder=class{constructor(d,_=1){if(this.channelSize=4,_===1)this.internalFormat=d.ALPHA,this.format=d.ALPHA,this.textureType=d.UNSIGNED_BYTE,this.channelSize=_;else{if(_!==4)throw new Error(`Invalid number of channels: ${_}`);this.internalFormat=d.RGBA,this.format=d.RGBA,this.textureType=d.UNSIGNED_BYTE,this.channelSize=_}}encode(d,_){return new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}allocate(d){return new Uint8Array(d*this.channelSize)}decode(d,_){if(d instanceof Uint8Array)return d.subarray(0,_);throw new Error(`Invalid array type: ${d.constructor}`)}}},7859:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getBatchDim=s.sizeToSquarishShape=s.getRowsCols=s.sizeFromShape=s.isInt=s.parseAxisParam=s.squeezeShape=s.PreferLogicalStrategy=s.AlwaysKeepOriginalSizeStrategy=void 0;const a=i(6231),d=i(2517);function _(et,g){const c=[],j=[],_e=g!=null&&Array.isArray(g)&&g.length===0,rt=g==null||_e?null:b(g,et).sort();let st=0;for(let ot=0;ot<et.length;++ot){if(rt!=null){if(rt[st]===ot&&et[ot]!==1)throw new Error(`Can't squeeze axis ${ot} since its dim '${et[ot]}' is not 1`);(rt[st]==null||rt[st]>ot)&&et[ot]===1&&(c.push(et[ot]),j.push(ot)),rt[st]<=ot&&st++}et[ot]!==1&&(c.push(et[ot]),j.push(ot))}return{newShape:c,keptDims:j}}function b(et,g){const c=g.length;return et=et==null?g.map((j,_e)=>_e):[].concat(et),(0,d.assert)(et.every(j=>j>=-c&&j<c),()=>`All values in axis param must be in range [-${c}, ${c}) but got axis ${et}`),(0,d.assert)(et.every($),()=>`All values in axis param must be integers but got axis ${et}`),et.map(j=>j<0?c+j:j)}function $(et){return et%1==0}function nt(et){if(et.length===0)return 1;let g=et[0];for(let c=1;c<et.length;c++)g*=et[c];return g}function tt(et){const g=Math.ceil(Math.sqrt(et));return[g,Math.ceil(et/g)]}s.AlwaysKeepOriginalSizeStrategy=class{constructor(et){this.maxTextureSize=et}computeTextureWH(et,g){if(et.length===0)return[1,1];const c=this.maxTextureSize;if(g&&g.breakAxis!==void 0){const rt=g.breakAxis>=et.length?1:et.slice(g.breakAxis).reduce((ot,it)=>ot*it),st=g.breakAxis<=0?1:et.slice(0,g.breakAxis).reduce((ot,it)=>ot*it);if(!(rt>c||st>c))return[rt,st];a.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${et}, breakAxis:${g.breakAxis}`)}const j=et.reduce((rt,st)=>rt*st);let _e=Math.floor(Math.sqrt(j));for(;_e<c&&_e<j&&j%_e!=0;_e++);if(_e>=c||j%_e!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${et}`);return[_e,j/_e]}},s.PreferLogicalStrategy=class{constructor(et){this.maxTextureSize=et}computeTextureWH(et,g){const c=this.computeTexture(et,g);return g&&g.isPacked&&(c[0]/=2,c[1]/=2),g&&g.reverseWH?[c[1],c[0]]:c}computeTexture(et,g){const c=g&&g.isPacked;if(et.length===0)return c?[2,2]:[1,1];let j=this.maxTextureSize;if(g&&g.breakAxis!==void 0){const st=g.breakAxis>=et.length?1:et.slice(g.breakAxis).reduce((it,at)=>it*at),ot=g.breakAxis<=0?1:et.slice(0,g.breakAxis).reduce((it,at)=>it*at);if(!(st>j||ot>j))return[st,ot];a.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${et}, breakAxis:${g.breakAxis}`)}let _e=et.slice(0);c&&(j*=2,_e=_e.map((st,ot)=>ot>=_e.length-2?_e[ot]%2==0?_e[ot]:_e[ot]+1:_e[ot]),_e.length===1&&(_e=[2,_e[0]])),_e.length!==2&&(_e=_(_e).newShape);const rt=nt(_e);return _e.length<=1&&rt<=j?[1,rt]:_e.length===2&&_e[0]<=j&&_e[1]<=j?_e:_e.length===3&&_e[0]*_e[1]<=j&&_e[2]<=j?[_e[0]*_e[1],_e[2]]:_e.length===3&&_e[0]<=j&&_e[1]*_e[2]<=j?[_e[0],_e[1]*_e[2]]:_e.length===4&&_e[0]*_e[1]*_e[2]<=j&&_e[3]<=j?[_e[0]*_e[1]*_e[2],_e[3]]:_e.length===4&&_e[0]<=j&&_e[1]*_e[2]*_e[3]<=j?[_e[0],_e[1]*_e[2]*_e[3]]:c?tt(rt/4).map(st=>2*st):tt(rt)}},s.squeezeShape=_,s.parseAxisParam=b,s.isInt=$,s.sizeFromShape=nt,s.getRowsCols=function(et){if(et.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[et.length>1?et[et.length-2]:1,et[et.length-1]]},s.sizeToSquarishShape=tt,s.getBatchDim=function(et,g=2){return nt(et.slice(0,et.length-g))}},4057:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createTextureLayoutFromShape=s.calculateTextureWidthAndHeight=s.createTextureLayoutFromTextureType=void 0;const a=i(2517),d=i(2039);s.createTextureLayoutFromTextureType=(_,b,$)=>{const nt=$===d.TextureType.unpacked||$===d.TextureType.unpackedReversed?1:4,tt=$===d.TextureType.packed,et=$===d.TextureType.unpackedReversed||$===d.TextureType.packed,g=$===d.TextureType.packedLastDimension?b.length-1:void 0,c=$===d.TextureType.packedLastDimension?b.map((j,_e)=>_e===b.length-1?4*j:j):void 0;return(0,s.createTextureLayoutFromShape)(_,b,nt,c,{isPacked:tt,reverseWH:et,breakAxis:g})},s.calculateTextureWidthAndHeight=(_,b,$)=>{const nt=(0,s.createTextureLayoutFromTextureType)(_,b,$);return[nt.width,nt.height]},s.createTextureLayoutFromShape=(_,b,$=1,nt,tt)=>{const et=!(!tt||!tt.isPacked),[g,c]=_.computeTextureWH(et&&nt||b,tt),j=b.length;let _e=b.slice(0);if(j===0&&(_e=[1]),$===1)nt=b;else if(et){if($!==4)throw new Error("a packed texture must be 4-channel");nt=b,j>0&&(_e[j-1]=Math.ceil(_e[j-1]/2)),j>1&&(_e[j-2]=Math.ceil(_e[j-2]/2))}else if(!nt)throw new Error("Unpacked shape is needed when using channels > 1");return{width:g,height:c,channels:$,isPacked:et,shape:_e,strides:a.ShapeUtil.computeStrides(_e),unpackedShape:nt,reversedWH:tt&&tt.reverseWH}}},5702:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextureManager=void 0;const a=i(6231);s.TextureManager=class{constructor(d,_,b,$){this.glContext=d,this.layoutStrategy=_,this.profiler=b,this.config=$,this.pendingRead=new Map,$.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(d,_,b,$){const nt=this.toEncoderType(d),tt=this.glContext.getEncoder(nt,_.channels||1,$);if(_.isPacked&&$===1)throw new Error("not implemented");const et=_.width,g=_.height;let c,j;if(this.config.reuseTextures){c=`${et}x${g}_${tt.format}_${tt.internalFormat}_${tt.textureType}`,j=this.inUseTextures.get(c),j||(j=[],this.inUseTextures.set(c,j));const rt=this.idleTextures.get(c);if(rt&&rt.length>0){const st=rt.pop();return j.push(st),$===1&&this.glContext.updateTexture(st,et,g,tt,this.toTextureData(d,b)),st}}a.Logger.verbose("TextureManager",`Creating new texture of size ${_.width}x${_.height}`);const _e=this.glContext.allocateTexture(et,g,tt,this.toTextureData(d,b));return this.config.reuseTextures&&(j.push(_e),this.textureLookup.set(_e,c)),_e}readTexture(d,_,b){return b||(b=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const $=d.shape.reduce((tt,et)=>tt*et)*b,nt=this.glContext.readTexture(d.texture,d.width,d.height,$,this.toEncoderType(_),b);return this.toTensorData(_,nt)})}async readTextureAsync(d,_,b){const $=d.tensor.dataId;if(b||(b=1),this.pendingRead.has($)){const nt=this.pendingRead.get($);return new Promise(tt=>nt==null?void 0:nt.push(tt))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set($,[]);const nt=d.shape.reduce((c,j)=>c*j)*b;await this.glContext.createAndWaitForFence();const tt=this.glContext.readTexture(d.texture,d.width,d.height,nt,this.toEncoderType(_),b),et=this.toTensorData(_,tt),g=this.pendingRead.get($);return this.pendingRead.delete($),g==null||g.forEach(c=>c(et)),et})}readUint8TextureAsFloat(d){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const _=d.shape.reduce(($,nt)=>$*nt),b=this.glContext.readTexture(d.texture,d.width,d.height,4*_,"byte",4);return new Float32Array(b.buffer,b.byteOffset,_)})}releaseTexture(d,_){let b;if(this.config.reuseTextures&&(b=this.textureLookup.get(d.texture),b)){_&&this.textureLookup.delete(b);const $=this.inUseTextures.get(b);if($){const nt=$.indexOf(d.texture);if(nt!==-1){$.splice(nt,1);let tt=this.idleTextures.get(b);tt||(tt=[],this.idleTextures.set(b,tt)),tt.push(d.texture)}}}b&&!_||(a.Logger.verbose("TextureManager",`Deleting texture of size ${d.width}x${d.height}`),this.glContext.deleteTexture(d.texture))}toTensorData(d,_){switch(d){case"int16":return _ instanceof Int16Array?_:Int16Array.from(_);case"int32":return _ instanceof Int32Array?_:Int32Array.from(_);case"int8":return _ instanceof Int8Array?_:Int8Array.from(_);case"uint16":return _ instanceof Uint16Array?_:Uint16Array.from(_);case"uint32":return _ instanceof Uint32Array?_:Uint32Array.from(_);case"uint8":case"bool":return _ instanceof Uint8Array?_:Uint8Array.from(_);case"float32":return _ instanceof Float32Array?_:Float32Array.from(_);case"float64":return _ instanceof Float64Array?_:Float64Array.from(_);default:throw new Error(`TensorData type ${d} is not supported`)}}toTextureData(d,_){if(_)return _ instanceof Float32Array?_:new Float32Array(_)}toEncoderType(d){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(o,s)=>{var i;Object.defineProperty(s,"__esModule",{value:!0}),s.TextureType=void 0,(i=s.TextureType||(s.TextureType={}))[i.unpacked=0]="unpacked",i[i.unpackedReversed=1]="unpackedReversed",i[i.packed=2]="packed",i[i.downloadUint8AsFloat=3]="downloadUint8AsFloat",i[i.packedLastDimension=4]="packedLastDimension"},9390:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getGlChannels=s.getCoordsDataType=s.getSqueezedParams=s.squeezeInputShape=s.generateShaderFuncNameFromInputSamplerNameAtOutCoords=s.generateShaderFuncNameFromInputSamplerName=s.repeatedTry=s.getPackedShape=void 0;const a=i(2517);s.getPackedShape=function(d){const _=d.length;return d.slice(0,_-1).concat(d[_-1]/4)},s.repeatedTry=async function(d,_=$=>0,b){return new Promise(($,nt)=>{let tt=0;const et=()=>{if(d())return void $();tt++;const g=_(tt);b!=null&&tt>=b?nt():setTimeout(et,g)};et()})},s.generateShaderFuncNameFromInputSamplerName=function(d){return(0,a.assert)(d!==void 0&&d.length!==0,()=>"empty string found for sampler name"),"get"+d.charAt(0).toUpperCase()+d.slice(1)},s.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(d){return(0,a.assert)(d!==void 0&&d.length!==0,()=>"empty string found for sampler name"),"get"+d.charAt(0).toUpperCase()+d.slice(1)+"AtOutCoords"},s.squeezeInputShape=function(d,_){let b=JSON.parse(JSON.stringify(d));return b=_,b},s.getSqueezedParams=function(d,_){return _.map(b=>d[b]).join(", ")},s.getCoordsDataType=function(d){if(d<=1)return"int";if(d===2)return"ivec2";if(d===3)return"ivec3";if(d===4)return"ivec4";if(d===5)return"ivec5";if(d===6)return"ivec6";throw Error(`GPU for rank ${d} is not yet supported`)},s.getGlChannels=function(d=6){return["x","y","z","w","u","v"].slice(0,d)}},7305:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createNewWebGLContext=s.createWebGLContext=void 0;const a=i(6231),d=i(1713),_={};function b($){const nt=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const g=document.createElement("canvas");return g.width=1,g.height=1,g}();let tt;const et={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!$||$==="webgl2")&&(tt=nt.getContext("webgl2",et),tt))try{return new d.WebGLContext(tt,2)}catch(g){a.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${g}`)}if((!$||$==="webgl")&&(tt=nt.getContext("webgl",et)||nt.getContext("experimental-webgl",et),tt))try{return new d.WebGLContext(tt,1)}catch(g){a.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${g}`)}throw new Error("WebGL is not supported")}s.createWebGLContext=function $(nt){let tt;nt&&nt!=="webgl2"||!("webgl2"in _)?nt&&nt!=="webgl"||!("webgl"in _)||(tt=_.webgl):tt=_.webgl2,tt=tt||b(nt),nt=nt||tt.version===1?"webgl":"webgl2";const et=tt.gl;return _[nt]=tt,et.isContextLost()?(delete _[nt],$(nt)):(et.disable(et.DEPTH_TEST),et.disable(et.STENCIL_TEST),et.disable(et.BLEND),et.disable(et.DITHER),et.disable(et.POLYGON_OFFSET_FILL),et.disable(et.SAMPLE_COVERAGE),et.enable(et.SCISSOR_TEST),et.enable(et.CULL_FACE),et.cullFace(et.BACK),tt)},s.createNewWebGLContext=b},1713:function(o,s,i){var a=this&&this.__createBinding||(Object.create?function(et,g,c,j){j===void 0&&(j=c);var _e=Object.getOwnPropertyDescriptor(g,c);_e&&!("get"in _e?!g.__esModule:_e.writable||_e.configurable)||(_e={enumerable:!0,get:function(){return g[c]}}),Object.defineProperty(et,j,_e)}:function(et,g,c,j){j===void 0&&(j=c),et[j]=g[c]}),d=this&&this.__setModuleDefault||(Object.create?function(et,g){Object.defineProperty(et,"default",{enumerable:!0,value:g})}:function(et,g){et.default=g}),_=this&&this.__importStar||function(et){if(et&&et.__esModule)return et;var g={};if(et!=null)for(var c in et)c!=="default"&&Object.prototype.hasOwnProperty.call(et,c)&&a(g,et,c);return d(g,et),g};Object.defineProperty(s,"__esModule",{value:!0}),s.WebGLContext=s.linearSearchLastTrue=void 0;const b=i(1670),$=_(i(7769)),nt=i(9390);function tt(et){let g=0;for(;g<et.length&&et[g]();++g);return g-1}s.linearSearchLastTrue=tt,s.WebGLContext=class{constructor(et,g){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=et,this.version=g,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(et,g,c,j){const _e=this.gl,rt=_e.createTexture();_e.bindTexture(_e.TEXTURE_2D,rt),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MIN_FILTER,_e.NEAREST),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MAG_FILTER,_e.NEAREST),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE);const st=j?c.encode(j,et*g):null;return _e.texImage2D(_e.TEXTURE_2D,0,c.internalFormat,et,g,0,c.format,c.textureType,st),this.checkError(),rt}updateTexture(et,g,c,j,_e){const rt=this.gl;rt.bindTexture(rt.TEXTURE_2D,et);const st=j.encode(_e,g*c);rt.texSubImage2D(rt.TEXTURE_2D,0,0,0,g,c,j.format,j.textureType,st),this.checkError()}attachFramebuffer(et,g,c){const j=this.gl;j.bindTexture(j.TEXTURE_2D,et),j.bindFramebuffer(j.FRAMEBUFFER,this.framebuffer),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,et,0),this.checkError(),j.viewport(0,0,g,c),j.scissor(0,0,g,c)}readTexture(et,g,c,j,_e,rt){const st=this.gl;rt||(rt=1),this.frameBufferBound||this.attachFramebuffer(et,g,c);const ot=this.getEncoder(_e,rt),it=ot.allocate(g*c);return st.bindTexture(st.TEXTURE_2D,et),st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_2D,et,0),st.readPixels(0,0,g,c,st.RGBA,ot.textureType,it),this.checkError(),ot.decode(it,j)}isFramebufferReady(){return!0}getActiveTexture(){const et=this.gl;return"TEXTURE"+(et.getParameter(this.gl.ACTIVE_TEXTURE)-et.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(et,g){const c=this.gl;c.vertexAttribPointer(et,3,c.FLOAT,!1,20,0),c.enableVertexAttribArray(et),g!==-1&&(c.vertexAttribPointer(g,2,c.FLOAT,!1,20,12),c.enableVertexAttribArray(g)),this.checkError()}createProgram(et,g){const c=this.gl,j=c.createProgram();return c.attachShader(j,et),c.attachShader(j,g),c.linkProgram(j),j}compileShader(et,g){const c=this.gl,j=c.createShader(g);if(!j)throw new Error(`createShader() returned null with type ${g}`);if(c.shaderSource(j,et),c.compileShader(j),c.getShaderParameter(j,c.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${c.getShaderInfoLog(j)}
Shader source:
${et}`);return j}deleteShader(et){this.gl.deleteShader(et)}bindTextureToUniform(et,g,c){const j=this.gl;j.activeTexture(j.TEXTURE0+g),this.checkError(),j.bindTexture(j.TEXTURE_2D,et),this.checkError(),j.uniform1i(c,g),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(b.env.debug){const et=this.gl,g=et.getError();let c="";switch(g){case et.NO_ERROR:return;case et.INVALID_ENUM:c="INVALID_ENUM";break;case et.INVALID_VALUE:c="INVALID_VALUE";break;case et.INVALID_OPERATION:c="INVALID_OPERATION";break;case et.INVALID_FRAMEBUFFER_OPERATION:c="INVALID_FRAMEBUFFER_OPERATION";break;case et.OUT_OF_MEMORY:c="OUT_OF_MEMORY";break;case et.CONTEXT_LOST_WEBGL:c="CONTEXT_LOST_WEBGL";break;default:c=`Unknown WebGL Error: ${g.toString(16)}`}throw new Error(c)}}deleteTexture(et){this.gl.deleteTexture(et)}deleteProgram(et){this.gl.deleteProgram(et)}getEncoder(et,g,c=0){if(this.version===2)return new $.RedFloat32DataEncoder(this.gl,g);switch(et){case"float":return c===1||this.isRenderFloat32Supported?new $.RGBAFloatDataEncoder(this.gl,g):new $.RGBAFloatDataEncoder(this.gl,g,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new $.Uint8DataEncoder(this.gl,g);default:throw new Error(`Invalid dataType: ${et}`)}}clearActiveTextures(){const et=this.gl;for(let g=0;g<this.maxTextureImageUnits;++g)et.activeTexture(et.TEXTURE0+g),et.bindTexture(et.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const et=this.gl;et.bindFramebuffer(et.FRAMEBUFFER,null),et.deleteFramebuffer(this.framebuffer),et.bindBuffer(et.ARRAY_BUFFER,null),et.deleteBuffer(this.vertexbuffer),et.bindBuffer(et.ELEMENT_ARRAY_BUFFER,null),et.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const et=this.gl,g=et.createBuffer();if(!g)throw new Error("createBuffer() returned null");const c=this.createDefaultGeometry();return et.bindBuffer(et.ARRAY_BUFFER,g),et.bufferData(et.ARRAY_BUFFER,c,et.STATIC_DRAW),this.checkError(),g}createFramebuffer(){const et=this.gl.createFramebuffer();if(!et)throw new Error("createFramebuffer returned null");return et}queryVitalParameters(){const et=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=et.getParameter(et.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=et.getParameter(et.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const et=this.gl,g=et.createTexture();et.bindTexture(et.TEXTURE_2D,g);const c=this.version===2?et.RGBA32F:et.RGBA;et.texImage2D(et.TEXTURE_2D,0,c,1,1,0,et.RGBA,et.FLOAT,null);const j=et.createFramebuffer();et.bindFramebuffer(et.FRAMEBUFFER,j),et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,g,0);const _e=et.checkFramebufferStatus(et.FRAMEBUFFER)===et.FRAMEBUFFER_COMPLETE;return et.bindTexture(et.TEXTURE_2D,null),et.bindFramebuffer(et.FRAMEBUFFER,null),et.deleteTexture(g),et.deleteFramebuffer(j),_e}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const et=this.gl;let g,c,j,_e,rt;try{g=et.createTexture(),c=et.createFramebuffer(),et.bindTexture(et.TEXTURE_2D,g);const st=this.version===2?et.RGBA32F:et.RGBA;return et.texImage2D(et.TEXTURE_2D,0,st,1,1,0,et.RGBA,et.FLOAT,null),et.bindFramebuffer(et.FRAMEBUFFER,c),et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,g,0),et.enable(et.BLEND),j=et.createShader(et.VERTEX_SHADER),!!j&&(et.shaderSource(j,"void main(){}"),et.compileShader(j),_e=et.createShader(et.FRAGMENT_SHADER),!!_e&&(et.shaderSource(_e,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),et.compileShader(_e),rt=et.createProgram(),!!rt&&(et.attachShader(rt,j),et.attachShader(rt,_e),et.linkProgram(rt),et.useProgram(rt),et.drawArrays(et.POINTS,0,1),et.getError()===et.NO_ERROR)))}finally{et.disable(et.BLEND),rt&&et.deleteProgram(rt),j&&et.deleteShader(j),_e&&et.deleteShader(_e),c&&(et.bindFramebuffer(et.FRAMEBUFFER,null),et.deleteFramebuffer(c)),g&&(et.bindTexture(et.TEXTURE_2D,null),et.deleteTexture(g))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const et=this.gl,g=this.disjointTimerQueryWebgl2Extension,c=et.createQuery();return et.beginQuery(g.TIME_ELAPSED_EXT,c),c}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const et=this.gl,g=this.disjointTimerQueryWebgl2Extension;et.endQuery(g.TIME_ELAPSED_EXT)}}isTimerResultAvailable(et){let g=!1,c=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const j=this.gl,_e=this.disjointTimerQueryWebgl2Extension;g=j.getQueryParameter(et,j.QUERY_RESULT_AVAILABLE),c=j.getParameter(_e.GPU_DISJOINT_EXT)}return g&&!c}getTimerResult(et){let g=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const c=this.gl;g=c.getQueryParameter(et,c.QUERY_RESULT),c.deleteQuery(et)}return g/1e6}async waitForQueryAndGetTime(et){return await(0,nt.repeatedTry)(()=>this.isTimerResultAvailable(et)),this.getTimerResult(et)}async createAndWaitForFence(){const et=this.createFence(this.gl);return this.pollFence(et)}createFence(et){let g;const c=et,j=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);return et.flush(),g=j===null?()=>!0:()=>{const _e=c.clientWaitSync(j,0,0);return _e===c.ALREADY_SIGNALED||_e===c.CONDITION_SATISFIED},{query:j,isFencePassed:g}}async pollFence(et){return new Promise(g=>{this.addItemToPoll(()=>et.isFencePassed(),()=>g())})}pollItems(){const et=tt(this.itemsToPoll.map(g=>g.isDoneFn));for(let g=0;g<=et;++g){const{resolveFn:c}=this.itemsToPoll[g];c()}this.itemsToPoll=this.itemsToPoll.slice(et+1)}async addItemToPoll(et,g){this.itemsToPoll.push({isDoneFn:et,resolveFn:g}),this.itemsToPoll.length>1||await(0,nt.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExecutionPlan=void 0;const a=i(6231);class d{constructor(b,$){this.op=b,this.node=$}}s.ExecutionPlan=class{constructor(_,b,$){this.graph=_,this.profiler=$,this.initialize(b)}initialize(_){this.profiler.event("session","ExecutionPlan.initialize",()=>{const b=this.graph.getNodes();if(b.length!==_.length)throw new Error("The size of nodes and OPs do not match.");this._ops=_.map(($,nt)=>new d($,b[nt])),this.reset(),this._starter=[],this._ops.forEach(($,nt)=>{let tt=!0;for(const et of $.node.inputs)if(!this._values[et]&&this.graph.getInputIndices().indexOf(et)===-1){tt=!1;break}tt&&this._starter.push(nt)})})}reset(){this._values=this.graph.getValues().map(_=>_.tensor)}async execute(_,b){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const $=_.createInferenceHandler(),nt=this.graph.getInputIndices();if(b.length!==nt.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${b.length} expected: ${nt.length}`);b.forEach((_e,rt)=>{const st=nt[rt];this._values[st]=_e});const tt=this._starter.slice(0),et=this.graph.getValues(),g=this.graph.getNodes();let c=0;for(;c<tt.length;){const _e=tt[c++],rt=this._ops[_e],st=rt.node.inputs.map(lt=>this._values[lt]);if(st.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${rt.node}`);const ot=st;a.Logger.verbose("ExecPlan",`Runing op:${rt.node.name} (${ot.map((lt,ut)=>`'${rt.node.inputs[ut]}': ${lt.type}[${lt.dims.join(",")}]`).join(", ")})`);const it=await this.profiler.event("node",rt.node.name,async()=>rt.op.impl($,ot,rt.op.context));if(it.length!==rt.node.outputs.length)throw new Error("the size of output does not match model definition.");it.forEach((lt,ut)=>{const ct=rt.node.outputs[ut];if(this._values[ct])throw new Error(`output [${ct}] already has value: op:${rt.node.name}`);this._values[ct]=lt});const at=new Set;it.forEach((lt,ut)=>{const ct=rt.node.outputs[ut];for(const dt of et[ct].to){const ft=g[dt];let ht=!0;for(const mt of ft.inputs)if(!this._values[mt]){ht=!1;break}ht&&at.add(dt)}}),tt.push(...at)}const j=[];for(let _e=0;_e<this.graph.getOutputIndices().length;_e++){const rt=this.graph.getOutputIndices()[_e],st=this._values[rt];if(st===void 0)throw new Error(`required output [${rt}] does not have value`);rt===0?await st.getData():st.data,j.push(st)}return a.Logger.verbose("ExecPlan","disposing of inferenceHandler"),$.dispose(),j})}}},7070:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Graph=void 0;const a=i(1446),d=i(7778),_=i(9395),b=i(9162),$=i(2517);var nt=_.onnxruntime.experimental.fbs;s.Graph={from:(c,j)=>new g(c,j)};class tt{constructor(j){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,j&&(this.type=$.ProtoUtil.tensorValueTypeFromProto(j.type.tensorType))}get from(){return this._from}get to(){return this._to}}class et{constructor(j,_e){j instanceof a.onnx.NodeProto?(this.name=j.name,this.opType=j.opType,this.attributes=new d.Attribute(j.attribute)):j instanceof nt.Node&&(this.name=_e??j.name(),this.opType=j.opType(),this.attributes=new d.Attribute($.ProtoUtil.tensorAttributesFromORTFormat(j))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class g{constructor(j,_e){if(!j)throw new TypeError("graph is empty");this.buildGraph(j),this.transformGraph(_e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(j){if(j instanceof a.onnx.GraphProto)this.buildGraphFromOnnxFormat(j);else{if(!(j instanceof nt.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(j)}}buildGraphFromOnnxFormat(j){const _e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const rt=new Map;if(!j.input)throw new Error("missing information in graph: input");const st=[];for(const ot of j.input){if(_e.has(ot.name))throw new Error(`duplicated input name: ${ot.name}`);const it=this._allData.push(new tt(ot))-1;_e.set(ot.name,it),st.push(ot.name)}if(!j.initializer)throw new Error("missing information in graph: initializer");for(const ot of j.initializer){let it=_e.get(ot.name);if(it===void 0){const at=new tt;at.type={shape:{dims:$.ProtoUtil.tensorDimsFromProto(ot.dims)},tensorType:$.ProtoUtil.tensorDataTypeFromProto(ot.dataType)},it=this._allData.push(at)-1,_e.set(ot.name,it)}this._allData[it]._from=-1,this._allData[it].tensor=b.Tensor.fromProto(ot)}for(let ot=0;ot<this._allData.length;ot++)this._allData[ot].tensor||(this._allInputIndices.push(ot),this._allInputNames.push(st[ot]));if(!j.output)throw new Error("missing information in graph: output");for(const ot of j.output){if(_e.has(ot.name))throw new Error(`duplicated output name: ${ot.name}`);const it=this._allData.push(new tt(ot))-1;_e.set(ot.name,it),this._allOutputIndices.push(it),this._allOutputNames.push(ot.name)}if(!j.node)throw new Error("missing information in graph: node");for(const ot of j.node){if(!ot.name)for(let at=0;;at++){const lt=`unnamed_${ot.opType}_${at}`;if(!rt.has(lt)){ot.name=lt;break}}if(rt.has(ot.name))throw new Error(`duplicated node name: ${ot.name}`);const it=this._nodes.push(new et(ot))-1;rt.set(ot.name,it)}for(let ot=0;ot<this._nodes.length;ot++){const it=this._nodes[ot],at=j.node[ot];if(!at.output)throw new Error(`missing output for node: ${at.name}`);for(const lt of at.output){let ut=_e.get(lt);if(ut===void 0&&(ut=this._allData.push(new tt)-1,_e.set(lt,ut)),it.outputs.push(ut),this._allData[ut]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${ut}`);if(this._allData[ut]._from=ot,at.opType==="Constant"){if(!at.attribute||at.attribute.length!==1||!at.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!at.output||at.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");it.outputs.pop(),it.executeNode=!1,this._allData[ut]._from=-1,this._allData[ut].tensor=b.Tensor.fromProto(at.attribute[0].t)}}}for(let ot=0;ot<this._nodes.length;ot++){const it=this._nodes[ot],at=j.node[ot];if(!at.input)throw new Error(`missing input for node: ${at.name}`);for(const lt of at.input){const ut=_e.get(lt);if(ut===void 0){if(lt===""&&at.input.length===3&&at.opType==="Resize")continue;throw new Error(`unrecognized input '${lt}' for node: ${at.name}`)}it.inputs.push(ut),this._allData[ut]._to.push(ot)}}return!0}buildGraphFromOrtFormat(j){var _e,rt,st;const ot=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const it=new Map,at=[];for(let lt=0;lt<j.inputsLength();lt++){const ut=j.inputs(lt);if(ot.has(ut))throw new Error(`duplicated input name: ${ut}`);for(let ct=0;ct<j.nodeArgsLength();ct++)if(((_e=j.nodeArgs(ct))===null||_e===void 0?void 0:_e.name())===ut){const dt=new tt;if(((st=(rt=j.nodeArgs(ct))===null||rt===void 0?void 0:rt.type())===null||st===void 0?void 0:st.valueType())!==nt.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const ft=j.nodeArgs(ct).type().value(new nt.TensorTypeAndShape),ht=$.ProtoUtil.tensorDataTypeFromProto(ft.elemType()),mt=ft.shape(),yt=[];for(let St=0;St<mt.dimLength();St++)yt.push($.LongUtil.longToNumber(mt.dim(St).value().dimValue()));dt.type={shape:{dims:yt},tensorType:ht};const Tt=this._allData.push(dt)-1;ot.set(ut,Tt),at.push(ut)}}for(let lt=0;lt<j.initializersLength();lt++){const ut=j.initializers(lt);let ct=ot.get(ut.name());if(ct===void 0){const dt=new tt,ft=$.ProtoUtil.tensorDimsFromORTFormat(ut),ht=$.ProtoUtil.tensorDataTypeFromProto(ut.dataType());dt.type={shape:{dims:ft},tensorType:ht},ct=this._allData.push(dt)-1,ot.set(ut.name(),ct)}this._allData[ct]._from=-1,this._allData[ct].tensor=b.Tensor.fromOrtTensor(ut)}for(let lt=0;lt<this._allData.length;lt++)this._allData[lt].tensor||(this._allInputIndices.push(lt),this._allInputNames.push(at[lt]));for(let lt=0;lt<j.outputsLength();lt++){const ut=j.outputs(lt);if(ot.has(ut))throw new Error(`duplicated output name: ${ut}`);const ct=this._allData.push(new tt)-1;ot.set(ut,ct),this._allOutputIndices.push(ct),this._allOutputNames.push(ut)}if(!j.nodes)throw new Error("missing information in graph: node");for(let lt=0;lt<j.nodesLength();lt++){const ut=j.nodes(lt);let ct=ut.name();if(!ct)for(let ft=0;ct=`unnamed_${ut.opType()}_${ft}`,it.has(ct);ft++);if(it.has(ct))throw new Error(`duplicated node name: ${ct}`);const dt=this._nodes.push(new et(ut,ct))-1;it.set(ct,dt)}for(let lt=0;lt<this._nodes.length;lt++){const ut=this._nodes[lt],ct=j.nodes(lt);if(ct==null)throw new Error(`No node exists at index ${lt}`);if((ct==null?void 0:ct.outputsLength())===0)throw new Error(`missing output for node: ${ct.name}`);for(let dt=0;dt<(ct==null?void 0:ct.outputsLength());dt++){const ft=ct==null?void 0:ct.outputs(dt);let ht=ot.get(ft);if(ht===void 0&&(ht=this._allData.push(new tt)-1,ot.set(ft,ht)),ut.outputs.push(ht),this._allData[ht]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${ht}`);if(this._allData[ht]._from=lt,ct.opType()==="Constant"){if(ct.attributesLength()!==1||!ct.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(ct.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");ut.outputs.pop(),ut.executeNode=!1,this._allData[ht]._from=-1,this._allData[ht].tensor=b.Tensor.fromOrtTensor(ct.attributes(0).t())}}}for(let lt=0;lt<this._nodes.length;lt++){const ut=this._nodes[lt],ct=j.nodes(lt);if(ct.inputsLength()===0)throw new Error(`missing input for node: ${ct.name}`);for(let dt=0;dt<ct.inputsLength();dt++){const ft=ct.inputs(dt),ht=ot.get(ft);if(ht===void 0)throw new Error(`unrecognized input '${ft}' for node: ${ct.name()}`);ut.inputs.push(ht),this._allData[ht]._to.push(lt)}}}checkIsAcyclic(){const j=new Set;this._allInputIndices.forEach(st=>{this._allData[st]._to.forEach(ot=>{j.add(ot)})});const _e=Array.from(j),rt=new Array(this._nodes.length).fill("white");for(;_e.length>0;){const st=_e.pop();rt[st]==="gray"?rt[st]="black":(_e.push(st),rt[st]="gray",this._nodes[st].outputs.forEach(ot=>{const it=this._allData[ot];if(it.tensor!==void 0)throw new Error("node outputs should not be initialized");if(it._from!==st)throw new Error("from property of the Value object doesn't match index of Node being processed");it._to.forEach(at=>{if(rt[at]==="gray")throw new Error("model graph is cyclic");rt[at]==="white"&&_e.push(at)})}))}}transformGraph(j){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),j&&j.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let j=0;for(let _e=0;_e<this._nodes.length;_e++)this._nodes[_e].executeNode?j>0&&(this._nodes[_e].inputs.forEach(rt=>{const st=this._allData[rt]._to.indexOf(_e+j);st!==-1&&(this._allData[rt]._to[st]=_e)}),this._nodes[_e].outputs.forEach(rt=>{this._allData[rt]._from&&this._allData[rt]._from===_e+j&&(this._allData[rt]._from=_e)})):(j++,this._nodes[_e].outputs.forEach(rt=>{this._allData[rt]._from=-2}),this._nodes.splice(_e,1),_e--);j=0;for(let _e=0;_e<this._allData.length;_e++)if(this._allData[_e].from!==-2||this._allOutputIndices.indexOf(_e+j)!==-1){if(j>0){let rt=-1;this._allData[_e].from!==void 0&&this._allData[_e].from!==-1?(rt=this._nodes[this._allData[_e].from].outputs.indexOf(_e+j),rt!==-1&&(this._nodes[this._allData[_e].from].outputs[rt]=_e)):(rt=this._allInputIndices.indexOf(_e+j),rt!==-1&&(this._allInputIndices[rt]=_e)),this._allData[_e].to.forEach(st=>{rt=this._nodes[st].inputs.indexOf(_e+j),rt!==-1&&(this._nodes[st].inputs[rt]=_e)}),this._allData[_e].to.length===0&&(rt=this._allOutputIndices.indexOf(_e+j),rt!==-1&&(this._allOutputIndices[rt]=_e))}}else j++,this._allData.splice(_e,1),_e--}deleteNode(j){const _e=this._nodes[j];if(_e.outputs.length>1){for(let lt=1;lt<_e.outputs.length;lt++)if(this._allData[_e.outputs[lt]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}_e.executeNode=!1;const rt=_e.inputs[0],st=_e.outputs[0],ot=this._allData[st].to,it=this._allData[rt].to.indexOf(j);if(it===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[rt].to.splice(it,1),this._allData[st]._to=[];const at=this._allOutputIndices.indexOf(st);if(at!==-1&&(this._allOutputIndices[at]=rt),ot&&ot.length>0)for(const lt of ot){const ut=this._nodes[lt].inputs.indexOf(st);if(ut===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[lt].inputs[ut]=rt,this._allData[rt].to.push(lt)}}removeAllDropoutNodes(){let j=0;for(const _e of this._nodes){if(_e.opType==="Dropout"){if(_e.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(_e.outputs.length!==1&&_e.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(_e.outputs.length===2&&this._allData[_e.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(j)}j++}}removeAllIdentityNodes(){let j=0;for(const _e of this._nodes)_e.opType==="Identity"&&this.deleteNode(j),j++}isActivation(j){switch(j.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const j of this._nodes)if(j.opType==="Conv"){const _e=this._allData[j.outputs[0]]._to;if(_e.length===1&&this.isActivation(this._nodes[_e[0]])){const rt=this._nodes[_e[0]];if(rt.opType==="Clip")if(rt.inputs.length===1)try{j.attributes.set("activation_params","floats",[rt.attributes.getFloat("min"),rt.attributes.getFloat("max")])}catch{j.attributes.set("activation_params","floats",[$.MIN_CLIP,$.MAX_CLIP])}else{if(!(rt.inputs.length>=3&&this._allData[rt.inputs[1]].tensor!==void 0&&this._allData[rt.inputs[2]].tensor!==void 0))continue;j.attributes.set("activation_params","floats",[this._allData[rt.inputs[1]].tensor.floatData[0],this._allData[rt.inputs[2]].tensor.floatData[0]])}j.attributes.set("activation","string",rt.opType),this.deleteNode(_e[0])}}}}},6231:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.now=s.Profiler=s.Logger=void 0;const i={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},a={none:new class{log(et,g,c){}},console:new class{log(et,g,c){console.log(`${this.color(et)} ${c?"\x1B[35m"+c+"\x1B[0m ":""}${g}`)}color(et){switch(et){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${et}`)}}}},d={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let _={"":d};function b(et,g,c,j){if(g===void 0)return _e=et,{verbose:b.verbose.bind(null,_e),info:b.info.bind(null,_e),warning:b.warning.bind(null,_e),error:b.error.bind(null,_e),fatal:b.fatal.bind(null,_e)};if(c===void 0)$(et,g);else if(typeof c=="number"&&j===void 0)$(et,g);else if(typeof c=="string"&&j===void 0)$(et,c,0,g);else{if(typeof c!="string"||typeof j!="number")throw new TypeError("input is valid");$(et,c,0,g)}var _e}function $(et,g,c,j){const _e=_[j||""]||_[""];i[et]<i[_e.minimalSeverity]||(_e.logDateTime&&(g=`${new Date().toISOString()}|${g}`),_e.logSourceLocation,a[_e.provider].log(et,g,j))}(function(et){function g(j){_={},c("",j||{})}function c(j,_e){if(j==="*")g(_e);else{const rt=_[j]||d;_[j]={provider:_e.provider||rt.provider,minimalSeverity:_e.minimalSeverity||rt.minimalSeverity,logDateTime:_e.logDateTime===void 0?rt.logDateTime:_e.logDateTime,logSourceLocation:_e.logSourceLocation===void 0?rt.logSourceLocation:_e.logSourceLocation}}}et.verbose=function(j,_e){et("verbose",j,_e)},et.info=function(j,_e){et("info",j,_e)},et.warning=function(j,_e){et("warning",j,_e)},et.error=function(j,_e){et("error",j,_e)},et.fatal=function(j,_e){et("fatal",j,_e)},et.reset=g,et.set=c,et.setWithEnv=function(j){const _e={};j.logLevel&&(_e.minimalSeverity=j.logLevel),c("",_e)}})(b||(b={})),s.Logger=b;class nt{constructor(g,c,j,_e,rt,st){this.category=g,this.name=c,this.startTime=j,this.endCallback=_e,this.timer=rt,this.ctx=st}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class tt{constructor(g,c,j,_e){this.category=g,this.name=c,this.startTime=j,this.endTime=_e}}s.Profiler=class{static create(et){return et===void 0?new this:new this(et.maxNumberEvents,et.flushBatchSize,et.flushIntervalInMilliseconds)}constructor(et,g,c){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=et===void 0?1e4:et,this._flushBatchSize=g===void 0?10:g,this._flushIntervalInMilliseconds=c===void 0?5e3:c}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,s.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(et,g,c,j){const _e=this._started?this.begin(et,g,j):void 0;let rt=!1;const st=c();if(st&&typeof st.then=="function")return rt=!0,new Promise((ot,it)=>{st.then(async at=>{_e&&await _e.end(),ot(at)},async at=>{_e&&await _e.end(),it(at)})});if(!rt&&_e){const ot=_e.end();if(ot&&typeof ot.then=="function")return new Promise((it,at)=>{ot.then(()=>{it(st)},lt=>{at(lt)})})}return st}begin(et,g,c){if(!this._started)throw new Error("profiler is not started yet");if(c===void 0){const j=(0,s.now)();return this.flush(j),new nt(et,g,j,_e=>this.endSync(_e))}{const j=c.beginTimer();return new nt(et,g,0,async _e=>this.end(_e),j,c)}}async end(et){const g=await et.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new tt(et.category,et.name,et.startTime,g)),this.flush(g))}endSync(et){const g=(0,s.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new tt(et.category,et.name,et.startTime,g)),this.flush(g))}logOneEvent(et){s.Logger.verbose(`Profiler.${et.category}`,`${(et.endTime-et.startTime).toFixed(2)}ms on event '${et.name}' at ${et.endTime.toFixed(2)}`)}flush(et){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||et-this._flushTime>=this._flushIntervalInMilliseconds){for(const g=this._flushPointer;this._flushPointer<g+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,s.now)()}}get started(){return this._started}},s.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Model=void 0;const a=i(5686),d=i(1446),_=i(7070),b=i(9395),$=i(2517);var nt=b.onnxruntime.experimental.fbs;s.Model=class{constructor(){}load(tt,et,g){if(!g)try{return void this.loadFromOnnxFormat(tt,et)}catch(c){if(g!==void 0)throw c}this.loadFromOrtFormat(tt,et)}loadFromOnnxFormat(tt,et){const g=d.onnx.ModelProto.decode(tt);if($.LongUtil.longToNumber(g.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=g.opsetImport.map(c=>({domain:c.domain,version:$.LongUtil.longToNumber(c.version)})),this._graph=_.Graph.from(g.graph,et)}loadFromOrtFormat(tt,et){const g=new a.flatbuffers.ByteBuffer(tt),c=nt.InferenceSession.getRootAsInferenceSession(g).model();if($.LongUtil.longToNumber(c.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let j=0;j<c.opsetImportLength();j++){const _e=c.opsetImport(j);this._opsets.push({domain:_e==null?void 0:_e.domain(),version:$.LongUtil.longToNumber(_e.version())})}this._graph=_.Graph.from(c.graph(),et)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FLOAT_TYPES=s.INT_TYPES=s.NUMBER_TYPES=void 0,s.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],s.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],s.FLOAT_TYPES=["float32","float64"]},1047:(o,s)=>{function i(a,d){if(d.endsWith("+")){const _=Number.parseInt(d.substring(0,d.length-1),10);return!isNaN(_)&&_<=a}if(d.split("-").length===2){const _=d.split("-"),b=Number.parseInt(_[0],10),$=Number.parseInt(_[1],10);return!isNaN(b)&&!isNaN($)&&b<=a&&a<=$}return Number.parseInt(d,10)===a}Object.defineProperty(s,"__esModule",{value:!0}),s.resolveOperator=void 0,s.resolveOperator=function(a,d,_){for(const b of _){const $=b[0],nt=b[1],tt=b[2],et=b[3],g=b[4];if(a.opType===$){for(const c of d)if((c.domain===nt||c.domain==="ai.onnx"&&nt==="")&&i(c.version,tt))return{opImpl:et,opInit:g}}}throw new TypeError(`cannot resolve operator '${a.opType}' with opsets: ${d.map(b=>`${b.domain||"ai.onnx"} v${b.version}`).join(", ")}`)}},9395:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.onnxruntime=void 0;const a=i(5686);var d,_;d=s.onnxruntime||(s.onnxruntime={}),function(b){(function($){$[$.UNDEFINED=0]="UNDEFINED",$[$.FLOAT=1]="FLOAT",$[$.INT=2]="INT",$[$.STRING=3]="STRING",$[$.TENSOR=4]="TENSOR",$[$.GRAPH=5]="GRAPH",$[$.FLOATS=6]="FLOATS",$[$.INTS=7]="INTS",$[$.STRINGS=8]="STRINGS",$[$.TENSORS=9]="TENSORS",$[$.GRAPHS=10]="GRAPHS",$[$.SPARSE_TENSOR=11]="SPARSE_TENSOR",$[$.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(b.AttributeType||(b.AttributeType={}))}((_=d.experimental||(d.experimental={})).fbs||(_.fbs={})),function(b){(function($){(function(nt){(function(tt){tt[tt.UNKNOWN=0]="UNKNOWN",tt[tt.VALUE=1]="VALUE",tt[tt.PARAM=2]="PARAM"})(nt.DimensionValueType||(nt.DimensionValueType={}))})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){(function(tt){tt[tt.UNDEFINED=0]="UNDEFINED",tt[tt.FLOAT=1]="FLOAT",tt[tt.UINT8=2]="UINT8",tt[tt.INT8=3]="INT8",tt[tt.UINT16=4]="UINT16",tt[tt.INT16=5]="INT16",tt[tt.INT32=6]="INT32",tt[tt.INT64=7]="INT64",tt[tt.STRING=8]="STRING",tt[tt.BOOL=9]="BOOL",tt[tt.FLOAT16=10]="FLOAT16",tt[tt.DOUBLE=11]="DOUBLE",tt[tt.UINT32=12]="UINT32",tt[tt.UINT64=13]="UINT64",tt[tt.COMPLEX64=14]="COMPLEX64",tt[tt.COMPLEX128=15]="COMPLEX128",tt[tt.BFLOAT16=16]="BFLOAT16"})(nt.TensorDataType||(nt.TensorDataType={}))})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){(function(tt){tt[tt.Primitive=0]="Primitive",tt[tt.Fused=1]="Fused"})(nt.NodeType||(nt.NodeType={}))})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){(function(tt){tt[tt.NONE=0]="NONE",tt[tt.tensor_type=1]="tensor_type",tt[tt.sequence_type=2]="sequence_type",tt[tt.map_type=3]="map_type"})(nt.TypeInfoValue||(nt.TypeInfoValue={}))})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsShape(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsShape(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}dim(g,c){let j=this.bb.__offset(this.bb_pos,4);return j?(c||new b.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}dimLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}static startShape(g){g.startObject(1)}static addDim(g,c){g.addFieldOffset(0,c,0)}static createDimVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startDimVector(g,c){g.startVector(4,c,4)}static endShape(g){return g.endObject()}static createShape(g,c){return tt.startShape(g),tt.addDim(g,c),tt.endShape(g)}}nt.Shape=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsDimension(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsDimension(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}value(g){let c=this.bb.__offset(this.bb_pos,4);return c?(g||new b.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}denotation(g){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,g):null}static startDimension(g){g.startObject(2)}static addValue(g,c){g.addFieldOffset(0,c,0)}static addDenotation(g,c){g.addFieldOffset(1,c,0)}static endDimension(g){return g.endObject()}static createDimension(g,c,j){return tt.startDimension(g),tt.addValue(g,c),tt.addDenotation(g,j),tt.endDimension(g)}}nt.Dimension=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsDimensionValue(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsDimensionValue(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}dimType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt8(this.bb_pos+g):b.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}dimParam(g){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__string(this.bb_pos+c,g):null}static startDimensionValue(g){g.startObject(3)}static addDimType(g,c){g.addFieldInt8(0,c,b.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(g,c){g.addFieldInt64(1,c,g.createLong(0,0))}static addDimParam(g,c){g.addFieldOffset(2,c,0)}static endDimensionValue(g){return g.endObject()}static createDimensionValue(g,c,j,_e){return tt.startDimensionValue(g),tt.addDimType(g,c),tt.addDimValue(g,j),tt.addDimParam(g,_e),tt.endDimensionValue(g)}}nt.DimensionValue=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsTensorTypeAndShape(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTensorTypeAndShape(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}elemType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt32(this.bb_pos+g):b.experimental.fbs.TensorDataType.UNDEFINED}shape(g){let c=this.bb.__offset(this.bb_pos,6);return c?(g||new b.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startTensorTypeAndShape(g){g.startObject(2)}static addElemType(g,c){g.addFieldInt32(0,c,b.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(g,c){g.addFieldOffset(1,c,0)}static endTensorTypeAndShape(g){return g.endObject()}static createTensorTypeAndShape(g,c,j){return tt.startTensorTypeAndShape(g),tt.addElemType(g,c),tt.addShape(g,j),tt.endTensorTypeAndShape(g)}}nt.TensorTypeAndShape=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsMapType(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsMapType(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}keyType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt32(this.bb_pos+g):b.experimental.fbs.TensorDataType.UNDEFINED}valueType(g){let c=this.bb.__offset(this.bb_pos,6);return c?(g||new b.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startMapType(g){g.startObject(2)}static addKeyType(g,c){g.addFieldInt32(0,c,b.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(g,c){g.addFieldOffset(1,c,0)}static endMapType(g){return g.endObject()}static createMapType(g,c,j){return tt.startMapType(g),tt.addKeyType(g,c),tt.addValueType(g,j),tt.endMapType(g)}}nt.MapType=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsSequenceType(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSequenceType(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}elemType(g){let c=this.bb.__offset(this.bb_pos,4);return c?(g||new b.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startSequenceType(g){g.startObject(1)}static addElemType(g,c){g.addFieldOffset(0,c,0)}static endSequenceType(g){return g.endObject()}static createSequenceType(g,c){return tt.startSequenceType(g),tt.addElemType(g,c),tt.endSequenceType(g)}}nt.SequenceType=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){($.fbs||($.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(nt,tt){return this.bb_pos=nt,this.bb=tt,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(nt,tt,et,g){return nt.prep(4,12),nt.writeInt32(g),nt.writeInt32(et),nt.writeInt32(tt),nt.offset()}}})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsNodeEdge(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsNodeEdge(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}nodeIndex(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readUint32(this.bb_pos+g):0}inputEdges(g,c){let j=this.bb.__offset(this.bb_pos,6);return j?(c||new b.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+j)+12*g,this.bb):null}inputEdgesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}outputEdges(g,c){let j=this.bb.__offset(this.bb_pos,8);return j?(c||new b.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+j)+12*g,this.bb):null}outputEdgesLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}static startNodeEdge(g){g.startObject(3)}static addNodeIndex(g,c){g.addFieldInt32(0,c,0)}static addInputEdges(g,c){g.addFieldOffset(1,c,0)}static startInputEdgesVector(g,c){g.startVector(12,c,4)}static addOutputEdges(g,c){g.addFieldOffset(2,c,0)}static startOutputEdgesVector(g,c){g.startVector(12,c,4)}static endNodeEdge(g){return g.endObject()}static createNodeEdge(g,c,j,_e){return tt.startNodeEdge(g),tt.addNodeIndex(g,c),tt.addInputEdges(g,j),tt.addOutputEdges(g,_e),tt.endNodeEdge(g)}}nt.NodeEdge=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsNode(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsNode(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}name(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,g):null}docString(g){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,g):null}domain(g){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__string(this.bb_pos+c,g):null}sinceVersion(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readInt32(this.bb_pos+g):0}index(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.readUint32(this.bb_pos+g):0}opType(g){let c=this.bb.__offset(this.bb_pos,14);return c?this.bb.__string(this.bb_pos+c,g):null}type(){let g=this.bb.__offset(this.bb_pos,16);return g?this.bb.readInt32(this.bb_pos+g):b.experimental.fbs.NodeType.Primitive}executionProviderType(g){let c=this.bb.__offset(this.bb_pos,18);return c?this.bb.__string(this.bb_pos+c,g):null}inputs(g,c){let j=this.bb.__offset(this.bb_pos,20);return j?this.bb.__string(this.bb.__vector(this.bb_pos+j)+4*g,c):null}inputsLength(){let g=this.bb.__offset(this.bb_pos,20);return g?this.bb.__vector_len(this.bb_pos+g):0}outputs(g,c){let j=this.bb.__offset(this.bb_pos,22);return j?this.bb.__string(this.bb.__vector(this.bb_pos+j)+4*g,c):null}outputsLength(){let g=this.bb.__offset(this.bb_pos,22);return g?this.bb.__vector_len(this.bb_pos+g):0}attributes(g,c){let j=this.bb.__offset(this.bb_pos,24);return j?(c||new b.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}attributesLength(){let g=this.bb.__offset(this.bb_pos,24);return g?this.bb.__vector_len(this.bb_pos+g):0}inputArgCounts(g){let c=this.bb.__offset(this.bb_pos,26);return c?this.bb.readInt32(this.bb.__vector(this.bb_pos+c)+4*g):0}inputArgCountsLength(){let g=this.bb.__offset(this.bb_pos,26);return g?this.bb.__vector_len(this.bb_pos+g):0}inputArgCountsArray(){let g=this.bb.__offset(this.bb_pos,26);return g?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}implicitInputs(g,c){let j=this.bb.__offset(this.bb_pos,28);return j?this.bb.__string(this.bb.__vector(this.bb_pos+j)+4*g,c):null}implicitInputsLength(){let g=this.bb.__offset(this.bb_pos,28);return g?this.bb.__vector_len(this.bb_pos+g):0}static startNode(g){g.startObject(13)}static addName(g,c){g.addFieldOffset(0,c,0)}static addDocString(g,c){g.addFieldOffset(1,c,0)}static addDomain(g,c){g.addFieldOffset(2,c,0)}static addSinceVersion(g,c){g.addFieldInt32(3,c,0)}static addIndex(g,c){g.addFieldInt32(4,c,0)}static addOpType(g,c){g.addFieldOffset(5,c,0)}static addType(g,c){g.addFieldInt32(6,c,b.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(g,c){g.addFieldOffset(7,c,0)}static addInputs(g,c){g.addFieldOffset(8,c,0)}static createInputsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startInputsVector(g,c){g.startVector(4,c,4)}static addOutputs(g,c){g.addFieldOffset(9,c,0)}static createOutputsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startOutputsVector(g,c){g.startVector(4,c,4)}static addAttributes(g,c){g.addFieldOffset(10,c,0)}static createAttributesVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startAttributesVector(g,c){g.startVector(4,c,4)}static addInputArgCounts(g,c){g.addFieldOffset(11,c,0)}static createInputArgCountsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addInt32(c[j]);return g.endVector()}static startInputArgCountsVector(g,c){g.startVector(4,c,4)}static addImplicitInputs(g,c){g.addFieldOffset(12,c,0)}static createImplicitInputsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startImplicitInputsVector(g,c){g.startVector(4,c,4)}static endNode(g){return g.endObject()}static createNode(g,c,j,_e,rt,st,ot,it,at,lt,ut,ct,dt,ft){return tt.startNode(g),tt.addName(g,c),tt.addDocString(g,j),tt.addDomain(g,_e),tt.addSinceVersion(g,rt),tt.addIndex(g,st),tt.addOpType(g,ot),tt.addType(g,it),tt.addExecutionProviderType(g,at),tt.addInputs(g,lt),tt.addOutputs(g,ut),tt.addAttributes(g,ct),tt.addInputArgCounts(g,dt),tt.addImplicitInputs(g,ft),tt.endNode(g)}}nt.Node=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsValueInfo(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsValueInfo(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}name(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,g):null}docString(g){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,g):null}type(g){let c=this.bb.__offset(this.bb_pos,8);return c?(g||new b.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startValueInfo(g){g.startObject(3)}static addName(g,c){g.addFieldOffset(0,c,0)}static addDocString(g,c){g.addFieldOffset(1,c,0)}static addType(g,c){g.addFieldOffset(2,c,0)}static endValueInfo(g){return g.endObject()}static createValueInfo(g,c,j,_e){return tt.startValueInfo(g),tt.addName(g,c),tt.addDocString(g,j),tt.addType(g,_e),tt.endValueInfo(g)}}nt.ValueInfo=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsTypeInfo(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTypeInfo(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}denotation(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,g):null}valueType(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readUint8(this.bb_pos+g):b.experimental.fbs.TypeInfoValue.NONE}value(g){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__union(g,this.bb_pos+c):null}static startTypeInfo(g){g.startObject(3)}static addDenotation(g,c){g.addFieldOffset(0,c,0)}static addValueType(g,c){g.addFieldInt8(1,c,b.experimental.fbs.TypeInfoValue.NONE)}static addValue(g,c){g.addFieldOffset(2,c,0)}static endTypeInfo(g){return g.endObject()}static createTypeInfo(g,c,j,_e){return tt.startTypeInfo(g),tt.addDenotation(g,c),tt.addValueType(g,j),tt.addValue(g,_e),tt.endTypeInfo(g)}}nt.TypeInfo=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsOperatorSetId(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsOperatorSetId(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}domain(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,g):null}version(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}static startOperatorSetId(g){g.startObject(2)}static addDomain(g,c){g.addFieldOffset(0,c,0)}static addVersion(g,c){g.addFieldInt64(1,c,g.createLong(0,0))}static endOperatorSetId(g){return g.endObject()}static createOperatorSetId(g,c,j){return tt.startOperatorSetId(g),tt.addDomain(g,c),tt.addVersion(g,j),tt.endOperatorSetId(g)}}nt.OperatorSetId=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsTensor(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTensor(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}name(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,g):null}docString(g){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,g):null}dims(g){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.readInt64(this.bb.__vector(this.bb_pos+c)+8*g):this.bb.createLong(0,0)}dimsLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}dataType(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readInt32(this.bb_pos+g):b.experimental.fbs.TensorDataType.UNDEFINED}rawData(g){let c=this.bb.__offset(this.bb_pos,12);return c?this.bb.readUint8(this.bb.__vector(this.bb_pos+c)+g):0}rawDataLength(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.__vector_len(this.bb_pos+g):0}rawDataArray(){let g=this.bb.__offset(this.bb_pos,12);return g?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}stringData(g,c){let j=this.bb.__offset(this.bb_pos,14);return j?this.bb.__string(this.bb.__vector(this.bb_pos+j)+4*g,c):null}stringDataLength(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.__vector_len(this.bb_pos+g):0}static startTensor(g){g.startObject(6)}static addName(g,c){g.addFieldOffset(0,c,0)}static addDocString(g,c){g.addFieldOffset(1,c,0)}static addDims(g,c){g.addFieldOffset(2,c,0)}static createDimsVector(g,c){g.startVector(8,c.length,8);for(let j=c.length-1;j>=0;j--)g.addInt64(c[j]);return g.endVector()}static startDimsVector(g,c){g.startVector(8,c,8)}static addDataType(g,c){g.addFieldInt32(3,c,b.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(g,c){g.addFieldOffset(4,c,0)}static createRawDataVector(g,c){g.startVector(1,c.length,1);for(let j=c.length-1;j>=0;j--)g.addInt8(c[j]);return g.endVector()}static startRawDataVector(g,c){g.startVector(1,c,1)}static addStringData(g,c){g.addFieldOffset(5,c,0)}static createStringDataVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startStringDataVector(g,c){g.startVector(4,c,4)}static endTensor(g){return g.endObject()}static createTensor(g,c,j,_e,rt,st,ot){return tt.startTensor(g),tt.addName(g,c),tt.addDocString(g,j),tt.addDims(g,_e),tt.addDataType(g,rt),tt.addRawData(g,st),tt.addStringData(g,ot),tt.endTensor(g)}}nt.Tensor=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsSparseTensor(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSparseTensor(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}values(g){let c=this.bb.__offset(this.bb_pos,4);return c?(g||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}indices(g){let c=this.bb.__offset(this.bb_pos,6);return c?(g||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}dims(g){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.readInt64(this.bb.__vector(this.bb_pos+c)+8*g):this.bb.createLong(0,0)}dimsLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}static startSparseTensor(g){g.startObject(3)}static addValues(g,c){g.addFieldOffset(0,c,0)}static addIndices(g,c){g.addFieldOffset(1,c,0)}static addDims(g,c){g.addFieldOffset(2,c,0)}static createDimsVector(g,c){g.startVector(8,c.length,8);for(let j=c.length-1;j>=0;j--)g.addInt64(c[j]);return g.endVector()}static startDimsVector(g,c){g.startVector(8,c,8)}static endSparseTensor(g){return g.endObject()}static createSparseTensor(g,c,j,_e){return tt.startSparseTensor(g),tt.addValues(g,c),tt.addIndices(g,j),tt.addDims(g,_e),tt.endSparseTensor(g)}}nt.SparseTensor=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsAttribute(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsAttribute(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}name(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,g):null}docString(g){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,g):null}type(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.readInt32(this.bb_pos+g):b.experimental.fbs.AttributeType.UNDEFINED}f(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readFloat32(this.bb_pos+g):0}i(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}s(g){let c=this.bb.__offset(this.bb_pos,14);return c?this.bb.__string(this.bb_pos+c,g):null}t(g){let c=this.bb.__offset(this.bb_pos,16);return c?(g||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}g(g){let c=this.bb.__offset(this.bb_pos,18);return c?(g||new b.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}floats(g){let c=this.bb.__offset(this.bb_pos,20);return c?this.bb.readFloat32(this.bb.__vector(this.bb_pos+c)+4*g):0}floatsLength(){let g=this.bb.__offset(this.bb_pos,20);return g?this.bb.__vector_len(this.bb_pos+g):0}floatsArray(){let g=this.bb.__offset(this.bb_pos,20);return g?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}ints(g){let c=this.bb.__offset(this.bb_pos,22);return c?this.bb.readInt64(this.bb.__vector(this.bb_pos+c)+8*g):this.bb.createLong(0,0)}intsLength(){let g=this.bb.__offset(this.bb_pos,22);return g?this.bb.__vector_len(this.bb_pos+g):0}strings(g,c){let j=this.bb.__offset(this.bb_pos,24);return j?this.bb.__string(this.bb.__vector(this.bb_pos+j)+4*g,c):null}stringsLength(){let g=this.bb.__offset(this.bb_pos,24);return g?this.bb.__vector_len(this.bb_pos+g):0}tensors(g,c){let j=this.bb.__offset(this.bb_pos,26);return j?(c||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}tensorsLength(){let g=this.bb.__offset(this.bb_pos,26);return g?this.bb.__vector_len(this.bb_pos+g):0}graphs(g,c){let j=this.bb.__offset(this.bb_pos,28);return j?(c||new b.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}graphsLength(){let g=this.bb.__offset(this.bb_pos,28);return g?this.bb.__vector_len(this.bb_pos+g):0}static startAttribute(g){g.startObject(13)}static addName(g,c){g.addFieldOffset(0,c,0)}static addDocString(g,c){g.addFieldOffset(1,c,0)}static addType(g,c){g.addFieldInt32(2,c,b.experimental.fbs.AttributeType.UNDEFINED)}static addF(g,c){g.addFieldFloat32(3,c,0)}static addI(g,c){g.addFieldInt64(4,c,g.createLong(0,0))}static addS(g,c){g.addFieldOffset(5,c,0)}static addT(g,c){g.addFieldOffset(6,c,0)}static addG(g,c){g.addFieldOffset(7,c,0)}static addFloats(g,c){g.addFieldOffset(8,c,0)}static createFloatsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addFloat32(c[j]);return g.endVector()}static startFloatsVector(g,c){g.startVector(4,c,4)}static addInts(g,c){g.addFieldOffset(9,c,0)}static createIntsVector(g,c){g.startVector(8,c.length,8);for(let j=c.length-1;j>=0;j--)g.addInt64(c[j]);return g.endVector()}static startIntsVector(g,c){g.startVector(8,c,8)}static addStrings(g,c){g.addFieldOffset(10,c,0)}static createStringsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startStringsVector(g,c){g.startVector(4,c,4)}static addTensors(g,c){g.addFieldOffset(11,c,0)}static createTensorsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startTensorsVector(g,c){g.startVector(4,c,4)}static addGraphs(g,c){g.addFieldOffset(12,c,0)}static createGraphsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startGraphsVector(g,c){g.startVector(4,c,4)}static endAttribute(g){return g.endObject()}static createAttribute(g,c,j,_e,rt,st,ot,it,at,lt,ut,ct,dt,ft){return tt.startAttribute(g),tt.addName(g,c),tt.addDocString(g,j),tt.addType(g,_e),tt.addF(g,rt),tt.addI(g,st),tt.addS(g,ot),tt.addT(g,it),tt.addG(g,at),tt.addFloats(g,lt),tt.addInts(g,ut),tt.addStrings(g,ct),tt.addTensors(g,dt),tt.addGraphs(g,ft),tt.endAttribute(g)}}nt.Attribute=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsGraph(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsGraph(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}initializers(g,c){let j=this.bb.__offset(this.bb_pos,4);return j?(c||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}initializersLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}nodeArgs(g,c){let j=this.bb.__offset(this.bb_pos,6);return j?(c||new b.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}nodeArgsLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}nodes(g,c){let j=this.bb.__offset(this.bb_pos,8);return j?(c||new b.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}nodesLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}maxNodeIndex(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readUint32(this.bb_pos+g):0}nodeEdges(g,c){let j=this.bb.__offset(this.bb_pos,12);return j?(c||new b.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}nodeEdgesLength(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.__vector_len(this.bb_pos+g):0}inputs(g,c){let j=this.bb.__offset(this.bb_pos,14);return j?this.bb.__string(this.bb.__vector(this.bb_pos+j)+4*g,c):null}inputsLength(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.__vector_len(this.bb_pos+g):0}outputs(g,c){let j=this.bb.__offset(this.bb_pos,16);return j?this.bb.__string(this.bb.__vector(this.bb_pos+j)+4*g,c):null}outputsLength(){let g=this.bb.__offset(this.bb_pos,16);return g?this.bb.__vector_len(this.bb_pos+g):0}sparseInitializers(g,c){let j=this.bb.__offset(this.bb_pos,18);return j?(c||new b.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}sparseInitializersLength(){let g=this.bb.__offset(this.bb_pos,18);return g?this.bb.__vector_len(this.bb_pos+g):0}static startGraph(g){g.startObject(8)}static addInitializers(g,c){g.addFieldOffset(0,c,0)}static createInitializersVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startInitializersVector(g,c){g.startVector(4,c,4)}static addNodeArgs(g,c){g.addFieldOffset(1,c,0)}static createNodeArgsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startNodeArgsVector(g,c){g.startVector(4,c,4)}static addNodes(g,c){g.addFieldOffset(2,c,0)}static createNodesVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startNodesVector(g,c){g.startVector(4,c,4)}static addMaxNodeIndex(g,c){g.addFieldInt32(3,c,0)}static addNodeEdges(g,c){g.addFieldOffset(4,c,0)}static createNodeEdgesVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startNodeEdgesVector(g,c){g.startVector(4,c,4)}static addInputs(g,c){g.addFieldOffset(5,c,0)}static createInputsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startInputsVector(g,c){g.startVector(4,c,4)}static addOutputs(g,c){g.addFieldOffset(6,c,0)}static createOutputsVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startOutputsVector(g,c){g.startVector(4,c,4)}static addSparseInitializers(g,c){g.addFieldOffset(7,c,0)}static createSparseInitializersVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startSparseInitializersVector(g,c){g.startVector(4,c,4)}static endGraph(g){return g.endObject()}static createGraph(g,c,j,_e,rt,st,ot,it,at){return tt.startGraph(g),tt.addInitializers(g,c),tt.addNodeArgs(g,j),tt.addNodes(g,_e),tt.addMaxNodeIndex(g,rt),tt.addNodeEdges(g,st),tt.addInputs(g,ot),tt.addOutputs(g,it),tt.addSparseInitializers(g,at),tt.endGraph(g)}}nt.Graph=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsModel(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsModel(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}irVersion(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}opsetImport(g,c){let j=this.bb.__offset(this.bb_pos,6);return j?(c||new b.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}opsetImportLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}producerName(g){let c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__string(this.bb_pos+c,g):null}producerVersion(g){let c=this.bb.__offset(this.bb_pos,10);return c?this.bb.__string(this.bb_pos+c,g):null}domain(g){let c=this.bb.__offset(this.bb_pos,12);return c?this.bb.__string(this.bb_pos+c,g):null}modelVersion(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}docString(g){let c=this.bb.__offset(this.bb_pos,16);return c?this.bb.__string(this.bb_pos+c,g):null}graph(g){let c=this.bb.__offset(this.bb_pos,18);return c?(g||new b.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}graphDocString(g){let c=this.bb.__offset(this.bb_pos,20);return c?this.bb.__string(this.bb_pos+c,g):null}static startModel(g){g.startObject(9)}static addIrVersion(g,c){g.addFieldInt64(0,c,g.createLong(0,0))}static addOpsetImport(g,c){g.addFieldOffset(1,c,0)}static createOpsetImportVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startOpsetImportVector(g,c){g.startVector(4,c,4)}static addProducerName(g,c){g.addFieldOffset(2,c,0)}static addProducerVersion(g,c){g.addFieldOffset(3,c,0)}static addDomain(g,c){g.addFieldOffset(4,c,0)}static addModelVersion(g,c){g.addFieldInt64(5,c,g.createLong(0,0))}static addDocString(g,c){g.addFieldOffset(6,c,0)}static addGraph(g,c){g.addFieldOffset(7,c,0)}static addGraphDocString(g,c){g.addFieldOffset(8,c,0)}static endModel(g){return g.endObject()}static createModel(g,c,j,_e,rt,st,ot,it,at,lt){return tt.startModel(g),tt.addIrVersion(g,c),tt.addOpsetImport(g,j),tt.addProducerName(g,_e),tt.addProducerVersion(g,rt),tt.addDomain(g,st),tt.addModelVersion(g,ot),tt.addDocString(g,it),tt.addGraph(g,at),tt.addGraphDocString(g,lt),tt.endModel(g)}}nt.Model=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsKernelCreateInfos(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsKernelCreateInfos(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}nodeIndices(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.readUint32(this.bb.__vector(this.bb_pos+c)+4*g):0}nodeIndicesLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}nodeIndicesArray(){let g=this.bb.__offset(this.bb_pos,4);return g?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}kernelDefHashes(g){let c=this.bb.__offset(this.bb_pos,6);return c?this.bb.readUint64(this.bb.__vector(this.bb_pos+c)+8*g):this.bb.createLong(0,0)}kernelDefHashesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}static startKernelCreateInfos(g){g.startObject(2)}static addNodeIndices(g,c){g.addFieldOffset(0,c,0)}static createNodeIndicesVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addInt32(c[j]);return g.endVector()}static startNodeIndicesVector(g,c){g.startVector(4,c,4)}static addKernelDefHashes(g,c){g.addFieldOffset(1,c,0)}static createKernelDefHashesVector(g,c){g.startVector(8,c.length,8);for(let j=c.length-1;j>=0;j--)g.addInt64(c[j]);return g.endVector()}static startKernelDefHashesVector(g,c){g.startVector(8,c,8)}static endKernelCreateInfos(g){return g.endObject()}static createKernelCreateInfos(g,c,j){return tt.startKernelCreateInfos(g),tt.addNodeIndices(g,c),tt.addKernelDefHashes(g,j),tt.endKernelCreateInfos(g)}}nt.KernelCreateInfos=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsSubGraphSessionState(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSubGraphSessionState(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}graphId(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,g):null}sessionState(g){let c=this.bb.__offset(this.bb_pos,6);return c?(g||new b.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startSubGraphSessionState(g){g.startObject(2)}static addGraphId(g,c){g.addFieldOffset(0,c,0)}static addSessionState(g,c){g.addFieldOffset(1,c,0)}static endSubGraphSessionState(g){let c=g.endObject();return g.requiredField(c,4),c}static createSubGraphSessionState(g,c,j){return tt.startSubGraphSessionState(g),tt.addGraphId(g,c),tt.addSessionState(g,j),tt.endSubGraphSessionState(g)}}nt.SubGraphSessionState=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsSessionState(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSessionState(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}kernels(g){let c=this.bb.__offset(this.bb_pos,4);return c?(g||new b.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}subGraphSessionStates(g,c){let j=this.bb.__offset(this.bb_pos,6);return j?(c||new b.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+j)+4*g),this.bb):null}subGraphSessionStatesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}static startSessionState(g){g.startObject(2)}static addKernels(g,c){g.addFieldOffset(0,c,0)}static addSubGraphSessionStates(g,c){g.addFieldOffset(1,c,0)}static createSubGraphSessionStatesVector(g,c){g.startVector(4,c.length,4);for(let j=c.length-1;j>=0;j--)g.addOffset(c[j]);return g.endVector()}static startSubGraphSessionStatesVector(g,c){g.startVector(4,c,4)}static endSessionState(g){return g.endObject()}static createSessionState(g,c,j){return tt.startSessionState(g),tt.addKernels(g,c),tt.addSubGraphSessionStates(g,j),tt.endSessionState(g)}}nt.SessionState=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={})),function(b){(function($){(function(nt){class tt{constructor(){this.bb=null,this.bb_pos=0}__init(g,c){return this.bb_pos=g,this.bb=c,this}static getRootAsInferenceSession(g,c){return(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsInferenceSession(g,c){return g.setPosition(g.position()+a.flatbuffers.SIZE_PREFIX_LENGTH),(c||new tt).__init(g.readInt32(g.position())+g.position(),g)}static bufferHasIdentifier(g){return g.__has_identifier("ORTM")}ortVersion(g){let c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,g):null}model(g){let c=this.bb.__offset(this.bb_pos,6);return c?(g||new b.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}sessionState(g){let c=this.bb.__offset(this.bb_pos,8);return c?(g||new b.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startInferenceSession(g){g.startObject(3)}static addOrtVersion(g,c){g.addFieldOffset(0,c,0)}static addModel(g,c){g.addFieldOffset(1,c,0)}static addSessionState(g,c){g.addFieldOffset(2,c,0)}static endInferenceSession(g){return g.endObject()}static finishInferenceSessionBuffer(g,c){g.finish(c,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(g,c){g.finish(c,"ORTM",!0)}static createInferenceSession(g,c,j,_e){return tt.startInferenceSession(g),tt.addOrtVersion(g,c),tt.addModel(g,j),tt.addSessionState(g,_e),tt.endInferenceSession(g)}}nt.InferenceSession=tt})($.fbs||($.fbs={}))})(b.experimental||(b.experimental={}))}(s.onnxruntime||(s.onnxruntime={}))},7448:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OnnxjsSessionHandler=void 0;const a=i(1670),d=i(9162);s.OnnxjsSessionHandler=class{constructor(_){this.session=_,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(_,b,$){const nt=new Map;for(const g in _)if(Object.hasOwnProperty.call(_,g)){const c=_[g];nt.set(g,new d.Tensor(c.dims,c.type,void 0,void 0,c.data))}const tt=await this.session.run(nt),et={};return tt.forEach((g,c)=>{et[c]=new a.Tensor(g.type,g.data,g.dims)}),et}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Session=void 0;const a=i(7067),d=i(1296),_=i(7091),b=i(1036),$=i(6231),nt=i(2644);s.Session=class{constructor(tt={}){this._initialized=!1,this.backendHint=tt.backendHint,this.profiler=$.Profiler.create(tt.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(tt,et,g){await this.profiler.event("session","Session.loadModel",async()=>{const c=await(0,_.resolveBackend)(this.backendHint);if(this.sessionHandler=c.createSessionHandler(this.context),this._model=new nt.Model,typeof tt=="string"){const j=tt.endsWith(".ort");if(typeof fetch>"u"){const _e=await(0,d.promisify)(a.readFile)(tt);this.initialize(_e,j)}else{const _e=await fetch(tt),rt=await _e.arrayBuffer();this.initialize(new Uint8Array(rt),j)}}else if(ArrayBuffer.isView(tt))this.initialize(tt);else{const j=new Uint8Array(tt,et||0,g||tt.byteLength);this.initialize(j)}})}initialize(tt,et){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const g=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(tt,g,et),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new b.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(tt){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const et=this.normalizeAndValidateInputs(tt),g=await this._executionPlan.execute(this.sessionHandler,et);return this.createOutput(g)})}normalizeAndValidateInputs(tt){const et=this._model.graph.getInputNames();if(Array.isArray(tt)){if(tt.length!==et.length)throw new Error(`incorrect input array length: expected ${et.length} but got ${tt.length}`)}else{if(tt.size!==et.length)throw new Error(`incorrect input map size: expected ${et.length} but got ${tt.size}`);const g=new Array(tt.size);let c=0;for(let j=0;j<et.length;++j){const _e=tt.get(et[j]);if(!_e)throw new Error(`missing input tensor for: '${name}'`);g[c++]=_e}tt=g}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,tt,!1);else{const g=this._model.graph.getInputIndices(),c=this._model.graph.getValues(),j=new Array(g.length);for(let _e=0;_e<g.length;++_e){const rt=c[g[_e]];j[_e]=rt.type.shape.dims,this.context.graphInputTypes.push(rt.type.tensorType),this.context.graphInputDims.push(tt[_e].dims)}this.validateInputTensorDims(j,tt,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,tt),tt}validateInputTensorTypes(tt,et){for(let g=0;g<et.length;g++){const c=tt[g],j=et[g].type;if(c!==j)throw new Error(`input tensor[${g}] check failed: expected type '${c}' but got ${j}`)}}validateInputTensorDims(tt,et,g){for(let c=0;c<et.length;c++){const j=tt[c],_e=et[c].dims;if(!this.compareTensorDims(j,_e,g))throw new Error(`input tensor[${c}] check failed: expected shape '[${j.join(",")}]' but got [${_e.join(",")}]`)}}compareTensorDims(tt,et,g){if(tt.length!==et.length)return!1;for(let c=0;c<tt.length;++c)if(tt[c]!==et[c]&&(!g||tt[c]!==0))return!1;return!0}createOutput(tt){const et=this._model.graph.getOutputNames();if(tt.length!==et.length)throw new Error("expected number of outputs do not match number of generated outputs");const g=new Map;for(let c=0;c<et.length;++c)g.set(et[c],tt[c]);return g}initializeOps(tt){const et=tt.getNodes();this._ops=new Array(et.length);for(let g=0;g<et.length;g++)this._ops[g]=this.sessionHandler.resolve(et[g],this._model.opsets,tt)}}},9162:function(o,s,i){var a=this&&this.__importDefault||function(rt){return rt&&rt.__esModule?rt:{default:rt}};Object.defineProperty(s,"__esModule",{value:!0}),s.Tensor=void 0;const d=i(3442),_=a(i(3720)),b=i(1446),$=i(9395),nt=i(2517);var tt=$.onnxruntime.experimental.fbs;class et{get data(){if(this.cache===void 0){const st=this.dataProvider(this.dataId);if(st.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=st}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(st){return this.data[nt.ShapeUtil.indicesToOffset(st,this.strides)]}set(st,ot){this.data[nt.ShapeUtil.indicesToOffset(st,this.strides)]=ot}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=nt.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(st,ot,it,at,lt,ut=d.Guid.create()){this.dims=st,this.type=ot,this.dataProvider=it,this.asyncDataProvider=at,this.cache=lt,this.dataId=ut,this.size=nt.ShapeUtil.validateDimsAndCalcSize(st);const ct=this.size,dt=it===void 0&&at===void 0&&lt===void 0;if(lt!==void 0&&lt.length!==ct)throw new RangeError("Input dims doesn't match data length.");if(ot==="string"){if(!(lt===void 0||Array.isArray(lt)&&lt.every(ft=>typeof ft=="string")))throw new TypeError("cache should be a string array");dt&&(this.cache=new Array(ct))}else{if(lt!==void 0){const ft=c(ot);if(!(lt instanceof ft))throw new TypeError(`cache should be type ${ft.name}`)}if(dt){const ft=new ArrayBuffer(ct*function(ht){switch(ht){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${ht}`)}}(ot));this.cache=function(ht,mt){return new(c(mt))(ht)}(ft,ot)}}}static fromProto(st){if(!st)throw new Error("cannot construct Value from an empty tensor");const ot=nt.ProtoUtil.tensorDataTypeFromProto(st.dataType),it=nt.ProtoUtil.tensorDimsFromProto(st.dims),at=new et(it,ot);if(ot==="string")st.stringData.forEach((lt,ut)=>{at.data[ut]=(0,nt.decodeUtf8String)(lt)});else if(st.rawData&&typeof st.rawData.byteLength=="number"&&st.rawData.byteLength>0){const lt=at.data,ut=new DataView(st.rawData.buffer,st.rawData.byteOffset,st.rawData.byteLength),ct=g(st.dataType),dt=st.rawData.byteLength/ct;if(st.rawData.byteLength%ct!=0)throw new Error("invalid buffer length");if(lt.length!==dt)throw new Error("buffer length mismatch");for(let ft=0;ft<dt;ft++){const ht=_e(ut,st.dataType,ft*ct);lt[ft]=ht}}else{let lt;switch(st.dataType){case b.onnx.TensorProto.DataType.FLOAT:lt=st.floatData;break;case b.onnx.TensorProto.DataType.INT32:case b.onnx.TensorProto.DataType.INT16:case b.onnx.TensorProto.DataType.UINT16:case b.onnx.TensorProto.DataType.INT8:case b.onnx.TensorProto.DataType.UINT8:case b.onnx.TensorProto.DataType.BOOL:lt=st.int32Data;break;case b.onnx.TensorProto.DataType.INT64:lt=st.int64Data;break;case b.onnx.TensorProto.DataType.DOUBLE:lt=st.doubleData;break;case b.onnx.TensorProto.DataType.UINT32:case b.onnx.TensorProto.DataType.UINT64:lt=st.uint64Data;break;default:throw new Error("unspecific error")}if(lt==null)throw new Error("failed to populate data from a tensorproto value");const ut=at.data;if(ut.length!==lt.length)throw new Error("array length mismatch");for(let ct=0;ct<lt.length;ct++){const dt=lt[ct];_.default.isLong(dt)?ut[ct]=j(dt,st.dataType):ut[ct]=dt}}return at}static fromData(st,ot,it){return new et(ot,it,void 0,void 0,st)}static fromOrtTensor(st){if(!st)throw new Error("cannot construct Value from an empty tensor");const ot=nt.ProtoUtil.tensorDimsFromORTFormat(st),it=nt.ProtoUtil.tensorDataTypeFromProto(st.dataType()),at=new et(ot,it);if(it==="string")for(let lt=0;lt<st.stringDataLength();lt++)at.data[lt]=st.stringData(lt);else if(st.rawDataArray()&&typeof st.rawDataLength()=="number"&&st.rawDataLength()>0){const lt=at.data,ut=new DataView(st.rawDataArray().buffer,st.rawDataArray().byteOffset,st.rawDataLength()),ct=g(st.dataType()),dt=st.rawDataLength()/ct;if(st.rawDataLength()%ct!=0)throw new Error("invalid buffer length");if(lt.length!==dt)throw new Error("buffer length mismatch");for(let ft=0;ft<dt;ft++){const ht=_e(ut,st.dataType(),ft*ct);lt[ft]=ht}}return at}}function g(rt){switch(rt){case b.onnx.TensorProto.DataType.UINT8:case b.onnx.TensorProto.DataType.INT8:case b.onnx.TensorProto.DataType.BOOL:return 1;case b.onnx.TensorProto.DataType.UINT16:case b.onnx.TensorProto.DataType.INT16:return 2;case b.onnx.TensorProto.DataType.FLOAT:case b.onnx.TensorProto.DataType.INT32:case b.onnx.TensorProto.DataType.UINT32:return 4;case b.onnx.TensorProto.DataType.INT64:case b.onnx.TensorProto.DataType.DOUBLE:case b.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${b.onnx.TensorProto.DataType[rt]}`)}}function c(rt){switch(rt){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function j(rt,st){if(st===b.onnx.TensorProto.DataType.INT64||st===tt.TensorDataType.INT64){if(rt.greaterThanOrEqual(2147483648)||rt.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(st!==b.onnx.TensorProto.DataType.UINT32&&st!==tt.TensorDataType.UINT32&&st!==b.onnx.TensorProto.DataType.UINT64&&st!==tt.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${b.onnx.TensorProto.DataType[st]}`);if(rt.greaterThanOrEqual(4294967296)||rt.lessThan(0))throw new TypeError("uint64 is not supported")}return rt.toNumber()}function _e(rt,st,ot){switch(st){case b.onnx.TensorProto.DataType.BOOL:case b.onnx.TensorProto.DataType.UINT8:return rt.getUint8(ot);case b.onnx.TensorProto.DataType.INT8:return rt.getInt8(ot);case b.onnx.TensorProto.DataType.UINT16:return rt.getUint16(ot,!0);case b.onnx.TensorProto.DataType.INT16:return rt.getInt16(ot,!0);case b.onnx.TensorProto.DataType.FLOAT:return rt.getFloat32(ot,!0);case b.onnx.TensorProto.DataType.INT32:return rt.getInt32(ot,!0);case b.onnx.TensorProto.DataType.UINT32:return rt.getUint32(ot,!0);case b.onnx.TensorProto.DataType.INT64:return j(_.default.fromBits(rt.getUint32(ot,!0),rt.getUint32(ot+4,!0),!1),st);case b.onnx.TensorProto.DataType.DOUBLE:return rt.getFloat64(ot,!0);case b.onnx.TensorProto.DataType.UINT64:return j(_.default.fromBits(rt.getUint32(ot,!0),rt.getUint32(ot+4,!0),!0),st);default:throw new Error(`cannot read from DataView for type ${b.onnx.TensorProto.DataType[st]}`)}}s.Tensor=et},2517:function(o,s,i){var a=this&&this.__importDefault||function(st){return st&&st.__esModule?st:{default:st}};Object.defineProperty(s,"__esModule",{value:!0}),s.decodeUtf8String=s.MAX_CLIP=s.MIN_CLIP=s.PoolConvUtil=s.ReduceUtil=s.SplitUtil=s.MathUtil=s.ShapeUtil=s.LongUtil=s.ProtoUtil=s.GemmUtil=s.arrayCopyHelper=s.BroadcastUtil=s.MatMulUtil=s.ArrayUtil=s.assert=s.checkInputsShape=void 0;const d=i(5686),_=a(i(3720)),b=i(1446),$=i(9162);s.checkInputsShape=function(st,...ot){if(!st||st.length!==ot.length)return!1;for(let it=0;it<st.length;it++)if(!st[it].dims||st[it].dims.length!==ot[it])return!1;return!0},s.assert=function(st,ot){if(!st)throw new Error(typeof ot=="string"?ot:ot())},s.ArrayUtil=class{static arraysEqual(st,ot){if(st.length!==ot.length)return!1;for(let it=0;it<st.length;it++)if(st[it]!==ot[it])return!1;return!0}};class nt{static preprocessInputShapes(ot,it){return[ot.length===1?[1,ot[0]]:ot,it.length===1?[it[0],1]:it]}static postprocessOutputShape(ot,it,at){it===1&&ot.splice(ot.length-2,1),at===1&&ot.pop()}static calcMatMulShape(ot,it){return ot[1]!==it[0]?void 0:[ot[0],it[1]]}}s.MatMulUtil=nt;class tt{static calcShape(ot,it,at=!1){const lt=ot.length,ut=it.length;if(lt===0)return it;if(ut===0)return ot;const ct=Math.max(ot.length,it.length),dt=new Array(ct);if(at){if(lt<2||ut<2)return;const ft=nt.calcMatMulShape([ot[lt-2],ot[lt-1]],[it[ut-2],it[ut-1]]);if(ft===void 0)return;[dt[ct-2],dt[ct-1]]=ft}for(let ft=at?3:1;ft<=ct;ft++){const ht=lt-ft<0?1:ot[lt-ft],mt=ut-ft<0?1:it[ut-ft];if(ht!==mt&&ht>1&&mt>1)return;dt[ct-ft]=Math.max(ht,mt)}return dt}static index(ot,it){const at=new Array(it.length);return tt.fillIndex(ot,it,at),at}static fillIndex(ot,it,at){const lt=ot.length-it.length;for(let ut=0;ut<it.length;ut++)at[ut]=ot[lt+ut]%it[ut]}static calc(ot,it,at,lt,ut){const ct=tt.calcShape(ot.dims,it.dims);if(ct){if(lt&&!c.areEqual(ct,ot.dims))return;const dt=c.size(ct),ft=lt?ot:new $.Tensor(ct,ut||ot.type);if(ct.length===0)ft.set([],at(ot.get([]),it.get([])));else{const ht=new Array(ct.length),mt=new Array(ot.dims.length),yt=new Array(it.dims.length);let Tt,St=0,xt=0,wt=!1,gt=!1;ot.dims.length===0&&(St=ot.get([]),wt=!0),it.dims.length===0&&(xt=it.get([]),gt=!0);for(let vt=0;vt<dt;vt++){Tt=vt;for(let Ot=ct.length-1;Ot>=0;Ot--)ht[Ot]=Tt%ct[Ot],Tt=Math.floor(Tt/ct[Ot]);wt||(tt.fillIndex(ht,ot.dims,mt),St=ot.get(mt)),gt||(tt.fillIndex(ht,it.dims,yt),xt=it.get(yt)),ft.set(ht,at(St,xt))}}return ft}}static isValidBroadcast(ot,it){const at=ot.length,lt=it.length;if(at>lt)return!1;for(let ut=1;ut<=at;ut++)if(ot[at-ut]!==1&&ot[at-ut]!==it[lt-ut])return!1;return!0}static getBroadcastDims(ot,it){const at=ot.length,lt=[];for(let ut=0;ut<at;ut++){const ct=at-1-ut,dt=ot[ct]||1;(it[it.length-1-ut]||1)>1&&dt===1&&lt.unshift(ct)}return lt}}s.BroadcastUtil=tt,s.arrayCopyHelper=function(st,ot,it,at,lt){if(at<0||at>=ot.length)throw new Error("sourceIndex out of bounds");if(it<0||it>=st.length)throw new Error("targetIndex out of bounds");if(at+lt>ot.length)throw new Error("source indices to be copied are outside bounds");if(it+lt>st.length)throw new Error("target array is too small to hold result");for(let ut=0;ut<lt;ut++)st[it+ut]=ot[at+ut]},s.GemmUtil=class{static getShapeOfGemmResult(st,ot,it,at,lt){if(st.length!==2||it.length!==2)throw new Error("shape need to be of size 2");let ut,ct,dt;ot?(ut=st[1],ct=st[0]):(ut=st[0],ct=st[1]);let ft=-1;if(at?(dt=it[0],ft=1):(dt=it[1],ft=0),it[ft]!==ct)throw new Error("dimension mismatch");if(ut<=0||dt<=0||ct<=0)throw new Error("invalid shape specified");if(lt&&!tt.isValidBroadcast(lt,[ut,dt]))throw new Error("gemm: invalid bias shape for broadcast");return[ut,dt,ct]}};class et{static tensorDataTypeFromProto(ot){switch(ot){case b.onnx.TensorProto.DataType.INT8:return"int8";case b.onnx.TensorProto.DataType.UINT8:return"uint8";case b.onnx.TensorProto.DataType.BOOL:return"bool";case b.onnx.TensorProto.DataType.INT16:return"int16";case b.onnx.TensorProto.DataType.UINT16:return"uint16";case b.onnx.TensorProto.DataType.INT32:return"int32";case b.onnx.TensorProto.DataType.UINT32:return"uint32";case b.onnx.TensorProto.DataType.FLOAT:return"float32";case b.onnx.TensorProto.DataType.DOUBLE:return"float64";case b.onnx.TensorProto.DataType.STRING:return"string";case b.onnx.TensorProto.DataType.INT64:return"int32";case b.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${b.onnx.TensorProto.DataType[ot]}`)}}static tensorDataTypeStringToEnum(ot){switch(ot){case"int8":return b.onnx.TensorProto.DataType.INT8;case"uint8":return b.onnx.TensorProto.DataType.UINT8;case"bool":return b.onnx.TensorProto.DataType.BOOL;case"int16":return b.onnx.TensorProto.DataType.INT16;case"uint16":return b.onnx.TensorProto.DataType.UINT16;case"int32":return b.onnx.TensorProto.DataType.INT32;case"uint32":return b.onnx.TensorProto.DataType.UINT32;case"float32":return b.onnx.TensorProto.DataType.FLOAT;case"float64":return b.onnx.TensorProto.DataType.DOUBLE;case"string":return b.onnx.TensorProto.DataType.STRING;case"int64":return b.onnx.TensorProto.DataType.INT64;case"uint64":return b.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${ot}`)}}static tensorDimsFromProto(ot){return ot.map(it=>_.default.isLong(it)?it.toNumber():it)}static tensorValueTypeFromProto(ot){return{tensorType:et.tensorDataTypeFromProto(ot.elemType),shape:{dims:et.tensorDimsFromProto(ot.shape.dim.map(it=>it.dimValue))}}}static tensorDimsFromORTFormat(ot){const it=[];for(let at=0;at<ot.dimsLength();at++)it.push(g.longToNumber(ot.dims(at)));return it}static tensorAttributesFromORTFormat(ot){const it=[];for(let at=0;at<ot.attributesLength();at++)it.push(ot.attributes(at));return it}}s.ProtoUtil=et;class g{static longToNumber(ot,it){return _.default.isLong(ot)?ot.toNumber():ot instanceof d.flatbuffers.Long?_.default.fromValue({low:ot.low,high:ot.high,unsigned:it!=null&&it}).toNumber():ot}static isLong(ot){return _.default.isLong(ot)||ot instanceof d.flatbuffers.Long}}s.LongUtil=g;class c{static size(ot){return c.getSizeFromDimensionRange(ot,0,ot.length)}static sizeFromDimension(ot,it){if(it<0||it>ot.length)throw new Error(`invalid dimension of ${it} for sizeFromDimension as Tensor has ${ot.length} dimensions.`);return c.getSizeFromDimensionRange(ot,it,ot.length)}static sizeToDimension(ot,it){if(it<0||it>ot.length)throw new Error(`invalid dimension of ${it} for sizeToDimension as Tensor has ${ot.length} dimensions.`);return c.getSizeFromDimensionRange(ot,0,it)}static getSizeFromDimensionRange(ot,it,at){let lt=1;for(let ut=it;ut<at;ut++){if(ot[ut]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");lt*=ot[ut]}return lt}static computeStrides(ot){const it=ot.length;if(it===0)return[];if(it===1)return[1];const at=new Array(it);at[it-1]=1,at[it-2]=ot[it-1];for(let lt=it-3;lt>=0;--lt)at[lt]=at[lt+1]*ot[lt+1];return at}static transpose(ot){return ot.slice().reverse()}static indicesToOffset(ot,it,at){at===void 0&&(at=ot.length);let lt=0;for(let ut=0;ut<at;++ut)lt+=it[ut]*ot[ut];return lt}static offsetToIndices(ot,it){const at=it.length;if(at===0)return[];if(at===1)return[ot*it[0]];const lt=new Array(it.length);for(let ut=0;ut<lt.length-1;++ut)lt[ut]=Math.floor(ot/it[ut]),ot-=lt[ut]*it[ut];return lt[lt.length-1]=ot,lt}static normalizeAxis(ot,it){if(ot<-it&&ot>=it)throw new Error("unsupported axis for this operation.");return ot<0?ot+it:ot}static normalizeAxes(ot,it){return ot.map(at=>this.normalizeAxis(at,it))}static incrementIndex(ot,it,at){if(it.length===0||ot.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(at===void 0)at=it.length;else if(at<=0||at>it.length)throw new Error("Incorrect axis to increment on");for(let lt=at-1;lt>=0&&(ot[lt]++,!(ot[lt]<it[lt]));--lt)ot[lt]=0}static calculateReshapedDims(ot,it){if(it.length===0){if(ot.length===0||c.size(ot)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const at=it.length,lt=new Array(at);let ut=-1,ct=1;for(let ft=0;ft<at;ft++){if(it[ft]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(it[ft]===-1){if(ut!==-1)throw new Error("at most one dimension in shape hints can be -1");ut=ft}else{if(it[ft]===0){if(ft>=ot.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");lt[ft]=ot[ft]}else lt[ft]=it[ft];ct*=lt[ft]}}const dt=c.size(ot);if(ut!==-1){if(dt%ct!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${ot}] Output shape: [${it}]`);lt[ut]=dt/ct}else if(ct!==dt)throw new Error("reshapedDims and originalDims don't have matching sizes");return lt}static sortBasedOnPerm(ot,it){return it?it.map(at=>ot[at]):ot.slice().reverse()}static padShape(ot,it){const at=ot.length;return ot.map((lt,ut)=>lt+it[ut]+it[ut+at])}static areEqual(ot,it){return ot.length===it.length&&ot.every((at,lt)=>at===it[lt])}static validateDimsAndCalcSize(ot){if(ot.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let it=1;for(const at of ot){if(!Number.isInteger(at))throw new TypeError(`Invalid shape: ${at} is not an integer`);if(at<0||at>2147483647)throw new TypeError(`Invalid shape: length ${at} is not allowed`);it*=at}return it}static flattenShape(ot,it){it<0&&(it+=ot.length);const at=ot.reduce((ut,ct)=>ut*ct,1),lt=ot.slice(it).reduce((ut,ct)=>ut*ct,1);return[at/lt,lt]}static squeezeShape(ot,it){const at=new Array;it=c.normalizeAxes(it,ot.length);for(let lt=0;lt<ot.length;lt++){const ut=it.indexOf(lt)>=0;if(ut&&ot[lt]!==1)throw new Error("squeeze an axis of size different than 1");(it.length===0&&ot[lt]>1||it.length>0&&!ut)&&at.push(ot[lt])}return at}static unsqueezeShape(ot,it){const at=new Array(ot.length+it.length);at.fill(0);for(let ut=0;ut<it.length;ut++){const ct=c.normalizeAxis(it[ut],at.length);if(ct>=at.length)throw new Error("'axes' has an out of range axis");if(at[ct]!==0)throw new Error("'axes' has a duplicate axis");at[ct]=1}let lt=0;for(let ut=0;ut<at.length;ut++)at[ut]===0&&(at[ut]=ot[lt++]);if(lt!==ot.length)throw new Error("the unsqueezed dimension could not be established");return at}}s.ShapeUtil=c,s.MathUtil=class{static sqr(st,ot,it,at,lt){if(at<0||at>=ot.length)throw new Error("sourceIndex out of bounds");if(it<0||it>=st.length)throw new Error("targetIndex out of bounds");if(at+lt>ot.length)throw new Error("source indices to be copied are outside bounds");if(it+lt>st.length)throw new Error("target array is too small to hold result");for(let ut=0;ut<lt;ut++)st[it+ut]+=Math.pow(ot[at+ut],2)}static axpy(st,ot,it,at,lt,ut){if(at<0||at>=ot.length)throw new Error("sourceIndex out of bounds");if(it<0||it>=st.length)throw new Error("targetIndex out of bounds");if(at+lt>ot.length)throw new Error("source indices to be copied are outside bounds");if(it+lt>st.length)throw new Error("target array is too small to hold result");for(let ct=0;ct<lt;ct++)st[it+ct]+=ut*ot[at+ct]}static powx(st,ot,it,at,lt,ut){if(at<0||at>=ot.length)throw new Error("sourceIndex out of bounds");if(it<0||it>=st.length)throw new Error("targetIndex out of bounds");if(at+lt>ot.length)throw new Error("source indices to be copied are outside bounds");if(it+lt>st.length)throw new Error("target array is too small to hold result");for(let ct=0;ct<lt;ct++)st[it+ct]=Math.pow(ot[at+ct],ut)}static mul(st,ot,it,at,lt){if(at<0||at>=ot.length)throw new Error("sourceIndex out of bounds");if(it<0||it>=st.length)throw new Error("targetIndex out of bounds");if(at+lt>ot.length)throw new Error("source indices to be copied are outside bounds");if(it+lt>st.length)throw new Error("target array is too small to hold result");for(let ut=0;ut<lt;ut++)st[it+ut]=ot[at+ut]*st[it+ut]}};class j{static splitShape(ot,it,at,lt){if(at.length===0){if(!lt)throw new Error("need to know number of outputs when the 'split' attribute is not specified");j.determineSplit(ot[it],lt,at)}const ut=[],ct=[0];for(let dt=0;dt<at.length;++dt){dt!==0&&ct.push(ct[dt-1]+at[dt-1]);const ft=ot.slice();ft[it]=at[dt],ut.push(ft)}return[ut,ct]}static determineSplit(ot,it,at){if(ot%it!=0)throw new Error("cannot split tensor to equal sized parts");for(let lt=0;lt<it;++lt)at.push(ot/it)}}s.SplitUtil=j;class _e{static calcReduce(ot,it,at,lt,ut){const ct=ot.dims.slice(0);it.length===0&&ct.forEach((St,xt)=>it.push(xt));const dt=_e.calcReduceShape(ct,it,!0),ft=c.size(dt),ht=new $.Tensor(dt,ot.type),mt=c.computeStrides(dt),yt=c.computeStrides(ct),Tt=new Array(ct.length);for(let St=0;St<ft;St++){const xt=c.offsetToIndices(St,mt);tt.fillIndex(xt,ct,Tt),ht.set(xt,_e.calcReduceByAxis(ot.numberData,it,ct,0,c.indicesToOffset(Tt,yt),lt,ut))}return at?ht:new $.Tensor(_e.calcReduceShape(ct,it,at),ht.type,void 0,void 0,ht.data,ht.dataId)}static calcReduceByAxis(ot,it,at,lt,ut,ct,dt){let ft=0;if(lt>=it.length)return ct(ot[ut]);const ht=it[lt],mt=ht>=at.length?1:c.size(at.slice(ht+1));for(let yt=0;yt<at[ht];yt++)ft=yt===0?_e.calcReduceByAxis(ot,it,at,lt+1,ut,ct,dt):dt(ft,_e.calcReduceByAxis(ot,it,at,lt+1,ut,ct,dt)),ut+=mt;return ft}static calcReduceShape(ot,it,at){const lt=ot.slice();for(let ut=0;ut<it.length;ut++)lt[it[ut]]=at?1:0;return lt.filter(ut=>ut!==0)}}s.ReduceUtil=_e;class rt{static adjustPoolAttributes(ot,it,at,lt,ut,ct){if(!ot&&at.length!==it.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(ot)for(let dt=0;dt<it.length-2;dt++)dt>=at.length?at.push(it[dt+2]):at[dt]=it[dt+2];for(let dt=0;dt<at.length;dt++)if(dt<lt.length){if(lt[dt]<0)throw new Error("strides should be greater than or equal to 1")}else lt.push(1);for(let dt=0;dt<at.length;dt++)if(dt<ut.length){if(ut[dt]<0)throw new Error("dilations should be greater than or equal to 1")}else ut.push(1);for(let dt=0;dt<2*at.length;dt++)if(dt<ct.length){if(ct[dt]<0)throw new Error("pad should be greater than or equal to 1")}else ct.push(0);for(let dt=0;dt<at.length;dt++){if(at[dt]<=0)throw new Error("kernel shapes need to be greater than 0");if(ct[dt]>=at[dt]||ct[dt+at.length]>=at[dt])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(ot,it,at,lt,ut,ct){if(ct){if(ut.length!==2*(ot.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(it.length!==ot.length-2)throw new Error("length of strides should be the length of data dimensions");if(lt.length!==ot.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let dt=0;dt<ot.length-2;dt++)rt.adjustPadAndReturnShape(ot[dt+2],it[dt],at[dt],lt[dt],ut,dt,dt+ot.length-2,ct)}}static computePoolOutputShape(ot,it,at,lt,ut,ct,dt){if(it.length<=0)throw new Error("input shape must be of size greater than 0");const ft=[it[0],it[1]];return rt.computeShapeHelper(ot,it,ft,at,lt,ut,ct,dt),ft}static computeConvOutputShape(ot,it,at,lt,ut,ct,dt){if(ot.length<=0||it.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const ft=[ot[0],it[0]];return rt.computeShapeHelper(!1,ot,ft,at,lt,ut,ct,dt),ft}static computeShapeHelper(ot,it,at,lt,ut,ct,dt,ft){if(ot)for(let ht=0;ht<it.length-2;ht++)at.push(1);else for(let ht=0;ht<it.length-2;ht++)at.push(rt.adjustPadAndReturnShape(it[ht+2],lt[ht],ut[ht],ct[ht],dt,ht,ht+it.length-2,ft))}static adjustPadAndReturnShape(ot,it,at,lt,ut,ct,dt,ft){const ht=at*(lt-1)+1;if(!ft||ft==="NOTSET")return Math.floor((ot+ut[ct]+ut[dt]-ht)/it+1);switch(ft){case"VALID":return ut[ct]=0,ut[dt]=0,Math.floor((ot-ht)/it+1);case"SAME_LOWER":case"SAME_UPPER":if(at!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const mt=((ot+it-1)/it-1)*it+lt-ot;return ut[ct]=Math.floor(ft==="SAME_LOWER"?(mt+1)/2:mt/2),ut[dt]=mt-ut[ct],Math.floor((ot+mt-lt)/it+1)}default:throw new Error("Unsupported AutoPad type")}}}s.PoolConvUtil=rt,s.MIN_CLIP=-34028234663852886e22,s.MAX_CLIP=34028234663852886e22,s.decodeUtf8String=function(st){return new TextDecoder().decode(st)}},7967:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.iterateExtraOptions=void 0,s.iterateExtraOptions=(i,a,d,_)=>{if(typeof i=="object"&&i!==null){if(d.has(i))throw new Error("Circular reference in options");d.add(i)}Object.entries(i).forEach(([b,$])=>{const nt=a?a+b:b;if(typeof $=="object")(0,s.iterateExtraOptions)($,nt+".",d,_);else if(typeof $=="string"||typeof $=="number")_(nt,$.toString());else{if(typeof $!="boolean")throw new Error("Can't handle extra config type: "+typeof $);_(nt,$?"1":"0")}})}},2157:function(o,s,i){var a,d=this&&this.__createBinding||(Object.create?function(mt,yt,Tt,St){St===void 0&&(St=Tt);var xt=Object.getOwnPropertyDescriptor(yt,Tt);xt&&!("get"in xt?!yt.__esModule:xt.writable||xt.configurable)||(xt={enumerable:!0,get:function(){return yt[Tt]}}),Object.defineProperty(mt,St,xt)}:function(mt,yt,Tt,St){St===void 0&&(St=Tt),mt[St]=yt[Tt]}),_=this&&this.__setModuleDefault||(Object.create?function(mt,yt){Object.defineProperty(mt,"default",{enumerable:!0,value:yt})}:function(mt,yt){mt.default=yt}),b=this&&this.__importStar||function(mt){if(mt&&mt.__esModule)return mt;var yt={};if(mt!=null)for(var Tt in mt)Tt!=="default"&&Object.prototype.hasOwnProperty.call(mt,Tt)&&d(yt,mt,Tt);return _(yt,mt),yt};Object.defineProperty(s,"__esModule",{value:!0}),s.endProfiling=s.run=s.releaseSession=s.createSession=s.createSessionFinalize=s.createSessionAllocate=s.initOrt=s.initWasm=void 0;const $=i(1670),nt=b(i(349)),tt=i(6361),et=()=>!!$.env.wasm.proxy&&typeof document<"u";let g,c,j,_e=!1,rt=!1,st=!1;const ot=[],it=[],at=[],lt=[],ut=[],ct=[],dt=()=>{if(_e||!rt||st||!g)throw new Error("worker not ready")},ft=mt=>{switch(mt.data.type){case"init-wasm":_e=!1,mt.data.err?(st=!0,c[1](mt.data.err)):(rt=!0,c[0]());break;case"init-ort":mt.data.err?j[1](mt.data.err):j[0]();break;case"create_allocate":mt.data.err?ot.shift()[1](mt.data.err):ot.shift()[0](mt.data.out);break;case"create_finalize":mt.data.err?it.shift()[1](mt.data.err):it.shift()[0](mt.data.out);break;case"create":mt.data.err?at.shift()[1](mt.data.err):at.shift()[0](mt.data.out);break;case"release":mt.data.err?lt.shift()[1](mt.data.err):lt.shift()[0]();break;case"run":mt.data.err?ut.shift()[1](mt.data.err):ut.shift()[0](mt.data.out);break;case"end-profiling":mt.data.err?ct.shift()[1](mt.data.err):ct.shift()[0]()}},ht=typeof document<"u"?(a=document==null?void 0:document.currentScript)===null||a===void 0?void 0:a.src:void 0;s.initWasm=async()=>{if(et()){if(rt)return;if(_e)throw new Error("multiple calls to 'initWasm()' detected.");if(st)throw new Error("previous call to 'initWasm()' failed.");return _e=!0,$.env.wasm.wasmPaths===void 0&&ht&&ht.indexOf("blob:")!==0&&($.env.wasm.wasmPaths=ht.substr(0,+ht.lastIndexOf("/")+1)),new Promise((mt,yt)=>{g==null||g.terminate(),g=i(9710).Z(),g.onmessage=ft,c=[mt,yt];const Tt={type:"init-wasm",in:$.env.wasm};g.postMessage(Tt)})}return(0,tt.initializeWebAssembly)($.env.wasm)},s.initOrt=async(mt,yt)=>{if(et())return dt(),new Promise((Tt,St)=>{j=[Tt,St];const xt={type:"init-ort",in:{numThreads:mt,loggingLevel:yt}};g.postMessage(xt)});nt.initOrt(mt,yt)},s.createSessionAllocate=async mt=>et()?(dt(),new Promise((yt,Tt)=>{ot.push([yt,Tt]);const St={type:"create_allocate",in:{model:mt}};g.postMessage(St,[mt.buffer])})):nt.createSessionAllocate(mt),s.createSessionFinalize=async(mt,yt)=>et()?(dt(),new Promise((Tt,St)=>{it.push([Tt,St]);const xt={type:"create_finalize",in:{modeldata:mt,options:yt}};g.postMessage(xt)})):nt.createSessionFinalize(mt,yt),s.createSession=async(mt,yt)=>et()?(dt(),new Promise((Tt,St)=>{at.push([Tt,St]);const xt={type:"create",in:{model:mt,options:yt}};g.postMessage(xt,[mt.buffer])})):nt.createSession(mt,yt),s.releaseSession=async mt=>{if(et())return dt(),new Promise((yt,Tt)=>{lt.push([yt,Tt]);const St={type:"release",in:mt};g.postMessage(St)});nt.releaseSession(mt)},s.run=async(mt,yt,Tt,St,xt)=>et()?(dt(),new Promise((wt,gt)=>{ut.push([wt,gt]);const vt={type:"run",in:{sessionId:mt,inputIndices:yt,inputs:Tt,outputIndices:St,options:xt}};g.postMessage(vt,nt.extractTransferableBuffers(Tt))})):nt.run(mt,yt,Tt,St,xt),s.endProfiling=async mt=>{if(et())return dt(),new Promise((yt,Tt)=>{ct.push([yt,Tt]);const St={type:"end-profiling",in:mt};g.postMessage(St)});nt.endProfiling(mt)}},586:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.setRunOptions=void 0;const a=i(7967),d=i(4983),_=i(6361);s.setRunOptions=b=>{const $=(0,_.getInstance)();let nt=0;const tt=[],et=b||{};try{if((b==null?void 0:b.logSeverityLevel)===void 0)et.logSeverityLevel=2;else if(typeof b.logSeverityLevel!="number"||!Number.isInteger(b.logSeverityLevel)||b.logSeverityLevel<0||b.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${b.logSeverityLevel}`);if((b==null?void 0:b.logVerbosityLevel)===void 0)et.logVerbosityLevel=0;else if(typeof b.logVerbosityLevel!="number"||!Number.isInteger(b.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${b.logVerbosityLevel}`);(b==null?void 0:b.terminate)===void 0&&(et.terminate=!1);let g=0;if((b==null?void 0:b.tag)!==void 0&&(g=(0,d.allocWasmString)(b.tag,tt)),nt=$._OrtCreateRunOptions(et.logSeverityLevel,et.logVerbosityLevel,!!et.terminate,g),nt===0)throw new Error("Can't create run options");return(b==null?void 0:b.extra)!==void 0&&(0,a.iterateExtraOptions)(b.extra,"",new WeakSet,(c,j)=>{const _e=(0,d.allocWasmString)(c,tt),rt=(0,d.allocWasmString)(j,tt);if($._OrtAddRunConfigEntry(nt,_e,rt)!==0)throw new Error(`Can't set a run config entry: ${c} - ${j}`)}),[nt,tt]}catch(g){throw nt!==0&&$._OrtReleaseRunOptions(nt),tt.forEach($._free),g}}},2306:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OnnxruntimeWebAssemblySessionHandler=void 0;const a=i(2806),d=i(1670),_=i(2850),b=i(2157);let $;s.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(nt){const tt=await fetch(nt),et=await tt.arrayBuffer();return(0,b.createSessionAllocate)(new Uint8Array(et))}async loadModel(nt,tt){if($||(await(0,b.initOrt)(d.env.wasm.numThreads,(et=>{switch(et){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${et}`)}})(d.env.logLevel)),$=!0),typeof nt=="string")if(typeof fetch>"u"){const et=await(0,_.promisify)(a.readFile)(nt);[this.sessionId,this.inputNames,this.outputNames]=await(0,b.createSession)(et,tt)}else{const et=await this.createSessionAllocate(nt);[this.sessionId,this.inputNames,this.outputNames]=await(0,b.createSessionFinalize)(et,tt)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,b.createSession)(nt,tt)}async dispose(){return(0,b.releaseSession)(this.sessionId)}async run(nt,tt,et){const g=[],c=[];Object.entries(nt).forEach(st=>{const ot=st[0],it=st[1],at=this.inputNames.indexOf(ot);if(at===-1)throw new Error(`invalid input '${ot}'`);g.push(it),c.push(at)});const j=[];Object.entries(tt).forEach(st=>{const ot=st[0],it=this.outputNames.indexOf(ot);if(it===-1)throw new Error(`invalid output '${ot}'`);j.push(it)});const _e=await(0,b.run)(this.sessionId,c,g.map(st=>[st.type,st.dims,st.data]),j,et),rt={};for(let st=0;st<_e.length;st++)rt[this.outputNames[j[st]]]=new d.Tensor(_e[st][0],_e[st][2],_e[st][1]);return rt}startProfiling(){}endProfiling(){(0,b.endProfiling)(this.sessionId)}}},4919:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.setSessionOptions=void 0;const a=i(7967),d=i(4983),_=i(6361);s.setSessionOptions=b=>{const $=(0,_.getInstance)();let nt=0;const tt=[],et=b||{};(g=>{g.extra||(g.extra={}),g.extra.session||(g.extra.session={});const c=g.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1")})(et);try{(b==null?void 0:b.graphOptimizationLevel)===void 0&&(et.graphOptimizationLevel="all");const g=(_e=>{switch(_e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${_e}`)}})(et.graphOptimizationLevel);(b==null?void 0:b.enableCpuMemArena)===void 0&&(et.enableCpuMemArena=!0),(b==null?void 0:b.enableMemPattern)===void 0&&(et.enableMemPattern=!0),(b==null?void 0:b.executionMode)===void 0&&(et.executionMode="sequential");const c=(_e=>{switch(_e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${_e}`)}})(et.executionMode);let j=0;if((b==null?void 0:b.logId)!==void 0&&(j=(0,d.allocWasmString)(b.logId,tt)),(b==null?void 0:b.logSeverityLevel)===void 0)et.logSeverityLevel=2;else if(typeof b.logSeverityLevel!="number"||!Number.isInteger(b.logSeverityLevel)||b.logSeverityLevel<0||b.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${b.logSeverityLevel}`);if((b==null?void 0:b.logVerbosityLevel)===void 0)et.logVerbosityLevel=0;else if(typeof b.logVerbosityLevel!="number"||!Number.isInteger(b.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${b.logVerbosityLevel}`);if((b==null?void 0:b.enableProfiling)===void 0&&(et.enableProfiling=!1),nt=$._OrtCreateSessionOptions(g,!!et.enableCpuMemArena,!!et.enableMemPattern,c,!!et.enableProfiling,0,j,et.logSeverityLevel,et.logVerbosityLevel),nt===0)throw new Error("Can't create session options");return b!=null&&b.executionProviders&&((_e,rt,st)=>{for(const ot of rt){let it=typeof ot=="string"?ot:ot.name;switch(it){case"xnnpack":it="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${it}`)}const at=(0,d.allocWasmString)(it,st);if((0,_.getInstance)()._OrtAppendExecutionProvider(_e,at)!==0)throw new Error(`Can't append execution provider: ${it}`)}})(nt,b.executionProviders,tt),(b==null?void 0:b.extra)!==void 0&&(0,a.iterateExtraOptions)(b.extra,"",new WeakSet,(_e,rt)=>{const st=(0,d.allocWasmString)(_e,tt),ot=(0,d.allocWasmString)(rt,tt);if($._OrtAddSessionConfigEntry(nt,st,ot)!==0)throw new Error(`Can't set a session config entry: ${_e} - ${rt}`)}),[nt,tt]}catch(g){throw nt!==0&&$._OrtReleaseSessionOptions(nt),tt.forEach($._free),g}}},4983:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.allocWasmString=void 0;const a=i(6361);s.allocWasmString=(d,_)=>{const b=(0,a.getInstance)(),$=b.lengthBytesUTF8(d)+1,nt=b._malloc($);return b.stringToUTF8(d,nt,$),_.push(nt),nt}},349:(o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.extractTransferableBuffers=s.endProfiling=s.run=s.releaseSession=s.createSession=s.createSessionFinalize=s.createSessionAllocate=s.initOrt=void 0;const a=i(586),d=i(4919),_=i(4983),b=i(6361);s.initOrt=(g,c)=>{const j=(0,b.getInstance)()._OrtInit(g,c);if(j!==0)throw new Error(`Can't initialize onnxruntime. error code = ${j}`)};const $=new Map;s.createSessionAllocate=g=>{const c=(0,b.getInstance)(),j=c._malloc(g.byteLength);return c.HEAPU8.set(g,j),[j,g.byteLength]},s.createSessionFinalize=(g,c)=>{const j=(0,b.getInstance)();let _e=0,rt=0,st=[];try{if([rt,st]=(0,d.setSessionOptions)(c),_e=j._OrtCreateSession(g[0],g[1],rt),_e===0)throw new Error("Can't create a session")}finally{j._free(g[0]),j._OrtReleaseSessionOptions(rt),st.forEach(j._free)}const ot=j._OrtGetInputCount(_e),it=j._OrtGetOutputCount(_e),at=[],lt=[],ut=[],ct=[];for(let dt=0;dt<ot;dt++){const ft=j._OrtGetInputName(_e,dt);if(ft===0)throw new Error("Can't get an input name");lt.push(ft),at.push(j.UTF8ToString(ft))}for(let dt=0;dt<it;dt++){const ft=j._OrtGetOutputName(_e,dt);if(ft===0)throw new Error("Can't get an output name");ct.push(ft),ut.push(j.UTF8ToString(ft))}return $.set(_e,[_e,lt,ct]),[_e,at,ut]},s.createSession=(g,c)=>{const j=(0,s.createSessionAllocate)(g);return(0,s.createSessionFinalize)(j,c)},s.releaseSession=g=>{const c=(0,b.getInstance)(),j=$.get(g);if(!j)throw new Error("invalid session id");const _e=j[0],rt=j[1],st=j[2];rt.forEach(c._OrtFree),st.forEach(c._OrtFree),c._OrtReleaseSession(_e),$.delete(g)};const nt=g=>{switch(g){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${g}`)}},tt=g=>{switch(g){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${g}`)}},et=g=>{switch(g){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${g}`)}};s.run=(g,c,j,_e,rt)=>{const st=(0,b.getInstance)(),ot=$.get(g);if(!ot)throw new Error("invalid session id");const it=ot[0],at=ot[1],lt=ot[2],ut=c.length,ct=_e.length;let dt=0,ft=[];const ht=[],mt=[];try{[dt,ft]=(0,a.setRunOptions)(rt);for(let gt=0;gt<ut;gt++){const vt=j[gt][0],Ot=j[gt][1],At=j[gt][2];let Ft,Bt;if(Array.isArray(At)){Bt=4*At.length,Ft=st._malloc(Bt),mt.push(Ft);let Jt=Ft/4;for(let Kt=0;Kt<At.length;Kt++){if(typeof At[Kt]!="string")throw new TypeError(`tensor data at index ${Kt} is not a string`);st.HEAPU32[Jt++]=(0,_.allocWasmString)(At[Kt],mt)}}else Bt=At.byteLength,Ft=st._malloc(Bt),mt.push(Ft),st.HEAPU8.set(new Uint8Array(At.buffer,At.byteOffset,Bt),Ft);const Wt=st.stackSave(),sn=st.stackAlloc(4*Ot.length);try{let Jt=sn/4;Ot.forEach(rn=>st.HEAP32[Jt++]=rn);const Kt=st._OrtCreateTensor(nt(vt),Ft,Bt,sn,Ot.length);if(Kt===0)throw new Error("Can't create a tensor");ht.push(Kt)}finally{st.stackRestore(Wt)}}const yt=st.stackSave(),Tt=st.stackAlloc(4*ut),St=st.stackAlloc(4*ut),xt=st.stackAlloc(4*ct),wt=st.stackAlloc(4*ct);try{let gt=Tt/4,vt=St/4,Ot=xt/4,At=wt/4;for(let Wt=0;Wt<ut;Wt++)st.HEAPU32[gt++]=ht[Wt],st.HEAPU32[vt++]=at[c[Wt]];for(let Wt=0;Wt<ct;Wt++)st.HEAPU32[Ot++]=0,st.HEAPU32[At++]=lt[_e[Wt]];let Ft=st._OrtRun(it,St,Tt,ut,wt,ct,xt,dt);const Bt=[];if(Ft===0)for(let Wt=0;Wt<ct;Wt++){const sn=st.HEAPU32[xt/4+Wt],Jt=st.stackSave(),Kt=st.stackAlloc(16);let rn,zt=0;try{if(Ft=st._OrtGetTensorData(sn,Kt,Kt+4,Kt+8,Kt+12),Ft!==0)throw new Error(`Can't access output tensor data. error code = ${Ft}`);let nn=Kt/4;const wn=st.HEAPU32[nn++];zt=st.HEAPU32[nn++];const Qt=st.HEAPU32[nn++],Zt=st.HEAPU32[nn++],en=[];for(let hn=0;hn<Zt;hn++)en.push(st.HEAPU32[Qt/4+hn]);st._OrtFree(Qt);const dn=en.length===0?1:en.reduce((hn,Mn)=>hn*Mn);if(rn=tt(wn),rn==="string"){const hn=[];let Mn=zt/4;for(let Nn=0;Nn<dn;Nn++){const jn=st.HEAPU32[Mn++],Yn=Nn===dn-1?void 0:st.HEAPU32[Mn]-jn;hn.push(st.UTF8ToString(jn,Yn))}Bt.push([rn,en,hn])}else{const hn=new(et(rn))(dn);new Uint8Array(hn.buffer,hn.byteOffset,hn.byteLength).set(st.HEAPU8.subarray(zt,zt+hn.byteLength)),Bt.push([rn,en,hn])}}finally{st.stackRestore(Jt),rn==="string"&&zt&&st._free(zt),st._OrtReleaseTensor(sn)}}if(Ft===0)return Bt;throw new Error(`failed to call OrtRun(). error code = ${Ft}.`)}finally{st.stackRestore(yt)}}finally{ht.forEach(st._OrtReleaseTensor),mt.forEach(st._free),st._OrtReleaseRunOptions(dt),ft.forEach(st._free)}},s.endProfiling=g=>{const c=(0,b.getInstance)(),j=$.get(g);if(!j)throw new Error("invalid session id");const _e=j[0],rt=c._OrtEndProfiling(_e);if(rt===0)throw new Error("Can't get an profile file name");c._OrtFree(rt)},s.extractTransferableBuffers=g=>{const c=[];for(const j of g){const _e=j[2];!Array.isArray(_e)&&_e.buffer&&c.push(_e.buffer)}return c}},6361:function(o,s,i){var a=this&&this.__createBinding||(Object.create?function(rt,st,ot,it){it===void 0&&(it=ot);var at=Object.getOwnPropertyDescriptor(st,ot);at&&!("get"in at?!st.__esModule:at.writable||at.configurable)||(at={enumerable:!0,get:function(){return st[ot]}}),Object.defineProperty(rt,it,at)}:function(rt,st,ot,it){it===void 0&&(it=ot),rt[it]=st[ot]}),d=this&&this.__setModuleDefault||(Object.create?function(rt,st){Object.defineProperty(rt,"default",{enumerable:!0,value:st})}:function(rt,st){rt.default=st}),_=this&&this.__importStar||function(rt){if(rt&&rt.__esModule)return rt;var st={};if(rt!=null)for(var ot in rt)ot!=="default"&&Object.prototype.hasOwnProperty.call(rt,ot)&&a(st,rt,ot);return d(st,rt),st},b=this&&this.__importDefault||function(rt){return rt&&rt.__esModule?rt:{default:rt}};Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.getInstance=s.initializeWebAssembly=void 0;const $=_(i(6449)),nt=b(i(932)),tt=i(3474);let et,g=!1,c=!1,j=!1;const _e=(rt,st)=>st?rt?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":rt?"ort-wasm-simd.wasm":"ort-wasm.wasm";s.initializeWebAssembly=async rt=>{if(g)return Promise.resolve();if(c)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(j)throw new Error("previous call to 'initializeWebAssembly()' failed.");c=!0;const st=rt.initTimeout,ot=rt.numThreads,it=rt.simd,at=ot>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),lt=it&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),ut=typeof rt.wasmPaths=="string"?rt.wasmPaths:void 0,ct=_e(!1,at),dt=_e(lt,at),ft=typeof rt.wasmPaths=="object"?rt.wasmPaths[dt]:void 0;let ht=!1;const mt=[];if(st>0&&mt.push(new Promise(yt=>{setTimeout(()=>{ht=!0,yt()},st)})),mt.push(new Promise((yt,Tt)=>{const St=at?tt:nt.default,xt={locateFile:(wt,gt)=>at&&wt.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([i(4154)],{type:"text/javascript"})):wt===ct?ft??(ut??gt)+dt:gt+wt};if(at)if(typeof Blob>"u")xt.mainScriptUrlOrBlob=$.join("/","ort-wasm-threaded.js");else{const wt=`var ortWasmThreaded=(function(){var _scriptDir;return ${St.toString()}})();`;xt.mainScriptUrlOrBlob=new Blob([wt],{type:"text/javascript"})}St(xt).then(wt=>{c=!1,g=!0,et=wt,yt()},wt=>{c=!1,j=!0,Tt(wt)})})),await Promise.race(mt),ht)throw new Error(`WebAssembly backend initializing failed due to timeout: ${st}ms`)},s.getInstance=()=>{if(g&&et)return et;throw new Error("WebAssembly is not initialized yet.")},s.dispose=()=>{var rt;!g||c||j||(c=!0,(rt=et.PThread)===null||rt===void 0||rt.terminateAllThreads(),et=void 0,c=!1,g=!1,j=!0)}},9710:(o,s,i)=>{i.d(s,{Z:()=>_});var a=i(477),d=i.n(a);function _(){return d()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:o=>{o.exports=function(s,i,a,d){var _=self||window;try{try{var b;try{b=new _.Blob([s])}catch{(b=new(_.BlobBuilder||_.WebKitBlobBuilder||_.MozBlobBuilder||_.MSBlobBuilder)).append(s),b=b.getBlob()}var $=_.URL||_.webkitURL,nt=$.createObjectURL(b),tt=new _[i](nt,a);return $.revokeObjectURL(nt),tt}catch{return new _[i]("data:application/javascript,".concat(encodeURIComponent(s)),a)}}catch{if(!d)throw Error("Inline worker is not supported");return new _[i](d,a)}}},4154:o=>{o.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:o=>{o.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(o,s,i)=>{i.r(s),i.d(s,{flatbuffers:()=>a});var a={};a.Offset,a.Table,a.SIZEOF_SHORT=2,a.SIZEOF_INT=4,a.FILE_IDENTIFIER_LENGTH=4,a.SIZE_PREFIX_LENGTH=4,a.Encoding={UTF8_BYTES:1,UTF16_STRING:2},a.int32=new Int32Array(2),a.float32=new Float32Array(a.int32.buffer),a.float64=new Float64Array(a.int32.buffer),a.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,a.Long=function(d,_){this.low=0|d,this.high=0|_},a.Long.create=function(d,_){return d==0&&_==0?a.Long.ZERO:new a.Long(d,_)},a.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},a.Long.prototype.equals=function(d){return this.low==d.low&&this.high==d.high},a.Long.ZERO=new a.Long(0,0),a.Builder=function(d){if(d)_=d;else var _=1024;this.bb=a.ByteBuffer.allocate(_),this.space=_,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},a.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},a.Builder.prototype.forceDefaults=function(d){this.force_defaults=d},a.Builder.prototype.dataBuffer=function(){return this.bb},a.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},a.Builder.prototype.prep=function(d,_){d>this.minalign&&(this.minalign=d);for(var b=1+~(this.bb.capacity()-this.space+_)&d-1;this.space<b+d+_;){var $=this.bb.capacity();this.bb=a.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-$}this.pad(b)},a.Builder.prototype.pad=function(d){for(var _=0;_<d;_++)this.bb.writeInt8(--this.space,0)},a.Builder.prototype.writeInt8=function(d){this.bb.writeInt8(this.space-=1,d)},a.Builder.prototype.writeInt16=function(d){this.bb.writeInt16(this.space-=2,d)},a.Builder.prototype.writeInt32=function(d){this.bb.writeInt32(this.space-=4,d)},a.Builder.prototype.writeInt64=function(d){this.bb.writeInt64(this.space-=8,d)},a.Builder.prototype.writeFloat32=function(d){this.bb.writeFloat32(this.space-=4,d)},a.Builder.prototype.writeFloat64=function(d){this.bb.writeFloat64(this.space-=8,d)},a.Builder.prototype.addInt8=function(d){this.prep(1,0),this.writeInt8(d)},a.Builder.prototype.addInt16=function(d){this.prep(2,0),this.writeInt16(d)},a.Builder.prototype.addInt32=function(d){this.prep(4,0),this.writeInt32(d)},a.Builder.prototype.addInt64=function(d){this.prep(8,0),this.writeInt64(d)},a.Builder.prototype.addFloat32=function(d){this.prep(4,0),this.writeFloat32(d)},a.Builder.prototype.addFloat64=function(d){this.prep(8,0),this.writeFloat64(d)},a.Builder.prototype.addFieldInt8=function(d,_,b){(this.force_defaults||_!=b)&&(this.addInt8(_),this.slot(d))},a.Builder.prototype.addFieldInt16=function(d,_,b){(this.force_defaults||_!=b)&&(this.addInt16(_),this.slot(d))},a.Builder.prototype.addFieldInt32=function(d,_,b){(this.force_defaults||_!=b)&&(this.addInt32(_),this.slot(d))},a.Builder.prototype.addFieldInt64=function(d,_,b){!this.force_defaults&&_.equals(b)||(this.addInt64(_),this.slot(d))},a.Builder.prototype.addFieldFloat32=function(d,_,b){(this.force_defaults||_!=b)&&(this.addFloat32(_),this.slot(d))},a.Builder.prototype.addFieldFloat64=function(d,_,b){(this.force_defaults||_!=b)&&(this.addFloat64(_),this.slot(d))},a.Builder.prototype.addFieldOffset=function(d,_,b){(this.force_defaults||_!=b)&&(this.addOffset(_),this.slot(d))},a.Builder.prototype.addFieldStruct=function(d,_,b){_!=b&&(this.nested(_),this.slot(d))},a.Builder.prototype.nested=function(d){if(d!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},a.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},a.Builder.prototype.slot=function(d){this.vtable[d]=this.offset()},a.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},a.Builder.growByteBuffer=function(d){var _=d.capacity();if(3221225472&_)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var b=_<<1,$=a.ByteBuffer.allocate(b);return $.setPosition(b-_),$.bytes().set(d.bytes(),b-_),$},a.Builder.prototype.addOffset=function(d){this.prep(a.SIZEOF_INT,0),this.writeInt32(this.offset()-d+a.SIZEOF_INT)},a.Builder.prototype.startObject=function(d){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=d;for(var _=0;_<d;_++)this.vtable[_]=0;this.isNested=!0,this.object_start=this.offset()},a.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var d=this.offset(),_=this.vtable_in_use-1;_>=0&&this.vtable[_]==0;_--);for(var b=_+1;_>=0;_--)this.addInt16(this.vtable[_]!=0?d-this.vtable[_]:0);this.addInt16(d-this.object_start);var $=(b+2)*a.SIZEOF_SHORT;this.addInt16($);var nt=0,tt=this.space;e:for(_=0;_<this.vtables.length;_++){var et=this.bb.capacity()-this.vtables[_];if($==this.bb.readInt16(et)){for(var g=a.SIZEOF_SHORT;g<$;g+=a.SIZEOF_SHORT)if(this.bb.readInt16(tt+g)!=this.bb.readInt16(et+g))continue e;nt=this.vtables[_];break}}return nt?(this.space=this.bb.capacity()-d,this.bb.writeInt32(this.space,nt-d)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-d,this.offset()-d)),this.isNested=!1,d},a.Builder.prototype.finish=function(d,_,b){var $=b?a.SIZE_PREFIX_LENGTH:0;if(_){var nt=_;if(this.prep(this.minalign,a.SIZEOF_INT+a.FILE_IDENTIFIER_LENGTH+$),nt.length!=a.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+a.FILE_IDENTIFIER_LENGTH);for(var tt=a.FILE_IDENTIFIER_LENGTH-1;tt>=0;tt--)this.writeInt8(nt.charCodeAt(tt))}this.prep(this.minalign,a.SIZEOF_INT+$),this.addOffset(d),$&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},a.Builder.prototype.finishSizePrefixed=function(d,_){this.finish(d,_,!0)},a.Builder.prototype.requiredField=function(d,_){var b=this.bb.capacity()-d,$=b-this.bb.readInt32(b);if(this.bb.readInt16($+_)==0)throw new Error("FlatBuffers: field "+_+" must be set")},a.Builder.prototype.startVector=function(d,_,b){this.notNested(),this.vector_num_elems=_,this.prep(a.SIZEOF_INT,d*_),this.prep(b,d*_)},a.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},a.Builder.prototype.createString=function(d){if(d instanceof Uint8Array)var _=d;else{_=[];for(var b=0;b<d.length;){var $,nt=d.charCodeAt(b++);($=nt<55296||nt>=56320?nt:(nt<<10)+d.charCodeAt(b++)+-56613888)<128?_.push($):($<2048?_.push($>>6&31|192):($<65536?_.push($>>12&15|224):_.push($>>18&7|240,$>>12&63|128),_.push($>>6&63|128)),_.push(63&$|128))}}this.addInt8(0),this.startVector(1,_.length,1),this.bb.setPosition(this.space-=_.length),b=0;for(var tt=this.space,et=this.bb.bytes();b<_.length;b++)et[tt++]=_[b];return this.endVector()},a.Builder.prototype.createLong=function(d,_){return a.Long.create(d,_)},a.ByteBuffer=function(d){this.bytes_=d,this.position_=0},a.ByteBuffer.allocate=function(d){return new a.ByteBuffer(new Uint8Array(d))},a.ByteBuffer.prototype.clear=function(){this.position_=0},a.ByteBuffer.prototype.bytes=function(){return this.bytes_},a.ByteBuffer.prototype.position=function(){return this.position_},a.ByteBuffer.prototype.setPosition=function(d){this.position_=d},a.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},a.ByteBuffer.prototype.readInt8=function(d){return this.readUint8(d)<<24>>24},a.ByteBuffer.prototype.readUint8=function(d){return this.bytes_[d]},a.ByteBuffer.prototype.readInt16=function(d){return this.readUint16(d)<<16>>16},a.ByteBuffer.prototype.readUint16=function(d){return this.bytes_[d]|this.bytes_[d+1]<<8},a.ByteBuffer.prototype.readInt32=function(d){return this.bytes_[d]|this.bytes_[d+1]<<8|this.bytes_[d+2]<<16|this.bytes_[d+3]<<24},a.ByteBuffer.prototype.readUint32=function(d){return this.readInt32(d)>>>0},a.ByteBuffer.prototype.readInt64=function(d){return new a.Long(this.readInt32(d),this.readInt32(d+4))},a.ByteBuffer.prototype.readUint64=function(d){return new a.Long(this.readUint32(d),this.readUint32(d+4))},a.ByteBuffer.prototype.readFloat32=function(d){return a.int32[0]=this.readInt32(d),a.float32[0]},a.ByteBuffer.prototype.readFloat64=function(d){return a.int32[a.isLittleEndian?0:1]=this.readInt32(d),a.int32[a.isLittleEndian?1:0]=this.readInt32(d+4),a.float64[0]},a.ByteBuffer.prototype.writeInt8=function(d,_){this.bytes_[d]=_},a.ByteBuffer.prototype.writeUint8=function(d,_){this.bytes_[d]=_},a.ByteBuffer.prototype.writeInt16=function(d,_){this.bytes_[d]=_,this.bytes_[d+1]=_>>8},a.ByteBuffer.prototype.writeUint16=function(d,_){this.bytes_[d]=_,this.bytes_[d+1]=_>>8},a.ByteBuffer.prototype.writeInt32=function(d,_){this.bytes_[d]=_,this.bytes_[d+1]=_>>8,this.bytes_[d+2]=_>>16,this.bytes_[d+3]=_>>24},a.ByteBuffer.prototype.writeUint32=function(d,_){this.bytes_[d]=_,this.bytes_[d+1]=_>>8,this.bytes_[d+2]=_>>16,this.bytes_[d+3]=_>>24},a.ByteBuffer.prototype.writeInt64=function(d,_){this.writeInt32(d,_.low),this.writeInt32(d+4,_.high)},a.ByteBuffer.prototype.writeUint64=function(d,_){this.writeUint32(d,_.low),this.writeUint32(d+4,_.high)},a.ByteBuffer.prototype.writeFloat32=function(d,_){a.float32[0]=_,this.writeInt32(d,a.int32[0])},a.ByteBuffer.prototype.writeFloat64=function(d,_){a.float64[0]=_,this.writeInt32(d,a.int32[a.isLittleEndian?0:1]),this.writeInt32(d+4,a.int32[a.isLittleEndian?1:0])},a.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+a.SIZEOF_INT+a.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var d="",_=0;_<a.FILE_IDENTIFIER_LENGTH;_++)d+=String.fromCharCode(this.readInt8(this.position_+a.SIZEOF_INT+_));return d},a.ByteBuffer.prototype.__offset=function(d,_){var b=d-this.readInt32(d);return _<this.readInt16(b)?this.readInt16(b+_):0},a.ByteBuffer.prototype.__union=function(d,_){return d.bb_pos=_+this.readInt32(_),d.bb=this,d},a.ByteBuffer.prototype.__string=function(d,_){d+=this.readInt32(d);var b=this.readInt32(d),$="",nt=0;if(d+=a.SIZEOF_INT,_===a.Encoding.UTF8_BYTES)return this.bytes_.subarray(d,d+b);for(;nt<b;){var tt,et=this.readUint8(d+nt++);if(et<192)tt=et;else{var g=this.readUint8(d+nt++);if(et<224)tt=(31&et)<<6|63&g;else{var c=this.readUint8(d+nt++);tt=et<240?(15&et)<<12|(63&g)<<6|63&c:(7&et)<<18|(63&g)<<12|(63&c)<<6|63&this.readUint8(d+nt++)}}tt<65536?$+=String.fromCharCode(tt):(tt-=65536,$+=String.fromCharCode(55296+(tt>>10),56320+(1023&tt)))}return $},a.ByteBuffer.prototype.__indirect=function(d){return d+this.readInt32(d)},a.ByteBuffer.prototype.__vector=function(d){return d+this.readInt32(d)+a.SIZEOF_INT},a.ByteBuffer.prototype.__vector_len=function(d){return this.readInt32(d+this.readInt32(d))},a.ByteBuffer.prototype.__has_identifier=function(d){if(d.length!=a.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+a.FILE_IDENTIFIER_LENGTH);for(var _=0;_<a.FILE_IDENTIFIER_LENGTH;_++)if(d.charCodeAt(_)!=this.readInt8(this.position_+a.SIZEOF_INT+_))return!1;return!0},a.ByteBuffer.prototype.createLong=function(d,_){return a.Long.create(d,_)}}},__webpack_module_cache__={};function __webpack_require__(o){var s=__webpack_module_cache__[o];if(s!==void 0)return s.exports;var i=__webpack_module_cache__[o]={exports:{}};return __webpack_modules__[o].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=o=>{var s=o&&o.__esModule?()=>o.default:()=>o;return __webpack_require__.d(s,{a:s}),s},__webpack_require__.d=(o,s)=>{for(var i in s)__webpack_require__.o(s,i)&&!__webpack_require__.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:s[i]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(o,s)=>Object.prototype.hasOwnProperty.call(o,s),__webpack_require__.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min$1);var ortWeb_minExports=ortWeb_min$1.exports;const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];var So;typeof process<"u"&&((So=process==null?void 0:process.release)==null?void 0:So.name)==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env!=null&&onnx_env.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={backends:{onnx:onnx_env,tfjs:{}},__dirname,version:VERSION,allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR,useCustomCache:!1,customCache:null};function isEmpty(o){return Object.keys(o).length===0}var define_process_env_default={};class FileResponse{constructor(s){Ut(this,"_CONTENT_TYPE_MAP",{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"});if(this.filePath=s,this.headers=new Headers,this.exists=sharp.existsSync(s),this.exists){this.status=200,this.statusText="OK";let i=sharp.statSync(s);this.headers.set("content-length",i.size.toString()),this.updateContentType();let a=this;this.body=new ReadableStream({start(d){a.arrayBuffer().then(_=>{d.enqueue(new Uint8Array(_)),d.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const s=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[s]??"application/octet-stream")}clone(){let s=new FileResponse(this.filePath);return s.exists=this.exists,s.status=this.status,s.statusText=this.statusText,s.headers=new Headers(this.headers),s}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const s=await sharp.promises.readFile(this.filePath);return new Blob([s],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(o,s=null,i=null){let a;try{a=new URL(o)}catch{return!1}return!(s&&!s.includes(a.protocol)||i&&!i.includes(a.hostname))}async function getFile(o){var s;if(env$1.useFS&&!isValidUrl(o,["http:","https:","blob:"]))return new FileResponse(o);if(typeof process<"u"&&((s=process==null?void 0:process.release)==null?void 0:s.name)==="node"){const i=!!(define_process_env_default!=null&&define_process_env_default.TESTING_REMOTELY),a=env$1.version,d=new Headers;if(d.set("User-Agent",`transformers.js/${a}; is_ci/${i};`),isValidUrl(o,["http:","https:"],["huggingface.co","hf.co"])){const b=(define_process_env_default==null?void 0:define_process_env_default.HF_TOKEN)??(define_process_env_default==null?void 0:define_process_env_default.HF_ACCESS_TOKEN);b&&d.set("Authorization",`Bearer ${b}`)}return fetch(o,{headers:d})}else return fetch(o)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(o,s,i){if(!i)return null;const a=ERROR_MAPPING[o]??`Error (${o}) occurred while trying to load file`;throw Error(`${a}: "${s}".`)}class FileCache{constructor(s){this.path=s}async match(s){let i=sharp.join(this.path,s),a=new FileResponse(i);if(a.exists)return a}async put(s,i){const a=Buffer.from(await i.arrayBuffer());let d=sharp.join(this.path,s);try{await sharp.promises.mkdir(sharp.dirname(d),{recursive:!0}),await sharp.promises.writeFile(d,a)}catch(_){console.warn("An error occurred while writing the file to cache:",_)}}}async function tryCache(o,...s){for(let i of s)try{let a=await o.match(i);if(a)return a}catch{continue}}async function getModelFile(o,s,i=!0,a={}){if(!env$1.allowLocalModels){if(a.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!env$1.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}dispatchCallback(a.progress_callback,{status:"initiate",name:o,file:s});let d;if(!d&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{d=await caches.open("transformers-cache")}catch(ot){console.warn("An error occurred while opening the browser cache:",ot)}}if(!d&&env$1.useFSCache&&(d=new FileCache(a.cache_dir??env$1.cacheDir)),!d&&env$1.useCustomCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");const _=a.revision??"main";let b=pathJoin(o,s),$=pathJoin(env$1.localModelPath,b),nt=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",o).replaceAll("{revision}",encodeURIComponent(_)),s),tt=_==="main"?b:pathJoin(o,_,s),et,g=d instanceof FileCache?tt:nt,c=!1,j;d&&(j=await tryCache(d,$,g));const _e=j!==void 0;if(j===void 0){if(env$1.allowLocalModels)if(isValidUrl(b,["http:","https:"])){if(a.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${b}.`);if(!env$1.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${b}.`)}else try{j=await getFile($),et=$}catch(it){console.warn(`Unable to load from local path "${$}": "${it}"`)}if(j===void 0||j.status===404){if(a.local_files_only||!env$1.allowRemoteModels){if(i)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${$}".`);return null}if(j=await getFile(nt),j.status!==200)return handleError(j.status,nt,i);et=g}c=d&&typeof Response<"u"&&j instanceof Response&&j.status===200}dispatchCallback(a.progress_callback,{status:"download",name:o,file:s});const rt={status:"progress",name:o,file:s};let st;return a.progress_callback?_e&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(st=new Uint8Array(await j.arrayBuffer()),dispatchCallback(a.progress_callback,{...rt,progress:100,loaded:st.length,total:st.length})):st=await readResponse(j,ot=>{dispatchCallback(a.progress_callback,{...rt,...ot})}):st=new Uint8Array(await j.arrayBuffer()),c&&et&&await d.match(et)===void 0&&await d.put(et,new Response(st,{headers:j.headers})).catch(ot=>{console.warn(`Unable to add response to browser cache: ${ot}.`)}),dispatchCallback(a.progress_callback,{status:"done",name:o,file:s}),st}async function getModelJSON(o,s,i=!0,a={}){let d=await getModelFile(o,s,i,a);if(d===null)return{};let b=new TextDecoder("utf-8").decode(d);return JSON.parse(b)}async function readResponse(o,s){const i=o.headers.get("Content-Length");i===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let a=parseInt(i??"0"),d=new Uint8Array(a),_=0;const b=o.body.getReader();async function $(){const{done:nt,value:tt}=await b.read();if(nt)return;let et=_+tt.length;if(et>a){a=et;let c=new Uint8Array(a);c.set(d),d=c}d.set(tt,_),_=et;const g=_/a*100;return s({progress:g,loaded:_,total:a}),$()}return await $(),d}function pathJoin(...o){return o=o.map((s,i)=>(i&&(s=s.replace(new RegExp("^/"),"")),i!==o.length-1&&(s=s.replace(new RegExp("/$"),"")),s)),o.join("/")}function interpolate_data(o,[s,i,a],[d,_],b="bilinear",$=!1){const nt=_/a,tt=d/i,et=new o.constructor(d*_*s),g=i*a,c=d*_;for(let j=0;j<d;++j)for(let _e=0;_e<_;++_e){const rt=j*_+_e,st=(_e+.5)/nt-.5,ot=(j+.5)/tt-.5;let it=Math.floor(st),at=Math.floor(ot);const lt=Math.min(it+1,a-1),ut=Math.min(at+1,i-1);it=Math.max(it,0),at=Math.max(at,0);const ct=st-it,dt=ot-at,ft=(1-ct)*(1-dt),ht=ct*(1-dt),mt=(1-ct)*dt,yt=ct*dt,Tt=at*a,St=ut*a,xt=Tt+it,wt=Tt+lt,gt=St+it,vt=St+lt;for(let Ot=0;Ot<s;++Ot){const At=Ot*g;et[Ot*c+rt]=ft*o[At+xt]+ht*o[At+wt]+mt*o[At+gt]+yt*o[At+vt]}}return et}function permute_data(o,s,i){const a=new Array(i.length),d=new Array(i.length);for(let $=i.length-1,nt=1;$>=0;--$)d[$]=nt,a[$]=s[i[$]],nt*=a[$];const _=i.map(($,nt)=>d[i.indexOf(nt)]),b=new o.constructor(o.length);for(let $=0;$<o.length;++$){let nt=0;for(let tt=s.length-1,et=$;tt>=0;--tt)nt+=et%s[tt]*_[tt],et=Math.floor(et/s[tt]);b[nt]=o[$]}return[b,a]}function softmax(o){const s=max(o)[0],i=o.map(_=>Math.exp(_-s)),a=i.reduce((_,b)=>_+b,0);return i.map(_=>_/a)}function log_softmax(o){return softmax(o).map(a=>Math.log(a))}function getTopItems(o,s=0){return o=Array.from(o).map((i,a)=>[a,i]).sort((i,a)=>a[1]-i[1]),s!==null&&s>0&&(o=o.slice(0,s)),o}function min(o){if(o.length===0)throw Error("Array must not be empty");let s=o[0],i=0;for(let a=1;a<o.length;++a)o[a]<s&&(s=o[a],i=a);return[s,i]}function max(o){if(o.length===0)throw Error("Array must not be empty");let s=o[0],i=0;for(let a=1;a<o.length;++a)o[a]>s&&(s=o[a],i=a);return[Number(s),i]}function isPowerOfTwo(o){return o>0&&(o&o-1)===0}class P2FFT{constructor(s){if(this.size=s|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=s<<1,this.table=new Float64Array(this.size*2);for(let a=0;a<this.table.length;a+=2){const d=Math.PI*a/this.size;this.table[a]=Math.cos(d),this.table[a+1]=-Math.sin(d)}let i=0;for(let a=1;this.size>a;a<<=1)++i;this._width=i%2===0?i-1:i,this._bitrev=new Int32Array(1<<this._width);for(let a=0;a<this._bitrev.length;++a){this._bitrev[a]=0;for(let d=0;d<this._width;d+=2){const _=this._width-d-2;this._bitrev[a]|=(a>>>d&3)<<_}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(s,i){const a=i||new Array(s.length>>>1);for(let d=0;d<s.length;d+=2)a[d>>>1]=s[d];return a}toComplexArray(s,i){const a=i||this.createComplexArray();for(let d=0;d<a.length;d+=2)a[d]=s[d>>>1],a[d+1]=0;return a}transform(s,i){if(s===i)throw new Error("Input and output buffers must be different");this._transform4(s,i,1)}realTransform(s,i){if(s===i)throw new Error("Input and output buffers must be different");this._realTransform4(s,i,1)}inverseTransform(s,i){if(s===i)throw new Error("Input and output buffers must be different");this._transform4(s,i,-1);for(let a=0;a<s.length;++a)s[a]/=this.size}_transform4(s,i,a){const d=this._csize;let b=1<<this._width,$=d/b<<1,nt,tt;const et=this._bitrev;if($===4)for(nt=0,tt=0;nt<d;nt+=$,++tt){const c=et[tt];this._singleTransform2(i,s,nt,c,b)}else for(nt=0,tt=0;nt<d;nt+=$,++tt){const c=et[tt];this._singleTransform4(i,s,nt,c,b,a)}const g=this.table;for(b>>=2;b>=2;b>>=2){$=d/b<<1;const c=$>>>2;for(nt=0;nt<d;nt+=$){const j=nt+c-1;for(let _e=nt,rt=0;_e<j;_e+=2,rt+=b){const st=_e,ot=st+c,it=ot+c,at=it+c,lt=s[st],ut=s[st+1],ct=s[ot],dt=s[ot+1],ft=s[it],ht=s[it+1],mt=s[at],yt=s[at+1],Tt=g[rt],St=a*g[rt+1],xt=ct*Tt-dt*St,wt=ct*St+dt*Tt,gt=g[2*rt],vt=a*g[2*rt+1],Ot=ft*gt-ht*vt,At=ft*vt+ht*gt,Ft=g[3*rt],Bt=a*g[3*rt+1],Wt=mt*Ft-yt*Bt,sn=mt*Bt+yt*Ft,Jt=lt+Ot,Kt=ut+At,rn=lt-Ot,zt=ut-At,nn=xt+Wt,wn=wt+sn,Qt=a*(xt-Wt),Zt=a*(wt-sn);s[st]=Jt+nn,s[st+1]=Kt+wn,s[ot]=rn+Zt,s[ot+1]=zt-Qt,s[it]=Jt-nn,s[it+1]=Kt-wn,s[at]=rn-Zt,s[at+1]=zt+Qt}}}}_singleTransform2(s,i,a,d,_){const b=s[d],$=s[d+1],nt=s[d+_],tt=s[d+_+1];i[a]=b+nt,i[a+1]=$+tt,i[a+2]=b-nt,i[a+3]=$-tt}_singleTransform4(s,i,a,d,_,b){const $=_*2,nt=_*3,tt=s[d],et=s[d+1],g=s[d+_],c=s[d+_+1],j=s[d+$],_e=s[d+$+1],rt=s[d+nt],st=s[d+nt+1],ot=tt+j,it=et+_e,at=tt-j,lt=et-_e,ut=g+rt,ct=c+st,dt=b*(g-rt),ft=b*(c-st);i[a]=ot+ut,i[a+1]=it+ct,i[a+2]=at+ft,i[a+3]=lt-dt,i[a+4]=ot-ut,i[a+5]=it-ct,i[a+6]=at-ft,i[a+7]=lt+dt}_realTransform4(s,i,a){const d=this._csize;let b=1<<this._width,$=d/b<<1,nt,tt;const et=this._bitrev;if($===4)for(nt=0,tt=0;nt<d;nt+=$,++tt){const j=et[tt];this._singleRealTransform2(i,s,nt,j>>>1,b>>>1)}else for(nt=0,tt=0;nt<d;nt+=$,++tt){const j=et[tt];this._singleRealTransform4(i,s,nt,j>>>1,b>>>1,a)}const g=this.table;for(b>>=2;b>=2;b>>=2){$=d/b<<1;const j=$>>>1,_e=j>>>1,rt=_e>>>1;for(nt=0;nt<d;nt+=$)for(let st=0,ot=0;st<=rt;st+=2,ot+=b){const it=nt+st,at=it+_e,lt=at+_e,ut=lt+_e,ct=s[it],dt=s[it+1],ft=s[at],ht=s[at+1],mt=s[lt],yt=s[lt+1],Tt=s[ut],St=s[ut+1],xt=ct,wt=dt,gt=g[ot],vt=a*g[ot+1],Ot=ft*gt-ht*vt,At=ft*vt+ht*gt,Ft=g[2*ot],Bt=a*g[2*ot+1],Wt=mt*Ft-yt*Bt,sn=mt*Bt+yt*Ft,Jt=g[3*ot],Kt=a*g[3*ot+1],rn=Tt*Jt-St*Kt,zt=Tt*Kt+St*Jt,nn=xt+Wt,wn=wt+sn,Qt=xt-Wt,Zt=wt-sn,en=Ot+rn,dn=At+zt,hn=a*(Ot-rn),Mn=a*(At-zt);if(s[it]=nn+en,s[it+1]=wn+dn,s[at]=Qt+Mn,s[at+1]=Zt-hn,st===0){s[lt]=nn-en,s[lt+1]=wn-dn;continue}if(st===rt)continue;const Nn=nt+_e-st,jn=nt+j-st;s[Nn]=Qt-a*Mn,s[Nn+1]=-Zt-a*hn,s[jn]=nn-a*en,s[jn+1]=-wn+a*dn}}const c=d>>>1;for(let j=2;j<c;j+=2)s[d-j]=s[j],s[d-j+1]=-s[j+1]}_singleRealTransform2(s,i,a,d,_){const b=s[d],$=s[d+_];i[a]=b+$,i[a+1]=0,i[a+2]=b-$,i[a+3]=0}_singleRealTransform4(s,i,a,d,_,b){const $=_*2,nt=_*3,tt=s[d],et=s[d+_],g=s[d+$],c=s[d+nt],j=tt+g,_e=tt-g,rt=et+c,st=b*(et-c);i[a]=j+rt,i[a+1]=0,i[a+2]=_e,i[a+3]=-st,i[a+4]=j-rt,i[a+5]=0,i[a+6]=_e,i[a+7]=st}}class NP2FFT{constructor(s){const i=2*(s-1),a=2*(2*s-1),d=2**Math.ceil(Math.log2(a));this.bufferSize=d,this._a=i;const _=new Float64Array(a),b=new Float64Array(d);this._chirpBuffer=new Float64Array(d),this._buffer1=new Float64Array(d),this._buffer2=new Float64Array(d),this._outBuffer1=new Float64Array(d),this._outBuffer2=new Float64Array(d);const $=-2*Math.PI/s,nt=Math.cos($),tt=Math.sin($);for(let et=0;et<a>>1;++et){const g=(et+1-s)**2/2,c=Math.sqrt(nt**2+tt**2)**g,j=g*Math.atan2(tt,nt),_e=2*et;_[_e]=c*Math.cos(j),_[_e+1]=c*Math.sin(j),b[_e]=_[_e],b[_e+1]=-_[_e+1]}this._slicedChirpBuffer=_.subarray(i,a),this._f=new P2FFT(d>>1),this._f.transform(this._chirpBuffer,b)}_transform(s,i,a){const d=this._buffer1,_=this._buffer2,b=this._outBuffer1,$=this._outBuffer2,nt=this._chirpBuffer,tt=this._slicedChirpBuffer,et=this._a;if(a)for(let g=0;g<tt.length;g+=2){const c=g+1,j=g>>1,_e=i[j];d[g]=_e*tt[g],d[c]=_e*tt[c]}else for(let g=0;g<tt.length;g+=2){const c=g+1;d[g]=i[g]*tt[g]-i[c]*tt[c],d[c]=i[g]*tt[c]+i[c]*tt[g]}this._f.transform(b,d);for(let g=0;g<nt.length;g+=2){const c=g+1;_[g]=b[g]*nt[g]-b[c]*nt[c],_[c]=b[g]*nt[c]+b[c]*nt[g]}this._f.inverseTransform($,_);for(let g=0;g<$.length;g+=2){const c=$[g+et],j=$[g+et+1],_e=tt[g],rt=tt[g+1];s[g]=c*_e-j*rt,s[g+1]=c*rt+j*_e}}transform(s,i){this._transform(s,i,!1)}realTransform(s,i){this._transform(s,i,!0)}}class FFT{constructor(s){this.fft_length=s,this.isPowerOfTwo=isPowerOfTwo(s),this.isPowerOfTwo?(this.fft=new P2FFT(s),this.outputBufferSize=2*s):(this.fft=new NP2FFT(s),this.outputBufferSize=this.fft.bufferSize)}realTransform(s,i){this.fft.realTransform(s,i)}transform(s,i){this.fft.transform(s,i)}}function medianFilter(o,s){if(s%2===0||s<=0)throw new Error("Window size must be a positive odd number");const i=new o.constructor(o.length),a=new o.constructor(s),d=Math.floor(s/2);for(let _=0;_<o.length;++_){let b=0;for(let $=-d;$<=d;++$){let nt=_+$;nt<0?nt=Math.abs(nt):nt>=o.length&&(nt=2*(o.length-1)-nt),a[b++]=o[nt]}a.sort(),i[_]=a[d]}return i}function round(o,s){const i=Math.pow(10,s);return Math.round(o*i)/i}function bankers_round(o){const s=Math.round(o);return Math.abs(o)%1===.5?s%2===0?s:s-1:s}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{constructor(...s){Ut(this,"dims");Ut(this,"type");Ut(this,"data");Ut(this,"size");return s[0]instanceof ONNXTensor$1?Object.assign(this,s[0]):Object.assign(this,new ONNXTensor$1(s[0],s[1],s[2])),new Proxy(this,{get:(i,a)=>{if(typeof a=="string"){let d=Number(a);if(Number.isInteger(d))return i._getitem(d)}return i[a]},set:(i,a,d)=>i[a]=d})}*[Symbol.iterator](){const[s,...i]=this.dims;if(i.length>0){const a=i.reduce((d,_)=>d*_);for(let d=0;d<s;++d)yield this._subarray(d,a,i)}else yield*this.data}_getitem(s){const[i,...a]=this.dims;if(s=safeIndex(s,i),a.length>0){const d=a.reduce((_,b)=>_*b);return this._subarray(s,d,a)}else return new Tensor(this.type,[this.data[s]],a)}indexOf(s){for(let i=0;i<this.data.length;++i)if(this.data[i]==s)return i;return-1}_subarray(s,i,a){const d=s*i,_=(s+1)*i,b="subarray"in this.data?this.data.subarray(d,_):this.data.slice(d,_);return new Tensor(this.type,b,a)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let s=0;s<this.data.length;++s)this.data[s]=1/(1+Math.exp(-this.data[s]));return this}mul(s){return this.clone().mul_(s)}mul_(s){for(let i=0;i<this.data.length;++i)this.data[i]*=s;return this}add(s){return this.clone().add_(s)}add_(s){for(let i=0;i<this.data.length;++i)this.data[i]+=s;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...s){let i=[],a=[];for(let nt=0;nt<this.dims.length;++nt){let tt=s[nt];if(tt==null)a.push([0,this.dims[nt]]),i.push(this.dims[nt]);else if(typeof tt=="number")tt=safeIndex(tt,this.dims[nt],nt),a.push([tt,tt+1]);else if(Array.isArray(tt)&&tt.length===2){if(tt[0]>tt[1])throw new Error(`Invalid slice: ${tt}`);let et=[Math.max(tt[0],0),Math.min(tt[1],this.dims[nt])];a.push(et),i.push(et[1]-et[0])}else throw new Error(`Invalid slice: ${tt}`)}let d=a.map(([nt,tt])=>tt-nt),_=d.reduce((nt,tt)=>nt*tt),b=new this.data.constructor(_);const $=this.stride();for(let nt=0;nt<_;++nt){let tt=0;for(let et=d.length-1,g=nt;et>=0;--et){const c=d[et];tt+=(g%c+a[et][0])*$[et],g=Math.floor(g/c)}b[nt]=this.data[tt]}return new Tensor(this.type,b,i)}permute(...s){return permute(this,s)}transpose(...s){return this.permute(...s)}sum(s=null,i=!1){return this.norm(1,s,i)}norm(s="fro",i=null,a=!1){if(s==="fro")s=2;else if(typeof s=="string")throw Error(`Unsupported norm: ${s}`);if(i===null){let b=this.data.reduce(($,nt)=>$+nt**s,0)**(1/s);return new Tensor(this.type,[b],[])}i=safeIndex(i,this.dims.length);const d=this.dims.slice();d[i]=1;const _=new this.data.constructor(this.data.length/this.dims[i]);for(let b=0;b<this.data.length;++b){let $=0;for(let nt=this.dims.length-1,tt=b,et=1;nt>=0;--nt){const g=this.dims[nt];if(nt!==i){const c=tt%g;$+=c*et,et*=d[nt]}tt=Math.floor(tt/g)}_[$]+=this.data[b]**s}if(s!==1)for(let b=0;b<_.length;++b)_[b]=_[b]**(1/s);return a||d.splice(i,1),new Tensor(this.type,_,d)}normalize_(s=2,i=1){i=safeIndex(i,this.dims.length);const a=this.norm(s,i,!0);for(let d=0;d<this.data.length;++d){let _=0;for(let b=this.dims.length-1,$=d,nt=1;b>=0;--b){const tt=this.dims[b];if(b!==i){const et=$%tt;_+=et*nt,nt*=this.dims[b]}$=Math.floor($/tt)}this.data[d]/=a.data[_]}return this}normalize(s=2,i=1){return this.clone().normalize_(s,i)}stride(){return dimsToStride(this.dims)}squeeze(s=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,s))}squeeze_(s=null){return this.dims=calc_squeeze_dims(this.dims,s),this}unsqueeze(s=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,s))}unsqueeze_(s=null){return this.dims=calc_unsqueeze_dims(this.dims,s),this}flatten_(s=0,i=-1){i=(i+this.dims.length)%this.dims.length;let a=this.dims.slice(0,s),d=this.dims.slice(s,i+1),_=this.dims.slice(i+1);return this.dims=[...a,d.reduce((b,$)=>b*$,1),..._],this}flatten(s=0,i=-1){return this.clone().flatten_(s,i)}view(...s){let i=-1;for(let a=0;a<s.length;++a)if(s[a]===-1){if(i!==-1)throw new Error("Only one dimension can be inferred");i=a}if(i!==-1){const a=s.reduce((d,_,b)=>b!==i?d*_:d,1);s[i]=this.data.length/a}return new Tensor(this.type,this.data,s)}neg_(){for(let s=0;s<this.data.length;++s)this.data[s]=-this.data[s];return this}neg(){return this.clone().neg_()}clamp_(s,i){for(let a=0;a<this.data.length;++a)this.data[a]=Math.min(Math.max(this.data[a],s),i);return this}clamp(s,i){return this.clone().clamp_(s,i)}round_(){for(let s=0;s<this.data.length;++s)this.data[s]=Math.round(this.data[s]);return this}round(){return this.clone().round_()}to(s){if(this.type===s)return this;if(!DataTypeMap.hasOwnProperty(s))throw new Error(`Unsupported type: ${s}`);return new Tensor(s,DataTypeMap[s].from(this.data),this.dims)}}function reshape(o,s){const i=o.length,a=s.reduce((_,b)=>_*b);if(i!==a)throw Error(`cannot reshape array of size ${i} into shape (${s})`);let d=o;for(let _=s.length-1;_>=0;_--)d=d.reduce((b,$)=>{let nt=b[b.length-1];return nt.length<s[_]?nt.push($):b.push([$]),b},[[]]);return d[0]}function permute(o,s){const[i,a]=permute_data(o.data,o.dims,s);return new Tensor(o.type,i,a)}function interpolate(o,[s,i],a="bilinear",d=!1){const _=o.dims.at(-3)??1,b=o.dims.at(-2),$=o.dims.at(-1);let nt=interpolate_data(o.data,[_,b,$],[s,i],a,d);return new Tensor(o.type,nt,[_,s,i])}function mean_pooling(o,s){let i=[o.dims[0],o.dims[2]],a=new o.data.constructor(i[0]*i[1]),[d,_,b]=o.dims,$=0;for(let nt=0;nt<d;++nt){let tt=nt*b*_;for(let et=0;et<b;++et){let g=0,c=0,j=nt*_,_e=tt+et;for(let st=0;st<_;++st){let ot=Number(s.data[j+st]);c+=ot,g+=o.data[_e+st*b]*ot}let rt=g/c;a[$++]=rt}}return new Tensor(o.type,a,i)}function calc_squeeze_dims(o,s){return o=o.slice(),s===null?o=o.filter(i=>i!==1):typeof s=="number"?o[s]===1&&o.splice(s,1):Array.isArray(s)&&(o=o.filter((i,a)=>i!==1||!s.includes(a))),o}function calc_unsqueeze_dims(o,s){return s=safeIndex(s,o.length+1),o=o.slice(),o.splice(s,0,1),o}function safeIndex(o,s,i=null){if(o<-s||o>=s)throw new Error(`IndexError: index ${o} is out of bounds for dimension${i===null?"":" "+i} with size ${s}`);return o<0&&(o=(o%s+s)%s),o}function cat(o,s=0){s=safeIndex(s,o[0].dims.length);const i=o[0].dims.slice();i[s]=o.reduce((b,$)=>b+$.dims[s],0);const a=i.reduce((b,$)=>b*$,1),d=new o[0].data.constructor(a),_=o[0].type;if(s===0){let b=0;for(let $ of o)d.set($.data,b),b+=$.data.length}else{let b=0;for(let $=0;$<o.length;++$){let nt=o[$];for(let tt=0;tt<nt.data.length;++tt){let et=0;for(let g=nt.dims.length-1,c=tt,j=1;g>=0;--g){const _e=nt.dims[g];let rt=c%_e;g===s&&(rt+=b),et+=rt*j,j*=i[g],c=Math.floor(c/_e)}d[et]=nt.data[tt]}b+=nt.dims[s]}}return new Tensor(_,d,i)}function stack(o,s=0){return cat(o.map(i=>i.unsqueeze(s)),s)}function std_mean(o,s=null,i=1,a=!1){if(s===null){const tt=o.data.reduce((j,_e)=>j+_e,0)/o.data.length,et=Math.sqrt(o.data.reduce((j,_e)=>j+(_e-tt)**2,0)/(o.data.length-i)),g=new Tensor(o.type,[tt],[]);return[new Tensor(o.type,[et],[]),g]}s=safeIndex(s,o.dims.length);const d=mean(o,s,a),_=o.dims.slice();_[s]=1;const b=new o.data.constructor(o.data.length/o.dims[s]);for(let nt=0;nt<o.data.length;++nt){let tt=0;for(let et=o.dims.length-1,g=nt,c=1;et>=0;--et){const j=o.dims[et];if(et!==s){const _e=g%j;tt+=_e*c,c*=_[et]}g=Math.floor(g/j)}b[tt]+=(o.data[nt]-d.data[tt])**2}for(let nt=0;nt<b.length;++nt)b[nt]=Math.sqrt(b[nt]/(o.dims[s]-i));return a||_.splice(s,1),[new Tensor(o.type,b,_),d]}function mean(o,s=null,i=!1){if(s===null){let _=o.data.reduce((b,$)=>b+$,0);return new Tensor(o.type,[_/o.data.length],[])}s=safeIndex(s,o.dims.length);const a=o.dims.slice();a[s]=1;const d=new o.data.constructor(o.data.length/o.dims[s]);for(let _=0;_<o.data.length;++_){let b=0;for(let $=o.dims.length-1,nt=_,tt=1;$>=0;--$){const et=o.dims[$];if($!==s){const g=nt%et;b+=g*tt,tt*=a[$]}nt=Math.floor(nt/et)}d[b]+=o.data[_]}if(o.dims[s]!==1)for(let _=0;_<d.length;++_)d[_]=d[_]/o.dims[s];return i||a.splice(s,1),new Tensor(o.type,d,a)}function dynamicTimeWarping(o){const[s,i]=o.dims,a=[s+1,i+1],d=new Tensor("float32",new Float32Array(a[0]*a[1]).fill(1/0),a),_=new Tensor("float32",new Float32Array(a[0]*a[1]).fill(-1),a);d[0].data[0]=0;for(let et=1;et<i+1;++et)for(let g=1;g<s+1;++g){const c=d[g-1][et-1].item(),j=d[g-1][et].item(),_e=d[g][et-1].item();let rt,st;c<j&&c<_e?(rt=c,st=0):j<c&&j<_e?(rt=j,st=1):(rt=_e,st=2),d[g].data[et]=o[g-1][et-1].item()+rt,_[g].data[et]=st}let b=s,$=i;_.data.fill(2,0,a[1]);for(let et=0;et<a[0];++et)_[et].data[0]=1;let nt=[],tt=[];for(;b>0||$>0;)switch(nt.push(b-1),tt.push($-1),_[b][$].item()){case 0:--b,--$;break;case 1:--b;break;case 2:--$;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${b}, ${$}]. Please file a bug report.`)}return nt.reverse(),tt.reverse(),[nt,tt]}function dimsToStride(o){const s=new Array(o.length);for(let i=o.length-1,a=1;i>=0;--i)s[i]=a,a*=o[i];return s}function ones(o){const s=o.reduce((i,a)=>i*a,1);return new Tensor("int64",new BigInt64Array(s).fill(1n),o)}function ones_like(o){return ones(o.dims)}function quantize_embeddings(o,s){if(o.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(o.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(s))throw new Error("The precision must be either 'binary' or 'ubinary'");const i=s==="binary",a=i?"int8":"uint8",d=i?Int8Array:Uint8Array,_=o.data,b=new d(_.length/8);for(let $=0;$<_.length;++$){const nt=_[$]>0?1:0,tt=Math.floor($/8),et=$%8;b[tt]|=nt<<7-et,i&&et===0&&(b[tt]-=128)}return new Tensor(a,b,[o.dims[0],o.dims[1]/8])}class PriorityQueue{constructor(s=(i,a)=>i>a){this._heap=[],this._comparator=s}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...s){return this.extend(s)}extend(s){for(const i of s)this._heap.push(i),this._siftUp();return this.size}pop(){const s=this.peek(),i=this.size-1;return i>0&&this._swap(0,i),this._heap.pop(),this._siftDown(),s}replace(s){const i=this.peek();return this._heap[0]=s,this._siftDown(),i}_parent(s){return(s+1>>>1)-1}_left(s){return(s<<1)+1}_right(s){return s+1<<1}_greater(s,i){return this._comparator(this._heap[s],this._heap[i])}_swap(s,i){const a=this._heap[s];this._heap[s]=this._heap[i],this._heap[i]=a}_siftUp(){let s=this.size-1;for(;s>0&&this._greater(s,this._parent(s));)this._swap(s,this._parent(s)),s=this._parent(s)}_siftDown(){let s=0;for(;this._left(s)<this.size&&this._greater(this._left(s),s)||this._right(s)<this.size&&this._greater(this._right(s),s);){const i=this._right(s)<this.size&&this._greater(this._right(s),this._left(s))?this._right(s):this._left(s);this._swap(s,i),s=i}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(s){for(let i of s)this.push(i)}push(s){let i=this.root;for(let a of s){let d=i.children.get(a);d===void 0&&(d=CharTrieNode.default(),i.children.set(a,d)),i=d}i.isLeaf=!0}*commonPrefixSearch(s){let i=this.root,a="";for(let d=0;d<s.length&&i!==void 0;++d){const _=s[d];a+=_,i=i.children.get(_),i!==void 0&&i.isLeaf&&(yield a)}}}class CharTrieNode{constructor(s,i){this.isLeaf=s,this.children=i}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(s,i,a){this.sentence=s,this.len=s.length,this.bosTokenId=i,this.eosTokenId=a,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const d=new TokenLatticeNode(this.bosTokenId,0,0,0,0),_=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(d.clone()),this.nodes.push(_.clone()),this.beginNodes[this.len].push(_),this.endNodes[0].push(d)}insert(s,i,a,d){const _=this.nodes.length,b=new TokenLatticeNode(d,_,s,i,a);this.beginNodes[s].push(b),this.endNodes[s+i].push(b),this.nodes.push(b)}viterbi(){const s=this.len;let i=0;for(;i<=s;){if(this.beginNodes[i].length==0)return[];for(let $ of this.beginNodes[i]){$.prev=null;let nt=0,tt=null;for(let et of this.endNodes[i]){const g=et.backtraceScore+$.score;(tt===null||g>nt)&&(tt=et.clone(),nt=g)}if(tt!==null)$.prev=tt,$.backtraceScore=nt;else return[]}++i}const a=[],_=this.beginNodes[s][0].prev;if(_===null)return[];let b=_.clone();for(;b.prev!==null;)a.push(b.clone()),b=b.clone().prev.clone();return a.reverse(),a}piece(s){return this.sentence.slice(s.pos,s.pos+s.length)}tokens(){return this.viterbi().map(i=>this.piece(i))}tokenIds(){return this.viterbi().map(i=>i.tokenId)}}class TokenLatticeNode{constructor(s,i,a,d,_){this.tokenId=s,this.nodeId=i,this.pos=a,this.length=d,this.score=_,this.prev=null,this.backtraceScore=0}clone(){const s=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return s.prev=this.prev,s.backtraceScore=this.backtraceScore,s}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(o,s){this.value=o,this.type=s}};function isWord(o){return/\w/.test(o)}function isInteger(o){return/[0-9]/.test(o)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(o,s={}){return o.endsWith(`
`)&&(o=o.slice(0,-1)),o=o.replace(/{#.*?#}/gs,"{##}"),s.lstrip_blocks&&(o=o.replace(/^[ \t]*({[#%])/gm,"$1")),s.trim_blocks&&(o=o.replace(/([#%]})\n/g,"$1")),o.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(o,s={}){var b,$,nt;const i=[],a=preprocess(o,s);let d=0;const _=tt=>{let et="";for(;tt(a[d]);){if(a[d]==="\\"){if(++d,d>=a.length)throw new SyntaxError("Unexpected end of input");const g=a[d++],c=ESCAPE_CHARACTERS.get(g);if(c===void 0)throw new SyntaxError(`Unexpected escaped character: ${g}`);et+=c;continue}if(et+=a[d++],d>=a.length)throw new SyntaxError("Unexpected end of input")}return et};e:for(;d<a.length;){const tt=(b=i.at(-1))==null?void 0:b.type;if(tt===void 0||tt===TOKEN_TYPES.CloseStatement||tt===TOKEN_TYPES.CloseExpression){let g="";for(;d<a.length&&!(a[d]==="{"&&(a[d+1]==="%"||a[d+1]==="{"));)g+=a[d++];if(g.length>0){i.push(new Token(g,TOKEN_TYPES.Text));continue}}_(g=>/\s/.test(g));const et=a[d];if(et==="-"||et==="+"){const g=($=i.at(-1))==null?void 0:$.type;if(g===TOKEN_TYPES.Text||g===void 0)throw new SyntaxError(`Unexpected character: ${et}`);switch(g){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++d;const c=_(isInteger);i.push(new Token(`${et}${c}`,c.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[g,c]of ORDERED_MAPPING_TABLE)if(a.slice(d,d+g.length)===g){i.push(new Token(g,c)),d+=g.length;continue e}if(et==="'"||et==='"'){++d;const g=_(c=>c!==et);i.push(new Token(g,TOKEN_TYPES.StringLiteral)),++d;continue}if(isInteger(et)){const g=_(isInteger);i.push(new Token(g,TOKEN_TYPES.NumericLiteral));continue}if(isWord(et)){const g=_(isWord),c=Object.hasOwn(KEYWORDS,g)?KEYWORDS[g]:TOKEN_TYPES.Identifier;c===TOKEN_TYPES.In&&((nt=i.at(-1))==null?void 0:nt.type)===TOKEN_TYPES.Not?(i.pop(),i.push(new Token("not in",TOKEN_TYPES.NotIn))):i.push(new Token(g,c));continue}throw new SyntaxError(`Unexpected character: ${et}`)}return i}var Statement=class{constructor(){Ut(this,"type","Statement")}},Program=class extends Statement{constructor(s){super();Ut(this,"type","Program");this.body=s}},If=class extends Statement{constructor(s,i,a){super();Ut(this,"type","If");this.test=s,this.body=i,this.alternate=a}},For=class extends Statement{constructor(s,i,a){super();Ut(this,"type","For");this.loopvar=s,this.iterable=i,this.body=a}},SetStatement=class extends Statement{constructor(s,i){super();Ut(this,"type","Set");this.assignee=s,this.value=i}},Expression=class extends Statement{constructor(){super(...arguments);Ut(this,"type","Expression")}},MemberExpression=class extends Expression{constructor(s,i,a){super();Ut(this,"type","MemberExpression");this.object=s,this.property=i,this.computed=a}},CallExpression=class extends Expression{constructor(s,i){super();Ut(this,"type","CallExpression");this.callee=s,this.args=i}},Identifier=class extends Expression{constructor(s){super();Ut(this,"type","Identifier");this.value=s}},Literal=class extends Expression{constructor(s){super();Ut(this,"type","Literal");this.value=s}},NumericLiteral=class extends Literal{constructor(){super(...arguments);Ut(this,"type","NumericLiteral")}},StringLiteral=class extends Literal{constructor(){super(...arguments);Ut(this,"type","StringLiteral")}},BooleanLiteral=class extends Literal{constructor(){super(...arguments);Ut(this,"type","BooleanLiteral")}},ArrayLiteral=class extends Literal{constructor(){super(...arguments);Ut(this,"type","ArrayLiteral")}},TupleLiteral=class extends Literal{constructor(){super(...arguments);Ut(this,"type","TupleLiteral")}},ObjectLiteral=class extends Literal{constructor(){super(...arguments);Ut(this,"type","ObjectLiteral")}},BinaryExpression=class extends Expression{constructor(s,i,a){super();Ut(this,"type","BinaryExpression");this.operator=s,this.left=i,this.right=a}},FilterExpression=class extends Expression{constructor(s,i){super();Ut(this,"type","FilterExpression");this.operand=s,this.filter=i}},TestExpression=class extends Expression{constructor(s,i,a){super();Ut(this,"type","TestExpression");this.operand=s,this.negate=i,this.test=a}},UnaryExpression=class extends Expression{constructor(s,i){super();Ut(this,"type","UnaryExpression");this.operator=s,this.argument=i}},SliceExpression=class extends Expression{constructor(s=void 0,i=void 0,a=void 0){super();Ut(this,"type","SliceExpression");this.start=s,this.stop=i,this.step=a}},KeywordArgumentExpression=class extends Expression{constructor(s,i){super();Ut(this,"type","KeywordArgumentExpression");this.key=s,this.value=i}};function parse(o){const s=new Program([]);let i=0;function a(wt,gt){const vt=o[i++];if(!vt||vt.type!==wt)throw new Error(`Parser Error: ${gt}. ${vt.type} !== ${wt}.`);return vt}function d(){switch(o[i].type){case TOKEN_TYPES.Text:return $();case TOKEN_TYPES.OpenStatement:return nt();case TOKEN_TYPES.OpenExpression:return tt();default:throw new SyntaxError(`Unexpected token type: ${o[i].type}`)}}function _(...wt){return i+wt.length<=o.length&&wt.some((gt,vt)=>gt!==o[i+vt].type)}function b(...wt){return i+wt.length<=o.length&&wt.every((gt,vt)=>gt===o[i+vt].type)}function $(){return new StringLiteral(a(TOKEN_TYPES.Text,"Expected text token").value)}function nt(){a(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let wt;switch(o[i].type){case TOKEN_TYPES.Set:++i,wt=et(),a(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++i,wt=g(),a(TOKEN_TYPES.OpenStatement,"Expected {% token"),a(TOKEN_TYPES.EndIf,"Expected endif token"),a(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++i,wt=j(),a(TOKEN_TYPES.OpenStatement,"Expected {% token"),a(TOKEN_TYPES.EndFor,"Expected endfor token"),a(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${o[i].type}`)}return wt}function tt(){a(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const wt=_e();return a(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),wt}function et(){const wt=_e();if(b(TOKEN_TYPES.Equals)){++i;const gt=et();return new SetStatement(wt,gt)}return wt}function g(){var Ot,At,Ft,Bt,Wt,sn,Jt,Kt;const wt=_e();a(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const gt=[],vt=[];for(;!(((Ot=o[i])==null?void 0:Ot.type)===TOKEN_TYPES.OpenStatement&&(((At=o[i+1])==null?void 0:At.type)===TOKEN_TYPES.ElseIf||((Ft=o[i+1])==null?void 0:Ft.type)===TOKEN_TYPES.Else||((Bt=o[i+1])==null?void 0:Bt.type)===TOKEN_TYPES.EndIf));)gt.push(d());if(((Wt=o[i])==null?void 0:Wt.type)===TOKEN_TYPES.OpenStatement&&((sn=o[i+1])==null?void 0:sn.type)!==TOKEN_TYPES.EndIf)if(++i,b(TOKEN_TYPES.ElseIf))a(TOKEN_TYPES.ElseIf,"Expected elseif token"),vt.push(g());else for(a(TOKEN_TYPES.Else,"Expected else token"),a(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(((Jt=o[i])==null?void 0:Jt.type)===TOKEN_TYPES.OpenStatement&&((Kt=o[i+1])==null?void 0:Kt.type)===TOKEN_TYPES.EndIf);)vt.push(d());return new If(wt,gt,vt)}function c(wt=!1){const gt=wt?xt:_e,vt=[gt()],Ot=b(TOKEN_TYPES.Comma);for(;Ot&&(++i,vt.push(gt()),!!b(TOKEN_TYPES.Comma)););return Ot?new TupleLiteral(vt):vt[0]}function j(){const wt=c(!0);if(!(wt instanceof Identifier||wt instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${wt.type} instead`);a(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const gt=_e();a(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const vt=[];for(;_(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)vt.push(d());return new For(wt,gt,vt)}function _e(){return rt()}function rt(){const wt=st();if(b(TOKEN_TYPES.If)){++i;const gt=st();a(TOKEN_TYPES.Else,"Expected else token");const vt=st();return new If(gt,[wt],[vt])}return wt}function st(){let wt=ot();for(;b(TOKEN_TYPES.Or);){const gt=o[i];++i;const vt=ot();wt=new BinaryExpression(gt,wt,vt)}return wt}function ot(){let wt=it();for(;b(TOKEN_TYPES.And);){const gt=o[i];++i;const vt=it();wt=new BinaryExpression(gt,wt,vt)}return wt}function it(){let wt;for(;b(TOKEN_TYPES.Not);){const gt=o[i];++i;const vt=it();wt=new UnaryExpression(gt,vt)}return wt??at()}function at(){let wt=lt();for(;b(TOKEN_TYPES.ComparisonBinaryOperator)||b(TOKEN_TYPES.In)||b(TOKEN_TYPES.NotIn);){const gt=o[i];++i;const vt=lt();wt=new BinaryExpression(gt,wt,vt)}return wt}function lt(){let wt=yt();for(;b(TOKEN_TYPES.AdditiveBinaryOperator);){const gt=o[i];++i;const vt=yt();wt=new BinaryExpression(gt,wt,vt)}return wt}function ut(){const wt=mt();return b(TOKEN_TYPES.OpenParen)?ct(wt):wt}function ct(wt){let gt=new CallExpression(wt,dt());return b(TOKEN_TYPES.OpenParen)&&(gt=ct(gt)),gt}function dt(){a(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const wt=ft();return a(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),wt}function ft(){const wt=[];for(;!b(TOKEN_TYPES.CloseParen);){let gt=_e();if(b(TOKEN_TYPES.Equals)){if(++i,!(gt instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const vt=_e();gt=new KeywordArgumentExpression(gt,vt)}wt.push(gt),b(TOKEN_TYPES.Comma)&&++i}return wt}function ht(){const wt=[];let gt=!1;for(;!b(TOKEN_TYPES.CloseSquareBracket);)b(TOKEN_TYPES.Colon)?(wt.push(void 0),++i,gt=!0):(wt.push(_e()),b(TOKEN_TYPES.Colon)&&(++i,gt=!0));if(wt.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(gt){if(wt.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...wt)}return wt[0]}function mt(){let wt=xt();for(;b(TOKEN_TYPES.Dot)||b(TOKEN_TYPES.OpenSquareBracket);){const gt=o[i];++i;let vt;const Ot=gt.type!==TOKEN_TYPES.Dot;if(Ot)vt=ht(),a(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(vt=xt(),vt.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");wt=new MemberExpression(wt,vt,Ot)}return wt}function yt(){let wt=Tt();for(;b(TOKEN_TYPES.MultiplicativeBinaryOperator);){const gt=o[i];++i;const vt=Tt();wt=new BinaryExpression(gt,wt,vt)}return wt}function Tt(){let wt=St();for(;b(TOKEN_TYPES.Is);){++i;const gt=b(TOKEN_TYPES.Not);gt&&++i;let vt=xt();if(vt instanceof BooleanLiteral&&(vt=new Identifier(vt.value.toString())),!(vt instanceof Identifier))throw new SyntaxError("Expected identifier for the test");wt=new TestExpression(wt,gt,vt)}return wt}function St(){let wt=ut();for(;b(TOKEN_TYPES.Pipe);){++i;let gt=xt();if(!(gt instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");b(TOKEN_TYPES.OpenParen)&&(gt=ct(gt)),wt=new FilterExpression(wt,gt)}return wt}function xt(){const wt=o[i];switch(wt.type){case TOKEN_TYPES.NumericLiteral:return++i,new NumericLiteral(Number(wt.value));case TOKEN_TYPES.StringLiteral:return++i,new StringLiteral(wt.value);case TOKEN_TYPES.BooleanLiteral:return++i,new BooleanLiteral(wt.value==="true");case TOKEN_TYPES.Identifier:return++i,new Identifier(wt.value);case TOKEN_TYPES.OpenParen:{++i;const gt=c();if(o[i].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${o[i].type} instead`);return++i,gt}case TOKEN_TYPES.OpenSquareBracket:{++i;const gt=[];for(;!b(TOKEN_TYPES.CloseSquareBracket);)gt.push(_e()),b(TOKEN_TYPES.Comma)&&++i;return++i,new ArrayLiteral(gt)}case TOKEN_TYPES.OpenCurlyBracket:{++i;const gt=new Map;for(;!b(TOKEN_TYPES.CloseCurlyBracket);){const vt=_e();a(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const Ot=_e();gt.set(vt,Ot),b(TOKEN_TYPES.Comma)&&++i}return++i,new ObjectLiteral(gt)}default:throw new SyntaxError(`Unexpected token: ${wt.type}`)}}for(;i<o.length;)s.body.push(d());return s}function range(o,s,i=1){s===void 0&&(s=o,o=0);const a=[];for(let d=o;d<s;d+=i)a.push(d);return a}function slice(o,s,i,a=1){const d=Math.sign(a);d>=0?(s=(s??(s=0))<0?Math.max(o.length+s,0):Math.min(s,o.length),i=(i??(i=o.length))<0?Math.max(o.length+i,0):Math.min(i,o.length)):(s=(s??(s=o.length-1))<0?Math.max(o.length+s,-1):Math.min(s,o.length-1),i=(i??(i=-1))<-1?Math.max(o.length+i,-1):Math.min(i,o.length-1));const _=[];for(let b=s;d*b<d*i;b+=a)_.push(o[b]);return _}function titleCase(o){return o.replace(/\b\w/g,s=>s.toUpperCase())}var RuntimeValue=class{constructor(o=void 0){Ut(this,"type","RuntimeValue");Ut(this,"value");Ut(this,"builtins",new Map);this.value=o}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{constructor(){super(...arguments);Ut(this,"type","NumericValue")}},StringValue=class extends RuntimeValue{constructor(){super(...arguments);Ut(this,"type","StringValue");Ut(this,"builtins",new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]]))}},BooleanValue=class extends RuntimeValue{constructor(){super(...arguments);Ut(this,"type","BooleanValue")}},ObjectValue=class extends RuntimeValue{constructor(){super(...arguments);Ut(this,"type","ObjectValue");Ut(this,"builtins",new Map([["get",new FunctionValue(([s,i])=>{if(!(s instanceof StringValue))throw new Error(`Object key must be a string: got ${s.type}`);return this.value.get(s.value)??i??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([s,i])=>new ArrayValue([new StringValue(s),i]))))]]))}__bool__(){return new BooleanValue(this.value.size>0)}},ArrayValue=class extends RuntimeValue{constructor(){super(...arguments);Ut(this,"type","ArrayValue");Ut(this,"builtins",new Map([["length",new NumericValue(this.value.length)]]))}__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{constructor(){super(...arguments);Ut(this,"type","TupleValue")}},FunctionValue=class extends RuntimeValue{constructor(){super(...arguments);Ut(this,"type","FunctionValue")}},NullValue=class extends RuntimeValue{constructor(){super(...arguments);Ut(this,"type","NullValue")}},UndefinedValue=class extends RuntimeValue{constructor(){super(...arguments);Ut(this,"type","UndefinedValue")}},Environment=class{constructor(o){Ut(this,"variables",new Map([["namespace",new FunctionValue(o=>{if(o.length===0)return new ObjectValue(new Map);if(o.length!==1||!(o[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return o[0]})]]));Ut(this,"tests",new Map([["boolean",o=>o.type==="BooleanValue"],["callable",o=>o instanceof FunctionValue],["odd",o=>{if(o.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${o.type}`);return o.value%2!==0}],["even",o=>{if(o.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${o.type}`);return o.value%2===0}],["false",o=>o.type==="BooleanValue"&&!o.value],["true",o=>o.type==="BooleanValue"&&o.value],["number",o=>o.type==="NumericValue"],["integer",o=>o.type==="NumericValue"&&Number.isInteger(o.value)],["iterable",o=>o instanceof ArrayValue||o instanceof StringValue],["lower",o=>{const s=o.value;return o.type==="StringValue"&&s===s.toLowerCase()}],["upper",o=>{const s=o.value;return o.type==="StringValue"&&s===s.toUpperCase()}],["none",o=>o.type==="NullValue"],["defined",o=>o.type!=="UndefinedValue"],["undefined",o=>o.type==="UndefinedValue"],["equalto",(o,s)=>o.value===s.value]]));this.parent=o}set(o,s){return this.declareVariable(o,convertToRuntimeValues(s))}declareVariable(o,s){if(this.variables.has(o))throw new SyntaxError(`Variable already declared: ${o}`);return this.variables.set(o,s),s}setVariable(o,s){return this.variables.set(o,s),s}resolve(o){if(this.variables.has(o))return this;if(this.parent)return this.parent.resolve(o);throw new Error(`Unknown variable: ${o}`)}lookupVariable(o){try{return this.resolve(o).variables.get(o)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{constructor(o){Ut(this,"global");this.global=o??new Environment}run(o){return this.evaluate(o,this.global)}evaluateBinaryExpression(o,s){const i=this.evaluate(o.left,s);switch(o.operator.value){case"and":return i.__bool__().value?this.evaluate(o.right,s):i;case"or":return i.__bool__().value?i:this.evaluate(o.right,s)}const a=this.evaluate(o.right,s);switch(o.operator.value){case"==":return new BooleanValue(i.value==a.value);case"!=":return new BooleanValue(i.value!=a.value)}if(i instanceof UndefinedValue||a instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(i instanceof NullValue||a instanceof NullValue)throw new Error("Cannot perform operation on null values");if(i instanceof NumericValue&&a instanceof NumericValue)switch(o.operator.value){case"+":return new NumericValue(i.value+a.value);case"-":return new NumericValue(i.value-a.value);case"*":return new NumericValue(i.value*a.value);case"/":return new NumericValue(i.value/a.value);case"%":return new NumericValue(i.value%a.value);case"<":return new BooleanValue(i.value<a.value);case">":return new BooleanValue(i.value>a.value);case">=":return new BooleanValue(i.value>=a.value);case"<=":return new BooleanValue(i.value<=a.value)}else if(i instanceof ArrayValue&&a instanceof ArrayValue)switch(o.operator.value){case"+":return new ArrayValue(i.value.concat(a.value))}else if(a instanceof ArrayValue){const d=a.value.find(_=>_.value===i.value)!==void 0;switch(o.operator.value){case"in":return new BooleanValue(d);case"not in":return new BooleanValue(!d)}}if(i instanceof StringValue||a instanceof StringValue)switch(o.operator.value){case"+":return new StringValue(i.value.toString()+a.value.toString())}if(i instanceof StringValue&&a instanceof StringValue)switch(o.operator.value){case"in":return new BooleanValue(a.value.includes(i.value));case"not in":return new BooleanValue(!a.value.includes(i.value))}if(i instanceof StringValue&&a instanceof ObjectValue)switch(o.operator.value){case"in":return new BooleanValue(a.value.has(i.value));case"not in":return new BooleanValue(!a.value.has(i.value))}throw new SyntaxError(`Unknown operator "${o.operator.value}" between ${i.type} and ${a.type}`)}evaluateFilterExpression(o,s){const i=this.evaluate(o.operand,s);if(o.filter.type==="Identifier"){const a=o.filter;if(i instanceof ArrayValue)switch(a.value){case"list":return i;case"first":return i.value[0];case"last":return i.value[i.value.length-1];case"length":return new NumericValue(i.value.length);case"reverse":return new ArrayValue(i.value.reverse());case"sort":return new ArrayValue(i.value.sort((d,_)=>{if(d.type!==_.type)throw new Error(`Cannot compare different types: ${d.type} and ${_.type}`);switch(d.type){case"NumericValue":return d.value-_.value;case"StringValue":return d.value.localeCompare(_.value);default:throw new Error(`Cannot compare type: ${d.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${a.value}`)}else if(i instanceof StringValue)switch(a.value){case"length":return new NumericValue(i.value.length);case"upper":return new StringValue(i.value.toUpperCase());case"lower":return new StringValue(i.value.toLowerCase());case"title":return new StringValue(titleCase(i.value));case"capitalize":return new StringValue(i.value.charAt(0).toUpperCase()+i.value.slice(1));case"trim":return new StringValue(i.value.trim());default:throw new Error(`Unknown StringValue filter: ${a.value}`)}else if(i instanceof NumericValue)switch(a.value){case"abs":return new NumericValue(Math.abs(i.value));default:throw new Error(`Unknown NumericValue filter: ${a.value}`)}else if(i instanceof ObjectValue)switch(a.value){case"items":return new ArrayValue(Array.from(i.value.entries()).map(([d,_])=>new ArrayValue([new StringValue(d),_])));case"length":return new NumericValue(i.value.size);default:throw new Error(`Unknown ObjectValue filter: ${a.value}`)}throw new Error(`Cannot apply filter "${a.value}" to type: ${i.type}`)}else if(o.filter.type==="CallExpression"){const a=o.filter;if(a.callee.type!=="Identifier")throw new Error(`Unknown filter: ${a.callee.type}`);const d=a.callee.value;if(i instanceof ArrayValue){switch(d){case"selectattr":{if(i.value.some(et=>!(et instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(a.args.some(et=>et.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[_,b,$]=a.args.map(et=>this.evaluate(et,s));let nt;if(b){const et=s.tests.get(b.value);if(!et)throw new Error(`Unknown test: ${b.value}`);nt=et}else nt=(...et)=>et[0].__bool__().value;const tt=i.value.filter(et=>{const g=et.value.get(_.value);return g?nt(g,$):!1});return new ArrayValue(tt)}}throw new Error(`Unknown ArrayValue filter: ${d}`)}else throw new Error(`Cannot apply filter "${d}" to type: ${i.type}`)}throw new Error(`Unknown filter: ${o.filter.type}`)}evaluateTestExpression(o,s){const i=this.evaluate(o.operand,s),a=s.tests.get(o.test.value);if(!a)throw new Error(`Unknown test: ${o.test.value}`);const d=a(i);return new BooleanValue(o.negate?!d:d)}evaluateUnaryExpression(o,s){const i=this.evaluate(o.argument,s);switch(o.operator.value){case"not":return new BooleanValue(!i.value);default:throw new SyntaxError(`Unknown operator: ${o.operator.value}`)}}evalProgram(o,s){return this.evaluateBlock(o.body,s)}evaluateBlock(o,s){let i="";for(const a of o){const d=this.evaluate(a,s);d.type!=="NullValue"&&d.type!=="UndefinedValue"&&(i+=d.value)}return new StringValue(i)}evaluateIdentifier(o,s){return s.lookupVariable(o.value)}evaluateCallExpression(o,s){const i=[],a=new Map;for(const _ of o.args)if(_.type==="KeywordArgumentExpression"){const b=_;a.set(b.key.value,this.evaluate(b.value,s))}else i.push(this.evaluate(_,s));a.size>0&&i.push(new ObjectValue(a));const d=this.evaluate(o.callee,s);if(d.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${d.type}`);return d.value(i,s)}evaluateSliceExpression(o,s,i){if(!(o instanceof ArrayValue||o instanceof StringValue))throw new Error("Slice object must be an array or string");const a=this.evaluate(s.start,i),d=this.evaluate(s.stop,i),_=this.evaluate(s.step,i);if(!(a instanceof NumericValue||a instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(d instanceof NumericValue||d instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(_ instanceof NumericValue||_ instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return o instanceof ArrayValue?new ArrayValue(slice(o.value,a.value,d.value,_.value)):new StringValue(slice(Array.from(o.value),a.value,d.value,_.value).join(""))}evaluateMemberExpression(o,s){const i=this.evaluate(o.object,s);let a;if(o.computed){if(o.property.type==="SliceExpression")return this.evaluateSliceExpression(i,o.property,s);a=this.evaluate(o.property,s)}else a=new StringValue(o.property.value);let d;if(i instanceof ObjectValue){if(!(a instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${a.type}`);d=i.value.get(a.value)??i.builtins.get(a.value)}else if(i instanceof ArrayValue||i instanceof StringValue)if(a instanceof NumericValue)d=i.value.at(a.value),i instanceof StringValue&&(d=new StringValue(i.value.at(a.value)));else if(a instanceof StringValue)d=i.builtins.get(a.value);else throw new Error(`Cannot access property with non-string/non-number: got ${a.type}`);else{if(!(a instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${a.type}`);d=i.builtins.get(a.value)}return d instanceof RuntimeValue?d:new UndefinedValue}evaluateSet(o,s){const i=this.evaluate(o.value,s);if(o.assignee.type==="Identifier"){const a=o.assignee.value;s.setVariable(a,i)}else if(o.assignee.type==="MemberExpression"){const a=o.assignee,d=this.evaluate(a.object,s);if(!(d instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(a.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");d.value.set(a.property.value,i)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(o.assignee)}`);return new NullValue}evaluateIf(o,s){const i=this.evaluate(o.test,s);return this.evaluateBlock(i.__bool__().value?o.body:o.alternate,s)}evaluateFor(o,s){const i=new Environment(s),a=this.evaluate(o.iterable,i);if(!(a instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${a.type}`);let d="";for(let _=0;_<a.value.length;++_){const b=new Map([["index",new NumericValue(_+1)],["index0",new NumericValue(_)],["revindex",new NumericValue(a.value.length-_)],["revindex0",new NumericValue(a.value.length-_-1)],["first",new BooleanValue(_===0)],["last",new BooleanValue(_===a.value.length-1)],["length",new NumericValue(a.value.length)],["previtem",_>0?a.value[_-1]:new UndefinedValue],["nextitem",_<a.value.length-1?a.value[_+1]:new UndefinedValue]]);i.setVariable("loop",new ObjectValue(b));const $=a.value[_];if(o.loopvar.type==="Identifier")i.setVariable(o.loopvar.value,$);else if(o.loopvar.type==="TupleLiteral"){const tt=o.loopvar;if($.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${$.type}`);const et=$;if(tt.value.length!==et.value.length)throw new Error(`Too ${tt.value.length>et.value.length?"few":"many"} items to unpack`);for(let g=0;g<tt.value.length;++g){if(tt.value[g].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${tt.value[g].type}`);i.setVariable(tt.value[g].value,et.value[g])}}const nt=this.evaluateBlock(o.body,i);d+=nt.value}return new StringValue(d)}evaluate(o,s){if(o===void 0)return new UndefinedValue;switch(o.type){case"Program":return this.evalProgram(o,s);case"Set":return this.evaluateSet(o,s);case"If":return this.evaluateIf(o,s);case"For":return this.evaluateFor(o,s);case"NumericLiteral":return new NumericValue(Number(o.value));case"StringLiteral":return new StringValue(o.value);case"BooleanLiteral":return new BooleanValue(o.value);case"ArrayLiteral":return new ArrayValue(o.value.map(i=>this.evaluate(i,s)));case"TupleLiteral":return new TupleValue(o.value.map(i=>this.evaluate(i,s)));case"ObjectLiteral":{const i=new Map;for(const[a,d]of o.value){const _=this.evaluate(a,s);if(!(_ instanceof StringValue))throw new Error(`Object keys must be strings: got ${_.type}`);i.set(_.value,this.evaluate(d,s))}return new ObjectValue(i)}case"Identifier":return this.evaluateIdentifier(o,s);case"CallExpression":return this.evaluateCallExpression(o,s);case"MemberExpression":return this.evaluateMemberExpression(o,s);case"UnaryExpression":return this.evaluateUnaryExpression(o,s);case"BinaryExpression":return this.evaluateBinaryExpression(o,s);case"FilterExpression":return this.evaluateFilterExpression(o,s);case"TestExpression":return this.evaluateTestExpression(o,s);default:throw new SyntaxError(`Unknown node type: ${o.type}`)}}};function convertToRuntimeValues(o){switch(typeof o){case"number":return new NumericValue(o);case"string":return new StringValue(o);case"boolean":return new BooleanValue(o);case"object":return o===null?new NullValue:Array.isArray(o)?new ArrayValue(o.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(o).map(([s,i])=>[s,convertToRuntimeValues(i)])));case"function":return new FunctionValue((s,i)=>{const a=o(...s.map(d=>d.value))??null;return convertToRuntimeValues(a)});default:throw new Error(`Cannot convert to runtime value: ${o}`)}}var Template=class{constructor(o){Ut(this,"parsed");const s=tokenize(o,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(s)}render(o){const s=new Environment;s.set("false",!1),s.set("true",!0),s.set("raise_exception",d=>{throw new Error(d)}),s.set("range",range);for(const[d,_]of Object.entries(o))s.set(d,_);return new Interpreter(s).run(this.parsed).value}};async function loadTokenizer(o,s){const i=await Promise.all([getModelJSON(o,"tokenizer.json",!0,s),getModelJSON(o,"tokenizer_config.json",!0,s)]);return s.legacy!==null&&(i[1].legacy=s.legacy),i}function regexSplit(o,s){const i=[];let a=0;for(const d of o.matchAll(s)){const _=d[0];a<d.index&&i.push(o.slice(a,d.index)),_.length>0&&i.push(_),a=d.index+_.length}return a<o.length&&i.push(o.slice(a)),i}function createPattern(o,s=!0){if(o.Regex!==void 0){let i=o.Regex.replace(/\\([#&~])/g,"$1");for(const[a,d]of PROBLEMATIC_REGEX_MAP)i=i.replaceAll(a,d);return new RegExp(i,"gu")}else if(o.String!==void 0){const i=escapeRegExp(o.String);return new RegExp(s?i:`(${i})`,"gu")}else return console.warn("Unknown pattern type:",o),null}function objectToMap(o){return new Map(Object.entries(o))}function prepareTensorForDecode(o){const s=o.dims;switch(s.length){case 1:return o.tolist();case 2:if(s[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return o.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${s.length}.`)}}function clean_up_tokenization(o){return o.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(o){return o.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(o){return remove_accents(o.toLowerCase())}function fuse(o,s,i){const a=[];let d=0;for(;d<o.length;){if(a.push(o[d]),(i.get(o[d])??s)!==s){++d;continue}for(;d<o.length&&(i.get(o[d])??s)===s;)++d}return a}function whitespace_split(o){return o.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(s){this.content=s.content,this.id=s.id,this.single_word=s.single_word??!1,this.lstrip=s.lstrip??!1,this.rstrip=s.rstrip??!1,this.special=s.special??!1,this.normalized=s.normalized??null}}class TokenizerModel extends Callable{constructor(s){super(),this.config=s,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(s,...i){switch(s.type){case"WordPiece":return new WordPieceTokenizer(s);case"Unigram":return new Unigram(s,...i);case"BPE":return new BPE(s);default:if(s.vocab)return new LegacyTokenizerModel(s,...i);throw new Error(`Unknown TokenizerModel type: ${s.type}`)}}_call(s){let i=this.encode(s);return this.fuse_unk&&(i=fuse(i,this.unk_token_id,this.tokens_to_ids)),i}encode(s){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(s){return s.map(i=>this.tokens_to_ids.get(i)??this.unk_token_id)}convert_ids_to_tokens(s){return s.map(i=>this.vocab[i]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(s){super(s),this.tokens_to_ids=objectToMap(s.vocab),this.unk_token_id=this.tokens_to_ids.get(s.unk_token),this.unk_token=s.unk_token,this.max_input_chars_per_word=s.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[i,a]of this.tokens_to_ids)this.vocab[a]=i}encode(s){const i=[];for(const a of s){const d=[...a];if(d.length>this.max_input_chars_per_word){i.push(this.unk_token);continue}let _=!1,b=0;const $=[];for(;b<d.length;){let nt=d.length,tt=null;for(;b<nt;){let et=d.slice(b,nt).join("");if(b>0&&(et=this.config.continuing_subword_prefix+et),this.tokens_to_ids.has(et)){tt=et;break}--nt}if(tt===null){_=!0;break}$.push(tt),b=nt}_?i.push(this.unk_token):i.push(...$)}return i}}class Unigram extends TokenizerModel{constructor(s,i){super(s);const a=s.vocab.length;this.vocab=new Array(a),this.scores=new Array(a);for(let d=0;d<a;++d){const _=s.vocab[d];this.vocab[d]=_[0],this.scores[d]=_[1]}this.unk_token_id=s.unk_id,this.unk_token=this.vocab[s.unk_id],this.tokens_to_ids=new Map(this.vocab.map((d,_)=>[d,_])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=i.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(s){const i=s.sentence,a=i.length;let d=0;for(;d<a;){let b=!1;for(let $ of this.trie.commonPrefixSearch(i.slice(d))){const nt=this.tokens_to_ids.get($),tt=this.scores[nt],et=$.length;s.insert(d,et,tt,nt),!b&&et===1&&(b=!0)}b||s.insert(d,1,this.unkScore,this.unk_token_id),d+=1}}tokenize(s){const i=new TokenLattice(s,this.bosTokenId,this.eosTokenId);return this.populateNodes(i),i.tokens()}encode(s){const i=[];for(const a of s){const d=this.tokenize(a);i.push(...d)}return i}}const BYTES_TO_UNICODE=(()=>{const o=[...Array.from({length:94},(d,_)=>_+33),...Array.from({length:12},(d,_)=>_+161),...Array.from({length:82},(d,_)=>_+174)],s=o.slice();let i=0;for(let d=0;d<256;++d)o.includes(d)||(o.push(d),s.push(256+i),i+=1);const a=s.map(d=>String.fromCharCode(d));return Object.fromEntries(o.map((d,_)=>[d,a[_]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(s){super(s),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(s.vocab),this.unk_token_id=this.tokens_to_ids.get(s.unk_token),this.unk_token=s.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[i,a]of this.tokens_to_ids)this.vocab[a]=i;this.bpe_ranks=new Map(s.merges.map((i,a)=>[i,a])),this.merges=s.merges.map(i=>i.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=s.end_of_word_suffix,this.continuing_subword_suffix=s.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(s){if(s.length===0)return[];const i=this.cache.get(s);if(i!==void 0)return i;const a=Array.from(s);this.end_of_word_suffix&&(a[a.length-1]+=this.end_of_word_suffix);let d=[];if(a.length>1){const _=new PriorityQueue((nt,tt)=>nt.score<tt.score);let b={token:a[0],bias:0,prev:null,next:null},$=b;for(let nt=1;nt<a.length;++nt){const tt={bias:nt/a.length,token:a[nt],prev:$,next:null};$.next=tt,this._add_node(_,$),$=tt}for(;!_.isEmpty();){const nt=_.pop();if(nt.deleted||!nt.next||nt.next.deleted)continue;if(nt.deleted=!0,nt.next.deleted=!0,nt.prev){const et={...nt.prev};nt.prev.deleted=!0,nt.prev=et,et.prev?et.prev.next=et:b=et}const tt={token:nt.token+nt.next.token,bias:nt.bias,prev:nt.prev,next:nt.next.next};tt.prev?(tt.prev.next=tt,this._add_node(_,tt.prev)):b=tt,tt.next&&(tt.next.prev=tt,this._add_node(_,tt))}for(let nt=b;nt!==null;nt=nt.next)d.push(nt.token)}else d=a;if(this.continuing_subword_suffix)for(let _=0;_<d.length-1;++_)d[_]+=this.continuing_subword_suffix;return this.cache.set(s,d),d}_add_node(s,i){const a=this.bpe_ranks.get(i.token+this.BPE_SPLIT_TOKEN+i.next.token);a!==void 0&&(i.score=a+i.bias,s.push(i))}encode(s){const i=[];for(const a of s){if(this.ignore_merges&&this.tokens_to_ids.has(a)){i.push(a);continue}const d=this.bpe(a);for(const _ of d)this.tokens_to_ids.has(_)?i.push(_):this.byte_fallback?i.push(...Array.from(this.text_encoder.encode(_)).map(b=>`<0x${b.toString(16).toUpperCase().padStart(2,"0")}>`)):i.push(this.unk_token)}return i}}class LegacyTokenizerModel extends TokenizerModel{constructor(s,i){super(s),this.tokens_to_ids=objectToMap(i.target_lang?s.vocab[i.target_lang]:s.vocab),this.bos_token=i.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=i.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=i.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=i.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[a,d]of this.tokens_to_ids)this.vocab[d]=a}encode(s){return s}}class Normalizer extends Callable{constructor(s){super(),this.config=s}static fromConfig(s){if(s===null)return null;switch(s.type){case"BertNormalizer":return new BertNormalizer(s);case"Precompiled":return new Precompiled(s);case"Sequence":return new NormalizerSequence(s);case"Replace":return new Replace(s);case"NFC":return new NFC(s);case"NFKC":return new NFKC(s);case"NFKD":return new NFKD(s);case"Strip":return new StripNormalizer(s);case"StripAccents":return new StripAccents(s);case"Lowercase":return new Lowercase(s);case"Prepend":return new Prepend(s);default:throw new Error(`Unknown Normalizer type: ${s.type}`)}}normalize(s){throw Error("normalize should be implemented in subclass.")}_call(s){return this.normalize(s)}}class Replace extends Normalizer{normalize(s){const i=createPattern(this.config.pattern);return i===null?s:s.replaceAll(i,this.config.content)}}class NFC extends Normalizer{normalize(s){return s=s.normalize("NFC"),s}}class NFKC extends Normalizer{normalize(s){return s=s.normalize("NFKC"),s}}class NFKD extends Normalizer{normalize(s){return s=s.normalize("NFKD"),s}}class StripNormalizer extends Normalizer{normalize(s){return this.config.strip_left&&this.config.strip_right?s=s.trim():(this.config.strip_left&&(s=s.trimStart()),this.config.strip_right&&(s=s.trimEnd())),s}}class StripAccents extends Normalizer{normalize(s){return s=remove_accents(s),s}}class Lowercase extends Normalizer{normalize(s){return s=s.toLowerCase(),s}}class Prepend extends Normalizer{normalize(s){return s=this.config.prepend+s,s}}class NormalizerSequence extends Normalizer{constructor(s){super(s),this.normalizers=s.normalizers.map(i=>Normalizer.fromConfig(i))}normalize(s){return this.normalizers.reduce((i,a)=>a.normalize(i),s)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(s){const i=[];for(let a=0;a<s.length;++a){const d=s[a],_=d.charCodeAt(0);this._is_chinese_char(_)?(i.push(" "),i.push(d),i.push(" ")):i.push(d)}return i.join("")}_is_chinese_char(s){return s>=19968&&s<=40959||s>=13312&&s<=19903||s>=131072&&s<=173791||s>=173824&&s<=177983||s>=177984&&s<=178207||s>=178208&&s<=183983||s>=63744&&s<=64255||s>=194560&&s<=195103}stripAccents(s){return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(s){switch(s){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(s)}}_clean_text(s){const i=[];for(const a of s){const d=a.charCodeAt(0);d===0||d===65533||this._is_control(a)||(/^\s$/.test(a)?i.push(" "):i.push(a))}return i.join("")}normalize(s){return this.config.clean_text&&(s=this._clean_text(s)),this.config.handle_chinese_chars&&(s=this._tokenize_chinese_chars(s)),this.config.lowercase?(s=s.toLowerCase(),this.config.strip_accents!==!1&&(s=this.stripAccents(s))):this.config.strip_accents&&(s=this.stripAccents(s)),s}}class PreTokenizer extends Callable{static fromConfig(s){if(s===null)return null;switch(s.type){case"BertPreTokenizer":return new BertPreTokenizer(s);case"Sequence":return new PreTokenizerSequence(s);case"Whitespace":return new WhitespacePreTokenizer(s);case"WhitespaceSplit":return new WhitespaceSplit(s);case"Metaspace":return new MetaspacePreTokenizer(s);case"ByteLevel":return new ByteLevelPreTokenizer(s);case"Split":return new SplitPreTokenizer(s);case"Punctuation":return new PunctuationPreTokenizer(s);case"Digits":return new DigitsPreTokenizer(s);case"Replace":return new ReplacePreTokenizer(s);default:throw new Error(`Unknown PreTokenizer type: ${s.type}`)}}pre_tokenize_text(s,i){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(s,i){return(Array.isArray(s)?s.map(a=>this.pre_tokenize_text(a,i)):this.pre_tokenize_text(s,i)).flat()}_call(s,i){return this.pre_tokenize(s,i)}}class BertPreTokenizer extends PreTokenizer{constructor(s){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(s,i){return s.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(s){super(),this.config=s,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(s,i){return this.add_prefix_space&&!s.startsWith(" ")&&(s=" "+s),(this.use_regex?s.match(this.pattern)||[]:[s]).map(d=>Array.from(this.text_encoder.encode(d),_=>this.byte_encoder[_]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(s){super(),this.config=s,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(s,i){return this.pattern===null?[]:this.config.invert?s.match(this.pattern)||[]:regexSplit(s,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(s){super(),this.config=s,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(s,i){return s.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(s){super(),this.config=s;const i=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(i,"gu")}pre_tokenize_text(s,i){return s.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(s){super(),this.config=s}static fromConfig(s){if(s===null)return null;switch(s.type){case"TemplateProcessing":return new TemplateProcessing(s);case"ByteLevel":return new ByteLevelPostProcessor(s);case"RobertaProcessing":return new RobertaProcessing(s);case"BertProcessing":return new BertProcessing(s);case"Sequence":return new PostProcessorSequence(s);default:throw new Error(`Unknown PostProcessor type: ${s.type}`)}}post_process(s,...i){throw Error("post_process should be implemented in subclass.")}_call(s,...i){return this.post_process(s,...i)}}class BertProcessing extends PostProcessor{constructor(s){super(s),this.cls=s.cls[0],this.sep=s.sep[0]}post_process(s,i=null,{add_special_tokens:a=!0}={}){a&&(s=mergeArrays([this.cls],s,[this.sep]));let d=new Array(s.length).fill(0);if(i!==null){const _=a&&this instanceof RobertaProcessing?[this.sep]:[],b=a?[this.sep]:[];s=mergeArrays(s,_,i,b),d=mergeArrays(d,new Array(i.length+_.length+b.length).fill(1))}return{tokens:s,token_type_ids:d}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(s){super(s),this.single=s.single,this.pair=s.pair}post_process(s,i=null,{add_special_tokens:a=!0}={}){const d=i===null?this.single:this.pair;let _=[],b=[];for(const $ of d)"SpecialToken"in $?a&&(_.push($.SpecialToken.id),b.push($.SpecialToken.type_id)):"Sequence"in $&&($.Sequence.id==="A"?(_=mergeArrays(_,s),b=mergeArrays(b,new Array(s.length).fill($.Sequence.type_id))):$.Sequence.id==="B"&&(_=mergeArrays(_,i),b=mergeArrays(b,new Array(i.length).fill($.Sequence.type_id))));return{tokens:_,token_type_ids:b}}}class ByteLevelPostProcessor extends PostProcessor{post_process(s,i=null){return i&&(s=mergeArrays(s,i)),{tokens:s}}}class PostProcessorSequence extends PostProcessor{constructor(s){super(s),this.processors=s.processors.map(i=>PostProcessor.fromConfig(i))}post_process(s,i=null,a={}){let d;for(const _ of this.processors)if(_ instanceof ByteLevelPostProcessor)s=_.post_process(s).tokens,i&&(i=_.post_process(i).tokens);else{const b=_.post_process(s,i,a);s=b.tokens,d=b.token_type_ids}return{tokens:s,token_type_ids:d}}}class Decoder extends Callable{constructor(s){super(),this.config=s,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=s.trim_offsets}static fromConfig(s){if(s===null)return null;switch(s.type){case"WordPiece":return new WordPieceDecoder(s);case"Metaspace":return new MetaspaceDecoder(s);case"ByteLevel":return new ByteLevelDecoder(s);case"Replace":return new ReplaceDecoder(s);case"ByteFallback":return new ByteFallback(s);case"Fuse":return new FuseDecoder(s);case"Strip":return new StripDecoder(s);case"Sequence":return new DecoderSequence(s);case"CTC":return new CTCDecoder(s);case"BPEDecoder":return new BPEDecoder(s);default:throw new Error(`Unknown Decoder type: ${s.type}`)}}_call(s){return this.decode(s)}decode(s){return this.decode_chain(s).join("")}decode_chain(s){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(s){const i=createPattern(this.config.pattern);return i===null?s:s.map(a=>a.replaceAll(i,this.config.content))}}class ByteFallback extends Decoder{constructor(s){super(s),this.text_decoder=new TextDecoder}decode_chain(s){const i=[];let a=[];for(const d of s){let _=null;if(d.length===6&&d.startsWith("<0x")&&d.endsWith(">")){const b=parseInt(d.slice(3,5),16);isNaN(b)||(_=b)}if(_!==null)a.push(_);else{if(a.length>0){const b=this.text_decoder.decode(Uint8Array.from(a));i.push(b),a=[]}i.push(d)}}if(a.length>0){const d=this.text_decoder.decode(Uint8Array.from(a));i.push(d),a=[]}return i}}class FuseDecoder extends Decoder{decode_chain(s){return[s.join("")]}}class StripDecoder extends Decoder{constructor(s){super(s),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(s){return s.map(i=>{let a=0;for(let _=0;_<this.start&&i[_]===this.content;++_){a=_+1;continue}let d=i.length;for(let _=0;_<this.stop;++_){const b=i.length-_-1;if(i[b]===this.content){d=b;continue}else break}return i.slice(a,d)})}}class WordPieceDecoder extends Decoder{constructor(s){super(s),this.cleanup=s.cleanup}decode_chain(s){return s.map((i,a)=>(a!==0&&(i.startsWith(this.config.prefix)?i=i.replace(this.config.prefix,""):i=" "+i),this.cleanup&&(i=clean_up_tokenization(i)),i))}}class ByteLevelDecoder extends Decoder{constructor(s){super(s),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(s){const i=s.join(""),a=new Uint8Array([...i].map(_=>this.byte_decoder[_]));return this.text_decoder.decode(a)}decode_chain(s){const i=[];let a=[];for(const d of s)this.added_tokens.find(_=>_.content===d)!==void 0?(a.length>0&&(i.push(this.convert_tokens_to_string(a)),a=[]),i.push(d)):a.push(d);return a.length>0&&i.push(this.convert_tokens_to_string(a)),i}}class CTCDecoder extends Decoder{constructor(s){super(s),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(s){if(s.length===0)return"";const i=[s[0]];for(let _=1;_<s.length;++_)s[_]!==i.at(-1)&&i.push(s[_]);let d=i.filter(_=>_!==this.pad_token).join("");return this.cleanup&&(d=clean_up_tokenization(d).replaceAll(this.word_delimiter_token," ").trim()),d}decode_chain(s){return[this.convert_tokens_to_string(s)]}}class DecoderSequence extends Decoder{constructor(s){super(s),this.decoders=s.decoders.map(i=>Decoder.fromConfig(i))}decode_chain(s){return this.decoders.reduce((i,a)=>a.decode_chain(i),s)}}class BPEDecoder extends Decoder{constructor(s){super(s),this.suffix=this.config.suffix}decode_chain(s){return s.map((i,a)=>i.replaceAll(this.suffix,a===s.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(s){let i="";for(let a=1;a<s.length;a+=2)i+=s[a];return[i]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(s){super(),this.addPrefixSpace=s.add_prefix_space,this.replacement=s.replacement,this.strRep=s.str_rep||this.replacement,this.prepend_scheme=s.prepend_scheme??"always"}pre_tokenize_text(s,{section_index:i=void 0}={}){let a=s.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!a.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&i===0)&&(a=this.strRep+a),[a]}}class MetaspaceDecoder extends Decoder{constructor(s){super(s),this.addPrefixSpace=s.add_prefix_space,this.replacement=s.replacement}decode_chain(s){const i=[];for(let a=0;a<s.length;++a){let d=s[a].replaceAll(this.replacement," ");this.addPrefixSpace&&a==0&&d.startsWith(" ")&&(d=d.substring(1)),i.push(d)}return i}}class Precompiled extends Normalizer{constructor(s){super(s),this.charsmap=s.precompiled_charsmap}normalize(s){return s=s.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),s=s.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),s.includes("～")?s=s.split("～").map(a=>a.normalize("NFKC")).join("～"):s=s.normalize("NFKC"),s}}class PreTokenizerSequence extends PreTokenizer{constructor(s){super(),this.tokenizers=s.pretokenizers.map(i=>PreTokenizer.fromConfig(i))}pre_tokenize_text(s,i){return this.tokenizers.reduce((a,d)=>d.pre_tokenize(a,i),[s])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(s){super()}pre_tokenize_text(s,i){return s.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(s){super()}pre_tokenize_text(s,i){return whitespace_split(s)}}class ReplacePreTokenizer extends PreTokenizer{constructor(s){super(),this.config=s,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(s,i){return this.pattern===null?[s]:[s.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(o,s,i,a){for(const d of Object.keys(o)){const _=s-o[d].length,b=i(d),$=new Array(_).fill(b);o[d]=a==="right"?mergeArrays(o[d],$):mergeArrays($,o[d])}}function truncateHelper(o,s){for(const i of Object.keys(o))o[i].length=s}class PreTrainedTokenizer extends Callable{constructor(i,a){super();Ut(this,"return_token_type_ids",!1);Ut(this,"_default_chat_template",`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`);this._tokenizer_config=a,this.normalizer=Normalizer.fromConfig(i.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(i.pre_tokenizer),this.model=TokenizerModel.fromConfig(i.model,a),this.post_processor=PostProcessor.fromConfig(i.post_processor),this.decoder=Decoder.fromConfig(i.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const d of i.added_tokens){const _=new AddedToken(d);this.added_tokens.push(_),this.model.tokens_to_ids.set(_.content,_.id),this.model.vocab[_.id]=_.content,_.special&&(this.special_tokens.push(_.content),this.all_special_ids.push(_.id))}if(this.additional_special_tokens=a.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(d=>`${d.lstrip?"\\s*":""}(${escapeRegExp(d.content)})${d.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=a.model_max_length,this.remove_space=a.remove_space,this.clean_up_tokenization_spaces=a.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=a.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=a.chat_template??null,Array.isArray(this.chat_template)){const d=Object.create(null);for(const{name:_,template:b}of this.chat_template){if(typeof _!="string"||typeof b!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');d[_]=b}this.chat_template=d}this._compiled_template_cache=new Map}getToken(...i){for(const a of i){const d=this._tokenizer_config[a];if(d)if(typeof d=="object"){if(d.__type==="AddedToken")return d.content;throw Error(`Unknown token: ${d}`)}else return d}return null}static async from_pretrained(i,{progress_callback:a=null,config:d=null,cache_dir:_=null,local_files_only:b=!1,revision:$="main",legacy:nt=null}={}){const tt=await loadTokenizer(i,{progress_callback:a,config:d,cache_dir:_,local_files_only:b,revision:$,legacy:nt});return new this(...tt)}_call(i,{text_pair:a=null,add_special_tokens:d=!0,padding:_=!1,truncation:b=null,max_length:$=null,return_tensor:nt=!0,return_token_type_ids:tt=null}={}){const et=Array.isArray(i);let g;if(et){if(i.length===0)throw Error("text array must be non-empty");if(a!==null){if(Array.isArray(a)){if(i.length!==a.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");g=i.map((j,_e)=>this._encode_plus(j,a[_e],{add_special_tokens:d,return_token_type_ids:tt}))}else g=i.map(j=>this._encode_plus(j,null,{add_special_tokens:d,return_token_type_ids:tt}))}else{if(i==null)throw Error("text may not be null or undefined");if(Array.isArray(a))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");g=[this._encode_plus(i,a,{add_special_tokens:d,return_token_type_ids:tt})]}if($===null?_==="max_length"?$=this.model_max_length:$=max(g.map(j=>j.input_ids.length))[0]:b||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),$=Math.min($,this.model_max_length),_||b)for(let j=0;j<g.length;++j)g[j].input_ids.length!==$&&(g[j].input_ids.length>$?b&&truncateHelper(g[j],$):_&&padHelper(g[j],$,_e=>_e==="input_ids"?this.pad_token_id:0,this.padding_side));const c={};if(nt){if(!(_&&b)&&g.some(_e=>{var rt;for(const st of Object.keys(_e))if(_e[st].length!==((rt=g[0][st])==null?void 0:rt.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const j=[g.length,g[0].input_ids.length];for(const _e of Object.keys(g[0]))c[_e]=new Tensor("int64",BigInt64Array.from(g.flatMap(rt=>rt[_e]).map(BigInt)),j)}else{for(const j of Object.keys(g[0]))c[j]=g.map(_e=>_e[j]);if(!et)for(const j of Object.keys(c))c[j]=c[j][0]}return c}_encode_text(i){return i===null?null:(this.added_tokens_regex?i.split(this.added_tokens_regex).filter(_=>_):[i]).map((_,b)=>{if(this.added_tokens.find(nt=>nt.content===_)!==void 0)return _;{if(this.remove_space===!0&&(_=_.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(_=lowercase_and_remove_accent(_)),this.normalizer!==null&&(_=this.normalizer(_)),_.length===0)return[];const nt=this.pre_tokenizer!==null?this.pre_tokenizer(_,{section_index:b}):[_];return this.model(nt)}}).flat()}_encode_plus(i,a=null,{add_special_tokens:d=!0,return_token_type_ids:_=null}={}){const b=this._encode_text(i),$=this._encode_text(a),nt=this.post_processor?this.post_processor(b,$,{add_special_tokens:d}):{tokens:mergeArrays(b??[],$??[])},tt=this.model.convert_tokens_to_ids(nt.tokens),et={input_ids:tt,attention_mask:new Array(tt.length).fill(1)};return(_??this.return_token_type_ids)&&nt.token_type_ids&&(et.token_type_ids=nt.token_type_ids),et}encode(i,a=null,{add_special_tokens:d=!0,return_token_type_ids:_=null}={}){const{input_ids:b}=this._encode_plus(i,a,{add_special_tokens:d,return_token_type_ids:_});return b}batch_decode(i,a={}){return i instanceof Tensor&&(i=i.tolist()),i.map(d=>this.decode(d,a))}decode(i,a={}){if(i instanceof Tensor&&(i=prepareTensorForDecode(i)),!Array.isArray(i)||i.length===0||!isIntegralNumber(i[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(i,a)}decode_single(i,{skip_special_tokens:a=!1,clean_up_tokenization_spaces:d=null}){let _=this.model.convert_ids_to_tokens(i);a&&(_=_.filter($=>!this.special_tokens.includes($)));let b=this.decoder?this.decoder(_):_.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(b=b.replaceAll(this.decoder.end_of_word_suffix," "),a&&(b=b.trim())),(d??this.clean_up_tokenization_spaces)&&(b=clean_up_tokenization(b)),b}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(i,{chat_template:a=null,add_generation_prompt:d=!1,tokenize:_=!0,padding:b=!1,truncation:$=!1,max_length:nt=null,return_tensor:tt=!0,tokenizer_kwargs:et={},...g}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const rt=this.chat_template??this.default_chat_template;if(a!==null&&Object.hasOwn(rt,a))a=rt[a];else if(a===null&&"default"in rt)a=rt.default;else if(a===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(rt).sort()}.`)}else a??(a=this.chat_template??this.default_chat_template);if(typeof a!="string")throw Error(`chat_template must be a string, but got ${typeof a}`);let c=this._compiled_template_cache.get(a);c===void 0&&(c=new Template(a),this._compiled_template_cache.set(a,c));const j=Object.create(null);for(const rt of SPECIAL_TOKEN_ATTRIBUTES){const st=this.getToken(rt);st&&(j[rt]=st)}const _e=c.render({messages:i,add_generation_prompt:d,...j,...g});return _?this._call(_e,{add_special_tokens:!1,padding:b,truncation:$,max_length:nt,return_tensor:tt,...et}).input_ids:_e}}class BertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class AlbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class MobileBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class SqueezeBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class DebertaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class DebertaV2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class HerbertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class ConvBertTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class RoFormerTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{constructor(i,a){super(i,a);Ut(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"return_token_type_ids",!0)}}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(s,i){super(s,i),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(a=>this.languageRegex.test(a)),this.lang_to_token=a=>a}_build_translation_inputs(s,i,a){return _build_translation_inputs(this,s,i,a)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(s,i){var _,b;const a=".,!?…。，、।۔،",d=(b=(_=s.pre_tokenizer)==null?void 0:_.pretokenizers[0])==null?void 0:b.pattern;d&&d.Regex===` ?[^(\\s|[${a}])]+`&&(d.Regex=` ?[^\\s${a}]+`),super(s,i)}}const SPIECE_UNDERLINE="▁";class LlamaTokenizer extends PreTrainedTokenizer{constructor(i,a){super(i,a);Ut(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`);Ut(this,"DEFAULT_SYSTEM_PROMPT",`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`);this.use_default_system_prompt=a.use_default_system_prompt??!1,this.legacy=a.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(i){if(i===null)return null;if(this.legacy||i.length===0)return super._encode_text(i);let a=super._encode_text(SPIECE_UNDERLINE+i.replaceAll(SPIECE_UNDERLINE," "));return a.length>1&&a[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(a[1])&&(a=a.slice(1)),a}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"_default_chat_template",`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`)}}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(o,s,i,a){if(!("language_codes"in o)||!Array.isArray(o.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in o)||!(o.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in o)||typeof o.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const d=a.src_lang,_=a.tgt_lang;if(!o.language_codes.includes(_))throw new Error(`Target language code "${_}" is not valid. Must be one of: {${o.language_codes.join(", ")}}`);if(d!==void 0){if(!o.language_codes.includes(d))throw new Error(`Source language code "${d}" is not valid. Must be one of: {${o.language_codes.join(", ")}}`);for(const b of o.post_processor.config.single)if("SpecialToken"in b&&o.languageRegex.test(b.SpecialToken.id)){b.SpecialToken.id=o.lang_to_token(d);break}}return a.forced_bos_token_id=o.model.convert_tokens_to_ids([o.lang_to_token(_)])[0],o._call(s,i)}class NllbTokenizer extends PreTrainedTokenizer{constructor(s,i){super(s,i),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(a=>this.languageRegex.test(a)),this.lang_to_token=a=>a}_build_translation_inputs(s,i,a){return _build_translation_inputs(this,s,i,a)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(s,i){super(s,i),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(a=>this.languageRegex.test(a)).map(a=>a.slice(2,-2)),this.lang_to_token=a=>`__${a}__`}_build_translation_inputs(s,i,a){return _build_translation_inputs(this,s,i,a)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([o,s])=>[s,o]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"_default_chat_template",'{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}')}_decode_asr(i,{return_timestamps:a=!1,return_language:d=!1,time_precision:_=null,force_full_sequences:b=!0}={}){if(_===null)throw Error("Must specify time_precision");let $=null;const nt=a==="word";function tt(){return{language:$,timestamp:[null,null],text:""}}const et=[];let g=tt(),c=0;const j=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let _e=[],rt=[],st=!1,ot=null;const it=new Set(this.all_special_ids);for(const ut of i){const ct=ut.tokens,dt=nt?ut.token_timestamps:null;let ft=null,ht=j;if("stride"in ut){const[Tt,St,xt]=ut.stride;if(c-=St,ot=Tt-xt,St&&(ht=St/_+j),xt)for(let wt=ct.length-1;wt>=0;--wt){const gt=ct[wt];if(gt>=j){if(ft!==null&&(gt-j)*_<ot)break;ft=gt}}}let mt=[],yt=[];for(let Tt=0;Tt<ct.length;++Tt){const St=ct[Tt];if(it.has(St)){const xt=this.decode([St]),wt=WHISPER_LANGUAGE_MAPPING.get(xt.slice(2,-2));if(wt!==void 0){if($!==null&&wt!==$&&!a){_e.push(mt);const gt=this.findLongestCommonSequence(_e)[0],vt=this.decode(gt);g.text=vt,et.push(g),_e=[],mt=[],g=tt()}$=g.language=wt}}else if(St>=j){const xt=(St-j)*_+c,wt=round(xt,2);if(ft!==null&&St>=ft)st=!0;else if(st||_e.length>0&&St<ht)st=!1;else if(g.timestamp[0]===null)g.timestamp[0]=wt;else if(wt!==g.timestamp[0]){g.timestamp[1]=wt,_e.push(mt),nt&&rt.push(yt);const[gt,vt]=this.findLongestCommonSequence(_e,rt),Ot=this.decode(gt);g.text=Ot,nt&&(g.words=this.collateWordTimestamps(gt,vt,$)),et.push(g),_e=[],mt=[],rt=[],yt=[],g=tt()}}else if(mt.push(St),nt){let xt=round(dt[Tt]+c,2),wt;Tt+1<dt.length?wt=round(dt[Tt+1]+c,2):wt=null,yt.push([xt,wt])}}if("stride"in ut){const[Tt,St,xt]=ut.stride;c+=Tt-xt}mt.length>0?(_e.push(mt),nt&&rt.push(yt)):_e.every(Tt=>Tt.length===0)&&(g=tt(),_e=[],mt=[],rt=[],yt=[])}if(_e.length>0){if(b&&a)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[ut,ct]=this.findLongestCommonSequence(_e,rt),dt=this.decode(ut);g.text=dt,nt&&(g.words=this.collateWordTimestamps(ut,ct,$)),et.push(g)}let at=Object.create(null);const lt=et.map(ut=>ut.text).join("");if(a||d){for(let ut=0;ut<et.length;++ut){const ct=et[ut];a||delete ct.timestamp,d||delete ct.language}if(nt){const ut=[];for(const ct of et)for(const dt of ct.words)ut.push(dt);at={chunks:ut}}else at={chunks:et}}return[lt,at]}findLongestCommonSequence(i,a=null){let d=i[0],_=d.length,b=[];const $=Array.isArray(a)&&a.length>0;let nt=$?[]:null,tt=$?a[0]:null;for(let et=1;et<i.length;++et){const g=i[et];let c=0,j=[_,_,0,0];const _e=g.length;for(let ut=1;ut<_+_e;++ut){const ct=ut/1e4,dt=Math.max(0,_-ut),ft=Math.min(_,_+_e-ut),ht=d.slice(dt,ft),mt=Math.max(0,ut-_),yt=Math.min(_e,ut),Tt=g.slice(mt,yt);if(ht.length!==Tt.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const St=ht.filter((wt,gt)=>wt===Tt[gt]).length,xt=St/ut+ct;St>1&&xt>c&&(c=xt,j=[dt,ft,mt,yt])}const[rt,st,ot,it]=j,at=Math.floor((st+rt)/2),lt=Math.floor((it+ot)/2);b.push(...d.slice(0,at)),d=g.slice(lt),_=d.length,$&&(nt.push(...tt.slice(0,at)),tt=a[et].slice(lt))}return b.push(...d),$?(nt.push(...tt),[b,nt]):[b,[]]}collateWordTimestamps(i,a,d){const[_,b,$]=this.combineTokensIntoWords(i,d),nt=[];for(let tt=0;tt<_.length;++tt){const et=$[tt];nt.push({text:_[tt],timestamp:[a[et.at(0)][0],a[et.at(-1)][1]]})}return nt}combineTokensIntoWords(i,a,d=`"'“¡¿([{-`,_=`"'.。,，!！?？:：”)]}、`){a=a??"english";let b,$,nt;return["chinese","japanese","thai","lao","myanmar"].includes(a)?[b,$,nt]=this.splitTokensOnUnicode(i):[b,$,nt]=this.splitTokensOnSpaces(i),this.mergePunctuations(b,$,nt,d,_)}decode(i,a){let d;return a&&a.decode_with_timestamps?(i instanceof Tensor&&(i=prepareTensorForDecode(i)),d=this.decodeWithTimestamps(i,a)):d=super.decode(i,a),d}decodeWithTimestamps(i,a){const d=(a==null?void 0:a.time_precision)??.02,_=Array.from(this.all_special_ids).at(-1)+1;let b=[[]];for(const $ of i)if($>=_){const nt=round(($-_)*d,2);b.push(`<|${nt}|>`),b.push([])}else b[b.length-1].push($);return b=b.map($=>typeof $=="string"?$:super.decode($,a)),b.join("")}splitTokensOnUnicode(i){const a=this.decode(i,{decode_with_timestamps:!0}),d="�",_=[],b=[],$=[];let nt=[],tt=[],et=0;for(let g=0;g<i.length;++g){const c=i[g];nt.push(c),tt.push(g);const j=this.decode(nt,{decode_with_timestamps:!0});(!j.includes(d)||a[et+j.indexOf(d)]===d)&&(_.push(j),b.push(nt),$.push(tt),nt=[],tt=[],et+=j.length)}return[_,b,$]}splitTokensOnSpaces(i){const[a,d,_]=this.splitTokensOnUnicode(i),b=[],$=[],nt=[],tt=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let et=0;et<a.length;++et){const g=a[et],c=d[et],j=_[et],_e=c[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),rt=g.startsWith(" "),st=g.trim(),ot=tt.test(st);if(_e||rt||ot||b.length===0)b.push(g),$.push(c),nt.push(j);else{const it=b.length-1;b[it]+=g,$[it].push(...c),nt[it].push(...j)}}return[b,$,nt]}mergePunctuations(i,a,d,_,b){const $=structuredClone(i),nt=structuredClone(a),tt=structuredClone(d);let et=$.length-2,g=$.length-1;for(;et>=0;)$[et].startsWith(" ")&&_.includes($[et].trim())?($[g]=$[et]+$[g],nt[g]=mergeArrays(nt[et],nt[g]),tt[g]=mergeArrays(tt[et],tt[g]),$[et]="",nt[et]=[],tt[et]=[]):g=et,--et;for(et=0,g=1;g<$.length;)!$[et].endsWith(" ")&&b.includes($[g])?($[et]+=$[g],nt[et]=mergeArrays(nt[et],nt[g]),tt[et]=mergeArrays(tt[et],tt[g]),$[g]="",nt[g]=[],tt[g]=[]):et=g,++g;return[$.filter(c=>c),nt.filter(c=>c.length>0),tt.filter(c=>c.length>0)]}get_decoder_prompt_ids({language:i=null,task:a=null,no_timestamps:d=!0}={}){const _=[];if(i){i=i.toLowerCase();let b=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(i);if(b===void 0)if(WHISPER_LANGUAGE_MAPPING.has(i))b=i;else{const tt=i.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${i}" is not supported. Must be one of: ${JSON.stringify(tt)}`)}const $=this.model.tokens_to_ids.get(`<|${b}|>`);if($===void 0)throw new Error(`Unable to find language "${b}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);_.push($)}else _.push(null);if(a){if(a=a.toLowerCase(),a!=="transcribe"&&a!=="translate")throw new Error(`Task "${a}" is not supported. Must be one of: ["transcribe", "translate"]`);const b=this.model.tokens_to_ids.get(`<|${a}|>`);if(b===void 0)throw new Error(`Unable to find task "${a}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);_.push(b)}else _.push(null);if(d){const b=this.model.tokens_to_ids.get("<|notimestamps|>");if(b===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');_.push(b)}return _.map((b,$)=>[$+1,b]).filter(b=>b[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(s,i){super(s,i),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(a=>this.languageRegex.test(a)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(s){if(s===null)return null;const[i,...a]=s.trim().split(this.languageRegex);if(a.length===0)return super._encode_text(i);if(a.length===2){const[d,_]=a;return this.supported_language_codes.includes(d)||console.warn(`Unsupported language code "${d}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([d],super._encode_text(_))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{constructor(){super(...arguments);Ut(this,"_default_chat_template","{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}")}}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(s,i){super(s,i),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static async from_pretrained(s,{quantized:i=!0,progress_callback:a=null,config:d=null,cache_dir:_=null,local_files_only:b=!1,revision:$="main",legacy:nt=null}={}){var j;const[tt,et]=await loadTokenizer(s,{quantized:i,progress_callback:a,config:d,cache_dir:_,local_files_only:b,revision:$,legacy:nt}),g=((j=et.tokenizer_class)==null?void 0:j.replace(/Fast$/,""))??"PreTrainedTokenizer";let c=this.TOKENIZER_CLASS_MAPPING[g];return c||(console.warn(`Unknown tokenizer class "${g}", attempting to construct from base class.`),c=PreTrainedTokenizer),new c(tt,et)}}Ut(AutoTokenizer,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer});async function loadConfig(o,s){return await getModelJSON(o,"config.json",!0,s)}class PretrainedConfig{constructor(s){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,s)}static async from_pretrained(s,{progress_callback:i=null,config:a=null,cache_dir:d=null,local_files_only:_=!1,revision:b="main"}={}){let $=a??await loadConfig(s,{progress_callback:i,config:a,cache_dir:d,local_files_only:_,revision:b});return new this($)}}class AutoConfig{static async from_pretrained(...s){return PretrainedConfig.from_pretrained(...s)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(s){this.processors.push(s)}extend(s){this.processors.push(...s)}_call(s,i){for(let a of i)this.processors.forEach(d=>d(s,a))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(s,i){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(s){super(),this.force_token_map=Object.fromEntries(s??[])}_call(s,i){let a=this.force_token_map[s.length];return exists(a)&&(i.data.fill(-1/0),i.data[a]=0),i}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(s){super(),this.bos_token_id=s}_call(s,i){return s.length===1&&(i.data.fill(-1/0),i.data[this.bos_token_id]=0),i}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(s,i){super(),this.max_length=s,this.forced_eos_token_id=i}_call(s,i){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(s,i){super(),this.begin_suppress_tokens=s,this.begin_index=i}_call(s,i){if(s.length===this.begin_index)for(let a of this.begin_suppress_tokens)i.data[a]=-1/0;return i}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(s){super(),this.eos_token_id=s.eos_token_id,this.no_timestamps_token_id=s.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(s.forced_decoder_ids||[]).length+2,s.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=s.max_initial_timestamp_index}_call(s,i){const a=i.data;if(a[this.no_timestamps_token_id]=-1/0,s.length===this.begin_index-1)return a.fill(-1/0),a[this.timestamp_begin]=0,i;const d=s.slice(this.begin_index),_=d.length>=1&&d[d.length-1]>=this.timestamp_begin,b=d.length<2||d[d.length-2]>=this.timestamp_begin;if(_&&(b?a.subarray(this.timestamp_begin).fill(-1/0):a.subarray(0,this.eos_token_id).fill(-1/0)),s.length===this.begin_index&&this.max_initial_timestamp_index!==null){const et=this.timestamp_begin+this.max_initial_timestamp_index;a.subarray(et+1).fill(-1/0)}const $=log_softmax(a),nt=Math.log($.subarray(this.timestamp_begin).map(Math.exp).reduce((et,g)=>et+g)),tt=max($.subarray(0,this.timestamp_begin))[0];return nt>tt&&a.subarray(0,this.timestamp_begin).fill(-1/0),i}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(s){super(),this.no_repeat_ngram_size=s}getNgrams(s){const i=s.length,a=[];for(let _=0;_<i+1-this.no_repeat_ngram_size;++_){const b=[];for(let $=0;$<this.no_repeat_ngram_size;++$)b.push(s[_+$]);a.push(b)}const d=new Map;for(const _ of a){const b=_.slice(0,_.length-1),$=JSON.stringify(b),nt=d.get($)??[];nt.push(_[_.length-1]),d.set($,nt)}return d}getGeneratedNgrams(s,i){const a=i.slice(i.length+1-this.no_repeat_ngram_size,i.length);return s.get(JSON.stringify(a))??[]}calcBannedNgramTokens(s){const i=[];if(s.length+1<this.no_repeat_ngram_size)return i;{const a=this.getNgrams(s);return this.getGeneratedNgrams(a,s)}}_call(s,i){const a=this.calcBannedNgramTokens(s);for(const d of a)i.data[d]=-1/0;return i}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(s){super(),this.penalty=s}_call(s,i){for(const a of s)i.data[a]<0?i.data[a]*=this.penalty:i.data[a]/=this.penalty;return i}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(s,i){super(),this.min_length=s,this.eos_token_id=Array.isArray(i)?i:[i]}_call(s,i){if(s.length<this.min_length)for(const a of this.eos_token_id)i.data[a]=-1/0;return i}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(s,i,a){super(),this.prompt_length_to_skip=s,this.min_new_tokens=i,this.eos_token_id=Array.isArray(a)?a:[a]}_call(s,i){if(s.length-this.prompt_length_to_skip<this.min_new_tokens)for(const d of this.eos_token_id)i.data[d]=-1/0;return i}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(s,i){super(),this.bad_words_ids=s,this.eos_token_id=Array.isArray(i)?i:[i]}_call(s,i){for(const a of this.bad_words_ids){let d=!0;for(let _=1;_<=a.length-1&&a.length<s.length;++_)if(a.at(-_-1)!==s.at(-_)){d=!1;break}d&&(i.data[a.at(-1)]=-1/0)}return i}}const GenerationConfig=class{constructor(o={}){this.max_length=o.max_length??20,this.max_new_tokens=o.max_new_tokens??null,this.min_length=o.min_length??0,this.min_new_tokens=o.min_new_tokens??null,this.early_stopping=o.early_stopping??!1,this.max_time=o.max_time??null,this.do_sample=o.do_sample??!1,this.num_beams=o.num_beams??1,this.num_beam_groups=o.num_beam_groups??1,this.penalty_alpha=o.penalty_alpha??null,this.use_cache=o.use_cache??!0,this.temperature=o.temperature??1,this.top_k=o.top_k??50,this.top_p=o.top_p??1,this.typical_p=o.typical_p??1,this.epsilon_cutoff=o.epsilon_cutoff??0,this.eta_cutoff=o.eta_cutoff??0,this.diversity_penalty=o.diversity_penalty??0,this.repetition_penalty=o.repetition_penalty??1,this.encoder_repetition_penalty=o.encoder_repetition_penalty??1,this.length_penalty=o.length_penalty??1,this.no_repeat_ngram_size=o.no_repeat_ngram_size??0,this.bad_words_ids=o.bad_words_ids??null,this.force_words_ids=o.force_words_ids??null,this.renormalize_logits=o.renormalize_logits??!1,this.constraints=o.constraints??null,this.forced_bos_token_id=o.forced_bos_token_id??null,this.forced_eos_token_id=o.forced_eos_token_id??null,this.remove_invalid_values=o.remove_invalid_values??!1,this.exponential_decay_length_penalty=o.exponential_decay_length_penalty??null,this.suppress_tokens=o.suppress_tokens??null,this.begin_suppress_tokens=o.begin_suppress_tokens??null,this.forced_decoder_ids=o.forced_decoder_ids??null,this.num_return_sequences=o.num_return_sequences??1,this.output_attentions=o.output_attentions??!1,this.output_hidden_states=o.output_hidden_states??!1,this.output_scores=o.output_scores??!1,this.return_dict_in_generate=o.return_dict_in_generate??!1,this.pad_token_id=o.pad_token_id??null,this.bos_token_id=o.bos_token_id??null,this.eos_token_id=o.eos_token_id??null,this.encoder_no_repeat_ngram_size=o.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=o.decoder_start_token_id??null,this.generation_kwargs=o.generation_kwargs??{}}};class Sampler extends Callable{constructor(s){super(),this.generation_config=s}_call(s,i=-1){return this.sample(s,i)}sample(s,i){throw Error("sample should be implemented in subclasses.")}getLogits(s,i){let a=s.dims.at(-1),d=s.data;if(i===-1)d=d.slice(-a);else{let _=i*a;d=d.slice(_,_+a)}return this.generation_config.temperature>0&&(d=d.map(_=>_/this.generation_config.temperature)),d}randomSelect(s){let i=s.reduce((d,_)=>d+_,0),a=Math.random()*i;for(let d=0;d<s.length;++d)if(a-=s[d],a<=0)return d;return 0}static getSampler(s){if(s.do_sample)return new MultinomialSampler(s);if(s.num_beams>1)return new BeamSearchSampler(s);if(s.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${s.num_return_sequences}.`);return new GreedySampler(s)}}class GreedySampler extends Sampler{sample(s,i=-1){let a=this.getLogits(s,i);return[[max(a)[1],0]]}}class MultinomialSampler extends Sampler{sample(s,i=-1){let a=s.dims.at(-1);this.generation_config.top_k>0&&(a=Math.min(this.generation_config.top_k,a));const d=this.getLogits(s,i),_=getTopItems(d,a),b=softmax(_.map($=>$[1]));return Array.from({length:this.generation_config.num_beams},()=>{const $=this.randomSelect(b);return[_[$][0],Math.log(b[$])]})}}class BeamSearchSampler extends Sampler{sample(s,i=-1){let a=s.dims.at(-1);this.generation_config.top_k>0&&(a=Math.min(this.generation_config.top_k,a));const d=this.getLogits(s,i),_=getTopItems(d,a),b=softmax(_.map($=>$[1]));return Array.from({length:this.generation_config.num_beams},($,nt)=>[_[nt][0],Math.log(b[nt])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(o,s,i){let a=`onnx/${s}${i.quantized?"_quantized":""}.onnx`,d=await getModelFile(o,a,!0,i);try{return await InferenceSession.create(d,{executionProviders})}catch(_){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw _;return console.warn(_),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(d,{executionProviders:["wasm"]})}}function validateInputs(o,s){const i=Object.create(null),a=[];for(const b of o.inputNames){const $=s[b];if(!($ instanceof Tensor)){a.push(b);continue}i[b]=env.wasm.proxy?$.clone():$}if(a.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${a.join(", ")}.`);const d=Object.keys(s).length,_=o.inputNames.length;if(d>_){let b=Object.keys(s).filter($=>!o.inputNames.includes($));console.warn(`WARNING: Too many inputs were provided (${d} > ${_}). The following inputs will be ignored: "${b.join(", ")}".`)}return i}async function sessionRun(o,s){const i=validateInputs(o,s);try{let a=await o.run(i);return a=replaceTensors(a),a}catch(a){throw console.error(`An error occurred during model execution: "${a}".`),console.error("Inputs given to model:",i),a}}function replaceTensors(o){for(let s in o)o[s]instanceof ONNXTensor?o[s]=new Tensor(o[s]):typeof o[s]=="object"&&replaceTensors(o[s]);return o}function toI64Tensor(o){if(o instanceof Tensor)return o;if(o.length===0)throw Error("items must be non-empty");if(Array.isArray(o[0])){if(o.some(s=>s.length!==o[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(o.flat().map(s=>BigInt(s))),[o.length,o[0].length])}else return new Tensor("int64",BigInt64Array.from(o.map(s=>BigInt(s))),[1,o.length])}function prepareAttentionMask(o,s){let i=o.config.pad_token_id??null,a=o.config.eos_token_id??null;isIntegralNumber(a)&&(a=[a]);let d=s.indexOf(i)!==-1,_=a===null||!a.includes(i);if(d&&_){let b=BigInt64Array.from(s.data.map($=>$!=i));return new Tensor("int64",b,s.dims)}else return ones_like(s)}function preparePositionIds(o,s,i){if(!o.inputNames.includes("position_ids"))return;const a=new BigInt64Array(s.attention_mask.data.length);for(let d=0;d<s.attention_mask.dims[0];++d){let _=d*s.attention_mask.dims[1],b=BigInt(0);for(let $=0;$<s.attention_mask.dims[1];++$){const nt=_+$;s.attention_mask.data[nt]===0n?a[nt]=BigInt(1):(a[nt]=b,b+=s.attention_mask.data[nt])}}s.position_ids=new Tensor("int64",a,s.attention_mask.dims),i&&(s.position_ids=s.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(o){return new Tensor("bool",[o],[1])}async function seq2seqForward(o,s){let{encoder_outputs:i,past_key_values:a}=s;i||(i=(await encoderForward(o,s)).last_hidden_state);let d={input_ids:s.decoder_input_ids,encoder_hidden_states:i};const _=!!a;o.decoder_merged_session.inputNames.includes("use_cache_branch")&&(d.use_cache_branch=boolTensor(_)),o.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(d.encoder_attention_mask=s.attention_mask),preparePositionIds(o.decoder_merged_session,d,_),o.addPastKeyValues(d,a);const b=await sessionRun(o.decoder_merged_session,d);let $=b.logits;a=o.getPastKeyValues(b,a);const nt=o.getAttentions(b);return new Seq2SeqLMOutput({logits:$,past_key_values:a,encoder_outputs:i,...nt})}function seq2seqStartBeams(o,s,i,a){let d=[],_=0;const b=o.requires_attention_mask??!0;let $=i.decoder_input_ids??i.decoder_start_token_id??i.bos_token_id??i.eos_token_id;$ instanceof Tensor?$=$.tolist().flat():Array.isArray($)||($=[$]);for(let nt of s){nt.dims=[1,...nt.dims];let tt={inputs:nt,encoder_outputs:null,prev_model_outputs:null,output_token_ids:$,done:!1,score:0,id:_++};b&&(tt.attention_mask=prepareAttentionMask(o,nt)),d.push(tt)}return d}async function seq2seqRunBeam(o,s){var b;const i=o.main_input_name;let a=s.output_token_ids;s.prev_model_outputs&&(a=a.slice(-1));let d={[i]:s.inputs,decoder_input_ids:toI64Tensor(a),encoder_outputs:s.encoder_outputs,past_key_values:(b=s.prev_model_outputs)==null?void 0:b.past_key_values};s.attention_mask&&(d.attention_mask=s.attention_mask);let _=await o.forward(d);return s.prev_model_outputs=_,s.encoder_outputs=_.encoder_outputs,_}function seq2seqUpdatebeam(o,s){o.output_token_ids=[...o.output_token_ids,s]}async function encoderForward(o,s){const i=Object.create(null);for(const a of o.session.inputNames)i[a]=s[a];return o.session.inputNames.includes("token_type_ids")&&!i.token_type_ids&&(i.token_type_ids=new Tensor("int64",new BigInt64Array(i.input_ids.data.length),i.input_ids.dims)),await sessionRun(o.session,i)}async function decoderForward(o,s){let{input_ids:i,past_key_values:a,attention_mask:d}=s,_={input_ids:i,attention_mask:d??prepareAttentionMask(o,i)};const b=!!a;o.session.inputNames.includes("use_cache_branch")&&(_.use_cache_branch=boolTensor(b)),preparePositionIds(o.session,_,b),o.addPastKeyValues(_,a);let $=await sessionRun(o.session,_),nt=$.logits;return a=o.getPastKeyValues($,a),{logits:nt,past_key_values:a}}function decoderStartBeams(o,s,i,a,d){let _=[],b=0;for(let $ of s){let nt=$.tolist().map(Number);$.dims=[1,...$.dims];let tt;d?(tt=d[b],tt.dims=[1,...tt.dims]):tt=prepareAttentionMask(o,$);let et={input:$,model_input_ids:$,attention_mask:tt,prev_model_outputs:null,output_token_ids:nt,num_output_tokens:a,done:!1,score:0,id:b++};_.push(et)}return _}async function decoderRunBeam(o,s){var _;let i=new BigInt64Array(s.output_token_ids.length).fill(1n),a={input_ids:s.model_input_ids,attention_mask:new Tensor("int64",i,[1,i.length]),past_key_values:(_=s.prev_model_outputs)==null?void 0:_.past_key_values},d=await o.forward(a);return s.prev_model_outputs=d,d}function decoderUpdatebeam(o,s){o.output_token_ids=[...o.output_token_ids,s],o.model_input_ids=new Tensor("int64",[BigInt(s)],[1,1])}class PreTrainedModel extends Callable{constructor(i,a){super();Ut(this,"main_input_name","input_ids");this.config=i,this.session=a;const d=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),_=MODEL_TYPE_MAPPING.get(d);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,_===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):_===MODEL_TYPES.Seq2Seq||_===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):_===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const i=[];for(let a of Object.keys(this)){const d=this[a];d instanceof InferenceSession&&i.push(d.handler.dispose())}return await Promise.all(i)}static async from_pretrained(i,{quantized:a=!0,progress_callback:d=null,config:_=null,cache_dir:b=null,local_files_only:$=!1,revision:nt="main",model_file_name:tt=null}={}){let et={quantized:a,progress_callback:d,config:_,cache_dir:b,local_files_only:$,revision:nt,model_file_name:tt};const g=MODEL_CLASS_TO_NAME_MAPPING.get(this),c=MODEL_TYPE_MAPPING.get(g);let j;return c===MODEL_TYPES.DecoderOnly?j=await Promise.all([AutoConfig.from_pretrained(i,et),constructSession(i,et.model_file_name??"decoder_model_merged",et),getModelJSON(i,"generation_config.json",!1,et)]):c===MODEL_TYPES.Seq2Seq||c===MODEL_TYPES.Vision2Seq?j=await Promise.all([AutoConfig.from_pretrained(i,et),constructSession(i,"encoder_model",et),constructSession(i,"decoder_model_merged",et),getModelJSON(i,"generation_config.json",!1,et)]):c===MODEL_TYPES.MaskGeneration?j=await Promise.all([AutoConfig.from_pretrained(i,et),constructSession(i,"vision_encoder",et),constructSession(i,"prompt_encoder_mask_decoder",et)]):c===MODEL_TYPES.EncoderDecoder?j=await Promise.all([AutoConfig.from_pretrained(i,et),constructSession(i,"encoder_model",et),constructSession(i,"decoder_model_merged",et)]):(c!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${g??(_==null?void 0:_.model_type)}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),j=await Promise.all([AutoConfig.from_pretrained(i,et),constructSession(i,et.model_file_name??"model",et)])),new this(...j)}async _call(i){return await this.forward(i)}async forward(i){return await this._forward(this,i)}_get_logits_processor(i,a,d=null){const _=new LogitsProcessorList;if(i.repetition_penalty!==null&&i.repetition_penalty!==1&&_.push(new RepetitionPenaltyLogitsProcessor(i.repetition_penalty)),i.no_repeat_ngram_size!==null&&i.no_repeat_ngram_size>0&&_.push(new NoRepeatNGramLogitsProcessor(i.no_repeat_ngram_size)),i.bad_words_ids!==null&&_.push(new NoBadWordsLogitsProcessor(i.bad_words_ids,i.eos_token_id)),i.min_length!==null&&i.eos_token_id!==null&&i.min_length>0&&_.push(new MinLengthLogitsProcessor(i.min_length,i.eos_token_id)),i.min_new_tokens!==null&&i.eos_token_id!==null&&i.min_new_tokens>0&&_.push(new MinNewTokensLengthLogitsProcessor(a,i.min_new_tokens,i.eos_token_id)),i.forced_bos_token_id!==null&&_.push(new ForcedBOSTokenLogitsProcessor(i.forced_bos_token_id)),i.forced_eos_token_id!==null&&_.push(new ForcedEOSTokenLogitsProcessor(i.max_length,i.forced_eos_token_id)),i.begin_suppress_tokens!==null){let b=a>1||i.forced_bos_token_id===null?a:a+1;i.forced_decoder_ids!==null&&(b+=i.forced_decoder_ids[i.forced_decoder_ids.length-1][0]),_.push(new SuppressTokensAtBeginLogitsProcessor(i.begin_suppress_tokens,b))}return i.forced_decoder_ids!==null&&_.push(new ForceTokensLogitsProcessor(i.forced_decoder_ids)),d!==null&&_.extend(d),_}_get_generation_config(i){let a=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(a,this.generation_config),i!==null&&Object.assign(a,i),a}async generate(i,a=null,d=null,{inputs_attention_mask:_=null}={}){if(!this.can_generate){let ot=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const it=this.config.model_type,at=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(it)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(it)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(it)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(it);throw at&&(ot+=` Please use the following class instead: '${at[0]}'`),Error(ot)}if(!(i instanceof Tensor)&&!isTypedArray(i)&&!Array.isArray(i))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${i.constructor.name}".`);let b;if(this.config.is_encoder_decoder)b=0;else if(b=i instanceof Tensor?i.dims.at(-1):i.length,b===0)throw Error("Must supply a non-empty array of input token ids.");a=this._get_generation_config(a),d=d??new LogitsProcessorList,d=this._get_logits_processor(a,b,d);let $=a.eos_token_id;$!==null&&!Array.isArray($)&&($=[$]);let nt=1;const tt=nt+(a.max_new_tokens??1/0),et=Number.isInteger(a.max_length)&&(a.max_new_tokens??null)===null;let g=Sampler.getSampler(a),c=this.getStartBeams(i,a,nt,_);for(;c.some(st=>!st.done)&&nt<tt;){let st=[];for(let ot of c){if(ot.done){st.push(ot);continue}if(et&&ot.output_token_ids.length>=a.max_length){ot.done=!0,st.push(ot);continue}let it=await this.runBeam(ot);a.output_attentions&&this.addAttentionsToBeam(ot,it),a.output_scores;let at=it.logits.slice(null,-1,null);d(ot.output_token_ids,at);let lt=g(at);for(let[ut,ct]of lt){let dt={...ot};this.updateBeam(dt,ut),dt.score+=ct,$&&$.includes(ut)&&(dt.done=!0),st.push(dt)}}++nt,st=this.groupBeams(st).map(ot=>ot.sort((it,at)=>at.score-it.score).slice(0,a.num_beams)),c=st.flat(),a.callback_function&&a.callback_function(c)}const j=this.groupBeams(c),_e=st=>j.map(ot=>a.num_return_sequences>1?ot.slice(0,a.num_return_sequences).map(it=>it[st]):[ot[0][st]]).flat(),rt=_e("output_token_ids");if(a.return_dict_in_generate){const st=_e("decoder_attentions"),ot=_e("cross_attentions");return{sequences:rt,decoder_attentions:st,cross_attentions:ot}}else return rt}addAttentionsToBeam(i,a){if(this.config.is_encoder_decoder){if(!a.cross_attentions||a.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");i.cross_attentions||(i.cross_attentions=[]),i.cross_attentions.push(a.cross_attentions)}if(!a.decoder_attentions||a.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");i.decoder_attentions||(i.decoder_attentions=[]),i.decoder_attentions.push(a.decoder_attentions)}groupBeams(i){const a=Object.create(null);for(const d of i)a[d.id]===void 0?a[d.id]=[d]:a[d.id].push(d);return Object.values(a)}getPastKeyValues(i,a){const d=Object.create(null);for(const _ in i)if(_.startsWith("present")){let b=_.replace("present","past_key_values");a&&_.includes("encoder")?d[b]=a[b]:d[b]=i[_]}return d}getAttentions(i){const a=Object.create(null);for(const d of["cross_attentions","decoder_attentions"]){const _=[];for(const b in i)if(b.startsWith(d)){const $=b.split(".").pop();_[$]=i[b]}a[d]=_}return a}addPastKeyValues(i,a){if(a)Object.assign(i,a);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let _=[1,this.num_encoder_heads,0,this.encoder_dim_kv],b=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let $=0;$<this.num_decoder_layers;++$)i[`past_key_values.${$}.encoder.key`]=new Tensor("float32",[],_),i[`past_key_values.${$}.encoder.value`]=new Tensor("float32",[],_),i[`past_key_values.${$}.decoder.key`]=new Tensor("float32",[],b),i[`past_key_values.${$}.decoder.value`]=new Tensor("float32",[],b)}else if(this.config.model_type==="falcon"){let _=[1*this.num_heads,0,this.dim_kv];for(let b=0;b<this.num_layers;++b)i[`past_key_values.${b}.key`]=new Tensor("float32",[],_),i[`past_key_values.${b}.value`]=new Tensor("float32",[],_)}else if(this.config.multi_query){let _=[1*this.num_heads,0,2*this.dim_kv];for(let b=0;b<this.num_layers;++b)i[`past_key_values.${b}.key_value`]=new Tensor("float32",[],_)}else if(this.config.model_type==="bloom"){let _=[1*this.num_heads,this.dim_kv,0],b=[1*this.num_heads,0,this.dim_kv];for(let $=0;$<this.num_layers;++$)i[`past_key_values.${$}.key`]=new Tensor("float32",[],_),i[`past_key_values.${$}.value`]=new Tensor("float32",[],b)}else{let _=[1,this.num_heads,0,this.dim_kv];for(let b=0;b<this.num_layers;++b)i[`past_key_values.${b}.key`]=new Tensor("float32",[],_),i[`past_key_values.${b}.value`]=new Tensor("float32",[],_)}}getStartBeams(i,a,d,_){return this._getStartBeams(this,i,a,d,_)}async runBeam(i){return await this._runBeam(this,i)}updateBeam(i,a){return this._updateBeam(i,a)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(s){return new MaskedLMOutput(await super._call(s))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(s){return new QuestionAnsweringModelOutput(await super._call(s))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{constructor(i,a,d,_){super(i,a);Ut(this,"requires_attention_mask",!1);Ut(this,"main_input_name","input_features");this.decoder_merged_session=d,this.generation_config=_,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(i,a=null,d=null){if(a=this._get_generation_config(a),a.return_timestamps??(a.return_timestamps=!1),a.return_timestamps&&(d=[new WhisperTimeStampLogitsProcessor(a)]),a.return_token_timestamps&&(a.output_attentions=!0,a.return_dict_in_generate=!0,a.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!a.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const _=await super.generate(i,a,d);return a.return_token_timestamps&&a.alignment_heads&&(_.token_timestamps=this._extract_token_timestamps(_,a.alignment_heads,a.num_frames)),_}_extract_token_timestamps(i,a,d=null,_=.02){if(!i.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let b=this.config.median_filter_width;b===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),b=7);const $=i.cross_attentions.map(et=>{let g=Array.from({length:this.config.decoder_layers},(ot,it)=>cat(et.map(at=>at[it]),2)),c=stack(a.map(([ot,it])=>d?g[ot].slice(null,it,null,[0,d]):g[ot].slice(null,it)));c=c.transpose(1,0,2,3);let[j,_e]=std_mean(c,-2,0,!0),rt=c.clone();for(let ot=0;ot<rt.dims[0];++ot){let it=rt[ot];for(let at=0;at<it.dims[0];++at){let lt=it[at];const ut=j[ot][at][0],ct=_e[ot][at][0];for(let dt=0;dt<lt.dims[0];++dt){let ft=lt[dt];for(let ht=0;ht<ft.data.length;++ht)ft.data[ht]=(ft.data[ht]-ct.data[ht])/ut.data[ht];ft.data.set(medianFilter(ft.data,b))}}}return mean(rt,1)}),nt=[i.sequences.length,i.sequences[0].length],tt=new Tensor("float32",new Float32Array(nt[0]*nt[1]),nt);for(let et=0;et<nt[0];++et){const g=$[et].neg().squeeze_(0);let[c,j]=dynamicTimeWarping(g),_e=Array.from({length:c.length-1},(ot,it)=>c[it+1]-c[it]),rt=mergeArrays([1],_e).map(ot=>!!ot),st=[];for(let ot=0;ot<rt.length;++ot)rt[ot]&&st.push(j[ot]*_);tt[et].data.set(st,1)}return tt}}class VisionEncoderDecoderModel extends PreTrainedModel{constructor(i,a,d,_){super(i,a);Ut(this,"main_input_name","pixel_values");this.decoder_merged_session=d,this.generation_config=_;const b=this.config.encoder,$=this.config.decoder,nt=b.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(nt)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(nt))||console.warn(`Model type for encoder '${nt}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const et=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get($.model_type);if(!et)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const g=et[1],c=new g($,d,_);this.add_encoder_pkv="num_decoder_layers"in c,this.add_encoder_pkv?(this.num_decoder_layers=c.num_decoder_layers,this.num_decoder_heads=c.num_decoder_heads,this.decoder_dim_kv=c.decoder_dim_kv,this.num_encoder_layers=c.num_encoder_layers,this.num_encoder_heads=c.num_encoder_heads,this.encoder_dim_kv=c.encoder_dim_kv):(this.num_layers=c.num_layers,this.num_heads=c.num_heads,this.dim_kv=c.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(s,i={}){return i.model_file_name??(i.model_file_name="text_model"),super.from_pretrained(s,i)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(s,i={}){return i.model_file_name??(i.model_file_name="vision_model"),super.from_pretrained(s,i)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(s,i={}){return i.model_file_name??(i.model_file_name="text_model"),super.from_pretrained(s,i)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(s,i={}){return i.model_file_name??(i.model_file_name="vision_model"),super.from_pretrained(s,i)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(s){return new ImageMattingOutput(await super._call(s))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(s){return new DetrObjectDetectionOutput(await super._call(s))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(s){return new DetrSegmentationOutput(await super._call(s))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:s,pred_boxes:i}){super(),this.logits=s,this.pred_boxes=i}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:s,pred_boxes:i,pred_masks:a}){super(),this.logits=s,this.pred_boxes=i,this.pred_masks=a}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(s){return new TableTransformerObjectDetectionOutput(await super._call(s))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(s){return new YolosObjectDetectionOutput(await super._call(s))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:s,pred_boxes:i}){super(),this.logits=s,this.pred_boxes=i}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(s,i,a){super(s,i),this.prompt_encoder_mask_decoder=a}async get_image_embeddings({pixel_values:s}){return await encoderForward(this,{pixel_values:s})}async forward(s){if((!s.image_embeddings||!s.image_positional_embeddings)&&(s={...s,...await this.get_image_embeddings(s)}),!s.input_labels){const i=s.input_points.dims.slice(0,-1),a=i.reduce((d,_)=>d*_,1);s.input_labels=new Tensor("int64",new BigInt64Array(a).fill(1n),i)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:s.input_points,input_labels:s.input_labels,image_embeddings:s.image_embeddings,image_positional_embeddings:s.image_positional_embeddings})}async _call(s){return new SamImageSegmentationOutput(await super._call(s))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:s,pred_masks:i}){super(),this.iou_scores=s,this.pred_masks=i}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(s){return new CausalLMOutput(await super._call(s))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(s){return new CausalLMOutput(await super._call(s))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(s){return new CausalLMOutput(await super._call(s))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(s){return new CausalLMOutput(await super._call(s))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(s){return new CausalLMOutput(await super._call(s))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(s){return new CausalLMOutput(await super._call(s))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(s){return new XVectorOutput(await super._call(s))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(s){return new TokenClassifierOutput(await super._call(s))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(s,i,a,d){super(s,i),this.decoder_merged_session=a,this.generation_config=d,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(s,i,{threshold:a=.5,minlenratio:d=0,maxlenratio:_=20,vocoder:b=null}={}){const $={input_ids:s},{encoder_outputs:nt,encoder_attention_mask:tt}=await encoderForward(this,$),et=nt.dims[1]/this.config.reduction_factor,g=Math.floor(et*_),c=Math.floor(et*d),j=this.config.num_mel_bins;let _e=[],rt=null,st=null,ot=0;for(;;){++ot;const lt=boolTensor(!!st);let ut;st?ut=st.output_sequence_out:ut=new Tensor("float32",new Float32Array(j),[1,1,j]);let ct={use_cache_branch:lt,output_sequence:ut,encoder_attention_mask:tt,speaker_embeddings:i,encoder_hidden_states:nt};this.addPastKeyValues(ct,rt),st=await sessionRun(this.decoder_merged_session,ct),rt=this.getPastKeyValues(st,rt);const{prob:dt,spectrum:ft}=st;if(_e.push(ft),ot>=c&&(Array.from(dt.data).filter(ht=>ht>=a).length>0||ot>=g))break}const it=cat(_e),{waveform:at}=await sessionRun(b.session,{spectrogram:it});return{spectrogram:it,waveform:at}}}class SpeechT5HifiGan extends PreTrainedModel{constructor(){super(...arguments);Ut(this,"main_input_name","spectrogram")}}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(s,i={}){return i.model_file_name??(i.model_file_name="text_model"),super.from_pretrained(s,i)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(s,i={}){return i.model_file_name??(i.model_file_name="audio_model"),super.from_pretrained(s,i)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(s){return new VitsModelOutput(await super._call(s))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(s,i,a){super(s,i),this.generation_config=a,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(s){return new SequenceClassifierOutput(await super._call(s))}}class PretrainedMixin{static async from_pretrained(s,{quantized:i=!0,progress_callback:a=null,config:d=null,cache_dir:_=null,local_files_only:b=!1,revision:$="main",model_file_name:nt=null}={}){let tt={quantized:i,progress_callback:a,config:d,cache_dir:_,local_files_only:b,revision:$,model_file_name:nt};if(d=await AutoConfig.from_pretrained(s,tt),tt.config||(tt.config=d),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let et of this.MODEL_CLASS_MAPPINGS){const g=et.get(d.model_type);if(g)return await g[1].from_pretrained(s,tt)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${d.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(s,tt);throw Error(`Unsupported model type: ${d.model_type}`)}}Ut(PretrainedMixin,"MODEL_CLASS_MAPPINGS",null),Ut(PretrainedMixin,"BASE_IF_FAIL",!1);const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[o,s]of MODEL_CLASS_TYPE_MAPPING)for(const[i,a]of o.values())MODEL_TYPE_MAPPING.set(i,s),MODEL_CLASS_TO_NAME_MAPPING.set(a,i),MODEL_NAME_TO_CLASS_MAPPING.set(i,a);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[o,s,i]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(o,i),MODEL_CLASS_TO_NAME_MAPPING.set(s,o),MODEL_NAME_TO_CLASS_MAPPING.set(o,s);class AutoModel extends PretrainedMixin{}Ut(AutoModel,"MODEL_CLASS_MAPPINGS",MODEL_CLASS_TYPE_MAPPING.map(s=>s[0])),Ut(AutoModel,"BASE_IF_FAIL",!0);class AutoModelForSequenceClassification extends PretrainedMixin{}Ut(AutoModelForSequenceClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForTokenClassification extends PretrainedMixin{}Ut(AutoModelForTokenClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForSeq2SeqLM extends PretrainedMixin{}Ut(AutoModelForSeq2SeqLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]);class AutoModelForSpeechSeq2Seq extends PretrainedMixin{}Ut(AutoModelForSpeechSeq2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]);class AutoModelForTextToSpectrogram extends PretrainedMixin{}Ut(AutoModelForTextToSpectrogram,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]);class AutoModelForTextToWaveform extends PretrainedMixin{}Ut(AutoModelForTextToWaveform,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]);class AutoModelForCausalLM extends PretrainedMixin{}Ut(AutoModelForCausalLM,"MODEL_CLASS_MAPPINGS",[MODEL_WITH_LM_HEAD_MAPPING_NAMES]);class AutoModelForMaskedLM extends PretrainedMixin{}Ut(AutoModelForMaskedLM,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_MASKED_LM_MAPPING_NAMES]);class AutoModelForQuestionAnswering extends PretrainedMixin{}Ut(AutoModelForQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForVision2Seq extends PretrainedMixin{}Ut(AutoModelForVision2Seq,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]);class AutoModelForImageClassification extends PretrainedMixin{}Ut(AutoModelForImageClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForImageSegmentation extends PretrainedMixin{}Ut(AutoModelForImageSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]);class AutoModelForSemanticSegmentation extends PretrainedMixin{}Ut(AutoModelForSemanticSegmentation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]);class AutoModelForObjectDetection extends PretrainedMixin{}Ut(AutoModelForObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForZeroShotObjectDetection extends PretrainedMixin{}Ut(AutoModelForZeroShotObjectDetection,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]);class AutoModelForCTC extends PretrainedMixin{}Ut(AutoModelForCTC,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_CTC_MAPPING_NAMES]);class AutoModelForAudioClassification extends PretrainedMixin{}Ut(AutoModelForAudioClassification,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]);class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{}Ut(AutoModelForDocumentQuestionAnswering,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]);class AutoModelForImageToImage extends PretrainedMixin{}Ut(AutoModelForImageToImage,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]);class AutoModelForDepthEstimation extends PretrainedMixin{}Ut(AutoModelForDepthEstimation,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]);class AutoModelForImageFeatureExtraction extends PretrainedMixin{}Ut(AutoModelForImageFeatureExtraction,"MODEL_CLASS_MAPPINGS",[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]);class Seq2SeqLMOutput extends ModelOutput{constructor({logits:s,past_key_values:i,encoder_outputs:a,decoder_attentions:d=null,cross_attentions:_=null}){super(),this.logits=s,this.past_key_values=i,this.encoder_outputs=a,this.decoder_attentions=d,this.cross_attentions=_}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:s}){super(),this.logits=s}}class XVectorOutput extends ModelOutput{constructor({logits:s,embeddings:i}){super(),this.logits=s,this.embeddings=i}}class TokenClassifierOutput extends ModelOutput{constructor({logits:s}){super(),this.logits=s}}class MaskedLMOutput extends ModelOutput{constructor({logits:s}){super(),this.logits=s}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:s,end_logits:i}){super(),this.start_logits=s,this.end_logits=i}}class CausalLMOutput extends ModelOutput{constructor({logits:s}){super(),this.logits=s}}class ImageMattingOutput extends ModelOutput{constructor({alphas:s}){super(),this.alphas=s}}class VitsModelOutput extends ModelOutput{constructor({waveform:s,spectrogram:i}){super(),this.waveform=s,this.spectrogram=i}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(o,s)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(o,s)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async o=>{const i=(await o.metadata()).channels;let{data:a,info:d}=await o.rotate().raw().toBuffer({resolveWithObject:!0});const _=new RawImage(new Uint8ClampedArray(a),d.width,d.height,d.channels);return i!==void 0&&i!==d.channels&&_.convert(i),_};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(s,i,a,d){this.data=s,this.width=i,this.height=a,this.channels=d}get size(){return[this.width,this.height]}static async read(s){if(s instanceof RawImage)return s;if(typeof s=="string"||s instanceof URL)return await this.fromURL(s);throw new Error(`Unsupported input type: ${typeof s}`)}static async fromURL(s){let i=await getFile(s);if(i.status!==200)throw new Error(`Unable to read image from "${s}" (${i.status} ${i.statusText})`);let a=await i.blob();return this.fromBlob(a)}static async fromBlob(s){if(BROWSER_ENV){let i=await loadImageFunction(s);const a=createCanvasFunction(i.width,i.height).getContext("2d");return a.drawImage(i,0,0),new this(a.getImageData(0,0,i.width,i.height).data,i.width,i.height,4)}else{let i=sharp(await s.arrayBuffer());return await loadImageFunction(i)}}static fromTensor(s,i="CHW"){if(s.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${s.dims.length} dimensions.`);if(i==="CHW")s=s.transpose(1,2,0);else if(i!=="HWC")throw new Error(`Unsupported channel format: ${i}`);if(!(s.data instanceof Uint8ClampedArray||s.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${s.type}`);switch(s.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(s.data,s.dims[1],s.dims[0],s.dims[2]);default:throw new Error(`Unsupported number of channels: ${s.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let s=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let i=0,a=0;i<this.data.length;i+=this.channels){const d=this.data[i],_=this.data[i+1],b=this.data[i+2];s[a++]=Math.round(.2989*d+.587*_+.114*b)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(s,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let s=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let i=0,a=0;i<this.data.length;++i)s[a++]=this.data[i],s[a++]=this.data[i],s[a++]=this.data[i];break;case 4:for(let i=0,a=0;i<this.data.length;i+=4)s[a++]=this.data[i],s[a++]=this.data[i+1],s[a++]=this.data[i+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(s,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let s=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let i=0,a=0;i<this.data.length;++i)s[a++]=this.data[i],s[a++]=this.data[i],s[a++]=this.data[i],s[a++]=255;break;case 3:for(let i=0,a=0;i<this.data.length;i+=3)s[a++]=this.data[i],s[a++]=this.data[i+1],s[a++]=this.data[i+2],s[a++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(s,this.width,this.height,4)}async resize(s,i,{resample:a=2}={}){let d=RESAMPLING_MAPPING[a]??a;if(BROWSER_ENV){let _=this.channels,b=this.toCanvas();const $=createCanvasFunction(s,i).getContext("2d");return $.drawImage(b,0,0,s,i),new RawImage($.getImageData(0,0,s,i).data,s,i,4).convert(_)}else{let _=this.toSharp();switch(d){case"box":case"hamming":(d==="box"||d==="hamming")&&(console.warn(`Resampling method ${d} is not yet supported. Using bilinear instead.`),d="bilinear");case"nearest":case"bilinear":case"bicubic":_=_.affine([s/this.width,0,0,i/this.height],{interpolator:d});break;case"lanczos":_=_.resize({width:s,height:i,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${d} is not supported.`)}return await loadImageFunction(_)}}async pad([s,i,a,d]){if(s=Math.max(s,0),i=Math.max(i,0),a=Math.max(a,0),d=Math.max(d,0),s===0&&i===0&&a===0&&d===0)return this;if(BROWSER_ENV){let _=this.channels,b=this.toCanvas(),$=this.width+s+i,nt=this.height+a+d;const tt=createCanvasFunction($,nt).getContext("2d");return tt.drawImage(b,0,0,this.width,this.height,s,a,$,nt),new RawImage(tt.getImageData(0,0,$,nt).data,$,nt,4).convert(_)}else{let _=this.toSharp().extend({left:s,right:i,top:a,bottom:d});return await loadImageFunction(_)}}async crop([s,i,a,d]){if(s=Math.max(s,0),i=Math.max(i,0),a=Math.min(a,this.width-1),d=Math.min(d,this.height-1),s===0&&i===0&&a===this.width-1&&d===this.height-1)return this;const _=a-s+1,b=d-i+1;if(BROWSER_ENV){const $=this.channels,nt=this.toCanvas(),tt=createCanvasFunction(_,b).getContext("2d");return tt.drawImage(nt,s,i,_,b,0,0,_,b),new RawImage(tt.getImageData(0,0,_,b).data,_,b,4).convert($)}else{const $=this.toSharp().extract({left:s,top:i,width:_,height:b});return await loadImageFunction($)}}async center_crop(s,i){if(this.width===s&&this.height===i)return this;let a=(this.width-s)/2,d=(this.height-i)/2;if(BROWSER_ENV){let _=this.channels,b=this.toCanvas();const $=createCanvasFunction(s,i).getContext("2d");let nt=0,tt=0,et=0,g=0;return a>=0?nt=a:et=-a,d>=0?tt=d:g=-d,$.drawImage(b,nt,tt,s,i,et,g,s,i),new RawImage($.getImageData(0,0,s,i).data,s,i,4).convert(_)}else{let _=this.toSharp();if(a>=0&&d>=0)_=_.extract({left:Math.floor(a),top:Math.floor(d),width:s,height:i});else if(a<=0&&d<=0){let b=Math.floor(-d),$=Math.floor(-a);_=_.extend({top:b,left:$,right:s-this.width-$,bottom:i-this.height-b})}else{let b=[0,0],$=0;d<0?(b[0]=Math.floor(-d),b[1]=i-this.height-b[0]):$=Math.floor(d);let nt=[0,0],tt=0;a<0?(nt[0]=Math.floor(-a),nt[1]=s-this.width-nt[0]):tt=Math.floor(a),_=_.extend({top:b[0],bottom:b[1],left:nt[0],right:nt[1]}).extract({left:tt,top:$,width:s,height:i})}return await loadImageFunction(_)}}async toBlob(s="image/png",i=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:s,quality:i})}toTensor(s="CHW"){let i=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(s!=="HWC")if(s==="CHW")i=i.permute(2,0,1);else throw new Error(`Unsupported channel format: ${s}`);return i}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let s=this.clone().rgba(),i=createCanvasFunction(s.width,s.height),a=new ImageDataClass(s.data,s.width,s.height);return i.getContext("2d").putImageData(a,0,0),i}_update(s,i,a,d=null){return this.data=s,this.width=i,this.height=a,d!==null&&(this.channels=d),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(s){if(this.channels===s)return this;switch(s){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(s){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const i=s.split(".").pop().toLowerCase(),a=CONTENT_TYPE_MAP.get(i)??"image/png",d=await this.toBlob(a),_=URL.createObjectURL(d),b=document.createElement("a");b.href=_,b.download=s,b.click(),b.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(s);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(o,s){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const i=await(await getFile(o)).arrayBuffer(),a=new AudioContext({sampleRate:s});typeof s>"u"&&console.warn(`No sampling rate provided, using default of ${a.sampleRate}Hz.`);const d=await a.decodeAudioData(i);let _;if(d.numberOfChannels===2){const b=Math.sqrt(2),$=d.getChannelData(0),nt=d.getChannelData(1);_=new Float32Array($.length);for(let tt=0;tt<d.length;++tt)_[tt]=b*($[tt]+nt[tt])/2}else _=d.getChannelData(0);return _}function hanning(o){if(o<1)return new Float64Array;if(o===1)return new Float64Array([1]);const s=o-1,i=Math.PI/s,a=new Float64Array(o);for(let d=0;d<o;++d){const _=2*d-s;a[d]=.5+.5*Math.cos(i*_)}return a}const HERTZ_TO_MEL_MAPPING={htk:o=>2595*Math.log10(1+o/700),kaldi:o=>1127*Math.log(1+o/700),slaney:(o,s=1e3,i=15,a=27/Math.log(6.4))=>o>=s?i+Math.log(o/s)*a:3*o/200};function hertz_to_mel(o,s="htk"){const i=HERTZ_TO_MEL_MAPPING[s];if(!i)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof o=="number"?i(o):o.map(a=>i(a))}const MEL_TO_HERTZ_MAPPING={htk:o=>700*(10**(o/2595)-1),kaldi:o=>700*(Math.exp(o/1127)-1),slaney:(o,s=1e3,i=15,a=Math.log(6.4)/27)=>o>=i?s*Math.exp(a*(o-i)):200*o/3};function mel_to_hertz(o,s="htk"){const i=MEL_TO_HERTZ_MAPPING[s];if(!i)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof o=="number"?i(o):o.map(a=>i(a))}function _create_triangular_filter_bank(o,s){const i=Float64Array.from({length:s.length-1},(b,$)=>s[$+1]-s[$]),a=Array.from({length:o.length},()=>new Array(s.length));for(let b=0;b<o.length;++b){const $=a[b];for(let nt=0;nt<s.length;++nt)$[nt]=s[nt]-o[b]}const d=s.length-2,_=Array.from({length:d},()=>new Array(o.length));for(let b=0;b<o.length;++b){const $=a[b];for(let nt=0;nt<d;++nt){const tt=-$[nt]/i[nt],et=$[nt+2]/i[nt+1];_[nt][b]=Math.max(0,Math.min(tt,et))}}return _}function linspace(o,s,i){const a=(s-o)/(i-1);return Float64Array.from({length:i},(d,_)=>o+a*_)}function mel_filter_bank(o,s,i,a,d,_=null,b="htk",$=!1){if(_!==null&&_!=="slaney")throw new Error('norm must be one of null or "slaney"');const nt=hertz_to_mel(i,b),tt=hertz_to_mel(a,b),et=linspace(nt,tt,s+2);let g=mel_to_hertz(et,b),c;if($){const _e=d/(o*2);c=hertz_to_mel(Float64Array.from({length:o},(rt,st)=>st*_e),b),g=et}else c=linspace(0,Math.floor(d/2),o);const j=_create_triangular_filter_bank(c,g);if(_!==null&&_==="slaney")for(let _e=0;_e<s;++_e){const rt=j[_e],st=2/(g[_e+2]-g[_e]);for(let ot=0;ot<o;++ot)rt[ot]*=st}return j}function padReflect(o,s,i){const a=new o.constructor(o.length+s+i),d=o.length-1;for(let _=0;_<o.length;++_)a[s+_]=o[_];for(let _=1;_<=s;++_)a[s-_]=o[calculateReflectOffset(_,d)];for(let _=1;_<=i;++_)a[d+s+_]=o[calculateReflectOffset(d-_,d)];return a}function _db_conversion_helper(o,s,i,a,d){if(i<=0)throw new Error("reference must be greater than zero");if(a<=0)throw new Error("min_value must be greater than zero");i=Math.max(a,i);const _=Math.log10(i);for(let b=0;b<o.length;++b)o[b]=s*Math.log10(Math.max(a,o[b])-_);if(d!==null){if(d<=0)throw new Error("db_range must be greater than zero");const b=max(o)[0]-d;for(let $=0;$<o.length;++$)o[$]=Math.max(o[$],b)}return o}function amplitude_to_db(o,s=1,i=1e-5,a=null){return _db_conversion_helper(o,20,s,i,a)}function power_to_db(o,s=1,i=1e-10,a=null){return _db_conversion_helper(o,10,s,i,a)}function spectrogram(o,s,i,a,{fft_length:d=null,power:_=1,center:b=!0,pad_mode:$="reflect",onesided:nt=!0,preemphasis:tt=null,mel_filters:et=null,mel_floor:g=1e-10,log_mel:c=null,reference:j=1,min_value:_e=1e-10,db_range:rt=null,remove_dc_offset:st=null,max_num_frames:ot=null,do_pad:it=!0,transpose:at=!1}={}){const lt=s.length;if(d===null&&(d=i),i>d)throw Error(`frame_length (${i}) may not be larger than fft_length (${d})`);if(lt!==i)throw new Error(`Length of the window (${lt}) must equal frame_length (${i})`);if(a<=0)throw new Error("hop_length must be greater than zero");if(_===null&&et!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(b){if($!=="reflect")throw new Error(`pad_mode="${$}" not implemented yet.`);const gt=Math.floor((d-1)/2)+1;o=padReflect(o,gt,gt)}const ut=Math.floor(1+Math.floor((o.length-i)/a)),ct=nt?Math.floor(d/2)+1:d;let dt=ut,ft=ut;ot!==null&&(ot>ut?it&&(ft=ot):ft=dt=ot);const ht=new FFT(d),mt=new Float64Array(d),yt=new Float64Array(ht.outputBufferSize),Tt=new Array(dt);for(let gt=0;gt<dt;++gt){const vt=gt*a;for(let At=0;At<i;++At)mt[At]=o[vt+At];if(st){let At=0;for(let Bt=0;Bt<i;++Bt)At+=mt[Bt];const Ft=At/i;for(let Bt=0;Bt<i;++Bt)mt[Bt]-=Ft}if(tt!==null){for(let At=i-1;At>=1;--At)mt[At]-=tt*mt[At-1];mt[0]*=1-tt}for(let At=0;At<s.length;++At)mt[At]*=s[At];ht.realTransform(yt,mt);const Ot=new Array(ct);for(let At=0;At<Ot.length;++At){const Ft=At<<1;Ot[At]=yt[Ft]**2+yt[Ft+1]**2}Tt[gt]=Ot}if(_!==null&&_!==2){const gt=2/_;for(let vt=0;vt<Tt.length;++vt){const Ot=Tt[vt];for(let At=0;At<Ot.length;++At)Ot[At]**=gt}}const St=et.length,xt=new Float32Array(St*ft),wt=at?[ft,St]:[St,ft];for(let gt=0;gt<St;++gt){const vt=et[gt];for(let Ot=0;Ot<dt;++Ot){const At=Tt[Ot];let Ft=0;for(let Bt=0;Bt<ct;++Bt)Ft+=vt[Bt]*At[Bt];xt[at?Ot*St+gt:gt*dt+Ot]=Math.max(g,Ft)}}if(_!==null&&c!==null){const gt=Math.min(xt.length,dt*St);switch(c){case"log":for(let vt=0;vt<gt;++vt)xt[vt]=Math.log(xt[vt]);break;case"log10":for(let vt=0;vt<gt;++vt)xt[vt]=Math.log10(xt[vt]);break;case"dB":if(_===1)amplitude_to_db(xt,j,_e,rt);else if(_===2)power_to_db(xt,j,_e,rt);else throw new Error(`Cannot use log_mel option '${c}' with power ${_}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${c}'`)}}return{data:xt,dims:wt}}function window_function(o,s,{periodic:i=!0,frame_length:a=null,center:d=!0}={}){const _=i?o+1:o;let b;switch(s){case"boxcar":b=new Float64Array(_).fill(1);break;case"hann":case"hann_window":b=hanning(_);break;case"povey":b=hanning(_).map($=>Math.pow($,.85));break;default:throw new Error(`Unknown window type ${s}.`)}if(i&&(b=b.subarray(0,o)),a===null)return b;if(o>a)throw new Error(`Length of the window (${o}) may not be larger than frame_length (${a})`);return b}function center_to_corners_format([o,s,i,a]){return[o-i/2,s-a/2,o+i/2,s+a/2]}function post_process_object_detection(o,s=.5,i=null,a=!1){const d=o.logits,_=o.pred_boxes,[b,$,nt]=d.dims;if(i!==null&&i.length!==b)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let tt=[];for(let et=0;et<b;++et){let g=i!==null?i[et]:null,c={boxes:[],classes:[],scores:[]},j=d[et],_e=_[et];for(let rt=0;rt<$;++rt){let st=j[rt],ot=[],it;if(a){it=st.sigmoid().data;for(let at=0;at<it.length;++at)it[at]>s&&ot.push(at)}else{let at=max(st.data)[1];if(at===nt-1)continue;ot.push(at),it=softmax(st.data)}for(const at of ot){let lt=_e[rt].data;lt=center_to_corners_format(lt),g!==null&&(lt=lt.map((ut,ct)=>ut*g[(ct+1)%2])),c.boxes.push(lt),c.classes.push(at),c.scores.push(it[at])}}tt.push(c)}return tt}function validate_audio_inputs(o,s){var i;if(!(o instanceof Float32Array||o instanceof Float64Array))throw new Error(`${s} expects input to be a Float32Array or a Float64Array, but got ${((i=o==null?void 0:o.constructor)==null?void 0:i.name)??typeof o} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(o,s,i=0,a=null){const d=o/s;let _=bankers_round(d)*s;return a!==null&&_>a&&(_=Math.floor(d)*s),_<i&&(_=Math.ceil(d)*s),_}function enforce_size_divisibility([o,s],i){return[Math.max(Math.floor(o/i),1)*i,Math.max(Math.floor(s/i),1)*i]}class FeatureExtractor extends Callable{constructor(s){super(),this.config=s}}class ImageFeatureExtractor extends FeatureExtractor{constructor(s){super(s),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(s,i,a=2){const d=s.height,_=s.width,b=i.height,$=i.width;let nt=Math.min(d,b),tt=Math.min(_,$);return nt===d&&tt===_?s:(d>_?tt=Math.floor(_*nt/d):_>d&&(nt=Math.floor(d*tt/_)),await s.resize(tt,nt,{resample:a}))}async crop_margin(s,i=200){const a=s.clone().grayscale(),d=min(a.data)[0],b=max(a.data)[0]-d;if(b===0)return s;const $=i/255;let nt=a.width,tt=a.height,et=0,g=0;for(let c=0;c<a.height;++c){const j=c*a.width;for(let _e=0;_e<a.width;++_e)(a.data[j+_e]-d)/b<$&&(nt=Math.min(nt,_e),tt=Math.min(tt,c),et=Math.max(et,_e),g=Math.max(g,c))}return s=await s.crop([nt,tt,et,g]),s}pad_image(s,i,a,{mode:d="constant",center:_=!1,constant_values:b=0}={}){const[$,nt,tt]=i;let et,g;if(typeof a=="number"?(et=a,g=a):(et=a.width,g=a.height),et!==nt||g!==$){const c=new Float32Array(et*g*tt);if(Array.isArray(b))for(let rt=0;rt<c.length;++rt)c[rt]=b[rt%tt];else b!==0&&c.fill(b);const[j,_e]=_?[Math.floor((et-nt)/2),Math.floor((g-$)/2)]:[0,0];for(let rt=0;rt<$;++rt){const st=(rt+_e)*et,ot=rt*nt;for(let it=0;it<nt;++it){const at=(st+it+j)*tt,lt=(ot+it)*tt;for(let ut=0;ut<tt;++ut)c[at+ut]=s[lt+ut]}}if(d==="symmetric"){if(_)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const rt=$-1,st=nt-1;for(let ot=0;ot<g;++ot){const it=ot*et,at=calculateReflectOffset(ot,rt)*nt;for(let lt=0;lt<et;++lt){if(ot<$&&lt<nt)continue;const ut=(it+lt)*tt,ct=(at+calculateReflectOffset(lt,st))*tt;for(let dt=0;dt<tt;++dt)c[ut+dt]=s[ct+dt]}}}s=c,i=[g,et,tt]}return[s,i]}rescale(s){for(let i=0;i<s.length;++i)s[i]=this.rescale_factor*s[i]}get_resize_output_image_size(s,i){const[a,d]=s.size;let _,b;if(this.do_thumbnail){const{height:$,width:nt}=i;_=Math.min($,nt)}else Number.isInteger(i)?(_=i,b=this.config.max_size??_):i!==void 0&&(_=i.shortest_edge,b=i.longest_edge);if(_!==void 0||b!==void 0){const $=_===void 0?1:Math.max(_/a,_/d),nt=a*$,tt=d*$,et=b===void 0?1:Math.min(b/nt,b/tt);let g=Math.floor(Number((nt*et).toFixed(2))),c=Math.floor(Number((tt*et).toFixed(2)));return this.size_divisibility!==void 0&&([g,c]=enforce_size_divisibility([g,c],this.size_divisibility)),[g,c]}else if(i!==void 0&&i.width!==void 0&&i.height!==void 0){let $=i.width,nt=i.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let tt=nt/d,et=$/a;Math.abs(1-et)<Math.abs(1-tt)?tt=et:et=tt,nt=constraint_to_multiple_of(tt*d,this.config.ensure_multiple_of),$=constraint_to_multiple_of(et*a,this.config.ensure_multiple_of)}return[$,nt]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([a,d],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(i)}`)}}async resize(s){const[i,a]=this.get_resize_output_image_size(s,this.size);return await s.resize(i,a,{resample:this.resample})}async preprocess(s,{do_normalize:i=null,do_pad:a=null,do_convert_rgb:d=null,do_convert_grayscale:_=null,do_flip_channel_order:b=null}={}){this.do_crop_margin&&(s=await this.crop_margin(s));const[$,nt]=s.size;if(d??this.do_convert_rgb?s=s.rgb():_&&(s=s.grayscale()),this.do_resize&&(s=await this.resize(s)),this.do_thumbnail&&(s=await this.thumbnail(s,this.size,this.resample)),this.do_center_crop){let j,_e;Number.isInteger(this.crop_size)?(j=this.crop_size,_e=this.crop_size):(j=this.crop_size.width,_e=this.crop_size.height),s=await s.center_crop(j,_e)}const tt=[s.height,s.width];let et=Float32Array.from(s.data),g=[s.height,s.width,s.channels];if(this.do_rescale&&this.rescale(et),i??this.do_normalize){let j=this.image_mean;Array.isArray(this.image_mean)||(j=new Array(s.channels).fill(j));let _e=this.image_std;if(Array.isArray(this.image_std)||(_e=new Array(s.channels).fill(j)),j.length!==s.channels||_e.length!==s.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${j.length}) and \`image_std\` (${_e.length}) must match the number of channels in the image (${s.channels}).`);for(let rt=0;rt<et.length;rt+=s.channels)for(let st=0;st<s.channels;++st)et[rt+st]=(et[rt+st]-j[st])/_e[st]}if(a??this.do_pad){if(this.pad_size)[et,g]=this.pad_image(et,[s.height,s.width,s.channels],this.pad_size);else if(this.size_divisibility){const[j,_e]=enforce_size_divisibility([g[1],g[0]],this.size_divisibility);[et,g]=this.pad_image(et,g,{width:j,height:_e})}}if(b??this.do_flip_channel_order){if(g[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let j=0;j<et.length;j+=3){const _e=et[j];et[j]=et[j+2],et[j+2]=_e}}const c=new Tensor("float32",et,g).permute(2,0,1);return{original_size:[nt,$],reshaped_input_size:tt,pixel_values:c}}async _call(s,...i){Array.isArray(s)||(s=[s]);const a=await Promise.all(s.map(_=>this.preprocess(_)));return{pixel_values:stack(a.map(_=>_.pixel_values),0),original_sizes:a.map(_=>_.original_size),reshaped_input_sizes:a.map(_=>_.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(s,i=null){const a=s.logits,d=a.dims[0];if(i!==null&&i.length!==d)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const _=[];for(let b=0;b<d;++b){const $=i!==null?i[b]:null;let nt=a[b];$!==null&&(nt=interpolate(nt,$,"bilinear",!1));const[tt,et]=$??nt.dims.slice(-2),g=new Tensor("int32",new Int32Array(tt*et),[tt,et]),c=nt[0].data;for(let st=1;st<nt.dims[0];++st){const ot=nt[st].data;for(let it=0;it<ot.length;++it)ot[it]>c[it]&&(c[it]=ot[it],g.data[it]=st)}const j=new Array(nt.dims[0]),_e=g.data;for(let st=0;st<_e.length;++st){const ot=_e[st];j[ot]=ot}const rt=j.filter(st=>st!==void 0);_.push({segmentation:g,labels:rt})}return _}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(s){super(s),this.crop_pct=this.config.crop_pct??224/256}async resize(s){var a;const i=(a=this.size)==null?void 0:a.shortest_edge;if(i===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(i<384){const d=Math.floor(i/this.crop_pct),[_,b]=this.get_resize_output_image_size(s,{shortest_edge:d});s=await s.resize(_,b,{resample:this.resample}),s=await s.center_crop(i,i)}else s=await s.resize(i,i,{resample:this.resample});return s}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(s){super(s),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(i=>i*i))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...s){return post_process_object_detection(...s)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(s,i,a,d={}){const[_,b,$]=i;let nt=this.image_mean;Array.isArray(this.image_mean)||(nt=new Array($).fill(nt));let tt=this.image_std;Array.isArray(tt)||(tt=new Array($).fill(nt));const et=nt.map((g,c)=>-g/tt[c]);return super.pad_image(s,i,a,{center:!0,constant_values:et,...d})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(s){const i=await super._call(s),a=[i.pixel_values.dims[0],64,64],d=new Tensor("int64",new BigInt64Array(a.reduce((_,b)=>_*b)).fill(1n),a);return{...i,pixel_mask:d}}post_process_object_detection(...s){return post_process_object_detection(...s)}remove_low_and_no_objects(s,i,a,d){let _=[],b=[],$=[];for(let nt=0;nt<s.dims[0];++nt){let tt=s[nt],et=i[nt],g=max(tt.data)[1];if(g===d)continue;let j=softmax(tt.data)[g];j>a&&(_.push(et),b.push(j),$.push(g))}return[_,b,$]}check_segment_validity(s,i,a,d=.5,_=.8){let b=[],$=0,nt=0;for(let et=0;et<s.length;++et)s[et]===a&&(b.push(et),++$),i[a].data[et]>=d&&++nt;let tt=$>0&&nt>0;return tt&&(tt=$/nt>_),[tt,b]}compute_segments(s,i,a,d,_,b=null,$=null){let[nt,tt]=$??s[0].dims,et=new Tensor("int32",new Int32Array(nt*tt),[nt,tt]),g=[];if($!==null)for(let rt=0;rt<s.length;++rt)s[rt]=interpolate(s[rt],$,"bilinear",!1);let c=new Int32Array(s[0].data.length),j=new Float32Array(s[0].data.length);for(let rt=0;rt<s.length;++rt){let st=i[rt];for(let ot=0;ot<s[rt].data.length;++ot)s[rt].data[ot]*=st,s[rt].data[ot]>j[ot]&&(c[ot]=rt,j[ot]=s[rt].data[ot])}let _e=0;for(let rt=0;rt<a.length;++rt){let st=a[rt],[ot,it]=this.check_segment_validity(c,s,rt,d,_);if(ot){++_e;for(let at of it)et.data[at]=_e;g.push({id:_e,label_id:st,score:i[rt]})}}return[et,g]}post_process_panoptic_segmentation(s,i=.5,a=.5,d=.8,_=null,b=null){_===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),_=new Set);const $=s.logits,tt=s.pred_masks.sigmoid();let[et,g,c]=$.dims;if(c-=1,b!==null&&b.length!==et)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let j=[];for(let _e=0;_e<et;++_e){let rt=b!==null?b[_e]:null,st=$[_e],ot=tt[_e],[it,at,lt]=this.remove_low_and_no_objects(st,ot,i,c);if(lt.length===0){let[dt,ft]=rt??ot.dims.slice(-2),ht=new Tensor("int32",new Int32Array(dt*ft).fill(-1),[dt,ft]);j.push({segmentation:ht,segments_info:[]});continue}let[ut,ct]=this.compute_segments(it,at,lt,a,d,_,rt);j.push({segmentation:ut,segments_info:ct})}return j}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...s){return post_process_object_detection(...s)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(s,i,a){s=structuredClone(s);let d=calculateDimensions(s);if(d.length===3)d=[1,...d],s=[s];else if(d.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let _=0;_<s.length;++_){let b=i[_],$=a[_],nt=[$[0]/b[0],$[1]/b[1]];for(let tt=0;tt<s[_].length;++tt)for(let et=0;et<s[_][tt].length;++et)for(let g=0;g<s[_][tt][et].length;++g)s[_][tt][et][g]*=nt[g]}return new Tensor("float32",Float32Array.from(s.flat(1/0)),d)}add_input_labels(s,i){let a=calculateDimensions(s);if(a.length===2)a=[1,...a],s=[s];else if(a.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(a.some((d,_)=>d!==i.dims[_]))throw Error(`The first ${a.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",s.flat(1/0).map(BigInt),a)}async _call(s,i=null,a=null){const d=await super._call(s);if(i&&(d.input_points=this.reshape_input_points(i,d.original_sizes,d.reshaped_input_sizes)),a){if(!d.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");d.input_labels=this.add_input_labels(a,d.input_points)}return d}post_process_masks(s,i,a,{mask_threshold:d=0,binarize:_=!0,pad_size:b=null}={}){const $=[];b=b??this.pad_size;const nt=[b.height,b.width];for(let tt=0;tt<i.length;++tt){const et=i[tt],g=a[tt],c=s[tt],j=[];for(let _e=0;_e<c.dims[0];++_e){const rt=c[_e];let st=interpolate(rt,nt,"bilinear",!1);if(st=st.slice(null,[0,g[0]],[0,g[1]]),st=interpolate(st,et,"bilinear",!1),_){const ot=new Uint8Array(st.data.length);for(let it=0;it<st.data.length;++it)st.data[it]>d&&(ot[it]=1);st=new Tensor("bool",ot,st.dims)}j.push(st)}$.push(stack(j))}return $}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(s,i,a,d={}){const[_,b,$]=i;return super.pad_image(s,i,{width:b+(a-b%a)%a,height:_+(a-_%a)%a},{mode:"symmetric",center:!1,constant_values:-1,...d})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(s,i){Array.isArray(s)||(s=[s]),Array.isArray(i)||(i=[i]);const a=await Promise.all(s.map(b=>this.preprocess(b))),d=await Promise.all(i.map(b=>this.preprocess(b,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(a.map((b,$)=>cat([b.pixel_values,d[$].pixel_values],0)),0),original_sizes:a.map(b=>b.original_size),reshaped_input_sizes:a.map(b=>b.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(s){var i;super(s),(i=this.config).mel_filters??(i.mel_filters=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(s){const{data:i,dims:a}=spectrogram(s,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),d=max(i)[0];for(let _=0;_<i.length;++_)i[_]=(Math.max(i[_],d-8)+4)/4;return{data:i,dims:a}}async _call(s){validate_audio_inputs(s,"WhisperFeatureExtractor");let i;s.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),i=s.slice(0,this.config.n_samples)):(i=new Float32Array(this.config.n_samples),i.set(s));const{data:a,dims:d}=this._extract_fbank_features(i);return{input_features:new Tensor("float32",a,[1,...d])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(s){const a=s.reduce((_,b)=>_+b,0)/s.length,d=s.reduce((_,b)=>_+(b-a)**2,0)/s.length;return s.map(_=>(_-a)/Math.sqrt(d+1e-7))}async _call(s){validate_audio_inputs(s,"Wav2Vec2FeatureExtractor"),s instanceof Float64Array&&(s=new Float32Array(s));let i=s;this.config.do_normalize&&(i=this._zero_mean_unit_var_norm(i));const a=[1,i.length];return{input_values:new Tensor("float32",i,a),attention_mask:new Tensor("int64",new BigInt64Array(i.length).fill(1n),a)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(s){super(s);const i=this.config.sampling_rate,a=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(i/2),i,null,"kaldi",!0);for(let d=0;d<a.length;++d)a[d].push(0);this.mel_filters=a,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(s,i){return s=s.map(a=>a*32768),spectrogram(s,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:i,transpose:!0})}async _call(s,{padding:i=!0,pad_to_multiple_of:a=2,do_normalize_per_mel_bins:d=!0,return_attention_mask:_=!0}={}){validate_audio_inputs(s,"SeamlessM4TFeatureExtractor");let b=this._extract_fbank_features(s,this.config.max_length);if(d){const[_e,rt]=b.dims;for(let st=0;st<rt;++st){let ot=0;for(let ut=0;ut<_e;++ut)ot+=b.data[ut*rt+st];const it=ot/_e;let at=0;for(let ut=0;ut<_e;++ut)at+=(b.data[ut*rt+st]-it)**2;at/=_e-1;const lt=Math.sqrt(at+1e-7);for(let ut=0;ut<_e;++ut){const ct=ut*rt+st;b.data[ct]=(b.data[ct]-it)/lt}}}let $;if(i){const[_e,rt]=b.dims,st=_e%a;if(st>0){const ot=new Float32Array(rt*(_e+st));ot.set(b.data),ot.fill(this.config.padding_value,b.data.length);const it=_e+st;b={data:ot,dims:[it,rt]},_&&($=new Tensor("int64",new BigInt64Array(it),[1,it]),$.data.fill(1n,0,_e))}}const[nt,tt]=b.dims,et=this.config.stride;if(nt%et!==0)throw new Error(`The number of frames (${nt}) must be a multiple of the stride (${et}).`);const c=new Tensor("float32",b.data,b.dims).view(1,Math.floor(nt/et),tt*et),j={input_features:c};if(_){const _e=c.dims[1],rt=new Tensor("int64",new BigInt64Array(_e),[1,_e]);if($)for(let st=1,ot=0;st<nt;st+=et,++ot)rt.data[ot]=$.data[st];else rt.data.fill(1n);j.attention_mask=rt}return j}}class ASTFeatureExtractor extends FeatureExtractor{constructor(s){super(s);const i=this.config.sampling_rate,a=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(i/2),i,null,"kaldi",!0);for(let d=0;d<a.length;++d)a[d].push(0);this.mel_filters=a,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(s,i){return spectrogram(s,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:i,transpose:!0})}async _call(s){validate_audio_inputs(s,"ASTFeatureExtractor");const i=this._extract_fbank_features(s,this.config.max_length);if(this.config.do_normalize){const a=this.std*2;for(let d=0;d<i.data.length;++d)i.data[d]=(i.data[d]-this.mean)/a}return{input_values:new Tensor("float32",i.data,[1,...i.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(s){super(s),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(s,i,a,d){let _,b=!1;const $=s.length-i;if($>0)if(a==="rand_trunc"){b=!0;const nt=Math.floor(Math.random()*($+1));s=s.subarray(nt,nt+i),_=this._extract_fbank_features(s,this.mel_filters_slaney,this.config.nb_max_samples),_.dims=[1,..._.dims]}else throw new Error(`Truncation strategy "${a}" not implemented`);else{if($<0){let nt=new Float64Array(i);if(nt.set(s),d==="repeat")for(let tt=s.length;tt<i;tt+=s.length)nt.set(s.subarray(0,Math.min(s.length,i-tt)),tt);else if(d==="repeatpad")for(let tt=s.length;tt<-$;tt+=s.length)nt.set(s,tt);s=nt}if(a==="fusion")throw new Error(`Truncation strategy "${a}" not implemented`);_=this._extract_fbank_features(s,this.mel_filters_slaney,this.config.nb_max_samples),_.dims=[1,..._.dims]}return{..._,longer:b}}_extract_fbank_features(s,i,a=null){return spectrogram(s,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:i,log_mel:"dB",max_num_frames:a,do_pad:!1,transpose:!0})}async _call(s,{max_length:i=null}={}){validate_audio_inputs(s,"ClapFeatureExtractor");const a=this._get_input_mel(s,i??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",a.data,[1,...a.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(s){super(),this.feature_extractor=s}async _call(s,...i){return await this.feature_extractor(s,...i)}}class SamProcessor extends Processor{async _call(...s){return await this.feature_extractor(...s)}post_process_masks(...s){return this.feature_extractor.post_process_masks(...s)}reshape_input_points(...s){return this.feature_extractor.reshape_input_points(...s)}}class WhisperProcessor extends Processor{async _call(s){return await this.feature_extractor(s)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(s){return await this.feature_extractor(s)}}class SpeechT5Processor extends Processor{async _call(s){return await this.feature_extractor(s)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static async from_pretrained(s,{progress_callback:i=null,config:a=null,cache_dir:d=null,local_files_only:_=!1,revision:b="main"}={}){let $=a??await getModelJSON(s,"preprocessor_config.json",!0,{progress_callback:i,config:a,cache_dir:d,local_files_only:_,revision:b}),nt=$.feature_extractor_type??$.image_processor_type,tt=this.FEATURE_EXTRACTOR_CLASS_MAPPING[nt];if(!tt)if($.size!==void 0)console.warn(`Feature extractor type "${nt}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),tt=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${nt}`);let et=this.PROCESSOR_CLASS_MAPPING[$.processor_class]??Processor,g=new tt($);return new et(g)}}Ut(AutoProcessor,"FEATURE_EXTRACTOR_CLASS_MAPPING",{ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor}),Ut(AutoProcessor,"PROCESSOR_CLASS_MAPPING",{WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor});async function prepareImages(o){return Array.isArray(o)||(o=[o]),await Promise.all(o.map(s=>RawImage.read(s)))}async function prepareAudios(o,s){return Array.isArray(o)||(o=[o]),await Promise.all(o.map(i=>typeof i=="string"||i instanceof URL?read_audio(i,s):i instanceof Float64Array?new Float32Array(i):i))}function get_bounding_box(o,s){s&&(o=o.map(b=>b|0));const[i,a,d,_]=o;return{xmin:i,ymin:a,xmax:d,ymax:_}}class Pipeline extends Callable{constructor({task:s,model:i,tokenizer:a=null,processor:d=null}){super(),this.task=s,this.model=i,this.tokenizer=a,this.processor=d}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(s){super(s)}async _call(s,{topk:i=1}={}){const a=this.tokenizer(s,{padding:!0,truncation:!0}),d=await this.model(a),_=this.model.config.problem_type==="multi_label_classification"?nt=>nt.sigmoid().data:nt=>softmax(nt.data),b=this.model.config.id2label,$=[];for(const nt of d.logits){const tt=_(nt),g=getTopItems(tt,i).map(c=>({label:b[c[0]],score:c[1]}));i===1?$.push(...g):$.push(g)}return Array.isArray(s)||i===1?$:$[0]}}class TokenClassificationPipeline extends Pipeline{constructor(s){super(s)}async _call(s,{ignore_labels:i=["O"]}={}){const a=Array.isArray(s),d=this.tokenizer(a?s:[s],{padding:!0,truncation:!0}),b=(await this.model(d)).logits,$=this.model.config.id2label,nt=[];for(let tt=0;tt<b.dims[0];++tt){const et=d.input_ids[tt],g=b[tt],c=[];for(let j=0;j<g.dims[0];++j){const _e=g[j],rt=max(_e.data)[1],st=$?$[rt]:`LABEL_${rt}`;if(i.includes(st))continue;const ot=this.tokenizer.decode([et[j].item()],{skip_special_tokens:!0});if(ot==="")continue;const it=softmax(_e.data);c.push({entity:st,score:it[rt],index:j,word:ot,start:null,end:null})}nt.push(c)}return a?nt:nt[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(s){super(s)}async _call(s,i,{topk:a=1}={}){const d=this.tokenizer(s,{text_pair:i,padding:!0,truncation:!0}),_=await this.model(d),b=[];for(let $=0;$<_.start_logits.dims[0];++$){const nt=d.input_ids[$],tt=nt.indexOf(this.tokenizer.sep_token_id),et=Array.from(softmax(_.start_logits[$].data)).map((j,_e)=>[j,_e]).filter(j=>j[1]>tt),g=Array.from(softmax(_.end_logits[$].data)).map((j,_e)=>[j,_e]).filter(j=>j[1]>tt),c=product(et,g).filter(j=>j[0][1]<=j[1][1]).map(j=>[j[0][1],j[1][1],j[0][0]*j[1][0]]).sort((j,_e)=>_e[2]-j[2]);for(let j=0;j<Math.min(c.length,a);++j){const[_e,rt,st]=c[j],ot=[...nt].slice(_e,rt+1),it=this.tokenizer.decode(ot,{skip_special_tokens:!0});b.push({answer:it,score:st})}}return a===1?b[0]:b}}class FillMaskPipeline extends Pipeline{constructor(s){super(s)}async _call(s,{topk:i=5}={}){const a=this.tokenizer(s,{padding:!0,truncation:!0}),d=await this.model(a),_=[];for(let b=0;b<a.input_ids.dims[0];++b){const $=a.input_ids[b],nt=$.indexOf(this.tokenizer.mask_token_id);if(nt===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const et=d.logits[b][nt],g=getTopItems(softmax(et.data),i);_.push(g.map(c=>{const j=[...$];return j[nt]=c[0],{score:c[1],token:c[0],token_str:this.tokenizer.model.vocab[c[0]],sequence:this.tokenizer.decode(j,{skip_special_tokens:!0})}}))}return Array.isArray(s)?_:_[0]}}class Text2TextGenerationPipeline extends Pipeline{constructor(i){super(i);Ut(this,"_key","generated_text")}async _call(i,a={}){Array.isArray(i)||(i=[i]),this.model.config.prefix&&(i=i.map(tt=>this.model.config.prefix+tt));const d=this.model.config.task_specific_params;d&&d[this.task]&&d[this.task].prefix&&(i=i.map(tt=>d[this.task].prefix+tt));const _=this.tokenizer,b={padding:!0,truncation:!0};let $;this instanceof TranslationPipeline&&"_build_translation_inputs"in _?$=_._build_translation_inputs(i,b,a).input_ids:$=_(i,b).input_ids;const nt=await this.model.generate($,a);return _.batch_decode(nt,{skip_special_tokens:!0}).map(tt=>({[this._key]:tt}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{constructor(i){super(i);Ut(this,"_key","summary_text")}}class TranslationPipeline extends Text2TextGenerationPipeline{constructor(i){super(i);Ut(this,"_key","translation_text")}}function isChat(o){return Array.isArray(o)&&o.every(s=>"role"in s&&"content"in s)}class TextGenerationPipeline extends Pipeline{constructor(s){super(s)}async _call(s,i={}){let a=!1,d=!1,_;if(typeof s=="string")_=s=[s];else if(Array.isArray(s)&&s.every(_e=>typeof _e=="string"))a=!0,_=s;else{if(isChat(s))s=[s];else if(Array.isArray(s)&&s.every(isChat))a=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");d=!0,_=s.map(_e=>this.tokenizer.apply_chat_template(_e,{tokenize:!1,add_generation_prompt:!0}))}const b=i.add_special_tokens??!1,$=d?!1:i.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:nt,attention_mask:tt}=this.tokenizer(_,{add_special_tokens:b,padding:!0,truncation:!0}),et=await this.model.generate(nt,i,null,{inputs_attention_mask:tt});let g=this.tokenizer.batch_decode(et,{skip_special_tokens:!0}),c;!$&&nt.dims.at(-1)>0&&(c=this.tokenizer.batch_decode(nt,{skip_special_tokens:!0}).map(_e=>_e.length));const j=Array.from({length:s.length},_e=>[]);for(let _e=0;_e<g.length;++_e){const rt=Math.floor(_e/et.length*s.length);c&&(g[_e]=g[_e].slice(c[rt])),j[rt].push({generated_text:d?[...s[rt],{role:"assistant",content:g[_e]}]:g[_e]})}return!a&&j.length===1?j[0]:j}}class ZeroShotClassificationPipeline extends Pipeline{constructor(s){super(s),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([i,a])=>[i.toLowerCase(),a])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(s,i,{hypothesis_template:a="This example is {}.",multi_label:d=!1}={}){const _=Array.isArray(s);_||(s=[s]),Array.isArray(i)||(i=[i]);const b=i.map(tt=>a.replace("{}",tt)),$=d||i.length===1,nt=[];for(const tt of s){const et=[];for(const j of b){const _e=this.tokenizer(tt,{text_pair:j,padding:!0,truncation:!0}),rt=await this.model(_e);$?et.push([rt.logits.data[this.contradiction_id],rt.logits.data[this.entailment_id]]):et.push(rt.logits.data[this.entailment_id])}const c=($?et.map(j=>softmax(j)[1]):softmax(et)).map((j,_e)=>[j,_e]).sort((j,_e)=>_e[0]-j[0]);nt.push({sequence:tt,labels:c.map(j=>i[j[1]]),scores:c.map(j=>j[0])})}return _?nt:nt[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(s){super(s)}async _call(s,{pooling:i="none",normalize:a=!1,quantize:d=!1,precision:_="binary"}={}){const b=this.tokenizer(s,{padding:!0,truncation:!0}),$=await this.model(b);let nt=$.last_hidden_state??$.logits??$.token_embeddings;if(i!=="none")if(i==="mean")nt=mean_pooling(nt,b.attention_mask);else if(i==="cls")nt=nt.slice(null,0);else throw Error(`Pooling method '${i}' not supported.`);return a&&(nt=nt.normalize(2,-1)),d&&(nt=quantize_embeddings(nt,_)),nt}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(s){super(s)}async _call(s,{pool:i=null}={}){const a=await prepareImages(s),{pixel_values:d}=await this.processor(a),_=await this.model({pixel_values:d});let b;if(i){if(!("pooler_output"in _))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");b=_.pooler_output}else b=_.last_hidden_state??_.logits??_.image_embeds;return b}}class AudioClassificationPipeline extends Pipeline{constructor(s){super(s)}async _call(s,{topk:i=null}={}){const a=!Array.isArray(s),d=this.processor.feature_extractor.config.sampling_rate,_=await prepareAudios(s,d),b=this.model.config.id2label,$=[];for(const nt of _){const tt=await this.processor(nt),g=(await this.model(tt)).logits[0],j=getTopItems(softmax(g.data),i).map(_e=>({label:b[_e[0]],score:_e[1]}));i===1?$.push(...j):$.push(j)}return!a||i===1?$:$[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(s){super(s)}async _call(s,i,{hypothesis_template:a="This is a sound of {}."}={}){const d=!Array.isArray(s);d&&(s=[s]);const _=i.map(et=>a.replace("{}",et)),b=this.tokenizer(_,{padding:!0,truncation:!0}),$=this.processor.feature_extractor.config.sampling_rate,nt=await prepareAudios(s,$),tt=[];for(const et of nt){const g=await this.processor(et),c=await this.model({...b,...g}),j=softmax(c.logits_per_audio.data);tt.push([...j].map((_e,rt)=>({score:_e,label:i[rt]})))}return d?tt[0]:tt}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(s){super(s)}async _call(s,i={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(s,i);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(s,i);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(s,i={}){i.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),i.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const a=!Array.isArray(s);a&&(s=[s]);const d=this.processor.feature_extractor.config.sampling_rate,_=await prepareAudios(s,d),b=[];for(const $ of _){const nt=await this.processor($),et=(await this.model(nt)).logits[0],g=[];for(const j of et)g.push(max(j.data)[1]);const c=this.tokenizer.decode(g);b.push({text:c})}return a?b[0]:b}async _call_whisper(s,i={}){const a=i.return_timestamps??!1,d=i.chunk_length_s??0,_=i.chunk_callback??null,b=i.force_full_sequences??!1;let $=i.stride_length_s??null;a==="word"&&(i.return_token_timestamps=!0);const nt=pop(i,"language",null),tt=pop(i,"task",null);if(nt||tt||a){if(i.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const st=this.tokenizer.get_decoder_prompt_ids({language:nt,task:tt,no_timestamps:!a});st.length>0&&(i.forced_decoder_ids=st)}const et=!Array.isArray(s);et&&(s=[s]);const g=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,c=this.processor.feature_extractor.config.hop_length,j=this.processor.feature_extractor.config.sampling_rate,_e=await prepareAudios(s,j),rt=[];for(const st of _e){let ot=[];if(d>0){if($===null)$=d/6;else if(d<=$)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const lt=j*d,ut=j*$,ct=lt-2*ut;let dt=0;for(;dt<st.length;){const ft=st.subarray(dt,dt+lt),ht=await this.processor(ft),mt=dt===0,yt=dt+ct>=st.length;ot.push({stride:[ft.length,mt?0:ut,yt?0:ut],input_features:ht.input_features,is_last:yt}),dt+=ct}}else ot=[{stride:[st.length,0,0],input_features:(await this.processor(st)).input_features,is_last:!0}];for(const lt of ot){i.num_frames=Math.floor(lt.stride[0]/c);const ut=await this.model.generate(lt.input_features,i);a==="word"?(lt.tokens=ut.sequences[0],lt.token_timestamps=ut.token_timestamps.tolist()[0].map(ct=>round(ct,2))):lt.tokens=ut[0],lt.stride=lt.stride.map(ct=>ct/j),_!==null&&_(lt)}const[it,at]=this.tokenizer._decode_asr(ot,{time_precision:g,return_timestamps:a,force_full_sequences:b});rt.push({text:it,...at})}return et?rt[0]:rt}}class ImageToTextPipeline extends Pipeline{constructor(s){super(s)}async _call(s,i={}){const a=Array.isArray(s),d=await prepareImages(s),{pixel_values:_}=await this.processor(d),b=[];for(const $ of _){$.dims=[1,...$.dims];const nt=await this.model.generate($,i),tt=this.tokenizer.batch_decode(nt,{skip_special_tokens:!0}).map(et=>({generated_text:et.trim()}));b.push(tt)}return a?b:b[0]}}class ImageClassificationPipeline extends Pipeline{constructor(s){super(s)}async _call(s,{topk:i=1}={}){const a=Array.isArray(s),d=await prepareImages(s),{pixel_values:_}=await this.processor(d),b=await this.model({pixel_values:_}),$=this.model.config.id2label,nt=[];for(const tt of b.logits){const g=getTopItems(softmax(tt.data),i).map(c=>({label:$[c[0]],score:c[1]}));i===1?nt.push(...g):nt.push(g)}return a||i===1?nt:nt[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(s){super(s),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(s,{threshold:i=.5,mask_threshold:a=.5,overlap_mask_area_threshold:d=.8,label_ids_to_fuse:_=null,target_sizes:b=null,subtask:$=null}={}){if(Array.isArray(s)&&s.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const tt=await prepareImages(s),et=tt.map(ot=>[ot.height,ot.width]),{pixel_values:g,pixel_mask:c}=await this.processor(tt),j=await this.model({pixel_values:g,pixel_mask:c});let _e=null;if($!==null)_e=this.subtasks_mapping[$];else for(let[ot,it]of Object.entries(this.subtasks_mapping))if(it in this.processor.feature_extractor){_e=this.processor.feature_extractor[it].bind(this.processor.feature_extractor),$=ot;break}const rt=this.model.config.id2label,st=[];if($==="panoptic"||$==="instance"){const ot=_e(j,i,a,d,_,b??et)[0],it=ot.segmentation;for(const at of ot.segments_info){const lt=new Uint8ClampedArray(it.data.length);for(let ct=0;ct<it.data.length;++ct)it.data[ct]===at.id&&(lt[ct]=255);const ut=new RawImage(lt,it.dims[1],it.dims[0],1);st.push({score:at.score,label:rt[at.label_id],mask:ut})}}else if($==="semantic"){const{segmentation:ot,labels:it}=_e(j,b??et)[0];for(const at of it){const lt=new Uint8ClampedArray(ot.data.length);for(let ct=0;ct<ot.data.length;++ct)ot.data[ct]===at&&(lt[ct]=255);const ut=new RawImage(lt,ot.dims[1],ot.dims[0],1);st.push({score:null,label:rt[at],mask:ut})}}else throw Error(`Subtask ${$} not supported.`);return st}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(s){super(s)}async _call(s,i,{hypothesis_template:a="This is a photo of {}"}={}){const d=Array.isArray(s),_=await prepareImages(s),b=i.map(c=>a.replace("{}",c)),$=this.tokenizer(b,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:nt}=await this.processor(_),tt=await this.model({...$,pixel_values:nt}),et=this.model.config.model_type==="siglip"?c=>c.sigmoid().data:c=>softmax(c.data),g=[];for(const c of tt.logits_per_image){const _e=[...et(c)].map((rt,st)=>({score:rt,label:i[st]}));_e.sort((rt,st)=>st.score-rt.score),g.push(_e)}return d?g:g[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(s){super(s)}async _call(s,{threshold:i=.9,percentage:a=!1}={}){const d=Array.isArray(s);if(d&&s.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const _=await prepareImages(s),b=a?null:_.map(j=>[j.height,j.width]),{pixel_values:$,pixel_mask:nt}=await this.processor(_),tt=await this.model({pixel_values:$,pixel_mask:nt}),et=this.processor.feature_extractor.post_process_object_detection(tt,i,b),g=this.model.config.id2label,c=et.map(j=>j.boxes.map((_e,rt)=>({score:j.scores[rt],label:g[j.classes[rt]],box:get_bounding_box(_e,!a)})));return d?c:c[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(s){super(s)}async _call(s,i,{threshold:a=.1,topk:d=null,percentage:_=!1}={}){const b=Array.isArray(s),$=await prepareImages(s),nt=this.tokenizer(i,{padding:!0,truncation:!0}),tt=await this.processor($),et=[];for(let g=0;g<$.length;++g){const c=$[g],j=_?null:[[c.height,c.width]],_e=tt.pixel_values[g].unsqueeze_(0),rt=await this.model({...nt,pixel_values:_e}),st=this.processor.feature_extractor.post_process_object_detection(rt,a,j,!0)[0];let ot=st.boxes.map((it,at)=>({score:st.scores[at],label:i[st.classes[at]],box:get_bounding_box(it,!_)})).sort((it,at)=>at.score-it.score);d!==null&&(ot=ot.slice(0,d)),et.push(ot)}return b?et:et[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(s){super(s)}async _call(s,i,a={}){const d=(await prepareImages(s))[0],{pixel_values:_}=await this.processor(d),b=`<s_docvqa><s_question>${i}</s_question><s_answer>`,$=this.tokenizer(b,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,nt=await this.model.generate(_,{...a,decoder_input_ids:$,max_length:this.model.config.decoder.max_position_embeddings}),et=this.tokenizer.batch_decode(nt)[0].match(/<s_answer>(.*?)<\/s_answer>/);let g=null;return et&&et.length>=2&&(g=et[1].trim()),[{answer:g}]}}class TextToAudioPipeline extends Pipeline{constructor(i){super(i);Ut(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=i.vocoder??null}async _call(i,{speaker_embeddings:a=null}={}){return this.processor?this._call_text_to_spectrogram(i,{speaker_embeddings:a}):this._call_text_to_waveform(i)}async _call_text_to_waveform(i){const a=this.tokenizer(i,{padding:!0,truncation:!0}),{waveform:d}=await this.model(a),_=this.model.config.sampling_rate;return{audio:d.data,sampling_rate:_}}async _call_text_to_spectrogram(i,{speaker_embeddings:a}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof a=="string"||a instanceof URL)&&(a=new Float32Array(await(await fetch(a)).arrayBuffer())),a instanceof Float32Array)a=new Tensor("float32",a,[1,a.length]);else if(!(a instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:d}=this.tokenizer(i,{padding:!0,truncation:!0}),{waveform:_}=await this.model.generate_speech(d,a,{vocoder:this.vocoder}),b=this.processor.feature_extractor.config.sampling_rate;return{audio:_.data,sampling_rate:b}}}class ImageToImagePipeline extends Pipeline{constructor(s){super(s)}async _call(s){const i=await prepareImages(s),a=await this.processor(i),d=await this.model(a),_=[];for(const b of d.reconstruction){const $=b.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");_.push(RawImage.fromTensor($))}return _.length>1?_:_[0]}}class DepthEstimationPipeline extends Pipeline{constructor(s){super(s)}async _call(s){const i=await prepareImages(s),a=await this.processor(i),{predicted_depth:d}=await this.model(a),_=[];for(let b=0;b<i.length;++b){const $=interpolate(d[b],i[b].size.reverse(),"bilinear",!1),nt=$.mul_(255/max($.data)[0]).to("uint8");_.push({predicted_depth:d[b],depth:RawImage.fromTensor(nt)})}return _.length>1?_:_[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(o,s=null,{quantized:i=!0,progress_callback:a=null,config:d=null,cache_dir:_=null,local_files_only:b=!1,revision:$="main",model_file_name:nt=null}={}){o=TASK_ALIASES[o]??o;const tt=SUPPORTED_TASKS[o.split("_",1)[0]];if(!tt)throw Error(`Unsupported pipeline: ${o}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);s||(s=tt.default.model,console.log(`No model specified. Using default model: "${s}".`));const et={quantized:i,progress_callback:a,config:d,cache_dir:_,local_files_only:b,revision:$,model_file_name:nt},g=new Map([["tokenizer",tt.tokenizer],["model",tt.model],["processor",tt.processor]]),c=await loadItems(g,s,et);c.task=o,dispatchCallback(a,{status:"ready",task:o,model:s});const j=tt.pipeline;return new j(c)}async function loadItems(o,s,i){const a=Object.create(null),d=[];for(let[_,b]of o.entries()){if(!b)continue;let $;Array.isArray(b)?$=new Promise(async(nt,tt)=>{let et;for(let g of b){if(g===null){nt(null);return}try{nt(await g.from_pretrained(s,i));return}catch(c){et=c}}tt(et)}):$=b.from_pretrained(s,i),a[_]=$,d.push($)}await Promise.all(d);for(let[_,b]of Object.entries(a))a[_]=await b;return a}env$1.allowRemoteModels=!0;env$1.allowLocalModels=!0;env$1.backends.onnx.wasm.wasmPaths="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.14.0/dist/";const originalFetch=globalThis.fetch;globalThis.fetch=async(o,s)=>{try{const i=await originalFetch(o,s);return i.ok||console.warn(`Fetch failed: ${i.status} ${i.statusText} for ${o}`),i}catch(i){throw console.error(`Network error for ${o}:`,i),i}};function dedupeAppend(o,s,i=8){const a=o.trim(),d=s.trim();if(!a)return d;const b=a.split(/\s+/).slice(-i).join(" ");return d.toLowerCase().indexOf(b.toLowerCase())===0?(a+" "+d.slice(b.length)).trim():a.toLowerCase().includes(d.toLowerCase())?a:(a+" "+d).trim()}function resampleAudio(o,s,i){if(s===i)return o;const a=s/i,d=Math.round(o.length/a),_=new Float32Array(d);for(let b=0;b<d;b++){const $=b*a,nt=Math.floor($),tt=Math.min(nt+1,o.length-1),et=$-nt;_[b]=o[nt]*(1-et)+o[tt]*et}return _}function Transcription(){const[o,s]=reactExports.useState(!1),[i,a]=reactExports.useState(""),[d,_]=reactExports.useState(null),[b,$]=reactExports.useState(!1),[nt,tt]=reactExports.useState(!1),[et,g]=reactExports.useState(!1),[c,j]=reactExports.useState(!1),_e=reactExports.useRef(null),rt=reactExports.useRef(null),st=reactExports.useRef(null),{toast:ot}=useToast(),it=async()=>{if(!st.current)try{tt(!0),console.log("Loading Whisper model...");const mt=["Xenova/whisper-tiny.en","Xenova/whisper-tiny","openai/whisper-tiny.en"];let yt=null,Tt=null;for(const St of mt)try{console.log(`Attempting to load: ${St}`),yt=await pipeline("automatic-speech-recognition",St),console.log(`Successfully loaded: ${St}`);break}catch(xt){if(console.warn(`Failed to load ${St}:`,xt),Tt=xt,xt instanceof SyntaxError&&xt.message.includes("DOCTYPE")){console.log("Detected HTML response instead of JSON, trying alternative approach...");try{yt=await pipeline("automatic-speech-recognition",St,{revision:"main",quantized:!0}),console.log(`Successfully loaded ${St} with alternative config`);break}catch(wt){console.warn(`Alternative config also failed for ${St}:`,wt)}}continue}if(!yt)throw new Error(`All Whisper models failed to load. This might be due to network restrictions or CORS issues. Last error: ${Tt==null?void 0:Tt.message}`);st.current=yt,g(!0),console.log("Whisper model loaded successfully"),ot({title:"Whisper Model Loaded",description:"Ready for high-quality transcription"})}catch(mt){console.error("Failed to load Whisper model:",mt);let yt="Could not load Whisper model.";mt instanceof Error&&(mt.message.includes("DOCTYPE")?yt="Network issue: Getting HTML instead of model files. Try refreshing or check your internet connection.":mt.message.includes("CORS")?yt="CORS issue: Model loading blocked by browser security. Try using a different browser or network.":mt.message.includes("fetch")&&(yt="Network error: Cannot download model files. Check your internet connection.")),ot({title:"Model Loading Failed",description:yt,variant:"destructive"})}finally{tt(!1)}},at=async mt=>{if(st.current)try{j(!0);const Tt=(await st.current(mt,{language:"english",task:"transcribe",return_timestamps:!1})).text||"";Tt.trim()&&a(St=>dedupeAppend(St,Tt.trim()))}catch(yt){console.error("Transcription failed:",yt)}finally{j(!1)}},lt=useMutation({mutationFn:async mt=>{const yt=await apiRequest("POST","/api/appointments",{patientId:"temp-patient",appointmentDate:new Date().toISOString(),type:"transcription",status:"completed"});return await apiRequest("POST",`/api/appointments/${yt.id}/transcription`,{transcription:mt})},onSuccess:mt=>{mt.treatmentNotes?(_(mt.treatmentNotes),ot({title:"Success",description:"Transcription processed and treatment notes generated"})):ot({title:"Success",description:"Transcription processed"})},onError:()=>{ot({title:"Error",description:"Failed to process transcription",variant:"destructive"})}}),ut=async()=>{var mt;if(!st.current){ot({title:"Model Not Loaded",description:"Please load the Whisper model first.",variant:"destructive"});return}if(!((mt=navigator.mediaDevices)!=null&&mt.getUserMedia)){ot({title:"Microphone not supported",description:"Use Chrome/Edge.",variant:"destructive"});return}try{const yt=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0}});_e.current=yt,rt.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3});const Tt=rt.current.createMediaStreamSource(yt),St=new MediaRecorder(yt,{mimeType:"audio/webm;codecs=opus"});let xt=[];St.ondataavailable=gt=>{gt.data.size>0&&xt.push(gt.data)},St.onstop=async()=>{if(xt.length>0){const gt=new Blob(xt,{type:"audio/webm"});try{const vt=await gt.arrayBuffer(),Ot=await rt.current.decodeAudioData(vt);let At=Ot.getChannelData(0);Ot.sampleRate!==16e3&&(At=resampleAudio(At,Ot.sampleRate,16e3)),await at(At)}catch(vt){console.error("Error processing audio:",vt)}}xt=[],o&&setTimeout(()=>{o&&St.state==="inactive"&&St.start()},100)},St.start();const wt=setInterval(()=>{St.state==="recording"&&o&&(St.stop(),setTimeout(()=>{o&&St.start()},100))},3e3);St.recordingInterval=wt,a(""),s(!0),ot({title:"Recording Started",description:"Live Whisper transcription enabled."})}catch(yt){console.error("getUserMedia error",yt),ot({title:"Microphone blocked",description:"Allow access.",variant:"destructive"})}},ct=()=>{s(!1),_e.current&&(_e.current.getTracks().forEach(mt=>mt.stop()),_e.current=null),rt.current&&(rt.current.close(),rt.current=null),ot({title:"Recording Stopped",description:"Live transcription complete."})},dt=()=>o?ct():ut(),ft=()=>{const mt=i.trim();if(!mt){ot({title:"Error",description:"Record audio first.",variant:"destructive"});return}lt.mutate(mt)},ht=async()=>{const mt=i.trim();if(!mt){ot({title:"Error",description:"Record audio first.",variant:"destructive"});return}try{$(!0);const yt=`Dental Appointment Transcription
Generated: ${new Date().toLocaleString()}

TRANSCRIPTION:
${mt}

${d?`
TREATMENT NOTES:

Chief Complaint: ${d.chief_complaint}

Examination: ${d.examination}

Diagnosis: ${d.diagnosis}

Treatment Plan: ${d.treatment_plan}
`:""}`,Tt=new Blob([yt],{type:"text/plain"}),St=URL.createObjectURL(Tt),xt=document.createElement("a");xt.href=St,xt.download=`appointment-notes-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(xt),xt.click(),document.body.removeChild(xt),URL.revokeObjectURL(St),ot({title:"Notes Saved",description:"Appointment notes downloaded as text file"})}catch(yt){ot({title:"Save failed",description:(yt==null?void 0:yt.message)||"Could not save file",variant:"destructive"})}finally{$(!1)}};return reactExports.useEffect(()=>{const mt=setTimeout(()=>{it()},1e3);return()=>clearTimeout(mt)},[]),reactExports.useEffect(()=>()=>{var mt,yt;try{(mt=_e.current)==null||mt.getTracks().forEach(Tt=>Tt.stop())}catch{}try{(yt=rt.current)==null||yt.close()}catch{}},[]),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Dental Appointment Notes"}),jsxRuntimeExports.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full ${et?"bg-green-500":nt?"bg-yellow-500":"bg-gray-400"}`}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:["Whisper AI: ",et?"Ready":nt?"Loading...":"Not Loaded"]}),!et&&!nt&&jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"outline",onClick:it,children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),st.current?"Retry Load":"Load Model"]})]}),nt&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-2",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-3 w-3 animate-spin"}),"Downloading Whisper model (first time only)..."]}),et&&jsxRuntimeExports.jsx("div",{className:"text-xs text-green-600",children:"High-quality offline transcription ready"}),!et&&!nt&&jsxRuntimeExports.jsx("div",{className:"text-xs text-amber-600 mt-2",children:"⚠️ If model loading fails, this might be due to network restrictions. The model needs to download from HuggingFace (~40MB first time)."})]}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx(Button,{onClick:dt,disabled:!et,className:`w-16 h-16 rounded-full text-2xl mb-4 ${o?"bg-red-700":et?"bg-red-600":"bg-gray-400"}`,children:o?jsxRuntimeExports.jsx(Square,{className:"h-6 w-6"}):jsxRuntimeExports.jsx(Mic,{className:"h-6 w-6"})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:o?"Recording with Whisper AI...":et?"Click to start recording":"Load Whisper model first"}),c&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-3 w-3 inline animate-spin mr-1"}),"Transcribing..."]}),jsxRuntimeExports.jsx("div",{className:"border p-3 rounded bg-gray-50 min-h-24 mt-4 text-sm text-gray-700",children:i||jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Whisper transcription will appear here..."})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(Button,{onClick:ft,disabled:!i||lt.isPending,children:[jsxRuntimeExports.jsx(Bot,{className:"h-4 w-4 mr-2"}),lt.isPending?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):"Process with AI"]}),jsxRuntimeExports.jsx(Button,{onClick:ht,disabled:!i||b,children:b?"Saving…":"Download Notes"})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4",children:"AI-Generated Treatment Notes"}),["chief_complaint","examination","diagnosis","treatment_plan"].map(mt=>jsxRuntimeExports.jsxs("div",{className:"border p-4 rounded mb-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-medical-blue-900 mb-2",children:mt.replace("_"," ").toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"min-h-16 text-sm text-gray-700 bg-gray-50 p-3 rounded",children:(d==null?void 0:d[mt])||jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"AI will generate..."})})]},mt))]})})]})}var CHECKBOX_NAME="Checkbox",[createCheckboxContext,createCheckboxScope]=createContextScope(CHECKBOX_NAME),[CheckboxProvider,useCheckboxContext]=createCheckboxContext(CHECKBOX_NAME),Checkbox$1=reactExports.forwardRef((o,s)=>{const{__scopeCheckbox:i,name:a,checked:d,defaultChecked:_,required:b,disabled:$,value:nt="on",onCheckedChange:tt,form:et,...g}=o,[c,j]=reactExports.useState(null),_e=useComposedRefs(s,lt=>j(lt)),rt=reactExports.useRef(!1),st=c?et||!!c.closest("form"):!0,[ot=!1,it]=useControllableState({prop:d,defaultProp:_,onChange:tt}),at=reactExports.useRef(ot);return reactExports.useEffect(()=>{const lt=c==null?void 0:c.form;if(lt){const ut=()=>it(at.current);return lt.addEventListener("reset",ut),()=>lt.removeEventListener("reset",ut)}},[c,it]),jsxRuntimeExports.jsxs(CheckboxProvider,{scope:i,state:ot,disabled:$,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate(ot)?"mixed":ot,"aria-required":b,"data-state":getState$1(ot),"data-disabled":$?"":void 0,disabled:$,value:nt,...g,ref:_e,onKeyDown:composeEventHandlers(o.onKeyDown,lt=>{lt.key==="Enter"&&lt.preventDefault()}),onClick:composeEventHandlers(o.onClick,lt=>{it(ut=>isIndeterminate(ut)?!0:!ut),st&&(rt.current=lt.isPropagationStopped(),rt.current||lt.stopPropagation())})}),st&&jsxRuntimeExports.jsx(BubbleInput$1,{control:c,bubbles:!rt.current,name:a,value:nt,checked:ot,required:b,disabled:$,form:et,style:{transform:"translateX(-100%)"},defaultChecked:isIndeterminate(_)?!1:_})]})});Checkbox$1.displayName=CHECKBOX_NAME;var INDICATOR_NAME="CheckboxIndicator",CheckboxIndicator=reactExports.forwardRef((o,s)=>{const{__scopeCheckbox:i,forceMount:a,...d}=o,_=useCheckboxContext(INDICATOR_NAME,i);return jsxRuntimeExports.jsx(Presence,{present:a||isIndeterminate(_.state)||_.state===!0,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState$1(_.state),"data-disabled":_.disabled?"":void 0,...d,ref:s,style:{pointerEvents:"none",...o.style}})})});CheckboxIndicator.displayName=INDICATOR_NAME;var BubbleInput$1=o=>{const{control:s,checked:i,bubbles:a=!0,defaultChecked:d,..._}=o,b=reactExports.useRef(null),$=usePrevious(i),nt=useSize(s);reactExports.useEffect(()=>{const et=b.current,g=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(g,"checked").set;if($!==i&&j){const _e=new Event("click",{bubbles:a});et.indeterminate=isIndeterminate(i),j.call(et,isIndeterminate(i)?!1:i),et.dispatchEvent(_e)}},[$,i,a]);const tt=reactExports.useRef(isIndeterminate(i)?!1:i);return jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:d??tt.current,..._,tabIndex:-1,ref:b,style:{...o.style,...nt,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function isIndeterminate(o){return o==="indeterminate"}function getState$1(o){return isIndeterminate(o)?"indeterminate":o?"checked":"unchecked"}var Root$2=Checkbox$1,Indicator=CheckboxIndicator;const Checkbox=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Root$2,{ref:i,className:cn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",o),...s,children:jsxRuntimeExports.jsx(Indicator,{className:cn("flex items-center justify-center text-current"),children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}));Checkbox.displayName=Root$2.displayName;function Telemedicine(){const[o,s]=reactExports.useState(new Date),[i,a]=reactExports.useState(""),[d,_]=reactExports.useState(""),[b,$]=reactExports.useState(""),[nt,tt]=reactExports.useState("video"),[et,g]=reactExports.useState(!1),{toast:c}=useToast(),j=useQueryClient(),{data:_e}=useQuery({queryKey:["/api/patients"]}),{data:rt}=useQuery({queryKey:["/api/appointments"]}),st=useMutation({mutationFn:async yt=>await apiRequest("POST","/api/appointments",yt),onSuccess:()=>{j.invalidateQueries({queryKey:["/api/appointments"]}),c({title:"Success",description:"Appointment scheduled successfully"}),a(""),_(""),$(""),tt("video"),g(!1)},onError:()=>{c({title:"Error",description:"Failed to schedule appointment",variant:"destructive"})}}),ot=()=>{if(!i||!d||!b){c({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const yt=new Date(`${d}T${b}`);st.mutate({patientId:i,appointmentDate:yt.toISOString(),type:nt,isRecurring:et,status:"scheduled"})},it=()=>{s(new Date(o.getFullYear(),o.getMonth()-1,1))},at=()=>{s(new Date(o.getFullYear(),o.getMonth()+1,1))},lt=yt=>{const Tt=yt.getFullYear(),St=yt.getMonth(),xt=new Date(Tt,St,1),gt=new Date(Tt,St+1,0).getDate(),vt=xt.getDay(),Ot=[];for(let At=0;At<vt;At++)Ot.push(null);for(let At=1;At<=gt;At++)Ot.push(At);return Ot},ut=yt=>{if(!yt||!rt)return[];const Tt=new Date(o.getFullYear(),o.getMonth(),yt);return rt.filter(St=>new Date(St.appointmentDate).toDateString()===Tt.toDateString())},ct=()=>{const yt=new Date;return(rt==null?void 0:rt.filter(Tt=>new Date(Tt.appointmentDate).toDateString()===yt.toDateString()&&Tt.status==="scheduled"))||[]},dt=yt=>{var Tt;return((Tt=_e==null?void 0:_e.find(St=>St.id===yt))==null?void 0:Tt.name)||"Unknown Patient"},ft=lt(o),ht=o.toLocaleString("default",{month:"long",year:"numeric"}),mt=ct();return jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:jsxRuntimeExports.jsx(Card,{"data-testid":"card-telemedicine-calendar",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dental Consultation Calendar"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:it,"data-testid":"button-previous-month",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:at,"data-testid":"button-next-month",children:jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-center text-lg font-semibold text-gray-900 mb-4","data-testid":"text-current-month",children:ht}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(yt=>jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-600 p-2",children:yt},yt)),ft.map((yt,Tt)=>{const St=ut(yt),xt=yt&&o.getMonth()===new Date().getMonth()&&o.getFullYear()===new Date().getFullYear()&&yt===new Date().getDate();return jsxRuntimeExports.jsxs("div",{className:`p-2 min-h-12 border rounded cursor-pointer transition-colors ${yt?xt?"bg-medical-blue-100 border-medical-blue-300 font-medium":St.length>0?"bg-green-100 border-green-300 font-medium":"hover:bg-blue-50":"text-gray-400"}`,"data-testid":yt?`calendar-day-${yt}`:`calendar-empty-${Tt}`,children:[jsxRuntimeExports.jsx("div",{className:"text-sm",children:yt||""}),St.length>0&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-green-700",children:[St.length," apt",St.length>1?"s":""]})]},Tt)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-medical-blue-100 border border-medical-blue-300 rounded"}),jsxRuntimeExports.jsx("span",{children:"Today"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-100 border border-green-300 rounded"}),jsxRuntimeExports.jsx("span",{children:"Appointments"})]})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(Card,{"data-testid":"card-schedule-appointment",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Schedule Dental Consultation"}),jsxRuntimeExports.jsxs("form",{className:"space-y-4",onSubmit:yt=>yt.preventDefault(),children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient"}),jsxRuntimeExports.jsxs(Select,{value:i,onValueChange:a,children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-appointment-patient",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select patient..."})}),jsxRuntimeExports.jsx(SelectContent,{children:_e==null?void 0:_e.map(yt=>jsxRuntimeExports.jsx(SelectItem,{value:yt.id,children:yt.name},yt.id))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),jsxRuntimeExports.jsx(Input,{type:"date",value:d,onChange:yt=>_(yt.target.value),min:new Date().toISOString().split("T")[0],"data-testid":"input-appointment-date"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),jsxRuntimeExports.jsx(Input,{type:"time",value:b,onChange:yt=>$(yt.target.value),"data-testid":"input-appointment-time"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),jsxRuntimeExports.jsxs(Select,{value:nt,onValueChange:tt,children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-appointment-type",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"consultation",children:"Video Consultation"}),jsxRuntimeExports.jsx(SelectItem,{value:"followup",children:"Follow-up Call"}),jsxRuntimeExports.jsx(SelectItem,{value:"emergency",children:"Emergency Consult"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Checkbox,{id:"recurring",checked:et,onCheckedChange:yt=>g(yt===!0),"data-testid":"checkbox-recurring"}),jsxRuntimeExports.jsx("label",{htmlFor:"recurring",className:"text-sm text-gray-700",children:"Recurring appointment"})]}),jsxRuntimeExports.jsxs(Button,{onClick:ot,disabled:st.isPending,className:"w-full bg-medical-blue-600 hover:bg-medical-blue-700","data-testid":"button-schedule-appointment",children:[jsxRuntimeExports.jsx(CalendarPlus,{className:"h-4 w-4 mr-2"}),st.isPending?"Scheduling...":"Schedule"]})]})]})}),jsxRuntimeExports.jsx(Card,{"data-testid":"card-today-sessions",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Consultations"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:mt.length>0?mt.map(yt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900","data-testid":`text-session-patient-${yt.id}`,children:dt(yt.patientId)}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600","data-testid":`text-session-details-${yt.id}`,children:[new Date(yt.appointmentDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",yt.type]})]}),jsxRuntimeExports.jsx(Button,{size:"sm",className:yt.type==="video"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700","data-testid":`button-join-session-${yt.id}`,children:yt.type==="video"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Video,{className:"h-3 w-3 mr-1"}),"Join"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Phone,{className:"h-3 w-3 mr-1"}),"Call"]})})]},yt.id)):jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"No consultations scheduled for today"})})]})})]})]})}const Textarea=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx("textarea",{className:cn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:i,...s}));Textarea.displayName="Textarea";var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((o,s)=>{const{__scopeSwitch:i,name:a,checked:d,defaultChecked:_,required:b,disabled:$,value:nt="on",onCheckedChange:tt,form:et,...g}=o,[c,j]=reactExports.useState(null),_e=useComposedRefs(s,at=>j(at)),rt=reactExports.useRef(!1),st=c?et||!!c.closest("form"):!0,[ot=!1,it]=useControllableState({prop:d,defaultProp:_,onChange:tt});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:i,checked:ot,disabled:$,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":ot,"aria-required":b,"data-state":getState(ot),"data-disabled":$?"":void 0,disabled:$,value:nt,...g,ref:_e,onClick:composeEventHandlers(o.onClick,at=>{it(lt=>!lt),st&&(rt.current=at.isPropagationStopped(),rt.current||at.stopPropagation())})}),st&&jsxRuntimeExports.jsx(BubbleInput,{control:c,bubbles:!rt.current,name:a,value:nt,checked:ot,required:b,disabled:$,form:et,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((o,s)=>{const{__scopeSwitch:i,...a}=o,d=useSwitchContext(THUMB_NAME,i);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(d.checked),"data-disabled":d.disabled?"":void 0,...a,ref:s})});SwitchThumb.displayName=THUMB_NAME;var BubbleInput=o=>{const{control:s,checked:i,bubbles:a=!0,...d}=o,_=reactExports.useRef(null),b=usePrevious(i),$=useSize(s);return reactExports.useEffect(()=>{const nt=_.current,tt=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(tt,"checked").set;if(b!==i&&g){const c=new Event("click",{bubbles:a});g.call(nt,i),nt.dispatchEvent(c)}},[b,i,a]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...d,tabIndex:-1,ref:_,style:{...o.style,...$,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState(o){return o?"checked":"unchecked"}var Root$1=Switch$1,Thumb=SwitchThumb;const Switch=reactExports.forwardRef(({className:o,...s},i)=>jsxRuntimeExports.jsx(Root$1,{className:cn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",o),...s,ref:i,children:jsxRuntimeExports.jsx(Thumb,{className:cn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Switch.displayName=Root$1.displayName;var NAME="Separator",DEFAULT_ORIENTATION="horizontal",ORIENTATIONS=["horizontal","vertical"],Separator$1=reactExports.forwardRef((o,s)=>{const{decorative:i,orientation:a=DEFAULT_ORIENTATION,...d}=o,_=isValidOrientation(a)?a:DEFAULT_ORIENTATION,$=i?{role:"none"}:{"aria-orientation":_==="vertical"?_:void 0,role:"separator"};return jsxRuntimeExports.jsx(Primitive.div,{"data-orientation":_,...$,...d,ref:s})});Separator$1.displayName=NAME;function isValidOrientation(o){return ORIENTATIONS.includes(o)}var Root=Separator$1;const Separator=reactExports.forwardRef(({className:o,orientation:s="horizontal",decorative:i=!0,...a},d)=>jsxRuntimeExports.jsx(Root,{ref:d,decorative:i,orientation:s,className:cn("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",o),...a}));Separator.displayName=Root.displayName;function Settings(){const{toast:o}=useToast(),[s,i]=reactExports.useState({practiceName:"Smile Dental Care",address:"123 Main Street, Anytown, ST 12345",phone:"(555) 123-4567",email:"info@smiledentalcare.com",website:"www.smiledentalcare.com",dentistName:"Dr. Sarah Johnson, DDS",licenseNumber:"DDS-12345"}),[a,d]=reactExports.useState({enableXrayAnalysis:!0,enableTreatmentNotes:!0,enablePatientSummaries:!0,aiConfidenceThreshold:80,autoGenerateSummaries:!1}),[_,b]=reactExports.useState({theme:"light",language:"en",dateFormat:"MM/DD/YYYY",timeFormat:"12h",defaultXrayType:"bitewing",autoSaveInterval:5}),[$,nt]=reactExports.useState({emailNotifications:!0,smsNotifications:!1,appointmentReminders:!0,analysisComplete:!0,systemUpdates:!0,maintenanceAlerts:!0}),[tt,et]=reactExports.useState({dataRetention:"7years",backupFrequency:"daily",securityLevel:"high",sessionTimeout:60,enableLogging:!0}),g=()=>{o({title:"Settings Saved",description:"Your practice settings have been updated successfully."})},c=()=>{o({title:"Export Started",description:"Your practice data is being prepared for export."})},j=()=>{o({title:"Backup Initiated",description:"Creating backup of practice data..."})};return jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[jsxRuntimeExports.jsx(Settings$1,{className:"h-6 w-6 text-medical-blue-600"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Practice Settings"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx(Card,{"data-testid":"card-practice-info",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx(User,{className:"h-5 w-5 text-medical-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Practice Information"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Practice Name"}),jsxRuntimeExports.jsx(Input,{value:s.practiceName,onChange:_e=>i({...s,practiceName:_e.target.value}),"data-testid":"input-practice-name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),jsxRuntimeExports.jsx(Textarea,{value:s.address,onChange:_e=>i({...s,address:_e.target.value}),className:"h-20","data-testid":"textarea-practice-address"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),jsxRuntimeExports.jsx(Input,{value:s.phone,onChange:_e=>i({...s,phone:_e.target.value}),"data-testid":"input-practice-phone"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),jsxRuntimeExports.jsx(Input,{value:s.email,onChange:_e=>i({...s,email:_e.target.value}),"data-testid":"input-practice-email"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Dentist"}),jsxRuntimeExports.jsx(Input,{value:s.dentistName,onChange:_e=>i({...s,dentistName:_e.target.value}),"data-testid":"input-dentist-name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Number"}),jsxRuntimeExports.jsx(Input,{value:s.licenseNumber,onChange:_e=>i({...s,licenseNumber:_e.target.value}),"data-testid":"input-license-number"})]})]})]})}),jsxRuntimeExports.jsx(Card,{"data-testid":"card-ai-settings",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx(Shield,{className:"h-5 w-5 text-medical-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Configuration"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"X-ray AI Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Enable AI-powered dental X-ray analysis"})]}),jsxRuntimeExports.jsx(Switch,{checked:a.enableXrayAnalysis,onCheckedChange:_e=>d({...a,enableXrayAnalysis:_e}),"data-testid":"switch-xray-analysis"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Treatment Notes AI"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Auto-generate treatment notes from appointments"})]}),jsxRuntimeExports.jsx(Switch,{checked:a.enableTreatmentNotes,onCheckedChange:_e=>d({...a,enableTreatmentNotes:_e}),"data-testid":"switch-treatment-notes"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Patient Summaries"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Generate AI summaries for patient records"})]}),jsxRuntimeExports.jsx(Switch,{checked:a.enablePatientSummaries,onCheckedChange:_e=>d({...a,enablePatientSummaries:_e}),"data-testid":"switch-patient-summaries"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["AI Confidence Threshold: ",a.aiConfidenceThreshold,"%"]}),jsxRuntimeExports.jsx("input",{type:"range",min:"50",max:"95",value:a.aiConfidenceThreshold,onChange:_e=>d({...a,aiConfidenceThreshold:parseInt(_e.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","data-testid":"slider-confidence-threshold"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[jsxRuntimeExports.jsx("span",{children:"50%"}),jsxRuntimeExports.jsx("span",{children:"95%"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Auto-Generate Summaries"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Automatically create summaries after appointments"})]}),jsxRuntimeExports.jsx(Switch,{checked:a.autoGenerateSummaries,onCheckedChange:_e=>d({...a,autoGenerateSummaries:_e}),"data-testid":"switch-auto-summaries"})]})]})]})}),jsxRuntimeExports.jsx(Card,{"data-testid":"card-user-preferences",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx(Palette,{className:"h-5 w-5 text-medical-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Preferences"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Theme"}),jsxRuntimeExports.jsxs(Select,{value:_.theme,onValueChange:_e=>b({..._,theme:_e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-theme",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"light",children:"Light"}),jsxRuntimeExports.jsx(SelectItem,{value:"dark",children:"Dark"}),jsxRuntimeExports.jsx(SelectItem,{value:"auto",children:"Auto"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Format"}),jsxRuntimeExports.jsxs(Select,{value:_.dateFormat,onValueChange:_e=>b({..._,dateFormat:_e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-date-format",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),jsxRuntimeExports.jsx(SelectItem,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),jsxRuntimeExports.jsx(SelectItem,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Format"}),jsxRuntimeExports.jsxs(Select,{value:_.timeFormat,onValueChange:_e=>b({..._,timeFormat:_e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-time-format",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"12h",children:"12 Hour"}),jsxRuntimeExports.jsx(SelectItem,{value:"24h",children:"24 Hour"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default X-ray Type"}),jsxRuntimeExports.jsxs(Select,{value:_.defaultXrayType,onValueChange:_e=>b({..._,defaultXrayType:_e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-default-xray",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"bitewing",children:"Bitewing"}),jsxRuntimeExports.jsx(SelectItem,{value:"panoramic",children:"Panoramic"}),jsxRuntimeExports.jsx(SelectItem,{value:"periapical",children:"Periapical"}),jsxRuntimeExports.jsx(SelectItem,{value:"occlusal",children:"Occlusal"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Auto-save Interval: ",_.autoSaveInterval," minutes"]}),jsxRuntimeExports.jsx("input",{type:"range",min:"1",max:"30",value:_.autoSaveInterval,onChange:_e=>b({..._,autoSaveInterval:parseInt(_e.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","data-testid":"slider-autosave"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[jsxRuntimeExports.jsx("span",{children:"1 min"}),jsxRuntimeExports.jsx("span",{children:"30 min"})]})]})]})]})}),jsxRuntimeExports.jsx(Card,{"data-testid":"card-notifications",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx(Bell,{className:"h-5 w-5 text-medical-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email Notifications"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Receive notifications via email"})]}),jsxRuntimeExports.jsx(Switch,{checked:$.emailNotifications,onCheckedChange:_e=>nt({...$,emailNotifications:_e}),"data-testid":"switch-email-notifications"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"SMS Notifications"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Receive notifications via text message"})]}),jsxRuntimeExports.jsx(Switch,{checked:$.smsNotifications,onCheckedChange:_e=>nt({...$,smsNotifications:_e}),"data-testid":"switch-sms-notifications"})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Appointment Reminders"}),jsxRuntimeExports.jsx(Switch,{checked:$.appointmentReminders,onCheckedChange:_e=>nt({...$,appointmentReminders:_e}),"data-testid":"switch-appointment-reminders"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Analysis Complete"}),jsxRuntimeExports.jsx(Switch,{checked:$.analysisComplete,onCheckedChange:_e=>nt({...$,analysisComplete:_e}),"data-testid":"switch-analysis-complete"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Updates"}),jsxRuntimeExports.jsx(Switch,{checked:$.systemUpdates,onCheckedChange:_e=>nt({...$,systemUpdates:_e}),"data-testid":"switch-system-updates"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Maintenance Alerts"}),jsxRuntimeExports.jsx(Switch,{checked:$.maintenanceAlerts,onCheckedChange:_e=>nt({...$,maintenanceAlerts:_e}),"data-testid":"switch-maintenance-alerts"})]})]})]})}),jsxRuntimeExports.jsx(Card,{"data-testid":"card-system-data",className:"lg:col-span-2",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx(Database,{className:"h-5 w-5 text-medical-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System & Data Management"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Data Retention"}),jsxRuntimeExports.jsxs(Select,{value:tt.dataRetention,onValueChange:_e=>et({...tt,dataRetention:_e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-data-retention",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"1year",children:"1 Year"}),jsxRuntimeExports.jsx(SelectItem,{value:"3years",children:"3 Years"}),jsxRuntimeExports.jsx(SelectItem,{value:"7years",children:"7 Years"}),jsxRuntimeExports.jsx(SelectItem,{value:"indefinite",children:"Indefinite"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Timeout (minutes)"}),jsxRuntimeExports.jsx(Input,{type:"number",value:tt.sessionTimeout,onChange:_e=>et({...tt,sessionTimeout:parseInt(_e.target.value)}),min:"15",max:"480","data-testid":"input-session-timeout"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Backup Settings"}),jsxRuntimeExports.jsxs(Select,{value:tt.backupFrequency,onValueChange:_e=>et({...tt,backupFrequency:_e}),children:[jsxRuntimeExports.jsx(SelectTrigger,{"data-testid":"select-backup-frequency",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"hourly",children:"Hourly"}),jsxRuntimeExports.jsx(SelectItem,{value:"daily",children:"Daily"}),jsxRuntimeExports.jsx(SelectItem,{value:"weekly",children:"Weekly"}),jsxRuntimeExports.jsx(SelectItem,{value:"monthly",children:"Monthly"})]})]}),jsxRuntimeExports.jsxs(Button,{onClick:j,className:"w-full bg-blue-600 hover:bg-blue-700","data-testid":"button-backup-now",children:[jsxRuntimeExports.jsx(Database,{className:"h-4 w-4 mr-2"}),"Backup Now"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Data Export"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Logging"}),jsxRuntimeExports.jsx(Switch,{checked:tt.enableLogging,onCheckedChange:_e=>et({...tt,enableLogging:_e}),"data-testid":"switch-enable-logging"})]}),jsxRuntimeExports.jsxs(Button,{onClick:c,className:"w-full bg-green-600 hover:bg-green-700","data-testid":"button-export-data",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Export Practice Data"]})]})]})]})})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end pt-6",children:jsxRuntimeExports.jsxs(Button,{onClick:g,className:"bg-medical-blue-600 hover:bg-medical-blue-700 px-8","data-testid":"button-save-settings",children:[jsxRuntimeExports.jsx(Save,{className:"h-4 w-4 mr-2"}),"Save All Settings"]})})]})}function Dashboard(){const[o,s]=reactExports.useState("overview"),i=[{id:"overview",label:"Overview",icon:"fas fa-tachometer-alt"},{id:"xrays",label:"X-ray Analysis",icon:"fas fa-x-ray"},{id:"records",label:"Patient Records",icon:"fas fa-tooth"},{id:"transcription",label:"Appointment Notes",icon:"fas fa-microphone"},{id:"telemedicine",label:"Consultations",icon:"fas fa-video"},{id:"settings",label:"Settings",icon:"fas fa-cog"}],a=()=>{switch(o){case"overview":return jsxRuntimeExports.jsx(Overview,{});case"xrays":return jsxRuntimeExports.jsx(XrayAnalysis,{});case"records":return jsxRuntimeExports.jsx(PatientRecords,{});case"transcription":return jsxRuntimeExports.jsx(Transcription,{});case"telemedicine":return jsxRuntimeExports.jsx(Telemedicine,{});case"settings":return jsxRuntimeExports.jsx(Settings,{});default:return jsxRuntimeExports.jsx(Overview,{})}};return jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[jsxRuntimeExports.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center h-16",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsxs("div",{className:"flex-shrink-0",children:[jsxRuntimeExports.jsx(Stethoscope,{className:"text-medical-blue-600 h-8 w-8 mr-3"}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-gray-900",children:"DentalAI Dashboard"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[jsxRuntimeExports.jsx("i",{className:"fas fa-user-md mr-2"}),jsxRuntimeExports.jsx("span",{children:"Dr. Sarah Johnson, DDS"})]}),jsxRuntimeExports.jsxs(Button,{className:"bg-medical-blue-600 hover:bg-medical-blue-700","data-testid":"button-logout",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200 mb-6",children:jsxRuntimeExports.jsx("nav",{className:"-mb-px flex space-x-8",children:i.map(d=>jsxRuntimeExports.jsxs("button",{onClick:()=>s(d.id),className:`border-b-2 whitespace-nowrap py-2 px-1 font-medium text-sm transition-colors ${o===d.id?"border-medical-blue-500 text-medical-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,"data-testid":`tab-${d.id}`,children:[jsxRuntimeExports.jsx("i",{className:`${d.icon} mr-2`}),d.label]},d.id))})}),a()]})]})}function NotFound(){return jsxRuntimeExports.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsx(Card,{className:"w-full max-w-md mx-4",children:jsxRuntimeExports.jsxs(CardContent,{className:"pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex mb-4 gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-8 w-8 text-red-500"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Router(){return jsxRuntimeExports.jsxs(Switch$2,{children:[jsxRuntimeExports.jsx(Route,{path:"/",component:Dashboard}),jsxRuntimeExports.jsx(Route,{component:NotFound})]})}function App(){return jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsxs(TooltipProvider,{children:[jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(Router,{})]})})}createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
